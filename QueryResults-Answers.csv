Id,PostTypeId,AcceptedAnswerId,ParentId,CreationDate,DeletionDate,Score,ViewCount,Body,OwnerUserId,OwnerDisplayName,LastEditorUserId,LastEditorDisplayName,LastEditDate,LastActivityDate,Title,Tags,AnswerCount,CommentCount,FavoriteCount,ClosedDate,CommunityOwnedDate
"54580199","2","","54573454","2019-02-07 18:43:46","","2","","<ol>
<li>Why does it occur?</li>
</ol>

<p><code>audio/ac3</code> is an unsupported mime type.</p>

<p><a href=""https://android.googlesource.com/platform/frameworks/av/+/master/media/libstagefright/MediaMuxer.cpp#76"" rel=""nofollow noreferrer""><code>MediaMuxer.addTrack()</code></a> (native) calls <a href=""https://android.googlesource.com/platform/frameworks/av/+/master/media/libstagefright/MPEG4Writer.cpp#605"" rel=""nofollow noreferrer""><code>MPEG4Writer.addSource()</code></a>, which prints this log message before returning an error.</p>

<p><strong>EDIT</strong></p>

<p>My aim was not to provide an answer to each of your sub-questions, but to give you some insight into the fundamental problem. The library you have chosen relies on the Android's <code>MediaMuxer</code> component. For whatever reason, the <code>MediaMuxer</code> developers did not add support for this particular audio format. We know this because the software prints out an explicit message to that effect, then immediately throws the <code>IllegalStateException</code> mentioned in your question.</p>

<p>Because the issue only involves a particular audio format, when you provide a video-only input, everything works fine.</p>

<p>To fix the problem, you can either alter the library to provide for the missing functionality, or find a new library that better suits your needs. <a href=""https://github.com/sannies/mp4parser"" rel=""nofollow noreferrer""><code>sannies/mp4parser</code></a> may be one such alternative, although it has different limitations (if I recall correctly, it requires all media to be in RAM during the mastering process). I do not know if it supports ac3 explicitly, but it should provide a framework to which you can add support for arbitrary mime types.</p>

<p>I would encourage you to wait for a more complete answer. There may be far better ways to do what you are trying to do. But it is apparent that the library you are using simply does not support all possible mime types.</p>
","6759241","","6759241","","2019-02-08 14:57:00","2019-02-08 14:57:00","","","","11","","",""
"54776760","2","","54776759","2019-02-19 23:59:00","","3","","<p>If you're not in strict mode, one possibility is to iterate over the property names of the global (or <code>with</code>ed) object, and create another object from those properties, whose setters and getters all throw <code>ReferenceErrors</code>, and then nest your code in <em>another</em> <code>with</code> over that object. See comments in the code below.</p>

<p>This isn't a <em>nice</em> solution, but it's the only one I can think of:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const makeObjWhosePropsThrow = inputObj =&gt; Object.getOwnPropertyNames(inputObj)
  .reduce((a, propName) =&gt; {
    const doThrow = () =&gt; { throw new ReferenceError(propName + ' is not defined!'); };
    Object.defineProperty(a, propName, { get: doThrow, set: doThrow });
    return a;
  }, {});

// (using setTimeout so that console shows both this and the next error)
setTimeout(() =&gt; {
  const windowWhichThrows = makeObjWhosePropsThrow(window);
  with (windowWhichThrows) {
    /* Use an IIFE
     * so that variables with the same name declared with ""var"" inside
     * create a locally scoped variable
     * rather than try to reference the property, which would throw
     */
    (() =&gt; { 
      // Declaring any variable name will not throw:
      var alert = true;  // window.alert
      const open = true; // window.open
      
      // Referencing a property name without declaring it first will throw:
      const foo = location;
    })();
  }
});

const obj = { prop1: 'prop1' };
with (obj) {
  const inner = makeObjWhosePropsThrow(obj);
  with (inner) {
    // Referencing a property name without declaring it first will throw:
    console.log(prop1);
  }
}</code></pre>
<pre class=""snippet-code-css lang-css prettyprint-override""><code>.as-console-wrapper {
  max-height: 100% !important;
}</code></pre>
</div>
</div>
</p>

<p>Caveats:</p>

<ul>
<li>This explicitly uses <code>with</code>, which is forbidden in strict mode</li>
<li>This doesn't <em>exactly</em> escape the implicit <code>with(global)</code> scope, or the <code>with(obj)</code> scope: variables in the outer scope with the same name as a property will not be referenceable.</li>
<li><code>window</code> has a property <code>window</code>, which refers to <code>window</code>. <code>window.window === window</code>. So, referencing <code>window</code> inside the <code>with</code> will throw. Either explicitly exclude the <code>window</code> property, or save another reference to <code>window</code> first.</li>
</ul>
","9515207","","","","","2019-02-19 23:59:00","","","","2","","",""
"54014914","2","","54014913","2019-01-03 00:28:27","","25","","<h2>Single and double quotes both work in Dart</h2>

<pre><code>final myString = 'hello';
</code></pre>

<p>is the same as </p>

<pre><code>final myString = ""hello"";
</code></pre>

<h2>Delimiters need to be escaped</h2>

<p>Use a <code>\</code> backslash to escape single quotes in a single quote string.</p>

<pre><code>final myString = 'Bob\'s dog';            // Bob's dog
</code></pre>

<p>Same thing to escape double quotes in a double quote string.</p>

<pre><code>final myString = ""a \""quoted\"" word"";     // a ""quoted"" word
</code></pre>

<p>But no need to escape anything if the delimiter is different.</p>

<pre><code>final myString = ""Bob's dog"";             // Bob's dog
final myString = 'a ""quoted"" word';       // a ""quoted"" word
</code></pre>

<p>Also no need to worry about the value passed into an interpolated string.</p>

<pre><code>final value = '""quoted""';                 // ""quoted""
final myString = ""a $value word"";         // a ""quoted"" word
</code></pre>

<h2>Prefer single quotes in Flutter</h2>

<p>The <a href=""https://github.com/flutter/flutter/wiki/Style-guide-for-Flutter-repo#prefer-single-quotes-for-strings"" rel=""noreferrer"">Flutter style guide</a> recommends using single quotes for everything</p>

<pre><code>final myString = 'hello';
</code></pre>

<p>except for nested strings</p>

<pre><code>print('Hello ${name.split("" "")[0]}');
</code></pre>

<p>or strings containing single quotes (optional)</p>

<pre><code>final myString = ""Bob's dog"";
final myString = 'Bob\'s dog';  // ok
</code></pre>

<p>The <a href=""https://www.dartlang.org/guides/language/effective-dart/usage#strings"" rel=""noreferrer"">Dart style guide</a> appears to be silent on the issue.</p>
","3681880","","","","","2019-01-03 00:28:27","","","","2","","",""
"54028200","2","","54028199","2019-01-03 18:54:20","","122","","<p>TLDR; No, <code>for</code> loops are not blanket ""bad"", at least, not always. It is probably <strong>more accurate to say that some vectorized operations are slower than iterating</strong>, versus saying that iteration is faster than some vectorized operations. Knowing when and why is key to getting the most performance out of your code. In a nutshell, these are the situations where it is worth considering an alternative to vectorized pandas functions:</p>

<ol>
<li>When your data is small (...depending on what you're doing),</li>
<li>When dealing with <code>object</code>/mixed dtypes</li>
<li>When using the <code>str</code>/regex accessor functions</li>
</ol>

<p>Let's examine these situations individually. </p>

<hr>

<h3>Iteration v/s Vectorization on Small Data</h3>

<p>Pandas follows a <a href=""https://en.wikipedia.org/wiki/Convention_over_configuration"" rel=""noreferrer"">""Convention Over Configuration""</a> approach in its API design. This means that the same API has been fitted to cater to a broad range of data and use cases. </p>

<p>When a pandas function is called, the following things (among others) must internally be handled by the function, to ensure working </p>

<ol>
<li>Index/axis alignment</li>
<li>Handling mixed datatypes</li>
<li>Handling missing data</li>
</ol>

<p>Almost every function will have to deal with these to varying extents, and this presents an <strong>overhead</strong>. The overhead is less for numeric functions (for example, <a href=""https://github.com/pandas-dev/pandas/blob/v0.23.4/pandas/core/ops.py#L1371-L1388"" rel=""noreferrer""><code>Series.add</code></a>), while it is more pronounced for string functions (for example, <a href=""https://github.com/pandas-dev/pandas/blob/v0.23.4/pandas/core/strings.py#L635-L669"" rel=""noreferrer""><code>Series.str.replace</code></a>).</p>

<p><a href=""https://docs.python.org/3/tutorial/controlflow.html#for-statements"" rel=""noreferrer""><code>for</code></a> loops, on the other hand, are faster then you think. What's even better is <a href=""https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions"" rel=""noreferrer"">list comprehensions</a> (which create lists through <code>for</code> loops) are even faster as they are optimized iterative mechanisms for list creation.</p>

<p>List comprehensions follow the pattern </p>

<pre><code>[f(x) for x in seq]
</code></pre>

<p>Where <code>seq</code> is a pandas series or DataFrame column. Or, when operating over multiple columns,</p>

<pre><code>[f(x, y) for x, y in zip(seq1, seq2)]
</code></pre>

<p>Where <code>seq1</code> and <code>seq2</code> are columns. </p>

<p><strong>Numeric Comparison</strong><br>
Consider a simple boolean indexing operation. The list comprehension method has been timed against <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.ne.html"" rel=""noreferrer""><code>Series.ne</code></a> (<code>!=</code>) and <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.query.html"" rel=""noreferrer""><code>query</code></a>. Here are the functions:</p>

<pre><code># Boolean indexing with Numeric value comparison.
df[df.A != df.B]                            # vectorized !=
df.query('A != B')                          # query (numexpr)
df[[x != y for x, y in zip(df.A, df.B)]]    # list comp
</code></pre>

<p>For simplicity, I have used the <a href=""https://github.com/nschloe/perfplot"" rel=""noreferrer""><code>perfplot</code></a> package to run all the timeit tests in this post. The timings for the operations above are below:</p>

<p><a href=""https://i.stack.imgur.com/sbtDB.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/sbtDB.png"" alt=""enter image description here""></a></p>

<p>The list comprehension outperforms <code>query</code> for moderately sized N, and even outperforms the vectorized not equals comparison for tiny N. Unfortunately, the list comprehension scales linearly, so it does not offer much performance gain for larger N. </p>

<blockquote>
  <p><strong>Note</strong><br>
  It is worth mentioning that much of the benefit of list comprehension come from not having to worry about the index alignment,
  but this means that if your code is dependent on indexing alignment,
  this will break. In some cases, vectorised operations over the
  underlying NumPy arrays can be considered as bringing in the ""best of
  both worlds"", allowing for vectorisation <em>without</em> all the unneeded overhead of the pandas functions. This means that you can rewrite the operation above as </p>

<pre><code>df[df.A.values != df.B.values]
</code></pre>
  
  <p>Which outperforms both the pandas and list comprehension equivalents:<br>
  <img src=""https://i.stack.imgur.com/m9hyc.png"" width=""300""/><br>
  NumPy vectorization is out of the scope of this post, but it is definitely worth considering, if performance matters.</p>
</blockquote>

<p><strong>Value Counts</strong><br>
Taking another example - this time, with another vanilla python construct that is <em>faster</em> than a for loop - <a href=""https://docs.python.org/3/library/collections.html#collections.Counter"" rel=""noreferrer""><code>collections.Counter</code></a>. A common requirement is to compute the value counts and return the result as a dictionary. This is done with <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.value_counts.html#pandas-series-value-counts"" rel=""noreferrer""><code>value_counts</code></a>, <a href=""https://docs.scipy.org/doc/numpy-1.14.1/reference/generated/numpy.unique.html"" rel=""noreferrer""><code>np.unique</code></a>, and <code>Counter</code>:</p>

<pre><code># Value Counts comparison.
ser.value_counts(sort=False).to_dict()           # value_counts
dict(zip(*np.unique(ser, return_counts=True)))   # np.unique
Counter(ser)                                     # Counter
</code></pre>

<p><a href=""https://i.stack.imgur.com/2i5qT.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/2i5qT.png"" alt=""enter image description here""></a></p>

<p>The results are more pronounced, <code>Counter</code> wins out over both vectorized methods for a larger range of small N (~3500). </p>

<blockquote>
  <p><strong>Note</strong><br>
   More trivia (courtesy @user2357112). The <code>Counter</code> is implemented with a <a href=""https://github.com/python/cpython/blob/v3.7.0/Modules/_collectionsmodule.c#L2249-L2354"" rel=""noreferrer"">C
  accelerator</a>,
  so while it still has to work with python objects instead of the
  underlying C datatypes, it is still faster than a <code>for</code> loop. Python
  power!</p>
</blockquote>

<p>Of course, the take away from here is that the performance depends on your data and use case. The point of these examples is to convince you not to rule out these solutions as legitimate options. If these still don't give you the performance you need, there is always <a href=""https://pandas.pydata.org/pandas-docs/stable/enhancingperf.html#cython-writing-c-extensions-for-pandas"" rel=""noreferrer"">cython</a> and <a href=""http://numba.pydata.org/"" rel=""noreferrer"">numba</a>. Let's add this test into the mix.</p>

<pre><code>from numba import njit, prange

@njit(parallel=True)
def get_mask(x, y):
    result = [False] * len(x)
    for i in prange(len(x)):
        result[i] = x[i] != y[i]

    return np.array(result)

df[get_mask(df.A.values, df.B.values)] # numba
</code></pre>

<p><a href=""https://i.stack.imgur.com/nSpCH.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/nSpCH.png"" alt=""enter image description here""></a></p>

<p>Numba offers JIT compilation of loopy python code to very powerful vectorized code. Understanding how to make numba work involves a learning curve.</p>

<hr>

<h3><strong>Operations with Mixed/<code>object</code> dtypes</strong></h3>

<p><strong>String-based Comparison</strong><br>
Revisiting the filtering example from the first section, what if the columns being compared are strings? Consider the same 3 functions above, but with the input DataFrame cast to string.</p>

<pre><code># Boolean indexing with string value comparison.
df[df.A != df.B]                            # vectorized !=
df.query('A != B')                          # query (numexpr)
df[[x != y for x, y in zip(df.A, df.B)]]    # list comp
</code></pre>

<p><a href=""https://i.stack.imgur.com/Lg2CE.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/Lg2CE.png"" alt=""enter image description here""></a></p>

<p>So, what changed? The thing to note here is that <strong>string operations are inherently difficult to vectorize.</strong> Pandas treats strings as objects, and all operations on objects fall back to a slow, loopy implementation.</p>

<p>Now, because this loopy implementation is surrounded by all the overhead mentioned above, there is a constant magnitude difference between these solutions, even though they scale the same. </p>

<p>When it comes to operations on mutable/complex objects, there is no comparison. List comprehension outperforms all operations involving dicts and lists. </p>

<p><strong>Accessing Dictionary Value(s) by Key</strong><br>
Here are timings for two operations that extract a value from a column of dictionaries: <code>map</code> and the list comprehension. The setup is in the Appendix, under the heading ""Code Snippets"".</p>

<pre><code># Dictionary value extraction.
ser.map(operator.itemgetter('value'))     # map
pd.Series([x.get('value') for x in ser])  # list comprehension
</code></pre>

<p><a href=""https://i.stack.imgur.com/QrbZO.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/QrbZO.png"" alt=""enter image description here""></a></p>

<p><strong>Positional List Indexing</strong><br>
Timings for 3 operations that extract the 0th element from a list of columns (handling exceptions), <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.map.html#pandas-series-map"" rel=""noreferrer""><code>map</code></a>, <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.get.html"" rel=""noreferrer""><code>str.get</code> accessor method</a>, and the list comprehension:</p>

<pre><code># List positional indexing. 
def get_0th(lst):
    try:
        return lst[0]
    # Handle empty lists and NaNs gracefully.
    except (IndexError, TypeError):
        return np.nan
</code></pre>

<p></p>

<pre><code>ser.map(get_0th)                                          # map
ser.str[0]                                                # str accessor
pd.Series([x[0] if len(x) &gt; 0 else np.nan for x in ser])  # list comp
pd.Series([get_0th(x) for x in ser])                      # list comp safe
</code></pre>

<blockquote>
  <p><strong>Note</strong><br>
  If the index matters, you would want to do:</p>

<pre><code>pd.Series([...], index=ser.index)
</code></pre>
  
  <p>When reconstructing the series.</p>
</blockquote>

<p><a href=""https://i.stack.imgur.com/Zzzez.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/Zzzez.png"" alt=""enter image description here""></a></p>

<p><strong>List Flattening</strong><br>
A final example is flattening lists. This is another common problem, and demonstrates just how powerful pure python is here.</p>

<pre><code># Nested list flattening.
pd.DataFrame(ser.tolist()).stack().reset_index(drop=True)  # stack
pd.Series(list(chain.from_iterable(ser.tolist())))         # itertools.chain
pd.Series([y for x in ser for y in x])                     # nested list comp
</code></pre>

<p><a href=""https://i.stack.imgur.com/eJ2iB.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/eJ2iB.png"" alt=""enter image description here""></a></p>

<p>Both <a href=""https://docs.python.org/3/library/itertools.html#itertools.chain.from_iterable"" rel=""noreferrer""><code>itertools.chain.from_iterable</code></a> and the nested list comprehension are pure python constructs, and scale much better than the <code>stack</code> solution.</p>

<p>These timings are a strong indication of the fact that pandas is not equipped to work with mixed dtypes, and that you should probably refrain from using it to do so. Wherever possible, data should be present as scalar values (ints/floats/strings) in separate columns.</p>

<p>Lastly, the applicability of these solutions depend widely on your data. So, the best thing to do would be to test these operations on your data before deciding what to go with. Notice how I have not timed <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.apply.html#pandas-series-apply"" rel=""noreferrer""><code>apply</code></a> on these solutions, because it would skew the graph (yes, it's that slow).</p>

<hr>

<h3>Regex Operations, and <code>.str</code> Accessor Methods</h3>

<p>Pandas can apply regex operations such as <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.contains.html"" rel=""noreferrer""><code>str.contains</code></a>, <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.extract.html"" rel=""noreferrer""><code>str.extract</code></a>, and <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.extractall.html#pandas.Series.str.extractall"" rel=""noreferrer""><code>str.extractall</code></a>, as well as other ""vectorized"" string operations (such as <code>str.split</code>, str.find<code>,</code>str.translate`, and so on) on string columns. These functions are slower than list comprehensions, and are meant to be more convenience functions than anything else.</p>

<p>It is usually much faster to pre-compile a regex pattern and iterate over your data with <a href=""https://docs.python.org/3/library/re.html#re.compile"" rel=""noreferrer""><code>re.compile</code></a> (also see <a href=""https://stackoverflow.com/questions/452104/is-it-worth-using-pythons-re-compile"">Is it worth using Python&#39;s re.compile?</a>). The list comp equivalent to <code>str.contains</code> looks something like this:</p>

<pre><code>p = re.compile(...)
ser2 = pd.Series([x for x in ser if p.search(x)])
</code></pre>

<p>Or,</p>

<pre><code>ser2 = ser[[bool(p.search(x)) for x in ser]]
</code></pre>

<p>If you need to handle NaNs, you can do something like</p>

<pre><code>ser[[bool(p.search(x)) if pd.notnull(x) else False for x in ser]]
</code></pre>

<p>The list comp equivalent to <code>str.extract</code> (without groups) will look something like:</p>

<pre><code>df['col2'] = [p.search(x).group(0) for x in df['col']]
</code></pre>

<p>If you need to handle no-matches and NaNs, you can use a custom function (still faster!):</p>

<pre><code>def matcher(x):
    m = p.search(str(x))
    if m:
        return m.group(0)
    return np.nan

df['col2'] = [matcher(x) for x in df['col']]
</code></pre>

<p>The <code>matcher</code> function is very extensible. It can be fitted to return a list for each capture group, as needed. Just extract query the <code>group</code> or <code>groups</code> attribute of the matcher object.</p>

<p>For <code>str.extractall</code>, change <code>p.search</code> to <code>p.findall</code>.</p>

<p><strong>String Extraction</strong><br>
Consider a simple filtering operation. The idea is to extract 4 digits if it is preceded by an upper case letter.</p>

<pre><code># Extracting strings.
p = re.compile(r'(?&lt;=[A-Z])(\d{4})')
def matcher(x):
    m = p.search(x)
    if m:
        return m.group(0)
    return np.nan

ser.str.extract(r'(?&lt;=[A-Z])(\d{4})', expand=False)   #  str.extract
pd.Series([matcher(x) for x in ser])                  #  list comprehension
</code></pre>

<p><a href=""https://i.stack.imgur.com/XmXyX.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/XmXyX.png"" alt=""enter image description here""></a></p>

<p><strong>More Examples</strong><br>
Full disclosure - I am the author (in part or whole) of these posts listed below.</p>

<ul>
<li><p><a href=""https://stackoverflow.com/questions/50444346/fast-punctuation-removal-with-pandas"">Fast punctuation removal with pandas</a></p></li>
<li><p><a href=""https://stackoverflow.com/questions/11858472/string-concatenation-of-two-pandas-columns/54298586#54298586"">String concatenation of two pandas columns</a> </p></li>
<li><p><a href=""https://stackoverflow.com/questions/13682044/remove-unwanted-parts-from-strings-in-a-column/54302517#54302517"">Remove unwanted parts from strings in a column</a></p></li>
<li><p><a href=""https://stackoverflow.com/a/47813144/4909087"">Replace all but the last occurrence of a character in a dataframe</a></p></li>
</ul>

<hr>

<h3>Conclusion</h3>

<p>As shown from the examples above, iteration shines when working with small rows of DataFrames, mixed datatypes, and regular expressions.</p>

<p>The speedup you get depends on your data and your problem, so your mileage may vary. The best thing to do is to carefully run tests and see if the payout is worth the effort. </p>

<p>The ""vectorized"" functions shine in their simplicity and readability, so if performance is not critical, you should definitely prefer those. </p>

<p>Another side note, certain string operations deal with constraints that favour the use of NumPy. Here are two examples where careful NumPy vectorization outperforms python: </p>

<ul>
<li><p><a href=""https://stackoverflow.com/a/49471005/4909087"">Create new column with incremental values in a faster and efficient way - Answer by Divakar</a></p></li>
<li><p><a href=""https://stackoverflow.com/a/50518852/4909087"">Fast punctuation removal with pandas - Answer by Paul Panzer</a></p></li>
</ul>

<p>Additionally, sometimes just operating on the underlying arrays via <code>.values</code> as opposed to on the Series or DataFrames can offer a healthy enough speedup for most usual scenarios (see the <strong>Note</strong> in the <strong>Numeric Comparison</strong> section above). So, for example <code>df[df.A.values != df.B.values]</code> would show instant performance boosts over <code>df[df.A != df.B]</code>. Using <code>.values</code> may not be appropriate in every situation, but it is a useful hack to know. </p>

<p>As mentioned above, it's up to you to decide whether these solutions are worth the trouble of implementing.</p>

<hr>

<h3>Appendix: Code Snippets</h3>

<pre><code>import perfplot  
import operator 
import pandas as pd
import numpy as np
import re

from collections import Counter
from itertools import chain
</code></pre>

<p></p>

<pre><code># Boolean indexing with Numeric value comparison.
perfplot.show(
    setup=lambda n: pd.DataFrame(np.random.choice(1000, (n, 2)), columns=['A','B']),
    kernels=[
        lambda df: df[df.A != df.B],
        lambda df: df.query('A != B'),
        lambda df: df[[x != y for x, y in zip(df.A, df.B)]],
        lambda df: df[get_mask(df.A.values, df.B.values)]
    ],
    labels=['vectorized !=', 'query (numexpr)', 'list comp', 'numba'],
    n_range=[2**k for k in range(0, 15)],
    xlabel='N'
)
</code></pre>

<p></p>

<pre><code># Value Counts comparison.
perfplot.show(
    setup=lambda n: pd.Series(np.random.choice(1000, n)),
    kernels=[
        lambda ser: ser.value_counts(sort=False).to_dict(),
        lambda ser: dict(zip(*np.unique(ser, return_counts=True))),
        lambda ser: Counter(ser),
    ],
    labels=['value_counts', 'np.unique', 'Counter'],
    n_range=[2**k for k in range(0, 15)],
    xlabel='N',
    equality_check=lambda x, y: dict(x) == dict(y)
)
</code></pre>

<p></p>

<pre><code># Boolean indexing with string value comparison.
perfplot.show(
    setup=lambda n: pd.DataFrame(np.random.choice(1000, (n, 2)), columns=['A','B'], dtype=str),
    kernels=[
        lambda df: df[df.A != df.B],
        lambda df: df.query('A != B'),
        lambda df: df[[x != y for x, y in zip(df.A, df.B)]],
    ],
    labels=['vectorized !=', 'query (numexpr)', 'list comp'],
    n_range=[2**k for k in range(0, 15)],
    xlabel='N',
    equality_check=None
)
</code></pre>

<p></p>

<pre><code># Dictionary value extraction.
ser1 = pd.Series([{'key': 'abc', 'value': 123}, {'key': 'xyz', 'value': 456}])
perfplot.show(
    setup=lambda n: pd.concat([ser1] * n, ignore_index=True),
    kernels=[
        lambda ser: ser.map(operator.itemgetter('value')),
        lambda ser: pd.Series([x.get('value') for x in ser]),
    ],
    labels=['map', 'list comprehension'],
    n_range=[2**k for k in range(0, 15)],
    xlabel='N',
    equality_check=None
)
</code></pre>

<p></p>

<pre><code># List positional indexing. 
ser2 = pd.Series([['a', 'b', 'c'], [1, 2], []])        
perfplot.show(
    setup=lambda n: pd.concat([ser2] * n, ignore_index=True),
    kernels=[
        lambda ser: ser.map(get_0th),
        lambda ser: ser.str[0],
        lambda ser: pd.Series([x[0] if len(x) &gt; 0 else np.nan for x in ser]),
        lambda ser: pd.Series([get_0th(x) for x in ser]),
    ],
    labels=['map', 'str accessor', 'list comprehension', 'list comp safe'],
    n_range=[2**k for k in range(0, 15)],
    xlabel='N',
    equality_check=None
)
</code></pre>

<p></p>

<pre><code># Nested list flattening.
ser3 = pd.Series([['a', 'b', 'c'], ['d', 'e'], ['f', 'g']])
perfplot.show(
    setup=lambda n: pd.concat([ser2] * n, ignore_index=True),
    kernels=[
        lambda ser: pd.DataFrame(ser.tolist()).stack().reset_index(drop=True),
        lambda ser: pd.Series(list(chain.from_iterable(ser.tolist()))),
        lambda ser: pd.Series([y for x in ser for y in x]),
    ],
    labels=['stack', 'itertools.chain', 'nested list comp'],
    n_range=[2**k for k in range(0, 15)],
    xlabel='N',    
    equality_check=None

)
</code></pre>

<p></p>

<pre><code># Extracting strings.
ser4 = pd.Series(['foo xyz', 'test A1234', 'D3345 xtz'])
perfplot.show(
    setup=lambda n: pd.concat([ser4] * n, ignore_index=True),
    kernels=[
        lambda ser: ser.str.extract(r'(?&lt;=[A-Z])(\d{4})', expand=False),
        lambda ser: pd.Series([matcher(x) for x in ser])
    ],
    labels=['str.extract', 'list comprehension'],
    n_range=[2**k for k in range(0, 15)],
    xlabel='N',
    equality_check=None
)
</code></pre>
","4909087","","4909087","","2019-05-25 05:22:40","2019-05-25 05:22:40","","","","9","","",""
"54650418","2","","54650417","2019-02-12 12:44:13","","47","","<p>The sample file (added at the end of the post) has a Userform, Module and a Class Module. To incorporate this into your project, simply export the Userform, Module and the Class Module from the sample file and import it into your project.</p>

<p><strong>Class Module Code</strong></p>

<p>In the Class Module (Let's call it <code>CalendarClass</code>) paste this code</p>

<pre><code>Public WithEvents CommandButtonEvents As MSForms.CommandButton

'~~&gt; Unload the form when the user presses Escape
Private Sub CommandButtonEvents_KeyPress(ByVal KeyAscii As MSForms.ReturnInteger)
    If Not f Is Nothing Then If KeyAscii = 27 Then Unload f
End Sub

'~~&gt; This section delas with showing/displaying controls
'~~&gt; and updating different labels
Private Sub CommandButtonEvents_Click()
    f.Label6.Caption = CommandButtonEvents.Tag

    If Left(CommandButtonEvents.Name, 1) = ""Y"" Then
        If Len(Trim(CommandButtonEvents.Caption)) &lt;&gt; 0 Then
            CurYear = Val(CommandButtonEvents.Caption)                
            With f
                .HideAllControls
                .ShowMonthControls

                .Label4.Caption = CurYear
                .Label5.Caption = 2

                .CommandButton1.Visible = False
                .CommandButton2.Visible = False
            End With
        End If
    ElseIf Left(CommandButtonEvents.Name, 1) = ""M"" Then
        Select Case UCase(CommandButtonEvents.Caption)
            Case ""JAN"": CurMonth = 1
            Case ""FEB"": CurMonth = 2
            Case ""MAR"": CurMonth = 3
            Case ""APR"": CurMonth = 4
            Case ""MAY"": CurMonth = 5
            Case ""JUN"": CurMonth = 6
            Case ""JUL"": CurMonth = 7
            Case ""AUG"": CurMonth = 8
            Case ""SEP"": CurMonth = 9
            Case ""OCT"": CurMonth = 10
            Case ""NOV"": CurMonth = 11
            Case ""DEC"": CurMonth = 12
        End Select

        f.HideAllControls
        f.ShowSpecificMonth
    End If
End Sub
</code></pre>

<p><strong>Module Code</strong></p>

<p>In the Module (Let's call it <code>CalendarModule</code>) paste this code</p>

<pre><code>Option Explicit

Public Const GWL_STYLE = -16
Public Const WS_CAPTION = &amp;HC00000

#If VBA7 Then
    #If Win64 Then
        Public Declare PtrSafe Function GetWindowLongPtr Lib ""user32"" Alias _
        ""GetWindowLongPtrA"" (ByVal hwnd As LongPtr, ByVal nIndex As Long) As LongPtr

        Public Declare PtrSafe Function SetWindowLongPtr Lib ""user32"" Alias _
        ""SetWindowLongPtrA"" (ByVal hwnd As LongPtr, ByVal nIndex As Long, _
        ByVal dwNewLong As LongPtr) As LongPtr
    #Else
        Public Declare PtrSafe Function GetWindowLongPtr Lib ""user32"" Alias _
        ""GetWindowLongA"" (ByVal hwnd As LongPtr, ByVal nIndex As Long) As LongPtr

        Private Declare Function SetWindowLongPtr Lib ""user32"" Alias _
        ""SetWindowLongA"" (ByVal hwnd As LongPtr, ByVal nIndex As Long, _
        ByVal dwNewLong As LongPtr) As LongPtr
    #End If

    Public Declare PtrSafe Function DrawMenuBar Lib ""user32"" _
    (ByVal hwnd As LongPtr) As LongPtr

    Private Declare PtrSafe Function FindWindow Lib ""user32"" Alias _
    ""FindWindowA"" (ByVal lpClassName As String, _
    ByVal lpWindowName As String) As LongPtr

    Private Declare PtrSafe Function SetTimer Lib ""user32"" _
    (ByVal hwnd As LongPtr, ByVal nIDEvent As LongPtr, _
    ByVal uElapse As LongPtr, ByVal lpTimerFunc As LongPtr) As LongPtr

    Public Declare PtrSafe Function KillTimer Lib ""user32"" _
    (ByVal hwnd As LongPtr, ByVal nIDEvent As LongPtr) As LongPtr

    Public TimerID As LongPtr

    Dim lngWindow As LongPtr, lFrmHdl As LongPtr
#Else

    Public Declare Function GetWindowLong _
    Lib ""user32"" Alias ""GetWindowLongA"" ( _
    ByVal hwnd As Long, ByVal nIndex As Long) As Long

    Public Declare Function SetWindowLong _
    Lib ""user32"" Alias ""SetWindowLongA"" ( _
    ByVal hwnd As Long, ByVal nIndex As Long, _
    ByVal dwNewLong As Long) As Long

    Public Declare Function DrawMenuBar _
    Lib ""user32"" (ByVal hwnd As Long) As Long

    Public Declare Function FindWindowA _
    Lib ""user32"" (ByVal lpClassName As String, _
    ByVal lpWindowName As String) As Long

    Public Declare Function SetTimer Lib ""user32"" ( _
    ByVal hwnd As Long, ByVal nIDEvent As Long, _
    ByVal uElapse As Long, ByVal lpTimerFunc As Long) As Long

    Public Declare Function KillTimer Lib ""user32"" ( _
    ByVal hwnd As Long, ByVal nIDEvent As Long) As Long

    Public TimerID As Long
    Dim lngWindow As Long, lFrmHdl As Long
#End If

Public TimerSeconds As Single, tim As Boolean
Public CurMonth As Integer, CurYear As Integer
Public frmYr As Integer, ToYr As Integer

Public f As frmCalendar

Enum CalendarThemes
    Venom = 0
    MartianRed = 1
    ArcticBlue = 2
    Greyscale = 3
End Enum

Sub Launch()
    Set f = frmCalendar

    With f
        .Caltheme = Greyscale
        .LongDateFormat = ""dddd dd. mmmm yyyy"" '""dddd mmmm dd, yyyy"" etc
        .ShortDateFormat = ""dd/mm/yyyy""  '""mm/dd/yyyy"" or ""d/m/y"" etc
        .Show
    End With
End Sub

'~~&gt; Hide the title bar of the userform
Sub HideTitleBar(frm As Object)
    #If VBA7 Then
        Dim lngWindow As LongPtr, lFrmHdl As LongPtr
        lFrmHdl = FindWindow(vbNullString, frm.Caption)
        lngWindow = GetWindowLongPtr(lFrmHdl, GWL_STYLE)
        lngWindow = lngWindow And (Not WS_CAPTION)
        Call SetWindowLongPtr(lFrmHdl, GWL_STYLE, lngWindow)
        Call DrawMenuBar(lFrmHdl)
    #Else
        Dim lngWindow As Long, lFrmHdl As Long
        lFrmHdl = FindWindow(vbNullString, frm.Caption)
        lngWindow = GetWindowLong(lFrmHdl, GWL_STYLE)
        lngWindow = lngWindow And (Not WS_CAPTION)
        Call SetWindowLong(lFrmHdl, GWL_STYLE, lngWindow)
        Call DrawMenuBar(lFrmHdl)
    #End If
End Sub

'~~&gt; Start Timer
Sub StartTimer()
    '~~ Set the timer for 1 second
    TimerSeconds = 1
    TimerID = SetTimer(0&amp;, 0&amp;, TimerSeconds * 1000&amp;, AddressOf TimerProc)
End Sub

'~~&gt; End Timer
Sub EndTimer()
    On Error Resume Next
    KillTimer 0&amp;, TimerID
End Sub

'~~&gt; Update Time
#If VBA7 And Win64 Then ' 64 bit Excel under 64-bit windows  ' Use LongLong and LongPtr
    Public Sub TimerProc(ByVal hwnd As LongPtr, ByVal uMsg As LongLong, _
    ByVal nIDEvent As LongPtr, ByVal dwTimer As LongLong)
        frmCalendar.Label1.Caption = Split(Format(Time, ""h:mm:ss AM/PM""))(0)
        frmCalendar.Label2.Caption = Split(Format(Time, ""h:mm:ss AM/PM""))(1)
    End Sub
#ElseIf VBA7 Then ' 64 bit Excel in all environments
    Public Sub TimerProc(ByVal hwnd As LongPtr, ByVal uMsg As Long, _
    ByVal nIDEvent As LongPtr, ByVal dwTimer As Long)
        frmCalendar.Label1.Caption = Split(Format(Time, ""h:mm:ss AM/PM""))(0)
        frmCalendar.Label2.Caption = Split(Format(Time, ""h:mm:ss AM/PM""))(1)
    End Sub
#Else ' 32 bit Excel
    Public Sub TimerProc(ByVal hwnd As Long, ByVal uMsg As Long, _
    ByVal nIDEvent As Long, ByVal dwTimer As Long)
        frmCalendar.Label1.Caption = Split(Format(Time, ""h:mm:ss AM/PM""))(0)
        frmCalendar.Label2.Caption = Split(Format(Time, ""h:mm:ss AM/PM""))(1)
    End Sub
#End If

'~~&gt; Improvement suggested by T.M (https://stackoverflow.com/users/6460297/t-m)
'(1) Get weekday name
Function wday(ByVal wd&amp;, ByVal lang As String) As String
    ' Purpose: get weekday in ""DDD"" format
    wday = Application.Text(DateSerial(6, 1, wd), cPattern(lang) &amp; ""ddd"")    ' the first day in year 1906 starts with a Sunday
End Function

'~~&gt; Improvement suggested by T.M (https://stackoverflow.com/users/6460297/t-m)
'(2) Get month name
Function mon(ByVal mo&amp;, ByVal lang As String) As String
    ' Example call: mon(12, ""1031"") or mon(12, ""de"")
    mon = Application.Text(DateSerial(6, mo, 1), cPattern(lang) &amp; ""mmm"")
End Function

'~~&gt; Improvement suggested by T.M (https://stackoverflow.com/users/6460297/t-m)
'(3) International patterns
Function cPattern(ByVal ctry As String) As String
    ' Purpose: return country code pattern for above functions mon() and wday()
    ' Codes: see https://msdn.microsoft.com/en-us/library/dd318693(VS.85).aspx
    ctry = LCase(Trim(ctry))
    Select Case ctry
        Case ""1033"", ""en-us"": cPattern = ""[$-409]"" ' English (US)
        Case ""1031"", ""de"": cPattern = ""[$-C07]"" ' German
        Case ""1034"", ""es"": cPattern = ""[$-C0A]"" ' Spanish
        Case ""1036"", ""fr"": cPattern = ""[$-80C]"" ' French
        Case ""1040"", ""it"": cPattern = ""[$-410]"" ' Italian
        ' more ...
    End Select
End Function
</code></pre>

<p><strong>Userform Code</strong></p>

<p>The  Userform (Let's call it <code>frmCalendar</code>) code is too big to be posted here. Please refer to the sample file.</p>

<p><strong>Screenshot</strong></p>

<p><a href=""https://i.stack.imgur.com/CkYmY.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/CkYmY.png"" alt=""enter image description here""></a></p>

<p><strong>Themes</strong></p>

<p><a href=""https://i.stack.imgur.com/WU2MH.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/WU2MH.png"" alt=""enter image description here""></a></p>

<p><strong>Highlights</strong></p>

<ol>
<li>No need to register any dll/ocx.</li>
<li>Easily distributable. It is FREE.</li>
<li>No Administratior Rights required to use this.</li>
<li>You can select a skin for the calendar widget. One can choose from 4 themes Venom, MartianRed, ArticBlue and GreyScale.</li>
<li>Choose Language to see Month/Day name. Support for 4 languages.</li>
<li>Specify Long and Short date formats</li>
</ol>

<p><strong>Sample File</strong></p>

<p><a href=""https://www.dropbox.com/s/6keqqwrew862i51/New%20Calendar%20Ver%205.xlsm?dl=0"" rel=""noreferrer"">Sample File</a></p>

<p><strong>Acknowlegements</strong> @Pᴇʜ, @chrisneilsen and @T.M. for suggesting improvements.</p>

<p><strong>What's New</strong>:</p>

<p>Bugs reported by @RobinAipperspach and @Jose fixed</p>
","1140579","","1140579","","2019-07-10 04:51:47","2019-07-10 04:51:47","","","","23","","",""
"54689596","2","","54650417","2019-02-14 11:42:26","","4","","<p><strong>Get international day &amp; month names</strong></p>

<blockquote>
  <p>This answer is intended to be helpful to Sid's approach regarding <strong>internationalization</strong>; so it doesn't repeat the other code parts which I consider to be clear enough building a UserForm. If wanted, I can delete it after incorporation in Vers. 4.0. </p>
</blockquote>

<p>Just in addition to Sid's valid solution I demonstrate a simplified code to get international weekday and month names
- c.f. <a href=""https://stackoverflow.com/questions/48155382/dynamically-display-weekday-names-in-native-excel-language/48156068#48156068"">Dynamically display weekday names in native Excel language</a></p>

<p><strong>Modified <code>ChangeLanguage</code> procedure in form's module <code>frmCalendar</code></strong></p>

<pre><code>Sub ChangeLanguage(ByVal LCID As Long)
    Dim i&amp;
    '~~&gt; Week Day Name
     For i = 1 To 7
         Me.Controls(""WD"" &amp; i).Caption = Left(wday(i, LCID), 2)
     Next i
    '~~&gt; Month Name
     For i = 1 To 12
         Me.Controls(""M"" &amp; i).Caption = Left(mon(i, LCID), 3)
     Next i
End Sub
</code></pre>

<p><strong>Called Functions in <code>CalendarModule</code></strong></p>

<p>These three functions could replace the <code>LanguageTranslations()</code> function.
Advantage: short code, less memory, easier maintenance, correct names</p>

<pre><code>'(1) Get weekday name
Function wday(ByVal wd&amp;, ByVal lang As String) As String
' Purpose: get weekday in ""DDD"" format
  wday = Application.Text(DateSerial(6, 1, wd), cPattern(lang) &amp; ""ddd"")    ' the first day in year 1906 starts with a Sunday
End Function

'(2) Get month name
Function mon(ByVal mo&amp;, ByVal lang As String) As String
' Example call: mon(12, ""1031"") or mon(12, ""de"")
  mon = Application.Text(DateSerial(6, mo, 1), cPattern(lang) &amp; ""mmm"")
End Function

'(3) International patterns
Function cPattern(ByVal ctry As String) As String
' Purpose: return country code pattern for above functions mon() and wday()
' Codes: see https://msdn.microsoft.com/en-us/library/dd318693(VS.85).aspx
ctry = lcase(trim(ctry))
Select Case ctry
  Case ""1033"", ""en-us""
    cPattern = ""[$-409]"" ' English (US)
  Case ""1031"", ""de""
    cPattern = ""[$-C07]"" ' German
  Case ""1034"", ""es""
    cPattern = ""[$-C0A]"" ' Spanish
  Case ""1036"", ""fr""
    cPattern = ""[$-80C]"" ' French
  Case ""1040"", ""it""
    cPattern = ""[$-410]"" ' Italian
' more ...
End Select
End Function
</code></pre>
","6460297","","6460297","","2019-02-14 12:13:08","2019-02-14 12:13:08","","","","1","","",""
"54031547","2","","54031546","2019-01-04 00:11:03","","33","","<p>There are a few ways to create an empty list in Dart:</p>

<pre><code>[]
List()
&lt;String&gt;[]
List&lt;String&gt;()
</code></pre>

<p>However, the <a href=""https://www.dartlang.org/guides/language/effective-dart/usage#do-use-collection-literals-when-possible"" rel=""noreferrer"">Effective Dart Usage Guide</a> recommends this:</p>

<pre><code>[]
</code></pre>

<p>Or if you need to specify the type, then this:</p>

<pre><code>&lt;String&gt;[]
</code></pre>
","3681880","","","","","2019-01-04 00:11:03","","","","0","","",""
"54368890","2","","54366277","2019-01-25 16:04:15","","8","","<p>Some background. Each process has a notion of ""current directory"". When started from the command line, then it's the directory in which the command was executed. When started from the UI, it's usually the folder in which the program (the .exe file) is.</p>

<p>In the command prompt or BASH, you can change this folder with <code>cd</code> for the process which runs the command prompt.</p>

<p>When Maven builds a multi-module project, it has to change this for each module (so that the relative path <code>src/main/java/</code> always points to the right place). Unfortunately, Java doesn't have a ""set current directory"" method anywhere. You can only specify one when creating a new process and you can modify the system property <code>user.dir</code>.</p>

<p>That's why <code>new File(""a"").exists()</code> and <code>new File(""a"").getAbsoluteFile().exists()</code> work differently.</p>

<p>The latter will use <code>new File(System.getProperty(""user.dir""), ""a"")</code> to determine the path and the former will use the Windows API function <code>_wgetdcwd</code> (<a href=""https://docs.microsoft.com/en-us/cpp/c-runtime-library/reference/getdcwd-wgetdcwd?view=vs-2017"" rel=""nofollow noreferrer"">docs</a>) which in turn uses a field of the Windows process to get the current directory - in our case, that's always the folder in which Maven was originally started because Java doesn't update the field in the process when someone changes <code>user.dir</code> and Maven can only change this property to ""simulate"" changing folders.</p>

<p><code>WinNTFileSystem_md.c</code> calls <code>fileToNTPath()</code>. That's defined in <code>io_util_md.c</code> and calls <code>pathToNTPath()</code>. For relative paths, it will call <code>currentDirLength()</code> which calls <code>currentDir()</code> which calls <code>_wgetdcwd()</code>.</p>

<p>See also:</p>

<ul>
<li><a href=""https://github.com/openjdk-mirror/jdk7u-jdk/blob/jdk7u6-b08/src/windows/native/java/io/WinNTFileSystem_md.c"" rel=""nofollow noreferrer"">https://github.com/openjdk-mirror/jdk7u-jdk/blob/jdk7u6-b08/src/windows/native/java/io/WinNTFileSystem_md.c</a></li>
<li><a href=""https://github.com/openjdk-mirror/jdk7u-jdk/blob/jdk7u6-b08/src/windows/native/java/io/io_util_md.c"" rel=""nofollow noreferrer"">https://github.com/openjdk-mirror/jdk7u-jdk/blob/jdk7u6-b08/src/windows/native/java/io/io_util_md.c</a></li>
</ul>

<p>and here is the place where the Surefire plugin modifies the Property <code>user.dir</code>: <a href=""https://github.com/apache/maven-surefire/blob/56d41b4c903b6c134c5e1a2891f9f08be7e5039f/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/AbstractSurefireMojo.java#L1060"" rel=""nofollow noreferrer"">https://github.com/apache/maven-surefire/blob/56d41b4c903b6c134c5e1a2891f9f08be7e5039f/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/AbstractSurefireMojo.java#L1060</a></p>

<p>When not forking, it's copied into the current VM's System properties: <a href=""https://github.com/apache/maven-surefire/blob/56d41b4c903b6c134c5e1a2891f9f08be7e5039f/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/AbstractSurefireMojo.java#L1133"" rel=""nofollow noreferrer"">https://github.com/apache/maven-surefire/blob/56d41b4c903b6c134c5e1a2891f9f08be7e5039f/maven-surefire-common/src/main/java/org/apache/maven/plugin/surefire/AbstractSurefireMojo.java#L1133</a></p>
","34088","","34088","","2019-01-28 16:14:20","2019-01-28 16:14:20","","","","15","","",""
"54409706","2","","54366277","2019-01-28 20:21:33","","0","","<p>Aaron, we develop the Surefire. We can help you if you provide the path for this:</p>

<pre><code>assertTrue(""Missing file: "" + file.getAbsolutePath(), file.exists());
</code></pre>

<p>Pls post the actual path, expected path and <strong>basedir</strong> where your POM resides.
The theory would not help here. We are testing all the spectrum of JDKs 7-12 but we do not have the combination Cygwin+Windows which must be considered.
The code setting <strong>user.dir</strong> in Surefire you mentioned exists a decade.</p>
","2758738","","","","","2019-01-28 20:21:33","","","","7","","",""
"54401852","2","","54401851","2019-01-28 12:16:53","","34","","<p>Architecturally, React Native (RN) and Flutter are very similar.</p>

<p>What Flutter calls a ""Widget"" is the strict equivalent to React's ""Component"". That's what Flutter means when it says its inspired from React.</p>

<p>The difference between them lies in the other aspects of the frameworks:</p>

<h3>Interpreted Javascript VS Compiled Dart</h3>

<p>Flutter uses Dart, a typed language that offers both  ""Just in time"" (JIT) and ""Ahead of time"" (AOT) compilation (with tree-shaking included)</p>

<p>In development, Flutter uses JIT compilation to empower hot-reload. And for production builds, it uses AOT compilation for better performances.</p>

<hr>

<p>React-Native uses Javascript enhanced by some syntax sugar called JSX.</p>

<p>JSX being a different language, it compiles to JS, then evaluated at runtime. </p>

<h3>Bridge to native VS Complete rewrite</h3>

<p>React native is built <em>on the top of native</em>. </p>

<p>When using a button or a text in React Native, you are manipulating the official object used for native Android/iOS apps. </p>

<p>We can consider React as a common language between Android/iOS to declare layouts – but fundamentally the applications are different with potential inconsistencies.</p>

<p>It's is not <em>true</em> cross-platform. But at the same time, it allows better interoperability with native elements.</p>

<hr>

<p>Flutter is the opposite. The goal of Flutter is to use as few native elements as possible. </p>

<p>Flutter requests to the OS a window, and then entirely manage its content using Dart and Skia (it's c++ graphics engine).</p>

<p>It has a few implications:</p>

<ul>
<li>All the UI logic had to be reimplemented by Flutter. Be it scroll, touch events, animations, ...</li>
<li>The application is written entirely in Dart, even deep into the lower layers. It means that whatever the platform is, it's always the same code that is executed.</li>
<li>Potentially anything that can run Dart code and create a window can run Flutter and apps should work with little to no change. As such, web is in progress ( <a href=""https://medium.com/flutter-io/hummingbird-building-flutter-for-the-web-e687c2a023a8"" rel=""noreferrer"">Hummingbird</a>) and basic support of desktops is available.  </li>
</ul>

<p>To some extent, we can compare Flutter to a webview/game engine, but optimized for casual applications.</p>
","8394265","","8394265","","2019-01-29 13:31:28","2019-01-29 13:31:28","","","","8","","",""
"54405251","2","","54401851","2019-01-28 15:30:20","","26","","<p>Remi already has a couple good points. I have one more.</p>

<h1>Interpreted with bridges - vs. native and no bridges</h1>

<p>Despite what the name might imply, React Native apps are <strong>not</strong> compiled to native code. React Native apps interpret Javascript code <strong>during runtime</strong>, and component updates in a React Native app go <strong>through a bridge</strong> to the native view counterpart. This might slow things down a little bit and be a bottleneck. </p>

<p>On the contrary, Flutter apps (on release mode) are <strong>compiled to native code</strong> and <strong>don't require a bridge</strong> for manipulating the UI. This in turn, at least in theory, will be more performant - there's no need to do roundtrips to the <em>native land</em> to make simple UI changes. Not to mention that release Flutter code is natively compiled and there are no interpreters involved.</p>

<h2>Dance monkey, dance</h2>

<p>Now that we know that release mode Flutter apps don't have an interpreter or the need for bridges for UI manipulations, let's see what those two things actually are in the first place.</p>

<p>We'll do this with a highly hypothetical example app. Our React Native app has a button that makes a monkey dance on the screen. In React Native, our button and the dancing monkey components are written in Javascript and React. </p>

<h3>Interpreters</h3>

<p>Since Javascript is not a first class language on Android or iOS, your React Native app includes a <em>Javascript interpreter</em> that <strong>interprets</strong> your Javascript code <strong>in runtime</strong>. Without the interpreter, you wouldn't be able to write apps with Javascript at all - even a simple <code>console.log('Hello World!')</code> wouldn't work.</p>

<p>According to the <a href=""https://facebook.github.io/react-native/docs/javascript-environment#javascript-runtime"" rel=""noreferrer"">React Native docs</a>, in <em>""most cases""</em>, the Javascript code will be interpreted with JavascriptCore.</p>

<h3>Bridges</h3>

<p>Under the hood, React Native uses the native Android Views and iOS UIViews for displaying UI components (such as dancing monkeys) on the screen. But since the UI parts of the Android and iOS SDKs don't use Javascript, you can't make the monkey dance by using Javascript alone. </p>

<p>This is where <strong>a bridge</strong> comes into play. On the other side of the bridge are your React Native components and logic, written in Javascript. On the opposite side, we have the host Android/iOS app that renders native views into the screen. 
From now on, let's call the two sides of the bridge as the <strong>Javascript land</strong> and the <strong>native land</strong>.</p>

<p>So, what happens when the user clicks on our ""dance, monkey, dance!"" button?</p>

<ol>
<li>The native Android/iOS view <strong>dispatches an onclick event</strong>, which <strong>goes over the bridge</strong> to the <strong>Javascript land</strong>.</li>
<li>Our onclick listener written in Javascript gets invoked. It is a simple call that toggles a boolean inside the component. Something along the lines of <code>setState(() {isMonkeyDancing = true})</code> or similar.</li>
<li>React sees that something has changed. It comes up with an updated <strong>representation of UI elements</strong> that has a dancing monkey. The representation is just a tree of plain Javascript objects that describes the updated state of the UI.</li>
<li>The Javascript object tree gets <strong>serialized and sent over the bridge</strong> to the <strong>native land</strong>.</li>
<li>The host app receives the serialized object tree and deserializes it. Now it can update the native Android/iOS view to <strong>match the deserialized UI representation</strong>. Our monkey is now dancing and our user is eternally happy.</li>
</ol>

<p>So in this example, one button click required going over the bridge two times. </p>

<p>Actually, it's three - just simply rendering a button initially is a call across the bridge itself.
In an app that is more than just one button and a dancing monkey, you're likely to go over the bridge <strong>a lot more</strong>. And every time you do, it requires serializing data and sending it over from one side to the another. </p>

<p>This is slower than just coming up with the UI representation and <strong>updating the UI</strong> with that <strong>directly</strong>. Additionally, there's a cost of interpreting Javascript in runtime compared to having the code compiled ahead of time.</p>

<h2>The bottom line</h2>

<p>Since Flutter is essentially a portable rendering engine, Flutter <strong>doesn't need a bridge</strong> to do an UI update. And because of that, UI updates, at least in theory, are faster. That's one reason why building apps with complex animations or things like <a href=""https://www.2dimensions.com/about-flare"" rel=""noreferrer"">Flare</a>, <a href=""https://www.spritewidget.com/"" rel=""noreferrer"">SpriteWidget</a>, or even games would be more lucrative with Flutter compared to React Native. </p>

<p>And because Flutter on release mode is AOT compiled, Flutter doesn't need an interpreter either. That's the difference between Flutter and React Native.</p>
","940036","","940036","","2019-01-28 17:20:48","2019-01-28 17:20:48","","","","3","","",""
"54461064","2","","54460967","2019-01-31 12:52:41","","15","","<p><code>struct Typo</code> is an elaborated type specifier. That affects how name lookup works.</p>

<blockquote>
  <p><strong>[basic.lookup.elab]</strong></p>
  
  <p><a href=""https://timsong-cpp.github.io/cppwp/n4659/basic.lookup.elab#2"" rel=""noreferrer"">2</a>: If the elaborated-type-specifier has no nested-name-specifier,
  and unless the elaborated-type-specifier appears in a declaration with
  the following form:</p>

<pre><code>class-key attribute-specifier-seq identifier ;
</code></pre>
  
  <p>the identifier is looked up according to [basic.lookup.unqual] but
  ignoring any non-type names that have been declared. If the
  elaborated-type-specifier is introduced by the enum keyword and this
  lookup does not find a previously declared type-name, the
  elaborated-type-specifier is ill-formed. If the
  elaborated-type-specifier is introduced by the class-key and this
  lookup does not find a previously declared type-name, or if the
  elaborated-type-specifier appears in a declaration with the form:</p>

<pre><code>class-key attribute-specifier-seq identifier ;
</code></pre>
  
  <p>the elaborated-type-specifier is a declaration that introduces the
  class-name as described in [basic.scope.pdecl].</p>
</blockquote>

<p>So in <code>std::vector&lt;struct Typo&gt; a;</code>, because <code>struct Typo</code> does not find a previously declared <code>Typo</code>, it serves as a forward declaration for the type. And as such, its the vector instantiation that <em>may</em><sup>1</sup> complain the type it got is incomplete because it will try to do stuff with it.</p>

<p>While in <code>std::vector&lt;Typo&gt; b;</code>, looking up <code>Typo</code> finds nothing. There is no previous declaration for it, so its at this point a diagnostic should be issued that this identifier is undeclared.</p>

<hr>

<p><sub>
<sup>1</sup> - Depends on what standard you are compiling to, and what members of the vector you are using. Support for incomplete types has been added.
</sub></p>
","817643","","817643","","2019-01-31 13:07:35","2019-01-31 13:07:35","","","","12","","",""
"54432584","2","","54432583","2019-01-30 02:34:29","","89","","<h1><code>apply</code>, the Convenience Function you Never Needed</h1>

<p>We start by addressing the questions in the OP, one by one.</p>

<blockquote>
  <h2>""<em>If</em> apply <em>is so bad, then why is it in the API?</em>""</h2>
</blockquote>

<p><a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply"" rel=""noreferrer""><code>DataFrame.apply</code></a> and <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.apply.html"" rel=""noreferrer""><code>Series.apply</code></a> are <em>convenience functions</em> defined on DataFrame and Series object respectively. <code>apply</code> accepts any user defined function that applies a transformation/aggregation on a DataFrame. <code>apply</code> is effectively a silver bullet that does whatever any existing pandas function cannot do. </p>

<p>Some of the things <code>apply</code> can do:</p>

<ul>
<li>Run any user-defined function on a DataFrame or Series</li>
<li>Apply a function either row-wise (<code>axis=1</code>) or column-wise (<code>axis=0</code>) on a DataFrame</li>
<li>Perform index alignment while applying the function</li>
<li>Perform aggregation with user-defined functions (however, we usually prefer <code>agg</code> or <code>transform</code> in these cases)</li>
<li>Perform element-wise transformations </li>
<li>Broadcast aggregated results to original rows (see the <code>result_type</code> argument).</li>
<li>Accept positional/keyword arguments to pass to the user-defined functions.</li>
</ul>

<p>...Among others. For more information, see <a href=""https://pandas.pydata.org/pandas-docs/stable/getting_started/basics.html#row-or-column-wise-function-application"" rel=""noreferrer"">Row or Column-wise Function Application</a> in the documentation.</p>

<p>So, with all these features, why is <code>apply</code> bad? It is <strong>because <code>apply</code> is</strong> <strong>slow</strong>. Pandas makes no assumptions about the nature of your function, and so <strong>iteratively applies your function</strong> to each row/column as necessary. Additionally, handling <em>all</em> of the situations above means <code>apply</code> incurs some major overhead at each iteration. Further, <code>apply</code> consumes a lot more memory, which is a challenge for memory bounded applications.</p>

<p>There are very few situations where <code>apply</code> is appropriate to use (more on that below). <strong>If you're not sure whether you should be using <code>apply</code>, you probably shouldn't.</strong></p>

<hr>

<p>Let's address the next question.</p>

<blockquote>
  <h2>""<em>How and when should I make my code</em> apply <em>-free?</em>""</h2>
</blockquote>

<p>To rephrase, here are some common situations where you will want to <em>get rid</em> of any calls to <code>apply</code>.</p>

<h3><strong>Numeric Data</strong></h3>

<p>If you're working with numeric data, there is likely already a vectorized cython function that does exactly what you're trying to do (if not, please either ask a question on Stack Overflow or open a feature request on GitHub).</p>

<p>Contrast the performance of <code>apply</code> for a simple addition operation.</p>

<pre><code>df = pd.DataFrame({""A"": [9, 4, 2, 1], ""B"": [12, 7, 5, 4]})
df

   A   B
0  9  12
1  4   7
2  2   5
3  1   4
</code></pre>

<p></p>

<pre><code>df.apply(np.sum)

A    16
B    28
dtype: int64

df.sum()

A    16
B    28
dtype: int64
</code></pre>

<p>Performance wise, there's no comparison, the cythonized equivalent is much faster. There's no need for a graph, because the difference is obvious even for toy data.</p>

<pre><code>%timeit df.apply(np.sum)
%timeit df.sum()
2.22 ms ± 41.2 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
471 µs ± 8.16 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</code></pre>

<p>Even if you enable passing raw arrays with the <code>raw</code> argument, it's still twice as slow.</p>

<pre><code>%timeit df.apply(np.sum, raw=True)
840 µs ± 691 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
</code></pre>

<p>Another example:</p>

<pre><code>df.apply(lambda x: x.max() - x.min())

A    8
B    8
dtype: int64

df.max() - df.min()

A    8
B    8
dtype: int64

%timeit df.apply(lambda x: x.max() - x.min())
%timeit df.max() - df.min()

2.43 ms ± 450 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
1.23 ms ± 14.7 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</code></pre>

<p>In general, <strong>seek out vectorized alternatives if possible.</strong></p>

<h3><strong>String/Regex</strong></h3>

<p>Pandas provides ""vectorized"" string functions in most situations, but there are rare cases where those functions do not... ""apply"", so to speak.</p>

<p>A common problem is to check whether a value in a column is present in another column of the same row. </p>

<pre><code>df = pd.DataFrame({
    'Name': ['mickey', 'donald', 'minnie'],
    'Title': ['wonderland', ""welcome to donald's castle"", 'Minnie mouse clubhouse'],
    'Value': [20, 10, 86]})
df

     Name  Value                       Title
0  mickey     20                  wonderland
1  donald     10  welcome to donald's castle
2  minnie     86      Minnie mouse clubhouse
</code></pre>

<p>This should return the row second and third row, since ""donald"" and ""minnie"" are present in their respective ""Title"" columns.</p>

<p>Using apply, this would be done using </p>

<pre><code>df.apply(lambda x: x['Name'].lower() in x['Title'].lower(), axis=1)

0    False
1     True
2     True
dtype: bool

df[df.apply(lambda x: x['Name'].lower() in x['Title'].lower(), axis=1)]

     Name                       Title  Value
1  donald  welcome to donald's castle     10
2  minnie      Minnie mouse clubhouse     86
</code></pre>

<p>However, a better solution exists using list comprehensions. </p>

<pre><code>df[[y.lower() in x.lower() for x, y in zip(df['Title'], df['Name'])]]

     Name                       Title  Value
1  donald  welcome to donald's castle     10
2  minnie      Minnie mouse clubhouse     86
</code></pre>

<p></p>

<pre><code>%timeit df[df.apply(lambda x: x['Name'].lower() in x['Title'].lower(), axis=1)]
%timeit df[[y.lower() in x.lower() for x, y in zip(df['Title'], df['Name'])]]

2.85 ms ± 38.4 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
788 µs ± 16.4 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</code></pre>

<p>The thing to note here is that iterative routines happen to be faster than <code>apply</code>, because of the lower overhead. If you need to handle NaNs and invalid dtypes, you can build on this using a custom function you can then call with arguments inside the list comprehension.</p>

<p>For more information on when list comprehensions should be considered a good option, see my writeup: <a href=""https://stackoverflow.com/questions/54028199/for-loops-with-pandas-when-should-i-care"">For loops with pandas - When should I care?</a>.</p>

<blockquote>
  <p><strong>Note</strong><br>
  Date and datetime operations also have vectorized versions. So, for example, you should prefer <code>pd.to_datetime(df['date'])</code>, over,
  say, <code>df['date'].apply(pd.to_datetime)</code>.</p>
  
  <p>Read more at the
  <a href=""https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html"" rel=""noreferrer"">docs</a>.</p>
</blockquote>

<h3><strong>A Common Pitfall: Exploding Columns of Lists</strong></h3>

<pre><code>s = pd.Series([[1, 2]] * 3)
s

0    [1, 2]
1    [1, 2]
2    [1, 2]
dtype: object
</code></pre>

<p>People are tempted to use <code>apply(pd.Series)</code>. This is <em>horrible</em> in terms of performance.</p>

<pre><code>s.apply(pd.Series)

   0  1
0  1  2
1  1  2
2  1  2
</code></pre>

<p>A better option is to listify the column and pass it to pd.DataFrame.</p>

<pre><code>pd.DataFrame(s.tolist())

   0  1
0  1  2
1  1  2
2  1  2
</code></pre>

<p></p>

<pre><code>%timeit s.apply(pd.Series)
%timeit pd.DataFrame(s.tolist())

2.65 ms ± 294 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
816 µs ± 40.5 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</code></pre>

<hr>

<p>Lastly,</p>

<blockquote>
  <h2>""<em>Are there any situations where</em> <code>apply</code> <em>is good?</em>""</h2>
</blockquote>

<p>Apply is a convenience function, so there <em>are</em> situations where the overhead is negligible enough to forgive. It really depends on how many times the function is called.</p>

<p><strong>Functions that are Vectorized for Series, but not DataFrames</strong><br>
What if you want to apply a string operation on multiple columns? What if you want to convert multiple columns to datetime? These functions are vectorized for Series only, so they must be <em>applied</em> over each column that you want to convert/operate on.</p>

<pre><code>df = pd.DataFrame(
         pd.date_range('2018-12-31','2019-01-31', freq='2D').date.astype(str).reshape(-1, 2), 
         columns=['date1', 'date2'])
df

       date1      date2
0 2018-12-31 2019-01-02
1 2019-01-04 2019-01-06
2 2019-01-08 2019-01-10
3 2019-01-12 2019-01-14
4 2019-01-16 2019-01-18
5 2019-01-20 2019-01-22
6 2019-01-24 2019-01-26
7 2019-01-28 2019-01-30

df.dtypes

date1    object
date2    object
dtype: object
</code></pre>

<p>This is an admissible case for <code>apply</code>:</p>

<pre><code>df.apply(pd.to_datetime, errors='coerce').dtypes

date1    datetime64[ns]
date2    datetime64[ns]
dtype: object
</code></pre>

<p>Note that it would also make sense to <code>stack</code>, or just use an explicit loop. All these options are slightly faster than using <code>apply</code>, but the difference is small enough to forgive.</p>

<pre><code>%timeit df.apply(pd.to_datetime, errors='coerce')
%timeit pd.to_datetime(df.stack(), errors='coerce').unstack()
%timeit pd.concat([pd.to_datetime(df[c], errors='coerce') for c in df], axis=1)
%timeit for c in df.columns: df[c] = pd.to_datetime(df[c], errors='coerce')

5.49 ms ± 247 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
3.94 ms ± 48.1 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
3.16 ms ± 216 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
2.41 ms ± 1.71 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
</code></pre>

<p>You can make a similar case for other operations such as string operations, or conversion to category. </p>

<pre><code>u = df.apply(lambda x: x.str.contains(...))
v = df.apply(lambda x: x.astype(category))
</code></pre>

<p>v/s</p>

<pre><code>u = pd.concat([df[c].str.contains(...) for c in df], axis=1)
v = df.copy()
for c in df:
    v[c] = df[c].astype(category)
</code></pre>

<p>And so on...</p>

<h3><strong>Converting Series to <code>str</code>: <code>astype</code> versus <code>apply</code></strong></h3>

<p>This seems like an idiosyncrasy of the API. Using <code>apply</code> to convert integers in a Series to string is comparable (and sometimes faster) than using <code>astype</code>.</p>

<p><a href=""https://i.stack.imgur.com/eSs2r.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/eSs2r.png"" alt=""enter image description here""></a>
The graph was plotted using the <a href=""https://github.com/nschloe/perfplot"" rel=""noreferrer""><code>perfplot</code></a> library.</p>

<pre><code>import perfplot

perfplot.show(
    setup=lambda n: pd.Series(np.random.randint(0, n, n)),
    kernels=[
        lambda s: s.astype(str),
        lambda s: s.apply(str)
    ],
    labels=['astype', 'apply'],
    n_range=[2**k for k in range(1, 20)],
    xlabel='N',
    logx=True,
    logy=True,
    equality_check=lambda x, y: (x == y).all())
</code></pre>

<p>With floats, I see the <code>astype</code> is consistently as fast as, or slightly faster than <code>apply</code>. So this has to do with the fact that the data in the test is integer type.</p>

<h3><strong><code>GroupBy</code> operations with chained transformations</strong></h3>

<p><code>GroupBy.apply</code> has not been discussed until now, but <code>GroupBy.apply</code> is also an iterative convenience function to handle anything that the existing <code>GroupBy</code> functions do not. </p>

<p>One common requirement is to perform a GroupBy and then two prime operations such as a ""lagged cumsum"":</p>

<pre><code>df = pd.DataFrame({""A"": list('aabcccddee'), ""B"": [12, 7, 5, 4, 5, 4, 3, 2, 1, 10]})
df

   A   B
0  a  12
1  a   7
2  b   5
3  c   4
4  c   5
5  c   4
6  d   3
7  d   2
8  e   1
9  e  10
</code></pre>

<p></p>

<p>You'd need two successive groupby calls here:</p>

<pre><code>df.groupby('A').B.cumsum().groupby(df.A).shift()

0     NaN
1    12.0
2     NaN
3     NaN
4     4.0
5     9.0
6     NaN
7     3.0
8     NaN
9     1.0
Name: B, dtype: float64
</code></pre>

<p>Using <code>apply</code>, you can shorten this to a a single call.</p>

<pre><code>df.groupby('A').B.apply(lambda x: x.cumsum().shift())

0     NaN
1    12.0
2     NaN
3     NaN
4     4.0
5     9.0
6     NaN
7     3.0
8     NaN
9     1.0
Name: B, dtype: float64
</code></pre>

<p>It is very hard to quantify the performance because it depends on the data. But in general, <code>apply</code> is an acceptable solution if the goal is to reduce a <code>groupby</code> call (because <code>groupby</code> is also quite expensive).</p>

<hr>

<h2>Other Caveats</h2>

<p>Aside from the caveats mentioned above, it is also worth mentioning that <code>apply</code> operates on the first row (or column) twice. This is done to determine whether the function has any side effects. If not, <code>apply</code> may be able to use a fast-path for evaluating the result, else it falls back to a slow implementation.</p>

<pre><code>df = pd.DataFrame({
    'A': [1, 2],
    'B': ['x', 'y']
})

def func(x):
    print(x['A'])
    return x

df.apply(func, axis=1)

# 1
# 1
# 2
   A  B
0  1  x
1  2  y
</code></pre>

<p>This behaviour is also seen in <code>GroupBy.apply</code> on pandas versions &lt;0.25 (it was fixed for 0.25, <a href=""https://stackoverflow.com/a/56215416/4909087"">see here for more information</a>.)</p>
","4909087","","4909087","","2019-06-23 03:23:56","2019-06-23 03:23:56","","","","6","","",""
"54433552","2","","54432583","2019-01-30 04:53:41","","35","","<h1>Not all <code>apply</code>s are alike</h1>

<p>The below chart suggests when to consider <code>apply</code><sup>1</sup>. Green means possibly efficient; red avoid.</p>

<p><a href=""https://i.stack.imgur.com/b4J3f.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/b4J3f.png"" alt=""enter image description here""></a></p>

<p><em>Some</em> of this is intuitive: <code>pd.Series.apply</code> is a Python-level row-wise loop, ditto <code>pd.DataFrame.apply</code> row-wise (<code>axis=1</code>). The misuses of these are many and wide-ranging. The other post deals with them in more depth. Popular solutions are to use vectorised methods, list comprehensions (assumes clean data), or efficient tools such as the <code>pd.DataFrame</code> constructor (e.g. to avoid <code>apply(pd.Series)</code>).</p>

<p>If you are using <code>pd.DataFrame.apply</code> row-wise, specifying <code>raw=True</code> (where possible) is often beneficial. At this stage, <a href=""http://numba.pydata.org/"" rel=""nofollow noreferrer""><code>numba</code></a> is usually a better choice.</p>

<h1><code>GroupBy.apply</code>: generally favoured</h1>

<p>Repeating <code>groupby</code> operations to avoid <code>apply</code> will hurt performance. <code>GroupBy.apply</code> is usually fine here, provided the methods you use in your custom function are themselves vectorised. Sometimes there is no native Pandas method for a groupwise aggregation you wish to apply. In this case, for a small number of groups <code>apply</code> with a custom function may still offer reasonable performance.</p>

<h1><code>pd.DataFrame.apply</code> column-wise: a mixed bag</h1>

<p><code>pd.DataFrame.apply</code> column-wise (<code>axis=0</code>) is an interesting case. For a small number of rows versus a large number of columns, it's almost always expensive. For a large number of rows relative to columns, the more common case, you may <em>sometimes</em> see significant performance improvements using <code>apply</code>:</p>

<pre><code># Python 3.7, Pandas 0.23.4
np.random.seed(0)
df = pd.DataFrame(np.random.random((10**7, 3)))     # Scenario_1, many rows
df = pd.DataFrame(np.random.random((10**4, 10**3))) # Scenario_2, many columns

                                               # Scenario_1  | Scenario_2
%timeit df.sum()                               # 800 ms      | 109 ms
%timeit df.apply(pd.Series.sum)                # 568 ms      | 325 ms

%timeit df.max() - df.min()                    # 1.63 s      | 314 ms
%timeit df.apply(lambda x: x.max() - x.min())  # 838 ms      | 473 ms

%timeit df.mean()                              # 108 ms      | 94.4 ms
%timeit df.apply(pd.Series.mean)               # 276 ms      | 233 ms
</code></pre>

<hr>

<p><sup>1</sup> There are exceptions, but these are usually marginal or uncommon. A couple of examples:</p>

<ol>
<li><code>df['col'].apply(str)</code> may slightly outperform <code>df['col'].astype(str)</code>.</li>
<li><code>df.apply(pd.to_datetime)</code> working on strings doesn't scale well with rows versus a regular <code>for</code> loop.</li>
</ol>
","9209546","","4909087","","2020-02-20 18:23:46","2020-02-20 18:23:46","","","","7","","",""
"54618056","2","","54617101","2019-02-10 15:40:24","","14","","<p>TL;DR This is UB.</p>

<p><a href=""https://timsong-cpp.github.io/cppwp/basic.life#7"" rel=""noreferrer"">[basic.life]</a></p>

<blockquote>
  <p>Similarly, before the lifetime of an object has started but after the storage which the object will occupy has been allocated or, after the lifetime of an object has ended and before the storage which the object occupied is reused or released, any glvalue that refers to the original object may be used but only in limited ways. For an object under construction or destruction, see [class.cdtor]. Otherwise, such a glvalue refers to allocated storage, and using the properties of the glvalue that do not depend on its value is well-defined. The program has undefined behavior if: [...]</p>
  
  <ul>
  <li>the glvalue is used to call a non-static member function of the object, or</li>
  </ul>
</blockquote>

<p>By <a href=""https://timsong-cpp.github.io/cppwp/class.union#1"" rel=""noreferrer"">definition</a>, an inactive member of an union isn't within its lifetime.</p>

<hr>

<p>A possible workaround is to use C++20 <a href=""https://en.cppreference.com/w/cpp/language/attributes/no_unique_address"" rel=""noreferrer""><code>[[no_unique_address]]</code></a></p>

<pre><code>struct Point
{
    int&amp; get_x() { return xy[0]; }
    int&amp; get_y() { return xy[1]; }
    [[no_unique_address]] property&lt;Point, int, &amp;Point::get_x&gt; x;
    [[no_unique_address]] property&lt;Point, int, &amp;Point::get_y&gt; y;
    std::array&lt;int, 2&gt; xy;
};

static_assert(offsetof(Point, x) == 0 &amp;&amp; offsetof(Point, y) == 0);
</code></pre>
","4832499","","734069","","2019-02-10 16:07:18","2019-02-10 16:07:18","","","","14","","",""
"54984333","2","","54869278","2019-03-04 13:29:46","","2","","<p><strong>TL;DR:</strong> No, there's currently no official way to center the title on a toolbar.</p>

<hr>

<p>I don't think there is an official way to do it, at least not yet. But I know that the <a href=""https://flutter.dev"" rel=""nofollow noreferrer"">Flutter</a> framework supports it and it's pretty straight forward: you simply need to pass <code>centerTitle: true</code> to the appbar constructor, as described in this <a href=""https://stackoverflow.com/a/43982943/5861618"">answer</a>. And there's a good chance that the apps you've mentioned in your question were built with Flutter, since both are from Google.</p>

<p>I think the closest workaround to your expected layout is having the TextView on top of the Toolbar, as shown <a href=""https://stackoverflow.com/a/39272021/5861618"">here</a>:</p>

<pre><code>&lt;android.support.design.widget.AppBarLayout
    android:id=""@+id/appbar_layout""
    android:layout_width=""match_parent""
    android:layout_height=""wrap_content""&gt;
    &lt;RelativeLayout
        android:layout_width=""match_parent""
        android:layout_height=""wrap_content""&gt;

        &lt;android.support.v7.widget.Toolbar
            android:id=""@+id/toolbar""
            android:layout_width=""match_parent""
            android:layout_height=""wrap_content""
            android:theme=""@style/ThemeOverlay.AppCompat.ActionBar""&gt;
        &lt;/android.support.v7.widget.Toolbar&gt;

        &lt;TextView
            android:layout_centerInParent=""true""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:text=""@string/app_name""/&gt;

    &lt;/RelativeLayout&gt;
&lt;/android.support.design.widget.AppBarLayout&gt;
</code></pre>

<p>But it would be really nice if the official Android API could support this the same way flutter does. Maybe you'd like to send a feature request to the <a href=""https://issuetracker.google.com/issues/new?component=439535&amp;template=1121918"" rel=""nofollow noreferrer"">Material Components Android Issue Tracker</a>?</p>
","5861618","","","","","2019-03-04 13:29:46","","","","3","","",""
"54984866","2","","54869278","2019-03-04 14:02:53","","0","","<p>How about <code>textAlignment=""center""</code>? a <code>RelativeLayout</code> does the trick, when <code>AppCompatTextView</code> has set <code>layout_width=""match_parent""</code>; for example:</p>

<pre><code>&lt;?xml version=""1.0"" encoding=""utf-8""?&gt;
&lt;layout
    xmlns:android=""http://schemas.android.com/apk/res/android""&gt;

    &lt;androidx.appcompat.widget.LinearLayoutCompat
        android:id=""@+id/customView""
        android:minHeight=""?android:attr/actionBarSize""
        android:layout_height=""wrap_content""
        android:layout_width=""match_parent""
        android:orientation=""vertical""
        android:gravity=""top""&gt;

        &lt;RelativeLayout
            android:layout_width=""match_parent""
            android:layout_height=""match_parent""&gt;

            &lt;!-- Home Button --&gt;
            &lt;include
                layout=""@layout/button_home_menu""
                android:layout_width=""wrap_content""
                android:layout_height=""wrap_content""
                android:layout_gravity=""start""/&gt;

            &lt;androidx.appcompat.widget.LinearLayoutCompat
                android:layout_width=""match_parent""
                android:layout_height=""wrap_content""
                android:orientation=""vertical""
                android:padding=""8dp""&gt;

                &lt;androidx.appcompat.widget.AppCompatTextView
                    android:id=""@+id/title""
                    android:layout_width=""match_parent""
                    android:layout_height=""wrap_content""
                    android:text=""@string/app_name""
                    android:textAlignment=""center""
                    android:textAppearance=""?android:attr/textAppearanceLarge""
                    android:textSize=""18sp""
                    android:textStyle=""bold""/&gt;

                &lt;androidx.appcompat.widget.AppCompatTextView
                    android:id=""@+id/subtitle""
                    android:layout_width=""match_parent""
                    android:layout_height=""wrap_content""
                    android:text=""@string/app_version""
                    android:textAlignment=""center""
                    android:textAppearance=""?android:attr/textAppearanceMedium""
                    android:textSize=""12sp""
                    android:textStyle=""bold""/&gt;

            &lt;/androidx.appcompat.widget.LinearLayoutCompat&gt;

        &lt;/RelativeLayout&gt;

    &lt;/androidx.appcompat.widget.LinearLayoutCompat&gt;

&lt;/layout&gt;
</code></pre>

<p>the down-side is, that when showing several menu-items as action buttons - or when displaying extraordinary long strings as title, the title may overlap them - but when only showing one or two action buttons in combination with a title that fits the visually available width, this works just fine - that's because menu config <code>ifRoom</code> would always apply, because there is room. else one could only measure, which side of the toolbar has the most wide items' container - and then adjust the width on the other side's items' container. scaling the font-size depending on the available room might also be an option, to make it fit dynamically.</p>
","549372","","549372","","2019-03-04 14:31:26","2019-03-04 14:31:26","","","","7","","",""
"55213336","2","","55212788","2019-03-18 00:33:05","","1","","<p>From an Android App Bundle, you can generate a ""universal APK"" using <a href=""https://developer.android.com/studio/command-line/bundletool"" rel=""nofollow noreferrer"">bundletool</a> build-apks command with the <code>--mode=universal</code> flag. This will generate a single ""fat"" APK that is compatible with all devices (that your app supports).</p>

<p>I know this isn't strictly answering your question, but trying to merge the APKs is not only a complex task, but will result in a lot of cases in something incorrect.</p>
","4265103","","","","","2019-03-18 00:33:05","","","","4","","",""
"55244911","2","","55243660","2019-03-19 15:45:04","","8","","<p>I don't know the full answer and I have next to no knowledge of the internal workings of the Rust compiler, but here are some deductions I've come to from my experience with Rust.</p>

<p>Information about types in Rust can ""flow backwards"", but there are certain times when Rust needs to know (for absolute certain) the type of an expression. In these situations, it must ""already"" know the type, i.e. it will not continue to look forward.</p>

<p>From what I've seen, this situation is limited to method calls. I suspect it has something to do with the fact that methods can be implemented on traits, which substantially complicates things. I doubt that there are any traits in scope with a method named <code>some_method</code>, but I think that whenever the Rust compiler encounters a method call it requires the type to already be known for certain.</p>

<p>You can see this happen a <em>lot</em> with method calls on types which implement traits, the most common being the <code>collect</code> method on a type that implements the <code>Iter</code> trait. You will be able to call <code>collect</code>, but won't be able to call any methods on the result unless you specify the type.</p>

<p>So this works:</p>

<pre class=""lang-rust prettyprint-override""><code>fn create_numbers(last_num: i32) -&gt; Vec&lt;i32&gt; {
    let x = (0..10).collect();
    x
}
</code></pre>

<p>But this does not:</p>

<pre class=""lang-rust prettyprint-override""><code>fn create_numbers(last_num: i32) -&gt; Vec&lt;i32&gt; {
    let x = (0..10).collect();
    // In order to call `push`, we need to *already* know the type
    // of x for ""absolute certain"", and the Rust compiler doesn't 
    // keep looking forward
    x.push(42);
    x
}
</code></pre>
","7343786","","","","","2019-03-19 15:45:04","","","","2","","",""
"55251229","2","","55243660","2019-03-19 23:04:09","","20","","<p>Based on known facts (see below), it fails to compile because:</p>

<ul>
<li>the type checker goes through the function <strong>in the order it was written</strong>,</li>
<li>in <code>let example = Default::default();</code>, <code>example</code> can be anything which implements <code>Default</code>,</li>
<li>field accesses &amp; method calls require a known type,</li>
<li>""anything implementing <code>Default</code>"" is not a known type.</li>
</ul>

<p>I replaced <code>some_method()</code> with a field access and it produces same error.</p>

<hr>

<p>From <a href=""https://github.com/rust-lang/rust/issues/42333"" rel=""nofollow noreferrer"">Type inference depends on ordering (#42333)</a>:</p>

<blockquote>
  <pre class=""lang-rust prettyprint-override""><code>use std::path::PathBuf;

pub struct Thing {
    pub f1: PathBuf,
}

fn junk() -&gt; Vec&lt;Thing&gt; {
    let mut things = Vec::new();
    for x in vec![1, 2, 3] {
        if x == 2 {
            for thing in things.drain(..) {
                thing.f1.clone();
            }
            return vec![]
        }
        things.push(Thing{f1: PathBuf::from(format!(""/{}"", x))});
    }   
    things  
}               

fn main() { 
    junk();
}
</code></pre>
</blockquote>

<p>This produces a compiler error with Rust 1.33.0:</p>

<pre class=""lang-none prettyprint-override""><code>error[E0282]: type annotations needed
  --&gt; src/main.rs:13:17
   |
9  |     let mut things = Vec::new();
   |         ---------- consider giving `things` a type
...
13 |                 thing.f1.clone();
   |                 ^^^^^ cannot infer type
   |
   = note: type must be known at this point
</code></pre>

<p>You should focus on the following comments from <a href=""https://github.com/eddyb"" rel=""nofollow noreferrer"">eddyb</a> (a well-known member of the the Rust language design team <a href=""https://internals.rust-lang.org/t/subteam-reports-2016-05-09/3449"" rel=""nofollow noreferrer"">since May, 2016</a>).</p>

<p><a href=""https://github.com/rust-lang/rust/issues/42333#issuecomment-306694398"" rel=""nofollow noreferrer"">Comment #1</a>:</p>

<blockquote>
  <p>This is a known limitation of the in-order type-checker. While <em>inference</em> flows freely, <code>thing.f1.clone()</code> is checked <em>before</em> <code>things.push(Thing {...})</code> so it isn't known that <code>thing: Thing</code> when you try to access the <code>f1</code> field. We may in the future move away from this, but there are no immediate plans.</p>
</blockquote>

<p>What's more important is <a href=""https://github.com/rust-lang/rust/issues/42333#issuecomment-306777156"" rel=""nofollow noreferrer"">comment #2</a>:</p>

<blockquote>
  <p>What I mean is that the type-checker goes through the function <em>in the order it was written</em>. [...] Fields accesses and methods calls are simply not supported unless the type <em>is already known</em>.</p>
</blockquote>
","581190","","155423","","2019-03-31 14:20:54","2019-03-31 14:20:54","","","","5","","",""
"54021651","2","","54021490","2019-01-03 11:46:03","","6","","<p>This is behaviour is in the documentation of the <code>method</code> parameter:</p>

<pre><code>method : {‘pad’, ‘ffill’, ‘bfill’, None}

The method to use when for replacement, when to_replace is a scalar, list or tuple and value is None.
</code></pre>

<p>So in your example <code>to_replace</code> is a <em>scalar</em>, and <code>value</code> is <code>None</code>. The method by default is <code>pad</code>, from the documentation of <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.fillna.html"" rel=""noreferrer"">fillna</a>:</p>

<pre><code>pad / ffill: propagate last valid observation forward to next valid
</code></pre>
","4001592","","4001592","","2019-01-03 11:48:07","2019-01-03 11:48:07","","","","11","","",""
"54607078","2","","54602662","2019-02-09 14:17:42","","8","","<p>What the cases have in common is not the appearance of the original view controller but the disappearance of the presented/pushed view controller. Therefore, one simple and clear solution seems to be a protocol-and-delegate architecture. Declare a pair of protocols, as follows:</p>

<pre><code>protocol Home : class {
    func comingHome()
}
protocol Away : class {
    var home : Home? {get set}
}
extension Away where Self : UIViewController {
    func notifyComingHome() {
        if self.isBeingDismissed || self.isMovingFromParent {
            self.home?.comingHome()
        }
    }
}
</code></pre>

<ul>
<li><p>The home view controller must adopt Home, and must set each view controller's <code>home</code> to <code>self</code> when it presents or pushes it. </p></li>
<li><p>The presented or pushed view controllers must adopt Away, and must implement <code>viewWillDisappear</code> as follows:</p>

<pre><code>override func viewWillDisappear(_ animated: Bool) {
    super.viewWillDisappear(animated)
    self.notifyComingHome()
}
</code></pre></li>
</ul>

<p>This works for the four cases listed in the question. It's a pity, though, that Cocoa Touch doesn't do this for you automatically.</p>

<hr>

<p><strong>EDIT</strong> This approach has become even more important in my apps now that iOS 13 has forced nonfullscreen presented view controllers upon us. Also, I have subclassed UIAlertController so that it conforms to Away.</p>
","341994","","341994","","2019-10-09 12:31:15","2019-10-09 12:31:15","","","","4","","",""
"56088431","2","","56058494","2019-05-11 08:06:34","","4","","<p><strong>edit</strong>: This answer is incorrect. It remains here for posterity.</p>

<p>Let's begin by recalling why <code>Pin</code> was introduced in the first place: we want to statically ensure that self-referential futures cannot be moved, thus invalidating their internal references.</p>

<p>With that in mind, let's take a look at the definition of <code>Map</code>.</p>

<pre><code>pub struct Map&lt;Fut, F&gt; {
    future: Fut,
    f: Option&lt;F&gt;,
}
</code></pre>

<p><code>Map</code> has two fields, the first one stores a future, the second stores a closure which maps the result of that future to another value. We wish to support storing self-referential types directly in <code>future</code> without placing them behind a pointer. This means that if <code>Fut</code> is a self-referential type, <code>Map</code> cannot be moved once it is constructed. That is why we must use <code>Pin&lt;&amp;mut Map&gt;</code> as the receiver for <code>Future::poll</code>. If a normal mutable reference to a <code>Map</code> containing a self-referential future was ever exposed to an implementor of <code>Future</code>, users could cause UB using only safe code by causing the <code>Map</code> to be moved using <code>mem::replace</code>. </p>

<p>However, we don't need to support storing self-referential types in <code>f</code>. If we assume that the self-referential part of a <code>Map</code> is wholly contained in <code>future</code>, we can freely modify <code>f</code> as long as we don't allow <code>future</code> to be moved.</p>

<p>While a self-referential closure would be very unusual, the assumption that <code>f</code> be safe to move (which is equivalent to <code>F: Unpin</code>) is not explicitly stated anywhere. However, we still move the value in <code>f</code> in <code>Future::poll</code> by calling <code>take</code>! I think this is indeed a bug, but I'm not 100% sure. I think the <code>f()</code> getter should require <code>F: Unpin</code> which would mean <code>Map</code> can only implement <code>Future</code> when the closure argument is safe to be moved from behind a <code>Pin</code>.</p>

<p>It's very possible that I'm overlooking some subtleties in the pin API here, and the implementation is indeed safe. I'm still wrapping my head around it as well.</p>
","11389321","","11389321","","2019-06-22 17:41:50","2019-06-22 17:41:50","","","","4","","",""
"55417323","2","","55417186","2019-03-29 12:19:45","","1","","<p>Personnally i don't like mixing macro/preprocessor-level evaluation and compilation-level test.</p>

<p>There seem to be no standard way to do it at the macro level, but hacks exists here:
<a href=""https://stackoverflow.com/questions/2124339/c-preprocessor-va-args-number-of-arguments"">C++ preprocessor __VA_ARGS__ number of arguments</a></p>
","2409837","","","","","2019-03-29 12:19:45","","","","2","","",""
"55420185","2","","55417186","2019-03-29 14:58:09","","2","","<p><em>Note: this version of this answer is the result of a major rewrite. Some claims have been removed and others significantly modified, so as to focus on and better justify the most important points.</em></p>

<h2><s>Variadic macros and their variable arguments</s></h2>

<p>[Controversial, much disputed position removed.  It was more distracting than helpful.]</p>

<hr>

<h2>The proposed macro</h2>

<blockquote>
  <p>I think I've found an easy solution that is both compact and standard:</p>

<pre><code>#define is_empty(...) ( sizeof( (char[]){#__VA_ARGS__} ) == 1 )
</code></pre>
</blockquote>

<p>We can sidestep any question of undefinedness by considering this variation:</p>

<pre><code>#define is_empty(dummy, ...) ( sizeof( (char[]){#__VA_ARGS__} ) == 1 )
</code></pre>

<p>.  The same considerations apply to the interpretation of empty <em>vs.</em> non-empty variable arguments here as do in your original version.  Specifically,</p>

<blockquote>
  <p>Based on C17 6.10.3.2/2 (the # operator): ""<em>The character string
  literal corresponding to an empty argument is """"</em>"", I believe that
  <code>#__VA_ARGS__</code> is always well-defined.</p>
</blockquote>

<p>I agree.  Also relevant here is section 6.10.3.1/2: ""An identifier <code>__VA_ARGS__</code> that occurs in the replacement list shall be treated as if it were a parameter [...].""</p>

<blockquote>
  <p>Explanation of the macro:</p>
  
  <ul>
  <li>This creates a compound literal char array and initializes it by using a string literal.</li>
  </ul>
</blockquote>

<p>Yes.</p>

<blockquote>
  <ul>
  <li>No matter what is passed to the macro, all arguments will be translated to one long string literal.</li>
  </ul>
</blockquote>

<p>Yes.  <code>__VA_ARGS__</code> is treated as <em>a</em> (one) parameter.  If there are multiple variable arguments then that can impact the rescan, but the stringification operator has its effect at the point of the macro expansion, before rescanning.</p>

<blockquote>
  <ul>
  <li>In case the macro list is empty, the string literal will become """", which consists only of a null terminator and therefore has size 1.</li>
  </ul>
</blockquote>

<p>Yes.</p>

<blockquote>
  <ul>
  <li>In all other cases, it will have a size greater than 1.</li>
  </ul>
</blockquote>

<p>Yes.  This holds even in the case of two zero-token arguments in the variable argument list, <code>is_empty(dummy,,)</code>, where <code>#__VA_ARGS__</code> will expand to <code>"",""</code>.  It also holds in the case of an argument consisting of an empty string literal, <code>is_empty(dummy, """")</code>, where <code>#__VA_ARGS__</code> will expand to <code>""\""\""""</code>.</p>

<p><strong>HOWEVER</strong>, that still might not serve your purpose.  In particular, you cannot use it in a conditional compilation directive.  Although <code>sizeof</code> expressions are <em>generally</em> allowed in integer constant expressions, such as form the control expressions of such directives,</p>

<ul>
<li>lexically, as a preprocessing token, <code>sizeof</code> is categorized as an identifier (there is no distinction between keywords and identifiers for preprocessing tokens), and</li>
<li><p>according to <a href=""https://port70.net/~nsz/c/c11/n1570.html#6.10.1p4"" rel=""nofollow noreferrer"">paragraph 6.10.1/4</a> of the standard, when processing the control expression of a conditional compilation directive,</p>

<blockquote>
  <p>After all replacements due to macro expansion and the defined unary operator have been performed, <strong>all remaining identifiers (including those lexically identical to keywords) are replaced with the pp-number 0</strong></p>
</blockquote>

<p>(emphasis added).</p></li>
</ul>

<p>Therefore, if your macro is used as or in the control expression of a conditional compilation directive then it will be evaluated as if the <code>sizeof</code> operator in it were replaced by <code>0</code>, yielding an invalid expression.</p>
","2402272","","2402272","","2019-03-31 23:19:48","2019-03-31 23:19:48","","","","19","","",""
"55013871","2","","54776759","2019-03-06 00:53:41","","0","","<p>Perhaps <em>slightly</em> cleaner (YMMV) is to set getter traps (like you did), but in a worker so that you don't pollute your main global scope. I didn't need to use <code>with</code> though, so perhaps that is an improvement.</p>

<p><strong>Worker ""Thread""</strong></p>

<pre><code>//worker; foo.js
addEventListener('message', function ({ data }) {
  try {
    eval(`
      for (k in self) {
        Object.defineProperty(self, k, {
          get: function () {
            throw new ReferenceError(':(');
          }
        });
      }
      // code to execute
      ${data}
    `);
    postMessage('no error thrown ');
  } catch (e) {
    postMessage(`error thrown: ${e.message}`);
  }
});
</code></pre>

<p><strong>Main ""Thread""</strong></p>

<pre><code>var w = new Worker('./foo.js');
w.addEventListener('message', ({data}) =&gt; console.log(`response: ${data}`));
w.postMessage('const foo = location');
</code></pre>

<p><a href=""https://i.stack.imgur.com/KzzbS.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/KzzbS.png"" alt=""enter image description here""></a></p>

<hr>

<p>Another option that may be worth exploring is <a href=""https://pptr.dev/"" rel=""nofollow noreferrer"">Puppeteer</a>.</p>
","1244884","","","","","2019-03-06 00:53:41","","","","3","","",""
"55044649","2","","55044324","2019-03-07 13:12:05","","14","","<p>Yes, I think your interpretation is correct. In two's complement, that are no operations that could generate a negative zero, because the concept here doesn't exist: any value that has the sign bit set is necessarily less than <code>0</code>.</p>

<p>BTW: It is very likely that the exotic sign representations will be removed from C2x, so all of this will disappear. </p>
","366377","","","","","2019-03-07 13:12:05","","","","5","","",""
"55044981","2","","55044324","2019-03-07 13:28:24","","12","","<p>Your interpretation is correct.</p>

<p>Going up to paragraph 2 of 6.2.6.2:</p>

<blockquote>
  <p>For signed  integer  types,  the  bits  of  the  object 
  representation  shall  be  divided  into  three groups:  value  bits, 
  padding  bits,  and  the  sign  bit.  There  need  not  be  any
  padding  bits; signed char shall  not  have  any  padding  bits.
  There  shall  be  exactly  one  sign  bit. Each  bit  that  is  a 
  value  bit  shall  have  the  same  value  as  the  same  bit  in  the
  object representation of the corresponding unsigned type (if there are
  M value bits in the signed type and N in the unsigned type, then M ≤ N
  ).  If the sign bit is zero, it shall not affect the  resulting 
  value.   If  the  sign  bit  is  one,  the  value  shall  be  modified
  in  one  of  the following ways:</p>
  
  <ul>
  <li>the corresponding value with sign bit 0 is negated ( sign and magnitude );</li>
  <li>the sign bit has the value − (2<sup>M</sup>)( two’s complement );</li>
  <li>the sign bit has the value − (2<sup>M</sup> − 1) ( ones’ complement ).</li>
  </ul>
  
  <p>Which of these applies is implementation-defined, <strong>as is whether the
  value with sign bit 1 and  all  value  bits  zero  (for  the  first 
  two),  or  with  sign  bit  and  all  value  bits  1  (for  ones’
  complement),  is  a  trap  representation  or  a  normal  value.   In 
  the  case  of  sign  and magnitude  and  ones’  complement,  if  this 
  representation  is  a  normal  value  it  is  called  a negative zero.</strong></p>
</blockquote>

<p>This means an implementation using either one's complement or sign and magnitude has, for a given size integer type, a specific representation which must be either negative zero or a trap representation.  It's then up to the implementation to choose which one of those applies.</p>

<p>As an example, suppose a system has sign and magnitude representation and a 32 bit <code>int</code> with no padding.  Then the representation that would be negative zero, if it is supported, is <code>0x80000000</code>.</p>

<p>Now suppose the following operations are performed:</p>

<pre><code> int x = 0x7fffffff;
 x = ~x;
</code></pre>

<p>If the implementation supports negative zero, the <code>~</code> operator will generate <code>-0</code> as the result and store it in <code>x</code>.  If it does not, it creates a trap representation and invokes undefined behavior as per paragraph 4.</p>
","1687119","","1687119","","2019-03-07 14:27:08","2019-03-07 14:27:08","","","","0","","",""
"55391240","2","","55390991","2019-03-28 06:18:31","","13","","<p>The bitwise operators will result in a <em>signed</em> 32 bit number, meaning that if the bit at position 31 (counting from the least significant bit at the right, which is bit 0) is 1, the number will be negative.</p>

<p>To avoid this from happening, use other operators than <code>&lt;&lt;</code> or <code>|</code>, which both result in a signed 32-bit number. For instance:</p>

<pre><code>(bit * 2**e) + make (more, e + 4)
</code></pre>

<h3>Forcing <em>unsigned</em> 32-bit</h3>

<p>Bit shifting operators are designed to force the result into the signed 32-bit range, at least that is claimed on <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#Signed_32-bit_integers"" rel=""nofollow noreferrer"">mdn</a> (at the time of writing):</p>

<blockquote>
  <p>The operands of all bitwise operators are converted to signed 32-bit integers</p>
</blockquote>

<p>This is in fact not entirely true. The <code>&gt;&gt;&gt;</code> operator is an exception to this. <a href=""http://www.ecma-international.org/ecma-262/6.0/#sec-unsigned-right-shift-operator-runtime-semantics-evaluation"" rel=""nofollow noreferrer"">EcmaScript 2015, section 12.5.8.1</a> states that the operands are mapped to <em>unsigned</em> 32 bit before shifting in the 0 bits. So even if you would shift <em>zero</em> bits, you'd see that effect.</p>

<p>You would only have to apply it once to the final value, like for instance in your <code>print</code> function:</p>

<pre><code>console.log((n&gt;&gt;&gt;0).toString(2))
</code></pre>

<h3>BigInt solution</h3>

<p>If you need even more than 32 bits, and your JavaScript engine supports <a href=""https://github.com/tc39/proposal-bigint"" rel=""nofollow noreferrer"">BigInt</a> like <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/BigInt"" rel=""nofollow noreferrer"">some</a> already do, then use BigInts for the operands involved in the bitwise operators -- these will then <em>not</em> use the 32-bit signed number wrapping (notice the <code>n</code> suffixes):</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const make = ([ bit, ...more ], e = 0n) =&gt;
  bit === undefined
    ? 0n
    : (bit &lt;&lt; e) + make (more, e + 4n)

const print = n =&gt;
  console.log(n.toString(2))

// Test
for (let i=1; i&lt;20; i++) {
    print(make(Array(i).fill(15n))) // longer and longer array...
}</code></pre>
</div>
</div>
</p>

<p>NB: If you get an error running the above, try again with Chrome...</p>
","5459839","","5459839","","2019-03-28 18:36:56","2019-03-28 18:36:56","","","","5","","",""
"56994211","2","","56615513","2019-07-11 17:07:12","","8","","<p>The workaround you found is the 'official' way to disable this behavior, as explained in a <a href=""https://twitter.com/rincewindsama/status/1143917253533949952"" rel=""noreferrer"">thread on Twitter</a> by David Duncan who is on the iOS System Experience team at Apple.</p>

<blockquote>
  <p>to control what happens when the UINavigationBar is completely
  unfurled, you want to set the scrollEdgeAppearance. By setting
  standardAppearance and scrollEdgeAppearance to the same values, you
  will get a bar that doesn't change.</p>
</blockquote>

<p>An Apple app that does not disable this behavior is the Settings app.</p>
","1795356","","","","","2019-07-11 17:07:12","","","","1","","",""
"58252664","2","","58252538","2019-10-05 22:01:33","","21","","<p>This is hard-coded in the definition of <code>static_cast</code>:</p>

<blockquote>
  <p><strong>[expr.static.cast]</strong> (emphasis mine)</p>
  
  <p><a href=""https://timsong-cpp.github.io/cppwp/n4659/expr.static.cast#1"" rel=""noreferrer"">1</a> The result of the expression <code>static_­cast&lt;T&gt;(v)</code> is the result
  of converting the expression <code>v</code> to type <code>T</code>. <strong>If <code>T</code> is an lvalue
  reference type or an rvalue reference to function type, the result is
  an lvalue</strong>; if <code>T</code> is an rvalue reference to object type, the result is
  an xvalue; otherwise, the result is a prvalue. The <code>static_­cast</code>
  operator shall not cast away constness.</p>
</blockquote>

<p><code>decltype</code> respects the value category of its operand, and produces an lvalue reference for lvalue expressions.</p>

<p>The reasoning may be due to function names themselves always being lvalues, and so an rvalue of a function type cannot appear ""in the wild"". As such, casting to that type probably makes little sense.</p>
","817643","","","","","2019-10-05 22:01:33","","","","1","","",""
"54357469","2","","54357468","2019-01-25 00:39:13","","34","","<p>You can update both the version name and the version code number in the same place in <em>pubspec.yaml</em>. Just separate them with a <code>+</code> sign. For example:</p>

<pre><code>version: 2.0.0+8
</code></pre>

<p>This means</p>

<ul>
<li>The version name is <code>2.0.0</code></li>
<li>The version code is <code>8</code></li>
</ul>

<p>This is described in the documentation of a new project (but you might have deleted that if you are working on an old project):</p>

<blockquote>
  <p>The following defines the version and build number for your application.
  A version number is three numbers separated by dots, like 1.2.43
  followed by an optional build number separated by a +.
  Both the version and the builder number may be overridden in flutter
  build by specifying --build-name and --build-number, respectively.
  Read more about versioning at semver.org.</p>
  
  <p><code>version: 1.0.0+1</code></p>
</blockquote>

<p>By default a Flutter project is set up to automatically update the Android and iOS settings based on the <code>version</code> setting in pubspec.yaml when you build the project.</p>

<p><strong>See also:</strong></p>

<ul>
<li><a href=""https://stackoverflow.com/questions/53672171/how-to-get-build-and-version-number-of-flutter-app"">How to get build and version number of Flutter app</a></li>
</ul>
","3681880","","","","","2019-01-25 00:39:13","","","","3","","",""
"56243709","2","","56162109","2019-05-21 17:39:09","","4","","<p>Your format file is representing import of a tab separated values file, but in the source path you are referring to an xslx file.<br>
Xslx file is an ZIP archive of multiple XML files, bulk import will not be able to process it. To open it you need to use Microsoft Jet or ACE driver, you have some examples here:
<a href=""https://blog.learningtree.com/using-openrowset-to-read-excel-worksheets-from-sql-server-part-2-linked-sql-queries/"" rel=""nofollow noreferrer"">using-openrowset-to-read-excel</a>. You will need to download file from blob storage to local disks before processing it. You can use SQL Agent or SSIS to download it.  </p>

<p>Other option will be to save your data as CSV or tab separated file and load it directly from blob storage.</p>
","10542581","","10542581","","2019-05-22 20:46:39","2019-05-22 20:46:39","","","","6","","",""
"56699427","2","","56663624","2019-06-21 08:15:36","","1","","<p>Found a workaround, by using what I wrote <a href=""https://stackoverflow.com/a/30401010/878126""><strong>here</strong></a> , and mapping each StorageVolume with a real file as I wrote <a href=""https://stackoverflow.com/a/56695191/878126""><strong>here</strong></a>. Sadly this might not work in the future, as it uses a lot of ""tricks"" :</p>

<pre><code>        for (storageVolume in storageVolumes) {
            val volumePath = FileUtilEx.getVolumePath(storageVolume)
            if (volumePath == null) {
                Log.d(""AppLog"", ""storageVolume \""${storageVolume.getDescription(this)}\"" - failed to get volumePath"")
            } else {
                val statFs = StatFs(volumePath)
                val availableSizeInBytes = statFs.availableBytes
                val totalBytes = statFs.totalBytes
                val formattedResult = ""availableSizeInBytes:${android.text.format.Formatter.formatShortFileSize(this, availableSizeInBytes)} totalBytes:${android.text.format.Formatter.formatShortFileSize(this, totalBytes)}""
                Log.d(""AppLog"", ""storageVolume \""${storageVolume.getDescription(this)}\"" - volumePath:$volumePath - $formattedResult"")
            }
        }
</code></pre>

<p>Seems to work on both emulator (that has primary storage and SD-card) and real device (Pixel 2), both on Android Q beta 4.</p>

<p>A bit better solution which wouldn't use reflection, could be to put a unique file in each of the paths we get on <code>ContextCompat.getExternalCacheDirs</code>, and then try to find them via each of the StorageVolume instances. It is tricky though because you don't know when to start the search, so you will need to check various paths till you reach the destination. Not only that, but as I wrote <a href=""https://stackoverflow.com/q/56657639/878126""><strong>here</strong></a>, I don't think there is an official way to get the Uri or DocumentFile or File or file-path of each StorageVolume.</p>

<p>Anyway, weird thing is that the total space is lower than the real one. Probably as it's a partition of what's the maximum that's really available to the user.</p>

<p>I wonder how come various apps (such as file manager apps, like Total Commander) get the real total device storage.</p>

<hr>

<p>EDIT: OK got another workaround, which is probably more reliable, based on the <a href=""https://developer.android.com/reference/android/os/storage/StorageManager#getStorageVolume(java.io.File)"" rel=""nofollow noreferrer""><strong>storageManager.getStorageVolume(File)</strong></a> function. </p>

<p>So here is the merging of the 2 workarounds:</p>

<pre><code>fun getStorageVolumePath(context: Context, storageVolumeToGetItsPath: StorageVolume): String? {
    //first, try to use reflection
    if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.LOLLIPOP)
        return null
    try {
        val storageVolumeClazz = StorageVolume::class.java
        val getPathMethod = storageVolumeClazz.getMethod(""getPath"")
        val result = getPathMethod.invoke(storageVolumeToGetItsPath) as String?
         if (!result.isNullOrBlank())
            return result
    } catch (e: Exception) {
        e.printStackTrace()
    }
    //failed to use reflection, so try mapping with app's folders
    val storageVolumeUuidStr = storageVolumeToGetItsPath.uuid
    val externalCacheDirs = ContextCompat.getExternalCacheDirs(context)
    val storageManager = context.getSystemService(Context.STORAGE_SERVICE) as StorageManager
    for (externalCacheDir in externalCacheDirs) {
        val storageVolume = storageManager.getStorageVolume(externalCacheDir) ?: continue
        val uuidStr = storageVolume.uuid
        if (uuidStr == storageVolumeUuidStr) {
            //found storageVolume&lt;-&gt;File match
            var resultFile = externalCacheDir
            while (true) {
                val parentFile = resultFile.parentFile ?: return resultFile.absolutePath
                val parentFileStorageVolume = storageManager.getStorageVolume(parentFile)
                        ?: return resultFile.absolutePath
                if (parentFileStorageVolume.uuid != uuidStr)
                    return resultFile.absolutePath
                resultFile = parentFile
            }
        }
    }
    return null
}
</code></pre>

<p>And to show the available and total space, we use StatFs as before:</p>

<pre><code>for (storageVolume in storageVolumes) {
    val storageVolumePath = getStorageVolumePath(this@MainActivity, storageVolume) ?: continue
    val statFs = StatFs(storageVolumePath)
    val availableSizeInBytes = statFs.availableBytes
    val totalBytes = statFs.totalBytes
    val formattedResult = ""availableSizeInBytes:${android.text.format.Formatter.formatShortFileSize(this, availableSizeInBytes)} totalBytes:${android.text.format.Formatter.formatShortFileSize(this, totalBytes)}""
    Log.d(""AppLog"", ""storageVolume \""${storageVolume.getDescription(this)}\"" - storageVolumePath:$storageVolumePath - $formattedResult"")
}
</code></pre>

<hr>

<p>EDIT: shorter version, without using the real file-path of the storageVolume:</p>

<pre><code>fun getStatFsForStorageVolume(context: Context, storageVolumeToGetItsPath: StorageVolume): StatFs? {
    //first, try to use reflection
    if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.N)
        return null
    try {
        val storageVolumeClazz = StorageVolume::class.java
        val getPathMethod = storageVolumeClazz.getMethod(""getPath"")
        val resultPath = getPathMethod.invoke(storageVolumeToGetItsPath) as String?
        if (!resultPath.isNullOrBlank())
            return StatFs(resultPath)
    } catch (e: Exception) {
        e.printStackTrace()
    }
    //failed to use reflection, so try mapping with app's folders
    val storageVolumeUuidStr = storageVolumeToGetItsPath.uuid
    val externalCacheDirs = ContextCompat.getExternalCacheDirs(context)
    val storageManager = context.getSystemService(Context.STORAGE_SERVICE) as StorageManager
    for (externalCacheDir in externalCacheDirs) {
        val storageVolume = storageManager.getStorageVolume(externalCacheDir) ?: continue
        val uuidStr = storageVolume.uuid
        if (uuidStr == storageVolumeUuidStr) {
            //found storageVolume&lt;-&gt;File match
            return StatFs(externalCacheDir.absolutePath)
        }
    }
    return null
}
</code></pre>

<p>Usage:</p>

<pre><code>        for (storageVolume in storageVolumes) {
            val statFs = getStatFsForStorageVolume(this@MainActivity, storageVolume)
                    ?: continue
            val availableSizeInBytes = statFs.availableBytes
            val totalBytes = statFs.totalBytes
            val formattedResult = ""availableSizeInBytes:${android.text.format.Formatter.formatShortFileSize(this, availableSizeInBytes)} totalBytes:${android.text.format.Formatter.formatShortFileSize(this, totalBytes)}""
            Log.d(""AppLog"", ""storageVolume \""${storageVolume.getDescription(this)}\"" - $formattedResult"")
        }
</code></pre>

<p>Note that this solution doesn't require any kind of permission. </p>

<p>--</p>

<p>EDIT: I actually found out that I tried to do it in the past, but for some reason it crashed for me on the SD-card StoraveVolume on the emulator:</p>

<pre><code>        val storageStatsManager = getSystemService(Context.STORAGE_STATS_SERVICE) as StorageStatsManager
        for (storageVolume in storageVolumes) {
            val uuidStr = storageVolume.uuid
            val uuid = if (uuidStr == null) StorageManager.UUID_DEFAULT else UUID.fromString(uuidStr)
            val availableSizeInBytes = storageStatsManager.getFreeBytes(uuid)
            val totalBytes = storageStatsManager.getTotalBytes(uuid)
            val formattedResult = ""availableSizeInBytes:${android.text.format.Formatter.formatShortFileSize(this, availableSizeInBytes)} totalBytes:${android.text.format.Formatter.formatShortFileSize(this, totalBytes)}""
            Log.d(""AppLog"", ""storageVolume \""${storageVolume.getDescription(this)}\"" - $formattedResult"")
        }
</code></pre>

<p>The good news is that for the primary storageVolume, you get the real total space of it.</p>

<p>On a real device it also crashes for the SD-card, but not for the primary one.</p>

<hr>

<p>So here's the latest solution for this, gathering the above:</p>

<pre><code>        for (storageVolume in storageVolumes) {
            val availableSizeInBytes: Long
            val totalBytes: Long
            if (storageVolume.isPrimary) {
                val storageStatsManager = getSystemService(Context.STORAGE_STATS_SERVICE) as StorageStatsManager
                val uuidStr = storageVolume.uuid
                val uuid = if (uuidStr == null) StorageManager.UUID_DEFAULT else UUID.fromString(uuidStr)
                availableSizeInBytes = storageStatsManager.getFreeBytes(uuid)
                totalBytes = storageStatsManager.getTotalBytes(uuid)
            } else {
                val statFs = getStatFsForStorageVolume(this@MainActivity, storageVolume)
                        ?: continue
                availableSizeInBytes = statFs.availableBytes
                totalBytes = statFs.totalBytes
            }
            val formattedResult = ""availableSizeInBytes:${android.text.format.Formatter.formatShortFileSize(this, availableSizeInBytes)} totalBytes:${android.text.format.Formatter.formatShortFileSize(this, totalBytes)}""
            Log.d(""AppLog"", ""storageVolume \""${storageVolume.getDescription(this)}\"" - $formattedResult"")
        }
</code></pre>
","878126","","878126","","2019-07-20 21:37:12","2019-07-20 21:37:12","","","","0","","",""
"56797603","2","","56663624","2019-06-27 19:37:02","","5","","<p>The following uses <code>fstatvfs(FileDescriptor)</code> to retrieve stats without resorting to reflection or traditional file system methods.</p>

<p>To check the output of the program to make sure it is producing reasonable result for total, used and available space I ran the ""df"" command on an Android Emulator running API 29. </p>

<p><strong>Output of ""df"" command in adb shell reporting 1K blocks:</strong></p>

<p>""/data"" corresponds to the ""primary"" UUID used when by StorageVolume#isPrimary is true.</p>

<p>""/storage/1D03-2E0E"" corresponds to the ""1D03-2E0E"" UUID reported by StorageVolume#uuid.</p>

<pre><code>generic_x86:/ $ df
Filesystem              1K-blocks    Used Available Use% Mounted on
/dev/root                 2203316 2140872     46060  98% /
tmpfs                     1020140     592   1019548   1% /dev
tmpfs                     1020140       0   1020140   0% /mnt
tmpfs                     1020140       0   1020140   0% /apex
/dev/block/vde1            132168   75936     53412  59% /vendor

/dev/block/vdc             793488  647652    129452  84% /data

/dev/block/loop0              232      36       192  16% /apex/com.android.apex.cts.shim@1
/data/media                793488  647652    129452  84% /storage/emulated

/mnt/media_rw/1D03-2E0E    522228      90    522138   1% /storage/1D03-2E0E
</code></pre>

<p><strong>Reported by the app using <em>fstatvfs</em> (in 1K blocks):</strong></p>

<blockquote>
  <p>For /tree/primary:/document/primary: 
      Total=793,488 used space=647,652 available=129,452</p>
  
  <p>For /tree/1D03-2E0E:/document/1D03-2E0E: 
      Total=522,228 used space=90 available=522,138</p>
</blockquote>

<p>The totals match. </p>

<p><em>fstatvfs</em> is described <a href=""https://developer.android.com/reference/android/system/Os.html#fstatvfs(java.io.FileDescriptor)"" rel=""nofollow noreferrer"">here</a>.</p>

<p>Detail on what <em>fstatvfs</em> returns can be found <a href=""https://developer.android.com/reference/android/system/StructStatVfs"" rel=""nofollow noreferrer"">here</a>.</p>

<p>The following little app displays used, free and total bytes for volumes that are accessible.</p>

<p><a href=""https://i.stack.imgur.com/qcrY5.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/qcrY5.png"" alt=""enter image description here""></a></p>

<p><strong>MainActivity.kt</strong></p>

<pre><code>class MainActivity : AppCompatActivity() {
    private lateinit var mStorageManager: StorageManager
    private val mVolumeStats = HashMap&lt;Uri, StructStatVfs&gt;()
    private val mStorageVolumePathsWeHaveAccessTo = HashSet&lt;String&gt;()
    private lateinit var mStorageVolumes: List&lt;StorageVolume&gt;
    private var mHaveAccessToPrimary = false

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        mStorageManager = getSystemService(Context.STORAGE_SERVICE) as StorageManager
        mStorageVolumes = mStorageManager.storageVolumes

        requestAccessButton.setOnClickListener {
            val primaryVolume = mStorageManager.primaryStorageVolume
            val intent = primaryVolume.createOpenDocumentTreeIntent()
            startActivityForResult(intent, 1)
        }

        releaseAccessButton.setOnClickListener {
            val takeFlags =
                Intent.FLAG_GRANT_READ_URI_PERMISSION or Intent.FLAG_GRANT_WRITE_URI_PERMISSION
            val uri = buildVolumeUriFromUuid(PRIMARY_UUID)

            contentResolver.releasePersistableUriPermission(uri, takeFlags)
            val toast = Toast.makeText(
                this,
                ""Primary volume permission released was released."",
                Toast.LENGTH_SHORT
            )
            toast.setGravity(Gravity.BOTTOM, 0, releaseAccessButton.height)
            toast.show()
            getVolumeStats()
            showVolumeStats()
        }
        getVolumeStats()
        showVolumeStats()

    }

    private fun getVolumeStats() {
        val persistedUriPermissions = contentResolver.persistedUriPermissions
        mStorageVolumePathsWeHaveAccessTo.clear()
        persistedUriPermissions.forEach {
            mStorageVolumePathsWeHaveAccessTo.add(it.uri.toString())
        }
        mVolumeStats.clear()
        mHaveAccessToPrimary = false
        for (storageVolume in mStorageVolumes) {
            val uuid = if (storageVolume.isPrimary) {
                // Primary storage doesn't get a UUID here.
                PRIMARY_UUID
            } else {
                storageVolume.uuid
            }

            val volumeUri = uuid?.let { buildVolumeUriFromUuid(it) }

            when {
                uuid == null -&gt;
                    Log.d(TAG, ""UUID is null for ${storageVolume.getDescription(this)}!"")
                mStorageVolumePathsWeHaveAccessTo.contains(volumeUri.toString()) -&gt; {
                    Log.d(TAG, ""Have access to $uuid"")
                    if (uuid == PRIMARY_UUID) {
                        mHaveAccessToPrimary = true
                    }
                    val uri = buildVolumeUriFromUuid(uuid)
                    val docTreeUri = DocumentsContract.buildDocumentUriUsingTree(
                        uri,
                        DocumentsContract.getTreeDocumentId(uri)
                    )
                    mVolumeStats[docTreeUri] = getFileStats(docTreeUri)
                }
                else -&gt; Log.d(TAG, ""Don't have access to $uuid"")
            }
        }
    }

    private fun showVolumeStats() {
        val sb = StringBuilder()
        if (mVolumeStats.size == 0) {
            sb.appendln(""Nothing to see here..."")
        } else {
            sb.appendln(""All figures are in 1K blocks."")
            sb.appendln()
        }
        mVolumeStats.forEach {
            val lastSeg = it.key.lastPathSegment
            sb.appendln(""Volume: $lastSeg"")
            val stats = it.value
            val blockSize = stats.f_bsize
            val totalSpace = stats.f_blocks * blockSize / 1024L
            val freeSpace = stats.f_bfree * blockSize / 1024L
            val usedSpace = totalSpace - freeSpace
            sb.appendln("" Used space: ${usedSpace.nice()}"")
            sb.appendln("" Free space: ${freeSpace.nice()}"")
            sb.appendln(""Total space: ${totalSpace.nice()}"")
            sb.appendln(""----------------"")
        }
        volumeStats.text = sb.toString()
        if (mHaveAccessToPrimary) {
            releaseAccessButton.visibility = View.VISIBLE
            requestAccessButton.visibility = View.GONE
        } else {
            releaseAccessButton.visibility = View.GONE
            requestAccessButton.visibility = View.VISIBLE
        }
    }

    private fun buildVolumeUriFromUuid(uuid: String): Uri {
        return DocumentsContract.buildTreeDocumentUri(
            EXTERNAL_STORAGE_AUTHORITY,
            ""$uuid:""
        )
    }

    private fun getFileStats(docTreeUri: Uri): StructStatVfs {
        val pfd = contentResolver.openFileDescriptor(docTreeUri, ""r"")!!
        return fstatvfs(pfd.fileDescriptor)
    }

    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
        super.onActivityResult(requestCode, resultCode, data)
        Log.d(TAG, ""resultCode:$resultCode"")
        val uri = data?.data ?: return
        val takeFlags =
            Intent.FLAG_GRANT_READ_URI_PERMISSION or Intent.FLAG_GRANT_WRITE_URI_PERMISSION
        contentResolver.takePersistableUriPermission(uri, takeFlags)
        Log.d(TAG, ""granted uri: ${uri.path}"")
        getVolumeStats()
        showVolumeStats()
    }

    companion object {
        fun Long.nice(fieldLength: Int = 12): String = String.format(Locale.US, ""%,${fieldLength}d"", this)

        const val EXTERNAL_STORAGE_AUTHORITY = ""com.android.externalstorage.documents""
        const val PRIMARY_UUID = ""primary""
        const val TAG = ""AppLog""
    }
}
</code></pre>

<p><strong>activity_main.xml</strong></p>

<pre><code>&lt;LinearLayout 
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        android:orientation=""vertical""
        tools:context="".MainActivity""&gt;

    &lt;TextView
            android:id=""@+id/volumeStats""
            android:layout_width=""match_parent""
            android:layout_height=""0dp""
            android:layout_marginBottom=""16dp""
            android:layout_weight=""1""
            android:fontFamily=""monospace""
            android:padding=""16dp"" /&gt;

    &lt;Button
            android:id=""@+id/requestAccessButton""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center_horizontal""
            android:layout_marginBottom=""16dp""
            android:visibility=""gone""
            android:text=""Request Access to Primary"" /&gt;

    &lt;Button
            android:id=""@+id/releaseAccessButton""
            android:layout_width=""wrap_content""
            android:layout_height=""wrap_content""
            android:layout_gravity=""center_horizontal""
            android:layout_marginBottom=""16dp""
            android:text=""Release Access to Primary"" /&gt;
&lt;/LinearLayout&gt;   
</code></pre>
","6287910","","878126","","2019-07-10 19:20:38","2019-07-10 19:20:38","","","","18","","",""
"57126727","2","","56663624","2019-07-20 16:44:14","","1","","<p><strong>Is getAllocatableBytes indeed the way to get the free space?</strong></p>

<p><a href=""https://developer.android.com/about/versions/oreo/android-8.0"" rel=""nofollow noreferrer"">Android 8.0 Features and APIs</a> states that <em>getAllocatableBytes(UUID)</em>:</p>

<blockquote>
  <p>Finally, when you need to allocate disk space for large files, consider using the new allocateBytes(FileDescriptor, long) API, which will automatically clear cached files belonging to other apps (as needed) to meet your request. When deciding if the device has enough disk space to hold your new data, call getAllocatableBytes(UUID) instead of using getUsableSpace(), since the former will consider any cached data that the system is willing to clear on your behalf.</p>
</blockquote>

<p>So, <em>getAllocatableBytes()</em> reports how many bytes could be free for a new file by clearing cache for other apps but may not be currently free. This does not seem to be the right call for a general-purpose file utility.</p>

<p>In any case, <em>getAllocatableBytes(UUID)</em> doesn't seem to work for any volume other than the primary volume due to the inability to get acceptable UUIDs from <em>StorageManager</em> for storage volumes other than the primary volume. See <a href=""https://stackoverflow.com/questions/48589109/invalid-uuid-of-storage-gained-from-android-storagemanager"">Invalid UUID of storage gained from Android StorageManager?</a> and <a href=""https://issuetracker.google.com/issues/62982912"" rel=""nofollow noreferrer"">Bug report #62982912</a>. (Mentioned here for completeness; I realize that you already know about these.) The bug report is now over two years old with no resolution or hint at a work-around, so no love there.</p>

<p>If you want the type of free space reported by ""Files by Google"" or other file managers, then you will want to approach free space in a different way as explained below.</p>

<p><strong>How can I get the free and real total space (in some cases I got lower values for some reason) of each StorageVolume, without requesting any permission, just like on Google's app?</strong></p>

<p>Here is a procedure to get free and total space for available volumes:</p>

<p><strong><em>Identify external directories:</em></strong> Use <a href=""https://developer.android.com/reference/android/content/Context#getExternalFilesDirs(java.lang.String)"" rel=""nofollow noreferrer"">getExternalFilesDirs(null)</a> to discover available external locations. What is returned is a <em>File[]</em>. These are directories that our app is permitted to use.</p>

<blockquote>
  <p>extDirs = {File<a href=""https://i.stack.imgur.com/M1U43l.jpg"" rel=""nofollow noreferrer"">2</a>@9489<br>
   0 = {File@9509} ""/storage/emulated/0/Android/data/com.example.storagevolumes/files""<br>
    1 = {File@9510} ""/storage/14E4-120B/Android/data/com.example.storagevolumes/files""</p>
</blockquote>

<p>(N.B. According to the documentation, this call returns what are considered to be stable devices such as SD cards. This does not return attached USB drives.)</p>

<p><strong><em>Identify storage volumes:</em></strong> For each directory returned above, use <a href=""https://developer.android.com/reference/android/os/storage/StorageManager.html#getStorageVolume(java.io.File)"" rel=""nofollow noreferrer"">StorageManager#getStorageVolume(File)</a> to identify the storage volume that contains the directory. We don't need to identify the top-level directory to get the storage volume, just a file from the storage volume, so these directories will do.</p>

<p><strong><em>Calculate total and used space:</em></strong> Determine the space on the storage volumes. The primary volume is treated differently from an SD card.</p>

<p><em>For the primary volume:</em> Using <a href=""https://developer.android.com/reference/android/app/usage/StorageStatsManager#getTotalBytes(java.util.UUID)"" rel=""nofollow noreferrer"">StorageStatsManager#getTotalBytes(UUID</a> get the nominal total bytes of storage on the primary device using <a href=""https://developer.android.com/reference/android/os/storage/StorageManager.html#UUID_DEFAULT"" rel=""nofollow noreferrer"">StorageManager#UUID_DEFAULT</a> . The value returned treats a kilobyte as 1,000 bytes (rather than 1,024) and a gigabyte as 1,000,000,000 bytes instead of 2<sup>30</sup>. On my SamSung Galaxy S7 the value reported is 32,000,000,000 bytes. On my Pixel 3 emulator running API 29 with 16 MB of storage, the value reported is 16,000,000,000. </p>

<p><em>Here is the trick:</em> If you want the numbers reported by ""Files by Google"", use 10<sup>3</sup> for a kilobyte, 10<sup>6</sup> for a megabyte and 10<sup>9</sup> for a gigabyte. For other file managers  2<sup>10</sup>, 2<sup>20</sup> and 2<sup>30</sup> is what works. (This is demonstrated below.) See <a href=""https://en.wikipedia.org/wiki/Kibibyte"" rel=""nofollow noreferrer"">this</a> for more information on these units.</p>

<p>To get free bytes, use <a href=""https://developer.android.com/reference/android/app/usage/StorageStatsManager.html#getFreeBytes(java.util.UUID)"" rel=""nofollow noreferrer"">StorageStatsManager#getFreeBytes(uuid)</a>. Used bytes is the difference between total bytes and free bytes.</p>

<p><strong>For non-primary volumes:</strong> Space calculations for non-primary volumes is straightforward: For total space used <a href=""https://developer.android.com/reference/java/io/File.html#getTotalSpace()"" rel=""nofollow noreferrer"">File#getTotalSpace</a> and <a href=""https://developer.android.com/reference/java/io/File.html#getFreeSpace()"" rel=""nofollow noreferrer"">File#getFreeSpace</a> for the free space.</p>

<p>Here are a couple of screens shots that display volume stats. The first image shows the output of the <em>StorageVolumeStats</em> app (included below the images) and ""Files by Google."" The toggle button at the top of the top section switches the app between using 1,000 and 1,024 for kilobytes. As you can see, the figures agree. (This is a screen shot from a device running Oreo. I was unable to get the beta version of ""Files by Google"" loaded onto an Android Q emulator.)</p>

<p><a href=""https://i.stack.imgur.com/31eTIl.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/31eTIl.jpg"" alt=""enter image description here""></a></p>

<p>The following image shows the <em>StorageVolumeStats</em> app at the top and output from ""EZ File Explorer"" on the bottom. Here 1,024 is used for kilobytes and the two apps agree on the total and free space available except for rounding.</p>

<p><a href=""https://i.stack.imgur.com/M1U43l.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/M1U43l.jpg"" alt=""enter image description here""></a></p>

<p><strong>MainActivity.kt</strong></p>

<p>This small app is just the main activity. The manifest is generic, <em>compileSdkVersion</em> and <em>targetSdkVersion</em> are set to 29. <em>minSdkVersion</em> is 26.</p>

<pre><code>class MainActivity : AppCompatActivity() {
    private lateinit var mStorageManager: StorageManager
    private val mStorageVolumesByExtDir = mutableListOf&lt;VolumeStats&gt;()
    private lateinit var mVolumeStats: TextView
    private lateinit var mUnitsToggle: ToggleButton
    private var mKbToggleValue = true
    private var kbToUse = KB
    private var mbToUse = MB
    private var gbToUse = GB

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        if (savedInstanceState != null) {
            mKbToggleValue = savedInstanceState.getBoolean(""KbToggleValue"", true)
            selectKbValue()
        }
        setContentView(statsLayout())

        mStorageManager = getSystemService(Context.STORAGE_SERVICE) as StorageManager

        getVolumeStats()
        showVolumeStats()
    }

    override fun onSaveInstanceState(outState: Bundle) {
        super.onSaveInstanceState(outState)
        outState.putBoolean(""KbToggleValue"", mKbToggleValue)
    }

    private fun getVolumeStats() {
        // We will get our volumes from the external files directory list. There will be one
        // entry per external volume.
        val extDirs = getExternalFilesDirs(null)

        mStorageVolumesByExtDir.clear()
        extDirs.forEach { file -&gt;
            val storageVolume: StorageVolume? = mStorageManager.getStorageVolume(file)
            if (storageVolume == null) {
                Log.d(TAG, ""Could not determinate StorageVolume for ${file.path}"")
            } else {
                val totalSpace: Long
                val usedSpace: Long
                if (storageVolume.isPrimary) {
                    // Special processing for primary volume. ""Total"" should equal size advertised
                    // on retail packaging and we get that from StorageStatsManager. Total space
                    // from File will be lower than we want to show.
                    val uuid = StorageManager.UUID_DEFAULT
                    val storageStatsManager =
                        getSystemService(Context.STORAGE_STATS_SERVICE) as StorageStatsManager
                    // Total space is reported in round numbers. For example, storage on a
                    // SamSung Galaxy S7 with 32GB is reported here as 32_000_000_000. If
                    // true GB is needed, then this number needs to be adjusted. The constant
                    // ""KB"" also need to be changed to reflect KiB (1024).
//                    totalSpace = storageStatsManager.getTotalBytes(uuid)
                    totalSpace = (storageStatsManager.getTotalBytes(uuid) / 1_000_000_000) * gbToUse
                    usedSpace = totalSpace - storageStatsManager.getFreeBytes(uuid)
                } else {
                    // StorageStatsManager doesn't work for volumes other than the primary volume
                    // since the ""UUID"" available for non-primary volumes is not acceptable to
                    // StorageStatsManager. We must revert to File for non-primary volumes. These
                    // figures are the same as returned by statvfs().
                    totalSpace = file.totalSpace
                    usedSpace = totalSpace - file.freeSpace
                }
                mStorageVolumesByExtDir.add(
                    VolumeStats(storageVolume, totalSpace, usedSpace)
                )
            }
        }
    }

    private fun showVolumeStats() {
        val sb = StringBuilder()
        mStorageVolumesByExtDir.forEach { volumeStats -&gt;
            val (usedToShift, usedSizeUnits) = getShiftUnits(volumeStats.mUsedSpace)
            val usedSpace = (100f * volumeStats.mUsedSpace / usedToShift).roundToLong() / 100f
            val (totalToShift, totalSizeUnits) = getShiftUnits(volumeStats.mTotalSpace)
            val totalSpace = (100f * volumeStats.mTotalSpace / totalToShift).roundToLong() / 100f
            val uuidToDisplay: String?
            val volumeDescription =
                if (volumeStats.mStorageVolume.isPrimary) {
                    uuidToDisplay = """"
                    PRIMARY_STORAGE_LABEL
                } else {
                    uuidToDisplay = "" (${volumeStats.mStorageVolume.uuid})""
                    volumeStats.mStorageVolume.getDescription(this)
                }
            sb
                .appendln(""$volumeDescription$uuidToDisplay"")
                .appendln("" Used space: ${usedSpace.nice()} $usedSizeUnits"")
                .appendln(""Total space: ${totalSpace.nice()} $totalSizeUnits"")
                .appendln(""----------------"")
        }
        mVolumeStats.text = sb.toString()
    }

    private fun getShiftUnits(x: Long): Pair&lt;Long, String&gt; {
        val usedSpaceUnits: String
        val shift =
            when {
                x &lt; kbToUse -&gt; {
                    usedSpaceUnits = ""Bytes""; 1L
                }
                x &lt; mbToUse -&gt; {
                    usedSpaceUnits = ""KB""; kbToUse
                }
                x &lt; gbToUse -&gt; {
                    usedSpaceUnits = ""MB""; mbToUse
                }
                else -&gt; {
                    usedSpaceUnits = ""GB""; gbToUse
                }
            }
        return Pair(shift, usedSpaceUnits)
    }

    @SuppressLint(""SetTextI18n"")
    private fun statsLayout(): SwipeRefreshLayout {
        val swipeToRefresh = SwipeRefreshLayout(this)
        swipeToRefresh.setOnRefreshListener {
            getVolumeStats()
            showVolumeStats()
            swipeToRefresh.isRefreshing = false
        }

        val scrollView = ScrollView(this)
        swipeToRefresh.addView(scrollView)
        val linearLayout = LinearLayout(this)
        linearLayout.orientation = LinearLayout.VERTICAL
        scrollView.addView(
            linearLayout, ViewGroup.LayoutParams.MATCH_PARENT,
            ViewGroup.LayoutParams.WRAP_CONTENT
        )

        val instructions = TextView(this)
        instructions.text = ""Swipe down to refresh.""
        linearLayout.addView(
            instructions, ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT
        )
        (instructions.layoutParams as LinearLayout.LayoutParams).gravity = Gravity.CENTER

        mUnitsToggle = ToggleButton(this)
        mUnitsToggle.textOn = ""KB = 1,000""
        mUnitsToggle.textOff = ""KB = 1,024""
        mUnitsToggle.isChecked = mKbToggleValue
        linearLayout.addView(
            mUnitsToggle, ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT
        )
        mUnitsToggle.setOnClickListener { v -&gt;
            val toggleButton = v as ToggleButton
            mKbToggleValue = toggleButton.isChecked
            selectKbValue()
            getVolumeStats()
            showVolumeStats()
        }

        mVolumeStats = TextView(this)
        mVolumeStats.typeface = Typeface.MONOSPACE
        val padding =
            16 * (resources.displayMetrics.densityDpi.toFloat() / DisplayMetrics.DENSITY_DEFAULT).toInt()
        mVolumeStats.setPadding(padding, padding, padding, padding)

        val lp = LinearLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, 0)
        lp.weight = 1f
        linearLayout.addView(mVolumeStats, lp)

        return swipeToRefresh
    }

    private fun selectKbValue() {
        if (mKbToggleValue) {
            kbToUse = KB
            mbToUse = MB
            gbToUse = GB
        } else {
            kbToUse = KiB
            mbToUse = MiB
            gbToUse = GiB
        }
    }

    companion object {
        fun Float.nice(fieldLength: Int = 6): String =
            String.format(Locale.US, ""%$fieldLength.2f"", this)

        // StorageVolume should have an accessible ""getPath()"" method that will do
        // the following so we don't have to resort to reflection.
        @Suppress(""unused"")
        fun StorageVolume.getStorageVolumePath(): String {
            return try {
                javaClass
                    .getMethod(""getPath"")
                    .invoke(this) as String
            } catch (e: Exception) {
                e.printStackTrace()
                """"
            }
        }

        // See https://en.wikipedia.org/wiki/Kibibyte for description
        // of these units.

        // These values seems to work for ""Files by Google""...
        const val KB = 1_000L
        const val MB = KB * KB
        const val GB = KB * KB * KB

        // ... and these values seems to work for other file manager apps.
        const val KiB = 1_024L
        const val MiB = KiB * KiB
        const val GiB = KiB * KiB * KiB

        const val PRIMARY_STORAGE_LABEL = ""Internal Storage""

        const val TAG = ""MainActivity""
    }

    data class VolumeStats(
        val mStorageVolume: StorageVolume,
        var mTotalSpace: Long = 0,
        var mUsedSpace: Long = 0
    )
}
</code></pre>

<p><strong>Addendum</strong></p>

<p>Let's get more comfortable with using <em>getExternalFilesDirs()</em>:</p>

<p>We call <a href=""https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/app/ContextImpl.java#683"" rel=""nofollow noreferrer"">Context#getExternalFilesDirs()</a>
in the code. Within this method a call is made to <a href=""https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/os/Environment.java#141"" rel=""nofollow noreferrer"">Environment#buildExternalStorageAppFilesDirs()</a> which calls <a href=""https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/os/Environment.java#95"" rel=""nofollow noreferrer"">Environment#getExternalDirs()</a> to obtain the volume list from <em>StorageManager</em>. This storage list is used to create the paths we see returned from <em>Context#getExternalFilesDirs()</em> by appending some static path segments to the path identified by each storage volume.</p>

<p>We would really want access to <a href=""https://android.googlesource.com/platform/frameworks/base/+/refs/heads/master/core/java/android/os/Environment.java#95"" rel=""nofollow noreferrer"">Environment#getExternalDirs()</a> so we can immediately determine space utilization, but we are restricted. Since the call we make depends upon a file list that is generated from the volume list, we can be comfortable that all volumes are covered by out code and we can get the space utilization information we need.</p>
","6287910","","6287910","","2019-07-22 14:54:40","2019-07-22 14:54:40","","","","13","","",""
"58933423","2","","58932991","2019-11-19 11:48:21","","11","","<p>util.smartptr.shared.const/9 in C++ 11:</p>

<blockquote>
  <p>Effects: Constructs a shared_ptr object that owns the object p and the deleter d. The second and fourth constructors shall use a copy of a to allocate memory for internal use.</p>
</blockquote>

<p>The second and fourth constructors have these prototypes:</p>

<pre class=""lang-cpp prettyprint-override""><code>template&lt;class Y, class D, class A&gt; shared_ptr(Y* p, D d, A a);
template&lt;class D, class A&gt; shared_ptr(nullptr_t p, D d, A a);
</code></pre>

<p>In the latest draft, util.smartptr.shared.const/10 is equivalent for our purpose:</p>

<blockquote>
  <p>Effects: Constructs a shared_­ptr object that owns the object p and the deleter d. When T is not an array type, the first and second constructors enable shared_­from_­this with p. The second and fourth constructors shall use a copy of a to allocate memory for internal use. If an exception is thrown, d(p) is called.</p>
</blockquote>

<p>So the allocator is used if there is a need to allocate it in allocated memory. Based on the current standard and at relevant defect reports, allocation is not mandatory but assumed by the committee.</p>

<ul>
<li><p>Although the interface of <code>shared_ptr</code> allows an implementation where there is never a control block and all <code>shared_ptr</code> and <code>weak_ptr</code> are put in a linked list, there is no such implementation in practice. Additionally, the wording has been modified assuming, for instance, that the <code>use_count</code> is shared.</p></li>
<li><p>The deleter is required to only move constructible. Thus, it is not possible to have several copies in the <code>shared_ptr</code>.</p></li>
</ul>

<p>One can imagine an implementation which puts the deleter in a specially designed <code>shared_ptr</code> and moves it when it the special <code>shared_ptr</code> is deleted. While the implementation seems conformant, it is also strange, especially since a control block may be needed for the use count (it is perhaps possible but even weirder to do the same thing with the use count).</p>

<p>Relevant DRs I found: <a href=""http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#545"" rel=""nofollow noreferrer"">545</a>, <a href=""http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#575"" rel=""nofollow noreferrer"">575</a>, <a href=""http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#2434"" rel=""nofollow noreferrer"">2434</a> (which acknowledge that all implementations are using a control block and seem to imply that multi-threading constraints somewhat mandate it), <a href=""http://www.open-std.org/jtc1/sc22/wg21/docs/lwg-defects.html#2802"" rel=""nofollow noreferrer"">2802</a> (which requires that the deleter only move constructible and thus prevents implementation where the deleter is copied between several <code>shared_ptr</code>'s).</p>
","136208","","11134827","","2019-11-24 14:28:01","2019-11-24 14:28:01","","","","7","","",""
"54618177","2","","54617101","2019-02-10 15:54:07","","6","","<p>Here is what the <a href=""https://timsong-cpp.github.io/cppwp/n4659/class.mem#23"" rel=""noreferrer"">common-initial-sequence rule says about unions</a>:</p>

<blockquote>
  <p>In a standard-layout union with an active member of struct type <code>T1</code>, it is permitted to read a non-static data member <code>m</code> of another union member of struct type <code>T2</code> provided m is part of the common initial sequence of T1 and T2; the behavior is as if the corresponding member of T1 were nominated.</p>
</blockquote>

<p>Your code does not qualify. Why? Because you are not <em>reading</em> from ""another union member"". You are doing <code>m.x = 42;</code>. That isn't reading; that's calling a member function of another union member.</p>

<p>So it doesn't qualify for the common initial sequence rule. And without the common-initial-sequence rule to protect you, accessing non-active members of the union is UB.</p>
","734069","","","","","2019-02-10 15:54:07","","","","1","","",""
"54843455","2","","54432583","2019-02-23 16:11:06","","3","","<p>Are there ever any situations where <code>apply</code> is good?
Yes, sometimes.</p>

<p>Task: decode Unicode strings.</p>

<pre><code>import numpy as np
import pandas as pd
import unidecode

s = pd.Series(['mañana','Ceñía'])
s.head()
0    mañana
1     Ceñía


s.apply(unidecode.unidecode)
0    manana
1     Cenia
</code></pre>

<p><strong>Update</strong><br>
I was by no means advocating for the use of <code>apply</code>, just thinking since the <code>NumPy</code> cannot deal with the above situation, it could have been a good candidate for <code>pandas apply</code>. But I was forgetting the plain ol list comprehension thanks to the reminder by @jpp.</p>
","10799544","","10323798","","2019-09-03 04:04:33","2019-09-03 04:04:33","","","","2","","",""
"56213688","2","","54432583","2019-05-20 02:34:06","","4","","<p>For <code>axis=1</code> (i.e. row-wise functions) then you can just use the following function in lieu of <code>apply</code>. I wonder why this isn't the <code>pandas</code> behavior. (Untested with compound indexes, but it does appear to be much faster than <code>apply</code>)</p>

<pre><code>def faster_df_apply(df, func):
    cols = list(df.columns)
    data, index = [], []
    for row in df.itertuples(index=True):
        row_dict = {f:v for f,v in zip(cols, row[1:])}
        data.append(func(row_dict))
        index.append(row[0])
    return pd.Series(data, index=index)
</code></pre>
","2848281","","2848281","","2019-05-20 06:13:37","2019-05-20 06:13:37","","","","3","","",""
"57727590","2","","57465459","2019-08-30 13:22:09","","1","","<p>Just going by the example, the relevant text is (Bold is mine):</p>

<blockquote>
  <p>A byte of storage is reachable through <strong>a pointer value that points to
  an object Y</strong> if it is within the storage occupied by Y</p>
</blockquote>

<p>Due to the <em>placement new</em>, the pointer value now points to the ""newly placed"" object, and hence the reachability is of that. </p>

<p>I would say that is clear enough as it stands.</p>
","2261538","","2261538","","2019-08-30 13:29:50","2019-08-30 13:29:50","","","","0","","",""
"58123882","2","","58123398","2019-09-26 19:54:45","","40","","<blockquote>
  <p>What is the difference between JSX.Element, ReactNode and ReactElement?</p>
</blockquote>

<p>A ReactElement is an object with a type and props.</p>

<pre><code> interface ReactElement&lt;P = any, T extends string | JSXElementConstructor&lt;any&gt; = string | JSXElementConstructor&lt;any&gt;&gt; {
    type: T;
    props: P;
    key: Key | null;
}
</code></pre>

<p>A ReactNode is a ReactElement, a ReactFragment, a string, a number or an array of ReactNodes, or null, or undefined, or a boolean:</p>

<pre><code>type ReactText = string | number;
type ReactChild = ReactElement | ReactText;

interface ReactNodeArray extends Array&lt;ReactNode&gt; {}
type ReactFragment = {} | ReactNodeArray;

type ReactNode = ReactChild | ReactFragment | ReactPortal | boolean | null | undefined;
</code></pre>

<p>JSX.Element is a ReactElement, with the generic type for props and type being any. It exists, as various libraries can implement JSX in their own way, therefore JSX is a global namespace that then gets set by the library, React sets it like this:</p>

<pre><code>declare global {
  namespace JSX {
    interface Element extends React.ReactElement&lt;any, any&gt; { }
  }
}
</code></pre>

<p>By example:</p>

<pre><code> &lt;p&gt; // &lt;- ReactElement = JSX.Element
   &lt;Custom&gt; // &lt;- ReactElement = JSX.Element
     {true &amp;&amp; ""test""} // &lt;- ReactNode
  &lt;/Custom&gt;
 &lt;/p&gt;
</code></pre>

<blockquote>
  <p>Why do the render methods of class components return ReactNode, but function components return ReactElement?</p>
</blockquote>

<p>Indeed, they do return different things. <code>Component</code>s return:</p>

<pre><code> render(): ReactNode;
</code></pre>

<p>And functions are ""stateless components"":</p>

<pre><code> interface StatelessComponent&lt;P = {}&gt; {
    (props: P &amp; { children?: ReactNode }, context?: any): ReactElement | null;
    // ... doesn't matter
}
</code></pre>

<p>As you can see, functional components can have ReactNodes as children, but they must return a ReactElement or null. If you think about it, it is actually the same as with Components: They are <em>itself</em> <code>ReactElement</code>s, but they can have <code>ReactNode</code>s as children. </p>

<blockquote>
  <p>How do I solve this with respect to null?</p>
</blockquote>

<p>Type it as <code>ReactElement | null</code> just as react does. Or let Typescript infer the type.</p>

<p><sub><a href=""https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/index.d.ts"" rel=""noreferrer"">source for the types</a></sub></p>
","5260024","","5260024","","2019-12-19 13:07:47","2019-12-19 13:07:47","","","","4","","",""
"55071758","2","","54776759","2019-03-08 22:16:30","","-3","","<p>Just use <code>""use strict""</code>. More on <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Strict_mode"" rel=""nofollow noreferrer"">Strict Mode</a>.</p>

<p><a href=""https://i.stack.imgur.com/RGOLt.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/RGOLt.png"" alt=""enter image description here""></a></p>
","2184584","","","","","2019-03-08 22:16:30","","","","2","","",""
"55073557","2","","54869278","2019-03-09 02:52:53","","0","","<p>No official way to do it but subclassing provides most coverage without crazy tricks. </p>

<p><a href=""https://gist.github.com/bmc08gt/40a151e93969f2633b9b92bca4b31e83"" rel=""nofollow noreferrer"">https://gist.github.com/bmc08gt/40a151e93969f2633b9b92bca4b31e83</a></p>
","4608592","","","","","2019-03-09 02:52:53","","","","2","","",""
"55077293","2","","54776759","2019-03-09 12:20:32","","5","","<p>There are some things you need to consider before trying to answer this question.</p>

<p>For example, take the <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object"" rel=""nofollow noreferrer""><code>Object</code></a> constructor. It is a <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects"" rel=""nofollow noreferrer"">""Standard built-in object""</a>.</p>

<p><a href=""https://developer.mozilla.org/en-US/docs/Web/API/Window/status"" rel=""nofollow noreferrer""><code>window.status</code></a> is part of the <a href=""https://developer.mozilla.org/en-US/docs/Web/API/Window"" rel=""nofollow noreferrer""><code>Window</code> interface</a>.</p>

<p>Obviously, you don't want <code>status</code> to refer to <code>window.status</code>, but do you want <code>Object</code> to refer to <code>window.Object</code>?</p>

<hr>

<p>The solution to your problem of it not being able to be redefined is to use a IIFE, or a module, which should be what you are doing anyways.</p>

<pre><code>(() =&gt; {
  var status = false;
  if (!status) {
    console.log('status is now false.');
  }
})();
</code></pre>

<p>And to prevent accidentally using global variables, I would just set up your linter to warn against it. Forcing it using a solution like <code>with (fake_global)</code> would not only have errors exclusively at run time, which might be not caught, but also be slower.</p>

<hr>

<p>Specifically with ESLint, I can't seem to find a ""good"" solution. Enabling browser globals allows implicit reads.</p>

<p>I would suggest <a href=""https://eslint.org/docs/rules/no-implicit-globals"" rel=""nofollow noreferrer"">no-implicit-globals</a> (As you shouldn't be polluting the global scope anyways, and it prevents the <code>var status</code> not defining anything problem), and also not enabling all browser globals, only, say, <code>window</code>, <code>document</code>, <code>console</code>, <code>setInterval</code>, etc., like you said in the comments.</p>

<p>Look at the <a href=""https://eslint.org/docs/user-guide/configuring#specifying-environments"" rel=""nofollow noreferrer"">ESLint environments</a> to see which ones you would like to enable. By default, things like <code>Object</code> and <code>Array</code> are in the global scope, but things like those listed above and <code>atob</code> are not.</p>

<p>To see the exact list of globals, they are defined by <a href=""https://github.com/eslint/eslint/blob/caeb223c4f7b0b6fe35e5348ae0df4c6446b5bed/conf/environments.js"" rel=""nofollow noreferrer"">this file in ESLint</a> and <a href=""https://github.com/sindresorhus/globals/blob/master/globals.json"" rel=""nofollow noreferrer"">the <code>globals</code> NPM package</a>. I would would pick from (a combination of) ""es6"", ""worker"" or ""shared-node-browser"".</p>

<p>The eslintrc file would have:</p>

<pre><code>{
    ""rules"": {
        ""no-implicit-globals"": ""error""
    },
    ""globals"": {
        ""window"": ""readonly"",
        ""document"": ""readonly""
    },
    ""env"": {
        ""browser"": false,
        ""es6"": [true/false],
        ""worker"": [true/false],
        ""shared-node-browser"": [true/false]
    }
}
</code></pre>
","5754656","","5754656","","2019-03-10 14:29:25","2019-03-10 14:29:25","","","","2","","",""
"59413816","2","","54650417","2019-12-19 16:43:30","","1","","<p>This is my first post here. I felt compelled to share as the loss of the calendar in Excel was a huge deal and this calendar SiddhartRout created is incredible. So, MANY thanks to @SiddhartRout for putting together this really amazing calendar. I made changes to the cosmetics but most of the underlying meat of it is still all Siddhart's work with some minor changes to meet my use case. </p>

<p><strong>Cosmetic changes</strong>:</p>

<ul>
<li>Replaced ALL of the buttons with borderless labels so it looks a lot more like the Windows 10 calendar</li>
<li>The border of the labels will appear/disappear on mouse enter/exit</li>
<li>I grayed out days that aren't for the current month. The 'gray out' is a different color that matches better for each theme.</li>
<li>Modified the theme colors to my liking. Added a label to click for cycling through the themes. </li>
<li>Changed the font to Calibri</li>
<li>added color change on mouse entry to month/year and arrow controls</li>
<li>Use this site for all of you color code needs --> <a href=""https://www.rapidtables.com/web/color/RGB_Color.html"" rel=""nofollow noreferrer"">RGB Color Codes</a></li>
</ul>

<p><strong>Code Changes</strong> </p>

<ul>
<li>Optimized the Property Let Caltheme making it easier to setup and add theme colors or entirely new themes</li>
<li>I couldn't get the 'ESC to exit' to work reliably so i replaced it with an 'X'. It stopped crashing as much as well.</li>
<li>Removed the localization stuff as i'll never need it</li>
<li>Changing from buttons to labels required modifying some object variables where needed throughout the project</li>
<li>Added public variables used to store RGB values allowing use of theme colors throughout the project providing for more consistent and easier application of selected theme</li>
<li>User selected theme stored in the hidden sheet so it's persistent between runs</li>
<li>Removed the checkmark button &amp; launch directly from a click on any day.</li>
</ul>

<p><strong>Screenshots of each theme:</strong></p>

<p><a href=""https://i.stack.imgur.com/jCvic.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/jCvic.png"" alt=""Venom 2""></a>  <a href=""https://i.stack.imgur.com/leSy4.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/leSy4.png"" alt=""MartianRed 2""></a><br>
<a href=""https://i.stack.imgur.com/GtEbP.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/GtEbP.png"" alt=""ArcticBlue 2""></a>  <a href=""https://i.stack.imgur.com/WcwbN.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/WcwbN.png"" alt=""GreyScale 2""></a></p>

<p><strong>Download link for code:</strong></p>

<ul>
<li><a href=""https://www.dropbox.com/s/tu78cptbpkwwsiq/Win10ExcelCal.xlsm?dl=0"" rel=""nofollow noreferrer"">Win10ExcelCal.xlsm</a></li>
</ul>
","12565892","","12565892","","2019-12-19 18:52:30","2019-12-19 18:52:30","","","","3","","",""
"58933578","2","","58932991","2019-11-19 11:57:02","","4","","<p>From <a href=""https://en.cppreference.com/w/cpp/memory/shared_ptr"" rel=""nofollow noreferrer"">std::shared_ptr</a> we have:</p>

<blockquote>
  <p>The control block is a dynamically-allocated object that holds:  </p>
</blockquote>

<ul>
<li>either a pointer to the managed object or the managed object itself;</li>
<li><strong>the deleter (type-erased);</strong></li>
<li>the allocator (type-erased);</li>
<li>the number of shared_ptrs that own the managed object;</li>
<li>the number of weak_ptrs that refer to the managed object.</li>
</ul>

<p>And from <a href=""https://en.cppreference.com/w/cpp/memory/shared_ptr/allocate_shared"" rel=""nofollow noreferrer"">std::allocate_shared</a> we get:</p>

<pre><code>template&lt; class T, class Alloc, class... Args &gt;
shared_ptr&lt;T&gt; allocate_shared( const Alloc&amp; alloc, Args&amp;&amp;... args );
</code></pre>

<blockquote>
  <p>Constructs an object of type T and wraps it in a std::shared_ptr [...] in order to use <strong>one allocation for both the control block</strong> of the shared pointer and the T object.</p>
</blockquote>

<p>So it looks like <a href=""https://en.cppreference.com/w/cpp/memory/shared_ptr/allocate_shared"" rel=""nofollow noreferrer"">std::allocate_shared</a> should allocate the <code>deleter</code> with your <code>Alloc</code>.</p>

<p>EDIT: And from <code>n4810</code> §20.11.3.6 Creation [util.smartptr.shared.create]</p>

<blockquote>
  <p>1 The common requirements that apply to all <code>make_shared</code>, <strong><code>allocate_shared</code></strong>, <code>make_shared_default_init</code>,
  and <code>allocate_shared_default_init</code> overloads, unless specified otherwise, are described below. </p>
  
  <p>[...]</p>
  
  <p>7 Remarks:
  (7.1) — <strong>Implementations should perform no more than one memory allocation. [Note: This provides
  efficiency equivalent to an intrusive smart pointer. —end note]</strong></p>
</blockquote>

<p>[Emphasis all mine]</p>

<p>So the standard is saying that <code>std::allocate_shared</code> <em>should</em> use <code>Alloc</code> for the control block.</p>
","1312406","","1312406","","2019-11-20 10:42:39","2019-11-20 10:42:39","","","","11","","",""
"58934049","2","","58932991","2019-11-19 12:23:09","","3","","<p>I believe this is unspecified.</p>

<p>Here's the specification of the relevant constructors: <a href=""https://timsong-cpp.github.io/cppwp/n4659/util.smartptr.shared.const#10"" rel=""nofollow noreferrer"">[util.smartptr.shared.const]/10</a></p>

<blockquote>
<pre><code>template&lt;class Y, class D&gt; shared_ptr(Y* p, D d);
template&lt;class Y, class D, class A&gt; shared_ptr(Y* p, D d, A a);
template &lt;class D&gt; shared_ptr(nullptr_t p, D d);
template &lt;class D, class A&gt; shared_ptr(nullptr_t p, D d, A a);
</code></pre>
  
  <p><em>Effects:</em> Constructs a <code>shared_­ptr</code> object that owns the object <code>p</code> and the deleter <code>d</code>. When <code>T</code> is not an array type, the first and
  second constructors enable <code>shared_­from_­this</code> with <code>p</code>. The second
  and fourth constructors <strong>shall use a copy of <code>a</code> to allocate memory
  for internal use</strong>. If an exception is thrown, <code>d(p)</code> is called.</p>
</blockquote>

<p>Now, my interpretation is that when the implementation needs memory for internal use, it does so by using <code>a</code>.  It doesn't mean that the implementation has to use this memory to place everything.  For example, suppose that there's this weird implementation:</p>

<pre><code>template &lt;typename T&gt;
class shared_ptr : /* ... */ {
    // ...
    std::aligned_storage&lt;16&gt; _Small_deleter;
    // ...
public:
    // ...
    template &lt;class _D, class _A&gt;
    shared_ptr(nullptr_t, _D __d, _A __a) // for example
        : _Allocator_base{__a}
    {
        if constexpr (sizeof(_D) &lt;= 16)
            _Construct_at(&amp;_Small_deleter, std::move(__d));
        else
            // use 'a' to allocate storage for the deleter
    }
// ...
};
</code></pre>

<p>Does this implementation ""use a copy of <code>a</code> to allocate memory for internal use""?  Yes, it does.  It never allocates memory except by using <code>a</code>.  There are many problems with this naive implementation, but let's say that it switches to using allocators in all but the simplest case in which the <code>shared_ptr</code> is constructed directly from a pointer and is never copied or moved or otherwise referenced and there are no other complications.  The point is, just because we fail to imagine a valid implementation doesn't by itself prove that it cannot theoretically exist.  I am not saying that such an implementation can actually be found in the real world, just that the standard doesn't seem to be actively prohibiting it.</p>
","9716597","","9716597","","2019-12-12 08:37:13","2019-12-12 08:37:13","","","","4","","",""
"56117052","2","","56058494","2019-05-13 17:18:17","","8","","<p>It is all about structural pinning.</p>

<p>First, I will use the syntax <code>P&lt;T&gt;</code> to mean something like <code>impl Deref&lt;Target = T&gt;</code> — some (smart) pointer type <code>P</code> that <code>Deref::deref</code>s to a <code>T</code>. <code>Pin</code> only ""applies"" to / makes sense on such (smart) pointers.</p>

<p>Let's say we have:</p>

<pre class=""lang-rust prettyprint-override""><code>struct Wrapper&lt;Field&gt; {
    field: Field,
}
</code></pre>

<p>The initial question is</p>

<blockquote>
  <p>Can we get a <code>Pin&lt;P&lt;Field&gt;&gt;</code> from a <code>Pin&lt;P&lt;Wrapper&lt;Field&gt;&gt;&gt;</code>, by ""projecting"" our <code>Pin&lt;P&lt;_&gt;&gt;</code> from the <code>Wrapper</code> to its <code>field</code>?</p>
</blockquote>

<p>This requires the basic projection <code>P&lt;Wrapper&lt;Field&gt;&gt; -&gt; P&lt;Field&gt;</code>, which is only possible for:</p>

<ul>
<li><p>shared references (<code>P&lt;T&gt; = &amp;T</code>). This is not a very interesting case given that <code>Pin&lt;P&lt;T&gt;&gt;</code> always <a href=""https://doc.rust-lang.org/core/ops/trait.Deref.html#impl-Deref"" rel=""noreferrer""><code>deref</code></a>s to <code>T</code>.</p></li>
<li><p>unique references (<code>P&lt;T&gt; = &amp;mut T</code>).</p></li>
</ul>

<p>I will use the syntax <code>&amp;[mut] T</code> for this type of projection.</p>

<p>The question now becomes:</p>

<blockquote>
  <p>Can we go from <code>Pin&lt;&amp;[mut] Wrapper&lt;Field&gt;&gt;</code> to <code>Pin&lt;&amp;[mut] Field&gt;</code>?</p>
</blockquote>

<p>The point that may be unclear from the documentation is that it is up to the creator of <code>Wrapper</code> to decide!</p>

<p>There are two possible choices for the library author for each struct field.</p>

<h2>There is a structural <code>Pin</code> projection to that field</h2>

<p>For instance, the <a href=""https://docs.rs/pin-utils/0.1.0-alpha.4/pin_utils/macro.unsafe_pinned.html"" rel=""noreferrer""><code>pin_utils::unsafe_pinned!</code></a> macro is used to define such a projection (<code>Pin&lt;&amp;mut Wrapper&lt;Field&gt;&gt; -&gt; Pin&lt;&amp;mut Field&gt;</code>).</p>

<p>For the <code>Pin</code> projection to be sound:</p>

<ul>
<li><p>the whole struct must only implement <code>Unpin</code> when all the fields for which there is a structural <code>Pin</code> projection implement <code>Unpin</code>.</p>

<ul>
<li>no implementation is allowed to use <code>unsafe</code> to move such fields out of a <code>Pin&lt;&amp;mut Wrapper&lt;Field&gt;&gt;</code> (or <code>Pin&lt;&amp;mut Self&gt;</code> when <code>Self = Wrapper&lt;Field&gt;</code>). For instance, <strong><code>Option::take()</code> is forbidden</strong>.</li>
</ul></li>
<li><p>the whole struct may only implement <code>Drop</code> if <code>Drop::drop</code> does not move any of the fields for which there is a structural projection.</p></li>
<li><p>the struct cannot be <code>#[repr(packed)]</code> (a corollary of the previous item).</p></li>
</ul>

<p>In your given <a href=""https://github.com/rust-lang-nursery/futures-rs/blob/0.3.0-alpha.15/futures-util/src/future/map.rs#L36-L45"" rel=""noreferrer""><code>future::Map</code></a> example, this is the case of the <code>future</code> field of the <code>Map</code> struct.</p>

<h2>There is no structural <code>Pin</code> projection to that field</h2>

<p>For instance, the <a href=""https://docs.rs/pin-utils/0.1.0-alpha.4/pin_utils/macro.unsafe_unpinned.html"" rel=""noreferrer""><code>pin_utils::unsafe_unpinned!</code></a> macro is used to define such a projection (<code>Pin&lt;&amp;mut Wrapper&lt;Field&gt;&gt; -&gt; &amp;mut Field</code>).</p>

<p>In this case, <em>that field</em> is not considered pinned by a <code>Pin&lt;&amp;mut Wrapper&lt;Field&gt;&gt;</code>.</p>

<ul>
<li><p>whether <code>Field</code> is <code>Unpin</code> or not does not matter.</p>

<ul>
<li>implementations are allowed to use <code>unsafe</code> to move such fields out of a <code>Pin&lt;&amp;mut Wrapper&lt;Field&gt;&gt;</code>. For instance, <strong><code>Option::take()</code> is allowed</strong>.</li>
</ul></li>
<li><p><code>Drop::drop</code> is also allowed to move such fields,</p></li>
</ul>

<p>In your given <a href=""https://github.com/rust-lang-nursery/futures-rs/blob/0.3.0-alpha.15/futures-util/src/future/map.rs#L36-L45"" rel=""noreferrer""><code>future::Map</code></a> example, this is the case of the <code>f</code> field of the <code>Map</code> struct.</p>

<h3>Example of both types of projection</h3>

<pre class=""lang-rust prettyprint-override""><code>impl&lt;Fut, F&gt; Map&lt;Fut, F&gt; {
    unsafe_pinned!(future: Fut); // pin projection -----+
    unsafe_unpinned!(f: Option&lt;F&gt;); // not pinned --+   |
//                                                  |   |
//                 ...                              |   |
//                                                  |   |
    fn poll (mut self: Pin&lt;&amp;mut Self&gt;, cx: &amp;mut Context&lt;'_&gt;) -&gt; Poll&lt;T&gt; {
        //                                          |   |
        match self.as_mut().future().poll(cx) { // &lt;----+ required here
            Poll::Pending =&gt; Poll::Pending, //      |
            Poll::Ready(output) =&gt; { //             |
                let f = self.f().take() // &lt;--------+ allows this
</code></pre>
","10776437","","155423","","2019-05-18 01:01:37","2019-05-18 01:01:37","","","","6","","",""
"57724995","2","","57724907","2019-08-30 10:25:46","","0","","<p>The static type of the pointer <code>p</code> is <code>Foo</code>.</p>

<p>So in this statement</p>

<pre><code>f = *p;
</code></pre>

<p>there left operand <code>*p</code> has the type <code>Foo</code> that is there is slicing.</p>
","2877241","","","","","2019-08-30 10:25:46","","","","0","","",""
"57725006","2","","57724907","2019-08-30 10:26:40","","12","","<p>This is regular slicing, hidden under a layer of <code>std::function</code> and <code>std::shared_ptr</code>.</p>

<pre><code>f = *p;
</code></pre>

<p>is valid because <code>*p</code> is a callable object with an appropriate <code>operator()</code>, and that is one of the things you can wrap in a <code>std::function</code>.</p>

<p>The reason that it doesn't work is that it copies <code>*p</code> – and that is a <code>Foo&amp;</code>, not a <code>Bar&amp;</code>.  </p>

<p>This adaptation of your last example would behave the same:</p>

<pre><code>Bar b;
Foo&amp; c = b;
std::function&lt;int(void)&gt; f1 = c;
std::cout &lt;&lt; f1() &lt;&lt; std::endl;
</code></pre>
","404970","","404970","","2019-08-30 10:52:24","2019-08-30 10:52:24","","","","0","","",""
"57725063","2","","57724907","2019-08-30 10:30:17","","24","","<p>Object slicing happens here.</p>

<p>The point is given <code>f = *p;</code>, <code>p</code> is of type <code>std::shared_ptr&lt;Foo&gt;</code>, then the type of <code>*p</code> is <code>Foo&amp;</code> (instead of <code>Bar&amp;</code>). Even the <a href=""https://en.cppreference.com/w/cpp/utility/functional/function/operator%3D"" rel=""noreferrer"">assignment operator of <code>std::function</code></a> takes argument by reference, but</p>

<blockquote>
  <p>4) Sets the target of <code>*this</code> to the callable <code>f</code>, as if by executing <code>function(std::forward&lt;F&gt;(f)).swap(*this);</code>.</p>
</blockquote>

<p>Note that the <code>F</code> above is deduced as <code>Foo&amp;</code> too. And the <a href=""https://en.cppreference.com/w/cpp/utility/functional/function/function"" rel=""noreferrer"">constructor of <code>std::function</code></a> takes argument by value, object slicing happens, the effect becomes that <code>f</code> is assigned from an object of type <code>Foo</code> which is slice-copied from <code>*p</code>.</p>

<blockquote>
<pre><code>template&lt; class F &gt; 
function( F f );
</code></pre>
</blockquote>
","3309790","","3309790","","2019-08-30 10:49:44","2019-08-30 10:49:44","","","","0","","",""
"57725082","2","","57724907","2019-08-30 10:32:00","","11","","<h2>Slicing</h2>

<p>This is a case of slicing. 
The reason is assignment operator of <code>std::function</code> (as demonstrated in another <a href=""https://stackoverflow.com/a/57725063/2261538"">answer</a> as well) which states:</p>

<blockquote>
  <p>Sets the target of *this to the callable f, as if by executing
  function(std::forward(f)).swap(*this);. This operator does not
  participate in overload resolution unless f is Callable for argument
  types Args... and return type R. (since C++14)</p>
</blockquote>

<p><a href=""https://en.cppreference.com/w/cpp/utility/functional/function/operator%3D"" rel=""nofollow noreferrer"">https://en.cppreference.com/w/cpp/utility/functional/function/operator%3D</a></p>

<p>If you simplify and strip down the example - you can easily see what's going on:</p>

<pre><code>Foo* p =  new Bar;

Foo f;
f = *p;//&lt;-- slicing here since you deref and then copy the object
</code></pre>

<p>It looks like you were aiming at obtaining a pointer to the overridden virtual function - unfortunately, theres no easy way to <em>unroll</em> the virtual function lookup as that is implemented via a <em>runtime</em> lookup table. However an easy workaround might be to use a lambda to wrap (As the OP also mentions):</p>

<pre><code>f = [p]{return (*p)();};
</code></pre>

<p>A more suitable solution could also be to just a use <code>reference_wrapper</code>:</p>

<pre><code>f = std::ref(p);
</code></pre>
","2261538","","2261538","","2019-09-01 19:49:20","2019-09-01 19:49:20","","","","5","","",""
"57927169","2","","57926891","2019-09-13 16:18:30","","8","","<p><a href=""http://eel.is/c++draft/over.match.funcs#8.sentence-2"" rel=""noreferrer"">[over.match.funcs]/8</a>:</p>

<blockquote>
  <p>A constructor inherited from class type <code>C</code> ([class.inhctor.init]) that has a first parameter of type “reference to <em>cv1</em> <code>P</code>” (including such a constructor instantiated from a template) is excluded from the set of candidate functions when constructing an object of type <em>cv2</em> <code>D</code> if the argument list has exactly one argument and <code>C</code> is reference-related to <code>P</code> and <code>P</code> is reference-related to <code>D</code>. </p>
</blockquote>

<p>See <a href=""http://wg21.link/CWG2356"" rel=""noreferrer"">CWG2356</a>.</p>
","2756719","","","","","2019-09-13 16:18:30","","","","4","","",""
"57964193","2","","57964026","2019-09-16 20:46:19","","14","","<p>There is value in keeping the rules as simple as possible, and “don’t use a variable that might not have been initialised” is as simple as it gets.</p>

<p>More to the point, there is an established way of calling static methods - always use the class name, not a variable.</p>

<pre><code>System.out.println(Foo.x);
</code></pre>

<p>The variable “foo” is unwanted overhead that should be removed, and the compiler errors and warnings could be seen as helping leading towards that.</p>
","681444","","1393766","","2019-09-16 20:48:41","2019-09-16 20:48:41","","","","0","","",""
"57964211","2","","57964026","2019-09-16 20:48:15","","20","","<blockquote>
  <h2><a href=""https://docs.oracle.com/javase/specs/jls/se12/html/jls-16.html"" rel=""noreferrer"">Chapter 16. Definite Assignment</a></h2>
  
  <p>Each local variable (§14.4) and every blank final field (§4.12.4, §8.3.1.2) <strong>must have a definitely assigned value when any access of its value occurs.</strong></p>
</blockquote>

<p>It doesn't really matter <em>what</em> you try to access via a local variable. The rule is that it should be definitely assigned before that. </p>

<p>To evaluate <a href=""https://docs.oracle.com/javase/specs/jls/se12/html/jls-15.html#jls-15.11"" rel=""noreferrer"">a field access expression</a> <code>foo.x</code>, the <a href=""https://docs.oracle.com/javase/specs/jls/se12/html/jls-15.html#jls-Primary"" rel=""noreferrer""><code>primary</code></a> part of it (<code>foo</code>) must be evaluated first. It means that access to <code>foo</code> will occur, which will result in a compile-time error.</p>

<blockquote>
  <p>For every access of a local variable or blank final field x, x must be definitely assigned before the access, <strong>or a compile-time error occurs.</strong></p>
</blockquote>
","4922375","","4922375","","2019-09-16 21:12:48","2019-09-16 21:12:48","","","","0","","",""
"57964216","2","","57964026","2019-09-16 20:48:35","","73","","<p><a href=""https://docs.oracle.com/javase/specs/jls/se12/html/jls-15.html#jls-15.11"" rel=""noreferrer""><strong>§15.11. Field Access Expressions</strong></a>:</p>

<blockquote>
  <p>If the field is <strong>static</strong>:</p>
  
  <blockquote>
    <p><strong>The Primary expression is evaluated, and the result is discarded</strong>. If evaluation of the Primary expression completes abruptly, the field access expression completes abruptly for the same reason.</p>
  </blockquote>
</blockquote>

<p>Where earlier it states that field access is identified by  <code>Primary.Identifier</code>.</p>

<p>This shows that even though it seems to not use the <code>Primary</code>, it is still evaluated and the result is then discarded which is why it will need to be initialized.  This can make a difference when the evaluation halts the access as stated in the quote.</p>

<p><strong>EDIT:</strong></p>

<p>Here is a short example just to demonstrate visually that the <code>Primary</code> is evaluated even though the result is discarded:</p>

<pre><code>class Foo {
    public static int x = 1;

    public static Foo dummyFoo() throws InterruptedException {
        Thread.sleep(5000);
        return null;
    }

    public static void main(String[] args) throws InterruptedException {
        System.out.println(dummyFoo().x);
        System.out.println(Foo.x);
    }
}
</code></pre>

<p>Here you can see that <code>dummyFoo()</code> is still evaluated because the <code>print</code> is delayed by the 5 second <code>Thread.sleep()</code> even though it always returns a <code>null</code> value which is discarded.  </p>

<p>If the expression was not evaluated the <code>print</code> would appear instantly, which can be seen when the class <code>Foo</code> is used directly to access <code>x</code> with  <code>Foo.x</code>.</p>

<p><strong>Note:</strong>  Method invocation is also considered a <code>Primary</code> shown in <a href=""https://docs.oracle.com/javase/specs/jls/se12/html/jls-15.html#jls-Primary"" rel=""noreferrer"">§15.8 Primary Expressions</a>.</p>
","11434552","","11434552","","2019-09-17 14:05:28","2019-09-17 14:05:28","","","","1","","",""
"57973036","2","","57964026","2019-09-17 11:11:50","","3","","<p>Other answers perfectly explain the mechanism behind what is happening. Maybe you also wanted the rationale behind Java's specification. Not being a Java expert, I cannot give you the original reasons, but let me point this out:</p>

<ul>
<li>Every piece of code either has a meaning or it triggers a compilation error.</li>
<li>(For statics, because an instance is unnecessary, <code>Foo.x</code> is natural.)</li>
<li>Now, what shall we do with <code>foo.x</code> (access through instance variable)? 

<ul>
<li>It could be a compilation error, as in C#, or</li>
<li>It has a meaning. Because <code>Foo.x</code> already means ""simply access <code>x</code>"", it is reasonable that the <em>expression</em> <code>foo.x</code> has a different meaning; that is, <em>every part of the expression is valid</em> and access <code>x</code>.</li>
</ul></li>
</ul>

<p>Let's hope someone knowledgeable can tell the real reason. :-)</p>
","6655648","","","","","2019-09-17 11:11:50","","","","0","","",""
"54506842","2","","54506744","2019-02-03 19:44:25","","19","","<p>Typescript without types is Javascript.
Start your project without Typescript and convert it when you are ready to do so.
Beginning with <code>&lt;any&gt;</code> is not a good practice and makes no sense in my opinion.</p>
","7912416","","2902821","","2019-02-06 13:56:58","2019-02-06 13:56:58","","","","2","","",""
"54553085","2","","54506744","2019-02-06 11:55:17","","1","","<p>I agree with nologin, there is no point doing that, however if you really want to there are a few ways that I can think of, here is a couple:</p>

<h1>Disable by file</h1>

<p>add this comment at the top of the file <code>/* tslint:disable */</code></p>

<h1>Exclude your src folder</h1>

<p>Exclude your code folders from tslint.json (might need to do it on tsconfig.json too</p>

<pre><code>{
 // some linting options
  linterOptions: {
    exclude: ['src/**','components/**'],
  }
}
</code></pre>

<h1>Empty tslint.json and tsconfig</h1>

<p>just replace your tslint.json and tsconfig.json files with an empty object</p>
","875017","","","","","2019-02-06 11:55:17","","","","2","","",""
"54570859","2","","54506744","2019-02-07 10:08:30","","1","","<p>Typescript's USP is type checking at compile time. It ultimately compiles to javascript. Start without typescript. You can always include it in your project when you want to with some refactoring. </p>

<p><a href=""https://www.typescriptlang.org/docs/handbook/migrating-from-javascript.html"" rel=""nofollow noreferrer"">https://www.typescriptlang.org/docs/handbook/migrating-from-javascript.html</a></p>
","6245314","","","","","2019-02-07 10:08:30","","","","0","","",""
"55012175","2","","55012174","2019-03-05 21:52:33","","41","","<p>The current return type (<code>string[]</code>) is intentional. Why?</p>

<p>Consider some type like this:</p>

<pre><code>interface Point {
    x: number;
    y: number;
}
</code></pre>

<p>You write some code like this:</p>

<pre><code>function fn(k: keyof Point) {
    if (k === ""x"") {
        console.log(""X axis"");
    } else if (k === ""y"") {
        console.log(""Y axis"");
    } else {
        throw new Error(""This is impossible"");
    }
}
</code></pre>

<p>Let's ask a question:</p>

<blockquote>
  <p><strong>In a well-typed program, can a legal call to <code>fn</code> hit the error case?</strong></p>
</blockquote>

<p>The <em>desired</em> answer is, of course, ""No"". But what does this have to do with <code>Object.keys</code>?</p>

<p>Now consider this <em>other</em> code:</p>

<pre><code>interface NamedPoint extends Point {
    name: string;
}

const origin: NamedPoint = { name: ""origin"", x: 0, y: 0 };
</code></pre>

<p>Note that according to TypeScript's type system, all <code>NamedPoint</code>s are valid <code>Point</code>s.</p>

<p>Now let's write <em>a little more code</em>:</p>

<pre><code>function doSomething(pt: Point) {
    for (const k of Object.keys(pt)) {
        // A valid call iff Object.keys(pt) returns (keyof Point)[]
        fn(k);
    }
}
// Throws an exception
doSomething(origin);
</code></pre>

<p>Our well-typed program just threw an exception!</p>

<p>Something went wrong here!
By returning <code>keyof T</code> from <code>Object.keys</code>, we've violated the assumption that <code>keyof T</code> forms an exhaustive list, because having a reference to an object doesn't mean that the <em>type of the reference</em> isn't a supertype of the <em>type of the value</em>.</p>

<p>Basically, (at least) one of the following four things can't be true:</p>

<ol>
<li><code>keyof T</code> is an exhaustive list of the keys of <code>T</code></li>
<li>A type with additional properties is always a subtype of its base type</li>
<li>It is legal to alias a subtype value by a supertype reference</li>
<li><code>Object.keys</code> returns <code>keyof T</code></li>
</ol>

<p>Throwing away point 1 makes <code>keyof</code> nearly useless, because it implies that <code>keyof Point</code> might be some value that isn't <code>""x""</code> or <code>""y""</code>.</p>

<p>Throwing away point 2 completely destroys TypeScript's type system. Not an option.</p>

<p>Throwing away point 3 also completely destroys TypeScript's type system.</p>

<p>Throwing away point 4 is fine and makes you, the programmer, think about whether or not the object you're dealing with is possibly an alias for a subtype of the thing you think you have.</p>

<p>The ""missing feature"" to make this <em>legal but not contradictory</em> is <a href=""https://github.com/Microsoft/TypeScript/issues/12936"" rel=""noreferrer"">Exact Types</a>, which would allow you to declare a new <em>kind</em> of type that wasn't subject to point #2. If this feature existed, it would presumably be possible to make <code>Object.keys</code> return <code>keyof T</code> only for <code>T</code>s which were declared as <em>exact</em>.</p>
","1704166","","3617886","","2019-03-05 23:04:33","2019-03-05 23:04:33","","","","3","","",""
"54278884","2","","54216273","2019-01-20 17:12:02","","9","","<p>The question is how to manipulate an image like <a href=""https://developer.android.com/reference/android/widget/ImageView.ScaleType"" rel=""nofollow noreferrer""><code>ImageView.ScaleType.CENTER_CROP</code></a> but to shift the focus from the center to another location that is 20% from the top of the image. First, let's look at what <code>CENTER_CROP</code> does:</p>

<p>From the <a href=""https://developer.android.com/reference/android/widget/ImageView.ScaleType"" rel=""nofollow noreferrer"">documentation</a>:</p>

<p><strong>CENTER_CROP</strong></p>

<blockquote>
  <p>Scale the image uniformly (maintain the image's aspect ratio) so that both dimensions (width and height) of the image will be equal to or larger than the corresponding dimension of the view (minus padding). The image is then centered in the view. From XML, use this syntax: <code>android:scaleType=""centerCrop""</code>.</p>
</blockquote>

<p>In other words, scale the image without distortion such that either the width or height of the image (or both width and height) fit within the view so that the view is completely filled with the image (no gaps.)</p>

<p>Another way to think of this is that the center of the image is ""pinned"" to the center of the view. The image is then scaled to meet the criteria above. </p>

<p>In the following video, the white lines mark the center of the image; the red lines mark the center of the view. The scale type is <code>CENTER_CROP</code>.  Notice how the center points of the image and the view coincide. As the view changes size, these two points continue to overlap and always appear at the center of the view regardless of the view size.</p>

<p><a href=""https://i.stack.imgur.com/uHOOH.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/uHOOH.gif"" alt=""enter image description here""></a></p>

<p>So, what does it mean to have center crop-like behavior at a different location such as 20% from the top? Like center crop, we can specify that the point that is 20% from the top of the image and the point that 20% from the top of the view will be ""pinned"" like the 50% point is ""pinned"" in center crop. The horizontal location of this point remains at 50% of the image and view. The image can now be scaled to satisfy the other conditions of center crop which specify that either the width and/or height of the image will fit the view with no gaps. <em>(Size of view is understood to be the view size less padding.)</em></p>

<p>Here is a short video of this 20% crop behavior. In this video, the white lines show the middle of the image, the red lines show the pinned point in the view and the blue line that shows behind the horizontal red line identifies 20% from the top of the image. (Demo project is on <a href=""https://github.com/Cheticamp/DemoAlternateCrop"" rel=""nofollow noreferrer"">GitHub</a>.</p>

<p><a href=""https://i.stack.imgur.com/FM4Z2.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/FM4Z2.gif"" alt=""enter image description here""></a></p>

<p>Here is the result showing the full image that was supplied and the video in a square frame that transition from the still image. .</p>

<p><a href=""https://i.stack.imgur.com/X1oJd.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/X1oJd.gif"" alt=""enter image description here""></a></p>

<p><strong>MainActivity.kt</strong> <br/>
<code>prepareMatrix()</code> is the method that does the work to determine how to scale/crop the image. There is some additional work to be done with the video since it appears that the video is made to fit the <code>TextureView</code>as a scale type ""FIT_XY"" when it is assigned to the <code>TextureView</code>. Because of this scaling, the media size must be restored before <code>prepareMatrix()</code> is called for the video</p>

<pre><code>class MainActivity : AppCompatActivity() {
    private val imageResId = R.drawable.test
    private val videoResId = R.raw.test
    private var player: SimpleExoPlayer? = null
    private val mFocalPoint = PointF(0.5f, 0.2f)

    override fun onCreate(savedInstanceState: Bundle?) {
        window.setBackgroundDrawable(ColorDrawable(0xff000000.toInt()))
        super.onCreate(savedInstanceState)
        if (cache == null) {
            cache = SimpleCache(File(cacheDir, ""media""), LeastRecentlyUsedCacheEvictor(MAX_PREVIEW_CACHE_SIZE_IN_BYTES))
        }
        setContentView(R.layout.activity_main)
        //        imageView.visibility = View.INVISIBLE
        imageView.setImageResource(imageResId)
        imageView.doOnPreDraw {
            imageView.scaleType = ImageView.ScaleType.MATRIX
            val imageWidth: Float = ContextCompat.getDrawable(this, imageResId)!!.intrinsicWidth.toFloat()
            val imageHeight: Float = ContextCompat.getDrawable(this, imageResId)!!.intrinsicHeight.toFloat()
            imageView.imageMatrix = prepareMatrix(imageView, imageWidth, imageHeight, mFocalPoint, Matrix())
            val b = BitmapFactory.decodeResource(resources, imageResId)
            val d = BitmapDrawable(resources, b.copy(Bitmap.Config.ARGB_8888, true))
            val c = Canvas(d.bitmap)
            val p = Paint()
            p.color = resources.getColor(android.R.color.holo_red_dark)
            p.style = Paint.Style.STROKE
            val strokeWidth = 10
            p.strokeWidth = strokeWidth.toFloat()
            // Horizontal line
            c.drawLine(0f, imageHeight * mFocalPoint.y, imageWidth, imageHeight * mFocalPoint.y, p)
            // Vertical line
            c.drawLine(imageWidth * mFocalPoint.x, 0f, imageWidth * mFocalPoint.x, imageHeight, p)
            // Line in horizontal and vertical center
            p.color = resources.getColor(android.R.color.white)
            c.drawLine(imageWidth / 2, 0f, imageWidth / 2, imageHeight, p)
            c.drawLine(0f, imageHeight / 2, imageWidth, imageHeight / 2, p)

            imageView.setImageBitmap(d.bitmap)
            imageViewFull.setImageBitmap(d.bitmap)
        }
    }

    fun startPlay(view: View) {
        playVideo()
    }

    private fun getViewWidth(view: View): Float {
        return (view.width - view.paddingStart - view.paddingEnd).toFloat()
    }

    private fun getViewHeight(view: View): Float {
        return (view.height - view.paddingTop - view.paddingBottom).toFloat()
    }

    private fun prepareMatrix(targetView: View, mediaWidth: Float, mediaHeight: Float,
                              focalPoint: PointF, matrix: Matrix): Matrix {
        if (targetView.visibility != View.VISIBLE) {
            return matrix
        }
        val viewHeight = getViewHeight(targetView)
        val viewWidth = getViewWidth(targetView)
        val scaleFactorY = viewHeight / mediaHeight
        val scaleFactor: Float
        val px: Float
        val py: Float
        if (mediaWidth * scaleFactorY &gt;= viewWidth) {
            // Fit height
            scaleFactor = scaleFactorY
            px = -(mediaWidth * scaleFactor - viewWidth) * focalPoint.x / (1 - scaleFactor)
            py = 0f
        } else {
            // Fit width
            scaleFactor = viewWidth / mediaWidth
            px = 0f
            py = -(mediaHeight * scaleFactor - viewHeight) * focalPoint.y / (1 - scaleFactor)
        }
        matrix.postScale(scaleFactor, scaleFactor, px, py)
        return matrix
    }

    private fun playVideo() {
        player = ExoPlayerFactory.newSimpleInstance(this@MainActivity, DefaultTrackSelector())
        player!!.setVideoTextureView(textureView)
        player!!.addVideoListener(object : VideoListener {
            override fun onVideoSizeChanged(width: Int, height: Int, unappliedRotationDegrees: Int, pixelWidthHeightRatio: Float) {
                super.onVideoSizeChanged(width, height, unappliedRotationDegrees, pixelWidthHeightRatio)
                val matrix = Matrix()
                // Restore true media size for further manipulation.
                matrix.setScale(width / getViewWidth(textureView), height / getViewHeight(textureView))
                textureView.setTransform(prepareMatrix(textureView, width.toFloat(), height.toFloat(), mFocalPoint, matrix))
            }

            override fun onRenderedFirstFrame() {
                Log.d(""AppLog"", ""onRenderedFirstFrame"")
                player!!.removeVideoListener(this)
                imageView.animate().alpha(0f).setDuration(2000).start()
                imageView.visibility = View.INVISIBLE
            }
        })
        player!!.volume = 0f
        player!!.repeatMode = Player.REPEAT_MODE_ALL
        player!!.playRawVideo(this, videoResId)
        player!!.playWhenReady = true
        //        player!!.playVideoFromUrl(this, ""https://sample-videos.com/video123/mkv/240/big_buck_bunny_240p_20mb.mkv"", cache!!)
        //        player!!.playVideoFromUrl(this, ""https://sample-videos.com/video123/mkv/720/big_buck_bunny_720p_1mb.mkv"", cache!!)
        //        player!!.playVideoFromUrl(this@MainActivity, ""https://sample-videos.com/video123/mkv/720/big_buck_bunny_720p_1mb.mkv"")
    }

    override fun onStop() {
        super.onStop()
        if (player != null) {
            player!!.setVideoTextureView(null)
            //        playerView.player = null
            player!!.release()
            player = null
        }
    }

    companion object {
        const val MAX_PREVIEW_CACHE_SIZE_IN_BYTES = 20L * 1024L * 1024L
        var cache: com.google.android.exoplayer2.upstream.cache.Cache? = null

        @JvmStatic
        fun getUserAgent(context: Context): String {
            val packageManager = context.packageManager
            val info = packageManager.getPackageInfo(context.packageName, 0)
            val appName = info.applicationInfo.loadLabel(packageManager).toString()
            return Util.getUserAgent(context, appName)
        }
    }

    fun SimpleExoPlayer.playRawVideo(context: Context, @RawRes rawVideoRes: Int) {
        val dataSpec = DataSpec(RawResourceDataSource.buildRawResourceUri(rawVideoRes))
        val rawResourceDataSource = RawResourceDataSource(context)
        rawResourceDataSource.open(dataSpec)
        val factory: DataSource.Factory = DataSource.Factory { rawResourceDataSource }
        prepare(LoopingMediaSource(ExtractorMediaSource.Factory(factory).createMediaSource(rawResourceDataSource.uri)))
    }

    fun SimpleExoPlayer.playVideoFromUrl(context: Context, url: String, cache: Cache? = null) = playVideoFromUri(context, Uri.parse(url), cache)

    fun SimpleExoPlayer.playVideoFile(context: Context, file: File) = playVideoFromUri(context, Uri.fromFile(file))

    fun SimpleExoPlayer.playVideoFromUri(context: Context, uri: Uri, cache: Cache? = null) {
        val factory = if (cache != null)
            CacheDataSourceFactory(cache, DefaultHttpDataSourceFactory(getUserAgent(context)))
        else
            DefaultDataSourceFactory(context, MainActivity.getUserAgent(context))
        val mediaSource = ExtractorMediaSource.Factory(factory).createMediaSource(uri)
        prepare(mediaSource)
    }
}
</code></pre>
","6287910","","6287910","","2019-01-30 19:57:49","2019-01-30 19:57:49","","","","1","","",""
"56021555","2","","56020455","2019-05-07 11:25:37","","0","","<p>I mean, this is rendering component <code>only once</code> versus rendering <code>only if</code>. 
With <code>only if</code> being the superset containing <code>only once condition</code>.</p>

<p>Sure, rendering <code>only once</code> can be done via both. But as a library they'll just document what works for all cases. Using the latter approach of variable use is just making a decision about how we see things.</p>

<p>Good point you made here though.</p>
","1096194","","","","","2019-05-07 11:25:37","","","","0","","",""
"56109813","2","","56020455","2019-05-13 09:49:26","","3","","<blockquote>
  <p>Is this behaviour documented and expected in all React versions?</p>
</blockquote>

<p>No, I did not find documentation stating this behavior.</p>

<p>What I found by digging into react source code and setting some breakpoints is that by saving and reusing the createElement result (<code>const fooOnce = &lt;Foo/&gt;;</code>) you effectively will use the exact same props object everytime, while calling createElement in each render creates a new props object everytime.</p>

<p>Currently, this does make a difference because of the following condition in <code>function beginWork</code> from the fibers engine: <code>if (oldProps !== newProps || hasLegacyContextChanged())</code></p>

<p>when the props object has the same identity, react immediately considers that there is no work to be done for this element (and does not even call render).</p>

<p>This seems fairly probable to me to keep working, but of course there is no guarantee that this optimisation will always be in place with this exact behaviour. </p>

<p>the code I'm refering to is here:
<a href=""https://github.com/facebook/react/blob/c7398f33966c4fedcba2c48e915b379e8f334607/packages/react-reconciler/src/ReactFiberBeginWork.js#L2119"" rel=""nofollow noreferrer"">https://github.com/facebook/react/blob/c7398f33966c4fedcba2c48e915b379e8f334607/packages/react-reconciler/src/ReactFiberBeginWork.js#L2119</a></p>

<p>when you use just the normal  you will end up calling render, and since the output is different it will update the DOM.</p>

<p>when you use React.memo, the props will <em>not</em> have the same identity, but then react will enter the memo component case (<a href=""https://github.com/facebook/react/blob/c7398f33966c4fedcba2c48e915b379e8f334607/packages/react-reconciler/src/ReactFiberBeginWork.js#L2377"" rel=""nofollow noreferrer"">https://github.com/facebook/react/blob/c7398f33966c4fedcba2c48e915b379e8f334607/packages/react-reconciler/src/ReactFiberBeginWork.js#L2377</a>)
and do a shallowEquals comparison (<a href=""https://github.com/facebook/react/blob/c7398f33966c4fedcba2c48e915b379e8f334607/packages/react-reconciler/src/ReactFiberBeginWork.js#L487"" rel=""nofollow noreferrer"">https://github.com/facebook/react/blob/c7398f33966c4fedcba2c48e915b379e8f334607/packages/react-reconciler/src/ReactFiberBeginWork.js#L487</a>)</p>

<blockquote>
  <p>Are there reasons to not reuse elements this way to prevent component updates?</p>
</blockquote>

<p>This can change, so I would not use this in production code.</p>

<p>Besides that reason, I would avoid this because the decision if the component updates gets out of the component itself, since now to use it you need to change the consumer code, instead of just changing code on the component or adding a wrapper to it.</p>
","4023734","","4023734","","2019-05-13 10:12:08","2019-05-13 10:12:08","","","","0","","",""
"56612565","2","","55487397","2019-06-15 17:20:53","","3","","<p>On Visual Studio Installer, You will see two tabs : Installed and Available. On Installed Tab, Visual Studio Community 2017, Click on More Drop-down, Choose Uninstall. Reboot is recommended before you begin with Installing Visual Studio Community 2019 from Available Tab.</p>
","1864358","","","","","2019-06-15 17:20:53","","","","0","","",""
"56848729","2","","56782788","2019-07-02 08:53:44","","10","","<p>Sideway text is possible using <code>RotatedBox</code>, which is enough for the text to correctly wrap as you'd expect.</p>

<pre class=""lang-dart prettyprint-override""><code>Row(
  children: &lt;Widget&gt;[
    RotatedBox(
      quarterTurns: 1,
      child: Text(sample),
    ),
    Expanded(child: Text(sample)),
    RotatedBox(
      quarterTurns: -1,
      child: Text(sample),
    ),
  ],
),
</code></pre>

<p><a href=""https://i.stack.imgur.com/UlKJL.gif"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/UlKJL.gif"" alt=""enter image description here""></a></p>

<p>Similarly, Flutter now supports inline widgets inside text. This can be used to rotate smileys inside a text.</p>

<pre class=""lang-dart prettyprint-override""><code>RotatedBox(
  quarterTurns: 1,
  child: RichText(
    text: TextSpan(
      text: 'Hello World',
      style: DefaultTextStyle.of(context).style,
      children: [
        WidgetSpan(
          child: RotatedBox(quarterTurns: -1, child: Text('😃')),
        )
      ],
    ),
  ),
),
</code></pre>

<p><a href=""https://i.stack.imgur.com/xyIdj.gif"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/xyIdj.gif"" alt=""enter image description here""></a></p>
","8394265","","8394265","","2019-07-02 09:02:49","2019-07-02 09:02:49","","","","4","","",""
"57088395","2","","56936336","2019-07-18 06:36:48","","2","","<p>If your KDC allows constrained delegation, you can setup your intermedaite server to allow impersonation. This way it can established security context with the client in one mechanism (in your case, NTLM), and talk to the backend server on behalf of the client in another mechanism (Kerberos). Google for ""constrained delegation"" and ""protocol transition"" for more information. Hope this helps.</p>
","1061575","","","","","2019-07-18 06:36:48","","","","2","","",""
"57662095","2","","57661132","2019-08-26 17:04:22","","3","","<p><strong>There is no way to do what you describe without GNU extensions.</strong></p>

<p>This portable approach gives a hard error (because <code>_Static_assert</code> requires a constant expression):</p>

<pre><code>#define thefun(a, b) \
({ \
   _Static_assert(b == 0, \
       ""'thefun' called with second argument not NULL""); \
   real_thefun(a, b); \
})
</code></pre>

<p>However, there is <em>one</em> fortified-style approach that works on both GCC and Clang:</p>

<pre><code>extern void thefun_called_with_nonnull_arg (void)
    __attribute__((__deprecated__(
        ""'thefun' called with second argument not NULL"")));

extern int real_thefun (void *, void *);

static inline int
thefun (void *a, void *b)
{
   if (!__builtin_constant_p((unsigned short)(unsigned long)b) || b != 0)
       thefun_called_with_nonnull_arg();
   return real_thefun(a, b);
}

int warning_expected (void *a, void *b)
{
    return thefun(a, b);
}
int warning_not_expected (void *a)
{
    return thefun(a, 0);
}
</code></pre>

<p>Tested with GCC 8.3.0 and Clang 8.0.0.</p>

<p>See <a href=""https://gcc.gnu.org/bugzilla/show_bug.cgi?id=91554"" rel=""nofollow noreferrer"">GCC bug report #91554</a> for more information about the need for the casts.</p>
","10795151","","10795151","","2019-08-29 17:59:07","2019-08-29 17:59:07","","","","0","","",""
"57958083","2","","57957168","2019-09-16 13:37:42","","2","","<p><strike>The code producing this warning is <strong>not valid C</strong> and should be fixed.</strike> The C language requires issuing ""diagnostics"" (warnings or errors) for constraint violations <strike>such as this</strike>, and does not mandate the existence of any way to disable them. I believed (and I suspect many others do) that <code>extern</code> was a constraint violation with an initializer, since in normal usage <code>extern</code> only provides a declaration, not a definition. However, per 6.9.2 ¶1:</p>

<blockquote>
  <p>If the declaration of an identifier for an object has file scope and an initializer, the declaration is an external definition for the identifier.</p>
</blockquote>

<p>Being that the grammar seems to allow <code>extern</code> with an initializer, this is indeed a valid definition.</p>

<p>GCC has a <code>-w</code> option that will probably shut the warning off, but at the expense of disabling all warnings with no ability to override and turn some back on. This would make sense if it were a constraint violation and would be a sign to fix the invalid code; however, the code is valid and GCC absolutely should be providing a mechanism not to produce a spurious warning about it.</p>

<p>As noted by Eljay in a comment:</p>

<blockquote>
  <p>Warnings come in several categories: by the standard required diagnostic message; lint-like static analysis of common accidental language abuse/misuse; well-meaning but still stylistic opinion (e.g., <code>-Weffc++</code>); possibly too pedantic and/or minutia (e.g. <code>-Weverything</code> or <code>-pedantic</code>). The latter categories ought to have ""opt-out"" ways to disable the specific warning, such as in the OP's case.</p>
</blockquote>

<p>GCC generally tries to honor this <em>ought</em>, most of the time, and I think the absence of a way to disable this one would be worth reporting to the <a href=""https://gcc.gnu.org/bugzilla/"" rel=""nofollow noreferrer"">GCC bug tracker</a>.</p>
","379897","","379897","","2019-09-24 15:23:51","2019-09-24 15:23:51","","","","2","","",""
"57958637","2","","57957168","2019-09-16 14:08:13","","3","","<blockquote>
  <p>There're hundreds of instances of this warning and they flood the compiler output. Hard to ignore. </p>
</blockquote>

<p>If this is external library there is way to reduce this warning to single warring report.
I'm suspecting that you can live with single warning message.</p>

<p>Wrap this library API with your own functions/methods. You can name them 1:1 using different namespace to avoid complex modification of own code where this API is used. This way this warning will be reported only when source including problematic header file is included. Aim is to include problematic header file only once.</p>

<p>Depending how this API looks like it may be harder to do.</p>

<p>Anyway if this is third party library then this approach will make it easier to mock that library and write test for your code.</p>
","1387438","","","","","2019-09-16 14:08:13","","","","0","","",""
"56913798","2","","56782788","2019-07-06 11:46:30","","2","","<p>If you make custom font with all symbols rotated by 180° (hard part), then you can simple change <em>textDirection</em> to <em>TextDirection.rtl</em> (right-to-left) and rotate text by one quarter (not easy too).</p>
","1891712","","1891712","","2019-07-06 18:36:11","2019-07-06 18:36:11","","","","3","","",""
"56933803","2","","56782788","2019-07-08 11:19:37","","-1","","<p>Its Simple draw what you want </p>

<p>Examples <a href=""https://fireship.io/lessons/flutter-widget-positioning-guide/"" rel=""nofollow noreferrer"">flutter-widget-positioning-guide</a></p>

<p>then </p>

<pre><code>Column(
    children: [
        MyWidget(),
        MyWidget(),
        MyWidget()
    ]
);

// or swap a Column for a Row to flip the axis

Row(children: [ ]);

// and this is all just sugar for the Flex widget
Flex(
    direction: Axis.vertical&lt;--------------
)
</code></pre>
","6183113","","","","","2019-07-08 11:19:37","","","","0","","",""
"56938333","2","","56782788","2019-07-08 15:38:49","","10","","<p>This solution is based on a flex-box layout. It converts the string to a list of words and puts them in vertically rotated Text widgets. These are laid out with a <code>Wrap</code> widget set to <code>Axis.vertical</code>. The Wrap widget automatically handles words that need to wrap by putting them in the next column.</p>

<pre><code>class HomePage extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Scaffold(
      body: Padding(
        padding: const EdgeInsets.all(8.0),
        child: Wrap(
          direction: Axis.vertical,
          children: _getWords(),
        ),
      ),
    );
  }

  List&lt;Widget&gt; _getWords() {
    const text =
        ""That's all 😉🐐 12345 One Two Three Four Five ᠸᠢᠺᠢᠫᠧᠳᠢᠶᠠ᠂ ᠴᠢᠯᠦᠭᠡᠲᠦ ᠨᠡᠪᠲᠡᠷᠬᠡᠢ ᠲᠣᠯᠢ ᠪᠢᠴᠢᠭ ᠪᠣᠯᠠᠢ᠃"";
    var emoji = RegExp(r""([\u2200-\u3300]|[\uD83C-\uD83E].)"");
    List&lt;Widget&gt; res = [];
    var words = text.split("" "");
    for (var word in words) {
      var matches = emoji.allMatches(word);
      if (matches.isEmpty) {
        res.add(RotatedBox(quarterTurns: 1, child: Text(word + ' ')));
      } else {
        var parts = word.split(emoji);
        int i = 0;
        for (Match m in matches) {
          res.add(RotatedBox(quarterTurns: 1, child: Text(parts[i++])));
          res.add(Text(m.group(0)));
        }
        res.add(RotatedBox(quarterTurns: 1, child: Text(parts[i] + ' ')));
      }
    }
    return res;
  }
}
</code></pre>

<p><a href=""https://i.stack.imgur.com/FN0t0.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/FN0t0.png"" alt=""enter image description here""></a></p>
","1891712","","3681880","","2019-07-08 17:53:58","2019-07-08 17:53:58","","","","0","","",""
"57048676","2","","55487397","2019-07-16 00:37:17","","1","","<p>user1864358 gave a GREAT answer!  That is brilliant!</p>

<p>I have 2017 on one box and 2019 on another.  </p>

<p>Kinda prefer 2019 and I thought installing 2017 on box #3 would just install the LATEST ver.... assumptions, I am finding in life, are very, VERY time consuming.</p>

<ol>
<li>Following his advice, I went to Uninstall or change a program ...</li>
<li>I Ran ""MS Vis Studio INSTALLER"" (you run the installer to uninstall, neato!) </li>
<li>NOTE: NO UNINSTALL, so, as above, you install to uninstall, groovy!</li>
<li>The first question was ""Remove VS Installer and installations of VS?""</li>
<li>Hit Uninstall Button ...</li>
<li>Let it do its thang, for like, 20-30 hours...</li>
<li>Download and install 2019</li>
</ol>

<p>Voila!!</p>
","10018705","","10018705","","2019-07-16 00:52:15","2019-07-16 00:52:15","","","","0","","",""
"57053861","2","","55616929","2019-07-16 09:12:29","","1","","<p>It sure looks bugged. Just wanted to note that according to the <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.ffill.html"" rel=""nofollow noreferrer"">pandas documentation</a> the <code>.ffill()</code> method is a synonym for <code>.fillna(method='ffill')</code>. Using the latter generates your expected output for both your examples in pandas version <code>0.23.4</code> without any errors or additional columns. Hope that helps.</p>

<pre class=""lang-py prettyprint-override""><code>import pandas as pd
import numpy as np
df=pd.DataFrame({'A':[np.nan,1,1,np.nan],'B':[2,np.nan,2,2]},index=[1,1,2,2])

df.columns=['A','A'] #dup column names
df.groupby(level=0).fillna(method='ffill')

Output:
    A   A
1   NaN 2.0
1   1.0 2.0
2   1.0 2.0
2   1.0 2.0
</code></pre>
","2550702","","","","","2019-07-16 09:12:29","","","","0","","",""
"54201224","2","","54200988","2019-01-15 14:47:35","","15","","<p>I think <a href=""https://en.cppreference.com/w/cpp/language/constraints"" rel=""noreferrer"">cppreference's concepts page</a> explains this. I can explain with ""math"" so to say, why this must be like this:</p>

<p>If you want to define a concept, you do this:</p>

<pre><code>template&lt;typename T&gt;
concept Addable = requires (T x) { x + x; }; // requires-expression
</code></pre>

<p>If you want to declare a function that uses that concept, you do this:</p>

<pre><code>template&lt;typename T&gt; requires Addable&lt;T&gt; // requires-clause, not requires-expression
T add(T a, T b) { return a + b; }
</code></pre>

<p>Now if you don't want to define the concept separately, I guess all you have to do is some substitution. Take this part <code>requires (T x) { x + x; };</code> and replace the <code>Addable&lt;T&gt;</code> part, and you'll get:</p>

<pre><code>template&lt;typename T&gt; requires requires (T x) { x + x; }
T add(T a, T b) { return a + b; }
</code></pre>

<p>which is what you're asking about.</p>
","1317944","","","","","2019-01-15 14:47:35","","","","8","","",""
"54201537","2","","54200988","2019-01-15 15:03:46","","78","","<p>It is because the grammar requires it. It does.</p>

<p>A <code>requires</code> constraint does not <em>have to</em> use a <code>requires</code> expression. It can use any more-or-less arbitrary boolean constant expression. Therefore, <code>requires (foo)</code> must be a legitimate <code>requires</code> constraint.</p>

<p>A <code>requires</code> <em>expression</em> (that thing that tests whether certain things follow certain constraints) is a distinct construct; it's just introduced by the same keyword. <code>requires (foo f)</code> would be the beginning of a valid <code>requires</code> expression.</p>

<p>What you want is that if you use <code>requires</code> in a place that accepts constraints, you should be able to make a ""constraint+expression"" out of the <code>requires</code> clause.</p>

<p>So here's the question: if you put <code>requires (foo)</code> into a place that is appropriate for a requires constraint... how far does the parser have to go before it can realize that this is a requires <em>constraint</em> rather than a constraint+expression the way you want it to be?</p>

<p>Consider this:</p>

<pre><code>void bar() requires (foo)
{
  //stuff
}
</code></pre>

<p>If <code>foo</code> is a type, then <code>(foo)</code> is a parameter list of a requires expression, and everything in the <code>{}</code> is not the body of the function but the body of that <code>requires</code> expression. Otherwise, <code>foo</code> is an expression in a <code>requires</code> clause.</p>

<p>Well, you could say that the compiler should just figure out what <code>foo</code> is first. But C++ <em>really</em> doesn't like it when the basic act of parsing a sequence of tokens requires that the compiler figure out what those identifiers mean before it can make sense of the tokens. Yes, C++ is context-sensitive, so this does happen. But the committee prefers to avoid it where possible.</p>

<p>So yes, it's grammar.</p>
","734069","","734069","","2019-01-15 17:01:42","2019-01-15 17:01:42","","","","16","","",""
"54201765","2","","54200988","2019-01-15 15:18:11","","-10","","<p>Because you are saying that a thing A has a requirement B, and the requirement B has a requirement C.</p>

<p>The thing A requires B which in turn requires C.</p>

<p>The ""requires"" clause itself requires something.</p>

<p>You have thing A (requiring B (requiring C)).</p>

<p>Meh. :)</p>
","560648","","","","","2019-01-15 15:18:11","","","","2","","",""
"54220378","2","","54200988","2019-01-16 15:30:23","","10","","<p>I found <a href=""https://www.reddit.com/r/cpp/comments/7jxq8r/does_anybody_know_why_requires_requires_was_not/drd39zt/"" rel=""noreferrer"">a comment</a> from Andrew Sutton (one of the Concepts authors, who implemented it in gcc) to be quite helpful in this regard, so I thought I'd just quote it here in its near-entirety:</p>

<blockquote>
  <p>Not so long ago requires-expressions (the phrase introduced by the second requires) was not allowed in constraint-expressions (the phrase introduced by the first requires). It could only appear in concept definitions. In fact, this is exactly what is proposed in the section of that paper where that claim appears.</p>
  
  <p>However, in 2016, there was a proposal to relax that restriction [Editor's note: <a href=""http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2016/p0266r2.pdf"" rel=""noreferrer"">P0266</a>]. Note the strikethrough of paragraph 4 in section 4 of the paper. And thus was born requires requires.</p>
  
  <p>To tell the truth, I had never actually implemented that restriction in GCC, so it had always been possible. I think that Walter may have discovered that and found it useful, leading to that paper.</p>
  
  <p>Lest anybody think that I wasn't sensitive to writing requires twice, I did spend some time trying to determine if that could be simplified. Short answer: no.</p>
  
  <p>The problem is that there are two grammatical constructs that need to introduced after a template parameter list: very commonly a constraint expression (like <code>P &amp;&amp; Q</code>) and occasionally syntactic requirements (like <code>requires (T a) { ... }</code>). That's called a requires-expression.</p>
  
  <p>The first requires introduces the constraint. The second requires introduces the requires-expression. That's just the way the grammar composes. I don't find it confusing at all.</p>
  
  <p>I tried, at one point, to collapse these to a single requires. Unfortunately, that leads to some seriously difficult parsing problems. You can't easily tell, for example if a <code>(</code> after the requires denotes a nested subexpression or a parameter-list. I don't believe that there is a perfect disambiguation of those syntaxes (see the rationale for uniform initialization syntax; this problem is there too).</p>
  
  <p>So you make a choice: make requires introduce an expression (as it does now) or make it introduce a parameterized list of requirements.</p>
  
  <p>I chose the current approach because most of the time (as in nearly 100% of the time), I want something other than a requires-expression. And in the exceedingly rare case I did want a requires-expression for ad hoc constraints, I really don't mind writing the word twice. It's a an obvious indicator that I haven't developed a sufficiently sound abstraction for the template. (Because if I had, it would have a name.)</p>
  
  <p>I could have chosen to make the requires introduce a requires-expression. That's actually worse, because practically all of your constraints would start to look like this:</p>

<pre><code>template&lt;typename T&gt;
  requires { requires Eq&lt;T&gt;; }
void f(T a, T b);
</code></pre>
  
  <p>Here, the 2nd requires is called a nested-requirement; it evaluates its expression (other code in the block of the requires-expression is not evaluated). I think this is way worse than the status quo. Now, you get to write requires twice everywhere.</p>
  
  <p>I could also have used more keywords. This is a problem in its own right---and it's not just bike shedding. There might be a way to ""redistribute"" keywords to avoid the duplication, but I haven't given that serious thought. But that doesn't really change the essence of the problem.</p>
</blockquote>
","2069064","","","","","2019-01-16 15:30:23","","","","0","","","2019-01-16 15:30:23"
"57959084","2","","57957168","2019-09-16 14:34:17","","4","","<p>For a direct answer to the posed question:</p>

<p>As can be seen from GCC's source code, there is no (semi-)specific switch to disable this warning. It seems to only be disabled by disabling all warning (<code>-w</code>) or including the offending code as system header via <code>-isystem</code>, both of which are non-specific in the suppressed warnings.</p>

<p>There is a related open bug report on GCC <a href=""https://gcc.gnu.org/bugzilla/show_bug.cgi?id=45977"" rel=""nofollow noreferrer"">here</a> and an open meta-bug for similar cases of warnings without switches <a href=""https://gcc.gnu.org/bugzilla/show_bug.cgi?id=44209"" rel=""nofollow noreferrer"">here</a>.</p>

<p>If you don't want to use the two non-specific suppression mechanisms, then you probably will have to patch in an additional flag to GCC or wait for the bugs to be worked on in order to disable this specific warning.</p>
","11941443","","","","","2019-09-16 14:34:17","","","","0","","",""
"57959175","2","","57957168","2019-09-16 14:39:21","","2","","<p>There isn't any specific flag to disable this, which is unfortunate, but there is the <code>-w</code> flag that will disable all warnings, with no way to re-enable them.</p>

<p>From the <a href=""https://gcc.gnu.org/onlinedocs/gcc/Warning-Options.html"" rel=""nofollow noreferrer"">GCC docs</a>:</p>

<blockquote>
  <p><code>-w</code><br>
      Inhibit all warning messages.</p>
</blockquote>

<p>But the better option here is to remove the <code>extern</code> from the variable declarations/definitions. That way, the compiler knows the variable is defined within the translation unit. You can contact the owners of the code to see if they can change it.</p>
","10795151","","","","","2019-09-16 14:39:21","","","","0","","",""
"58772634","2","","58772267","2019-11-08 19:23:00","","1","","<p>Standard layoutness depends on standard layoutness of non-static members:</p>

<blockquote>
  <p>[class.prop]</p>
  
  <p>A class S is a standard-layout class if it:</p>
  
  <ul>
  <li><p>has no non-static data members of type non-standard-layout class (or array of such types) or reference,</p></li>
  <li><p>...</p></li>
  </ul>
</blockquote>

<p>Triviality also depends on triviality of non-static members. For conciseness, I've quoted only the rule for the default constructor, but the other special member functions have similar wording:</p>

<blockquote>
  <p>[class.default.ctor]</p>
  
  <p>A default constructor is trivial if it is not user-provided and if: </p>
  
  <ul>
  <li>...</li>
  <li>for all of the non-static data members of its class that are of class type (or array thereof), each such class has a trivial destructor.</li>
  </ul>
</blockquote>

<p>As far as I can tell, the explicit requirement of PODness to apply to members is redundant, since it also implicitly follows from the requirements of being standard layout and trivial.</p>
","2079303","","","","","2019-11-08 19:23:00","","","","0","","",""
"58773241","2","","58772267","2019-11-08 20:16:28","","11","","<blockquote>
  <p>In C++20, the concept of POD is deprecated, supposedly because it is a meaningless composite trait of being trivial and standard-layout.</p>
</blockquote>

<p>Incorrect. The term POD is being deprecated because <a href=""http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#2323"" rel=""noreferrer"">it no longer matters</a>:</p>

<blockquote>
  <p>The term POD no longer serves a purpose in the standard, it is merely defined, and restrictions apply for when a few other types preserve this vestigial property.</p>
</blockquote>

<p>Essentially, a type which is both trivial and standard layout doesn't gain any abilities beyond what being trivial and being standard layout provide on their own. The combination of the two doesn't make the type special, and the two properties don't really have much to do with one another.</p>

<p>Standard layout is about the layout of its non-empty subobjects being well-defined (as well as its empty base class subobjects not disturbing the type's layout). Triviality is about whether the object has some meaning beyond the block of bits that it stores (and whether it is conceptually a valid object if it is initialized with an arbitrary block of bits).</p>

<p>If I'm making a template that takes a type <code>T</code>, and I want to see if I can <code>memcpy</code> objects of that type, I don't care about the layout of its members; I want to know if it is TriviallyCopyable. Similarly, the correctness of <code>offsetof</code> does not care in the slightest if the class has a user-provided copy constructor. All it cares about is if the layout of member subobjects happens in a clear, standard-enforced order.</p>

<p>Basically, people looked around and realized that nothing in C++ is left that specifically needs the <em>intersection</em> of triviality and standard layout. So we don't need to reserve a term for it. Those few places where the standard expressly states that some type will be ""POD"" can simply be replaced by ""trivial and standard layout"", as appropriate.</p>

<blockquote>
  <p>Is this recursive requirement redundant?</p>
</blockquote>

<p>Since both of the constituent requirements are individually recursive, the intersection of the two is recursive as well. So there is no explicit need to state that all subobjects are also POD. This was more than likely just a case of a copy-and-paste oddity, where the original definition said something like ""all non-static data members must be POD types"" and they just kept that statement as is.</p>
","734069","","","","","2019-11-08 20:16:28","","","","1","","",""
"54031805","2","","54031804","2019-01-04 00:48:57","","90","","<p>The <code>??</code> double question mark operator means ""if null"". Take the following expression, for example.</p>

<pre><code>String a = b ?? 'hello';
</code></pre>

<p>This means <code>a</code> equals <code>b</code>, but if <code>b</code> is null then <code>a</code> equals <code>'hello'</code>.</p>

<p>Another related operator is <code>??=</code>. For example:</p>

<pre><code>b ??= 'hello';
</code></pre>

<p>This means if <code>b</code> is null then set it equal to <code>hello</code>. Otherwise, don't change it.</p>

<p><strong>Reference</strong></p>

<ul>
<li><a href=""https://www.dartlang.org/guides/language/language-tour#operators"" rel=""noreferrer"">A Tour of the Dart Language: Operators</a></li>
<li><a href=""http://blog.sethladd.com/2015/07/null-aware-operators-in-dart.html"" rel=""noreferrer"">Null-aware operators in Dart</a></li>
</ul>

<p><strong>Terms</strong></p>

<p>The <a href=""https://news.dartlang.org/2015/08/dart-112-released-with-null-aware.html"" rel=""noreferrer"">Dart 1.12 release news</a> collectively referred to the following as <em>null-aware operators</em>:</p>

<ul>
<li><code>??</code> -- if null operator</li>
<li><code>??=</code> -- null-aware assignment</li>
<li><code>x?.p</code> -- null-aware access</li>
<li><code>x?.m()</code> -- null-aware method invocation</li>
</ul>
","3681880","","3681880","","2019-04-25 18:00:29","2019-04-25 18:00:29","","","","3","","",""
"54597846","2","","54596743","2019-02-08 17:53:27","","16","","<p>This is because <code>function</code> is a special primitive:</p>

<pre><code>typeof(`function`)
#&gt; [1] ""special""
</code></pre>

<p>The arguments are not evaluated, so you have actually passed <code>quote(formals(mean))</code> instead of the value of <code>formals(mean)</code>. I don't think there's a way of calling <code>function</code> directly without evaluation tricks, except with an empty formals list which is just <code>NULL</code>.</p>
","1725177","","","","","2019-02-08 17:53:27","","","","3","","",""
"54598103","2","","54596743","2019-02-08 18:12:22","","5","","<p>For completeness’ sake, lionel’s answer hints at a way of calling <code>`function`</code> after all. Unfortunately it’s rather restricted, since we cannot pass any argument definition except for <code>NULL</code>:</p>

<pre><code>mean5 = `function`(NULL, mean(x, ...))
formals(mean5) = formals(mean)
</code></pre>

<p>(Note the lack of quoting around the body!)</p>

<p>This is of course utterly unpractical (and <code>formals&lt;-</code> internally calls <code>as.function</code> anyway.)</p>
","1968","","","","","2019-02-08 18:12:22","","","","0","","",""
"57131970","2","","57129668","2019-07-21 09:40:49","","13","","<p>To support state restoration in iOS 13 you will need to encode enough state into the <code>NSUserActivity</code>:</p>

<blockquote>
  <p>Use this method to return an NSUserActivity object with information about your scene's data. Save enough information to be able to retrieve that data again after UIKit disconnects and then reconnects the scene. User activity objects are meant for recording what the user was doing, so you don't need to save the state of your scene's UI</p>
</blockquote>

<p>The advantage of this approach is that it can make it easier to support handoff, since you are creating the code necessary to persist and restore state via user activities.</p>

<p>Unlike the previous state restoration approach where iOS recreated the view controller hierarchy for you, you are responsible for creating the view hierarchy for your scene in the scene delegate.  </p>

<p>If you have multiple active scenes then your delegate will be called multiple times to save the state and multiple times to restore state; Nothing special is needed.</p>

<p>The changes I made to your code are:</p>

<p><strong>AppDelegate.swift</strong></p>

<p>Disable ""legacy"" state restoration on iOS 13 &amp; later:</p>

<pre><code>func application(_ application: UIApplication, viewControllerWithRestorationIdentifierPath identifierComponents: [String], coder: NSCoder) -&gt; UIViewController? {
    if #available(iOS 13, *) {

    } else {
        print(""AppDelegate viewControllerWithRestorationIdentifierPath"")

        // If this is for the nav controller, restore it and set it as the window's root
        if identifierComponents.first == ""RootNC"" {
            let nc = UINavigationController()
            nc.restorationIdentifier = ""RootNC""
            self.window?.rootViewController = nc

            return nc
        }
    }
    return nil
}

func application(_ application: UIApplication, willEncodeRestorableStateWith coder: NSCoder) {
    print(""AppDelegate willEncodeRestorableStateWith"")
    if #available(iOS 13, *) {

    } else {
    // Trigger saving of the root view controller
        coder.encode(self.window?.rootViewController, forKey: ""root"")
    }
}

func application(_ application: UIApplication, didDecodeRestorableStateWith coder: NSCoder) {
    print(""AppDelegate didDecodeRestorableStateWith"")
}

func application(_ application: UIApplication, shouldSaveApplicationState coder: NSCoder) -&gt; Bool {
    print(""AppDelegate shouldSaveApplicationState"")
    if #available(iOS 13, *) {
        return false
    } else {
        return true
    }
}

func application(_ application: UIApplication, shouldRestoreApplicationState coder: NSCoder) -&gt; Bool {
    print(""AppDelegate shouldRestoreApplicationState"")
    if #available(iOS 13, *) {
        return false
    } else {
        return true
    }
}
</code></pre>

<p><strong>SceneDelegate.swift</strong></p>

<p>Create a user activity when required and use it to recreate the view controller.  Note that you are responsible for creating the view hierarchy in both normal and restore cases. </p>

<pre><code>func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {
    print(""SceneDelegate willConnectTo"")

    guard let winScene = (scene as? UIWindowScene) else { return }

    // Got some of this from WWDC2109 video 258
    window = UIWindow(windowScene: winScene)

    let vc = ViewController()

    if let activity = connectionOptions.userActivities.first ?? session.stateRestorationActivity {
        vc.continueFrom(activity: activity)
    }

    let nc = UINavigationController(rootViewController: vc)
    nc.restorationIdentifier = ""RootNC""

    self.window?.rootViewController = nc
    window?.makeKeyAndVisible()


}

func stateRestorationActivity(for scene: UIScene) -&gt; NSUserActivity? {
    print(""SceneDelegate stateRestorationActivity"")

    if let nc = self.window?.rootViewController as? UINavigationController, let vc = nc.viewControllers.first as? ViewController {
        return vc.continuationActivity
    } else {
        return nil
    }

}
</code></pre>

<p><strong>ViewController.swift</strong></p>

<p>Add support for saving and loading from an <code>NSUserActivity</code>.</p>

<pre><code>var continuationActivity: NSUserActivity {
    let activity = NSUserActivity(activityType: ""restoration"")
    activity.persistentIdentifier = UUID().uuidString
    activity.addUserInfoEntries(from: [""Count"":self.count])
    return activity
}

func continueFrom(activity: NSUserActivity) {
    let count = activity.userInfo?[""Count""] as? Int ?? 0
    self.count = count
}
</code></pre>
","3418066","","3418066","","2019-07-21 23:49:27","2019-07-21 23:49:27","","","","1","","",""
"57211182","2","","57129668","2019-07-25 23:09:22","","8","","<p>Based on more research and very helpful suggestions from <a href=""https://stackoverflow.com/a/57131970/1226963"">the answer by Paulw11</a> I have come up with an approach that works for iOS 13 and iOS 12 (and earlier) with no duplication of code and using the same approach for all versions of iOS.</p>

<p>Note that while the original question and this answer don't use storyboards, the solution would be essentially the same. The only differences is that with storyboards, the AppDelegate and SceneDelegate wouldn't need the code to create the window and root view controller. And of course the ViewController wouldn't need code to create its views.</p>

<p>The basic idea is to migrate the iOS 12 code to work the same as iOS 13. This means that the old state restoration is no longer used. <code>NSUserTask</code> is used to save and restore state. This approach has several benefits. It lets the same code work for all iOS versions, it gets you really close to supporting handoff with virtually no additional effort, and it lets you support multiple window scenes and full state restoration using the same basic code.</p>

<p>Here's the updated AppDelegate.swift:</p>

<pre><code>@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate {
    var window: UIWindow?

    func application(_ application: UIApplication, willFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey : Any]? = nil) -&gt; Bool {
        print(""AppDelegate willFinishLaunchingWithOptions"")

        if #available(iOS 13.0, *) {
            // no-op - UI created in scene delegate
        } else {
            self.window = UIWindow(frame: UIScreen.main.bounds)
            let vc = ViewController()
            let nc = UINavigationController(rootViewController: vc)

            self.window?.rootViewController = nc

            self.window?.makeKeyAndVisible()
        }

        return true
    }

    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool {
        print(""AppDelegate didFinishLaunchingWithOptions"")

        return true
    }

    func application(_ application: UIApplication, viewControllerWithRestorationIdentifierPath identifierComponents: [String], coder: NSCoder) -&gt; UIViewController? {
        print(""AppDelegate viewControllerWithRestorationIdentifierPath"")

        return nil // We don't want any UI hierarchy saved
    }

    func application(_ application: UIApplication, willEncodeRestorableStateWith coder: NSCoder) {
        print(""AppDelegate willEncodeRestorableStateWith"")

        if #available(iOS 13.0, *) {
            // no-op
        } else {
            // This is the important link for iOS 12 and earlier
            // If some view in your app sets a user activity on its window,
            // here we give the view hierarchy a chance to update the user
            // activity with whatever state info it needs to record so it can
            // later be restored to restore the app to its previous state.
            if let activity = window?.userActivity {
                activity.userInfo = [:]
                ((window?.rootViewController as? UINavigationController)?.viewControllers.first as? ViewController)?.updateUserActivityState(activity)

                // Now save off the updated user activity
                let wrap = NSUserActivityWrapper(activity)
                coder.encode(wrap, forKey: ""userActivity"")
            }
        }
    }

    func application(_ application: UIApplication, didDecodeRestorableStateWith coder: NSCoder) {
        print(""AppDelegate didDecodeRestorableStateWith"")

        // If we find a stored user activity, load it and give it to the view
        // hierarchy so the UI can be restored to its previous state
        if let wrap = coder.decodeObject(forKey: ""userActivity"") as? NSUserActivityWrapper {
            ((window?.rootViewController as? UINavigationController)?.viewControllers.first as? ViewController)?.restoreUserActivityState(wrap.userActivity)
        }
    }

    func application(_ application: UIApplication, shouldSaveApplicationState coder: NSCoder) -&gt; Bool {
        print(""AppDelegate shouldSaveApplicationState"")

        if #available(iOS 13.0, *) {
            return false
        } else {
            // Enabled just so we can persist the NSUserActivity if there is one
            return true
        }
    }

    func application(_ application: UIApplication, shouldRestoreApplicationState coder: NSCoder) -&gt; Bool {
        print(""AppDelegate shouldRestoreApplicationState"")

        if #available(iOS 13.0, *) {
            return false
        } else {
            return true
        }
    }

    // MARK: UISceneSession Lifecycle

    @available(iOS 13.0, *)
    func application(_ application: UIApplication, configurationForConnecting connectingSceneSession: UISceneSession, options: UIScene.ConnectionOptions) -&gt; UISceneConfiguration {
        print(""AppDelegate configurationForConnecting"")

        return UISceneConfiguration(name: ""Default Configuration"", sessionRole: connectingSceneSession.role)
    }

    @available(iOS 13.0, *)
    func application(_ application: UIApplication, didDiscardSceneSessions sceneSessions: Set&lt;UISceneSession&gt;) {
        print(""AppDelegate didDiscardSceneSessions"")
    }
}
</code></pre>

<p>Under iOS 12 and earlier, the standard state restoration process is now only used to save/restore the <code>NSUserActivity</code>. It's not used to persist the view hierarchy any more.</p>

<p>Since <code>NSUserActivity</code> doesn't conform to <code>NSCoding</code>, a wrapper class is used.</p>

<p>NSUserActivityWrapper.swift:</p>

<pre><code>import Foundation

class NSUserActivityWrapper: NSObject, NSCoding {
    private (set) var userActivity: NSUserActivity

    init(_ userActivity: NSUserActivity) {
        self.userActivity = userActivity
    }

    required init?(coder: NSCoder) {
        if let activityType = coder.decodeObject(forKey: ""activityType"") as? String {
            userActivity = NSUserActivity(activityType: activityType)
            userActivity.title = coder.decodeObject(forKey: ""activityTitle"") as? String
            userActivity.userInfo = coder.decodeObject(forKey: ""activityUserInfo"") as? [AnyHashable: Any]
        } else {
            return nil;
        }
    }

    func encode(with coder: NSCoder) {
        coder.encode(userActivity.activityType, forKey: ""activityType"")
        coder.encode(userActivity.title, forKey: ""activityTitle"")
        coder.encode(userActivity.userInfo, forKey: ""activityUserInfo"")
    }
}
</code></pre>

<p>Note that additional properties of <code>NSUserActivity</code> might be needed depending on your needs.</p>

<p>Here's the updated SceneDelegate.swift:</p>

<pre><code>import UIKit

@available(iOS 13.0, *)
class SceneDelegate: UIResponder, UIWindowSceneDelegate {
    var window: UIWindow?

    func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {
        print(""SceneDelegate willConnectTo"")

        guard let winScene = (scene as? UIWindowScene) else { return }

        window = UIWindow(windowScene: winScene)

        let vc = ViewController()
        let nc = UINavigationController(rootViewController: vc)

        if let activity = connectionOptions.userActivities.first ?? session.stateRestorationActivity {
            vc.restoreUserActivityState(activity)
        }

        self.window?.rootViewController = nc
        window?.makeKeyAndVisible()
    }

    func stateRestorationActivity(for scene: UIScene) -&gt; NSUserActivity? {
        print(""SceneDelegate stateRestorationActivity"")

        if let activity = window?.userActivity {
            activity.userInfo = [:]
            ((window?.rootViewController as? UINavigationController)?.viewControllers.first as? ViewController)?.updateUserActivityState(activity)

            return activity
        }

        return nil
    }
}
</code></pre>

<p>And finally the updated ViewController.swift:</p>

<pre><code>import UIKit

class ViewController: UIViewController {
    var label: UILabel!
    var count: Int = 0 {
        didSet {
            if let label = self.label {
                label.text = ""\(count)""
            }
        }
    }
    var timer: Timer?

    override func viewDidLoad() {
        print(""ViewController viewDidLoad"")

        super.viewDidLoad()

        view.backgroundColor = .green

        label = UILabel(frame: .zero)
        label.translatesAutoresizingMaskIntoConstraints = false
        label.text = ""\(count)""
        view.addSubview(label)
        NSLayoutConstraint.activate([
            label.centerXAnchor.constraint(equalTo: view.centerXAnchor),
            label.centerYAnchor.constraint(equalTo: view.centerYAnchor),
        ])
    }

    override func viewWillAppear(_ animated: Bool) {
        print(""ViewController viewWillAppear"")

        super.viewWillAppear(animated)

        timer = Timer.scheduledTimer(withTimeInterval: 1, repeats: true, block: { (timer) in
            self.count += 1
            //self.userActivity?.needsSave = true
        })
        self.label.text = ""\(count)""
    }

    override func viewDidAppear(_ animated: Bool) {
        super.viewDidAppear(animated)

        let act = NSUserActivity(activityType: ""com.whatever.View"")
        act.title = ""View""
        self.view.window?.userActivity = act
    }

    override func viewWillDisappear(_ animated: Bool) {
        super.viewWillDisappear(animated)

        self.view.window?.userActivity = nil
    }

    override func viewDidDisappear(_ animated: Bool) {
        print(""ViewController viewDidDisappear"")

        super.viewDidDisappear(animated)

        timer?.invalidate()
        timer = nil
    }

    override func updateUserActivityState(_ activity: NSUserActivity) {
        print(""ViewController updateUserActivityState"")
        super.updateUserActivityState(activity)

        activity.addUserInfoEntries(from: [""count"": count])
    }

    override func restoreUserActivityState(_ activity: NSUserActivity) {
        print(""ViewController restoreUserActivityState"")
        super.restoreUserActivityState(activity)

        count = activity.userInfo?[""count""] as? Int ?? 0
    }
}
</code></pre>

<p>Note that all code related to the old state restoration has been removed. It has been replaced with the use of <code>NSUserActivity</code>.</p>

<p>In a real app, you would store all kinds of other details in the user activity needed to fully restore the app state on relaunch or to support handoff. Or store minimal data needed to launch a new window scene.</p>

<p>You would also want to chain calls to <code>updateUserActivityState</code> and <code>restoreUserActivityState</code> to any child views as needed in a real app.</p>
","1226963","","1226963","","2019-07-26 04:10:27","2019-07-26 04:10:27","","","","4","","",""
"57878874","2","","57129668","2019-09-10 22:21:28","","7","","<p>This, it seems to me, is the major flaw in the structure of the <a href=""https://stackoverflow.com/a/57211182/341994"">answers presented so far</a>: </p>

<blockquote>
  <p>You would also want to chain calls to <code>updateUserActivityState</code></p>
</blockquote>

<p>That misses the whole point of <code>updateUserActivityState</code>, which is that it is <em>called for you, automatically</em>, for all view controllers whose <code>userActivity</code> is the <em>same</em> as the NSUserActivity returned by the scene delegate's <code>stateRestorationActivity</code>.</p>

<p>Thus, we automatically have a state-saving mechanism, and it remains only to devise a state-restoration mechanism to match. I will illustrate an entire architecture I've come up with.</p>

<p><strong>NOTE:</strong> This discussion ignores multiple windows and it also ignores the original requirement of the question, that we be compatible with iOS 12 view controller-based state saving and restoration. My goal here is only to show <strong>how to do state saving and restoration in iOS 13 using NSUserActivity.</strong> However, only minor modifications are needed in order to fold this into a multiple-window app, so I think it answers the original question adequately.</p>

<h3>Saving</h3>

<p>Let's start with state-saving. This is entirely boilerplate. The scene delegate either creates the scene <code>userActivity</code> or passes the received restoration activity into it, and returns that as its own user activity:</p>

<pre><code>func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {
    guard let scene = (scene as? UIWindowScene) else { return }
    scene.userActivity =
        session.stateRestorationActivity ??
        NSUserActivity(activityType: ""restoration"")
}
func stateRestorationActivity(for scene: UIScene) -&gt; NSUserActivity? {
    return scene.userActivity
}
</code></pre>

<p>Every view controller must use its own <code>viewDidAppear</code> to <em>share</em> that user activity object. That way, its own <code>updateUserActivityState</code> will be called <em>automatically</em> when we go into the background, and it has a chance to contribute to the global pool of the user info:</p>

<pre><code>override func viewDidAppear(_ animated: Bool) {
    super.viewDidAppear(animated)
    self.userActivity = self.view.window?.windowScene?.userActivity
}
// called automatically at saving time!
override func updateUserActivityState(_ activity: NSUserActivity) {
    super.updateUserActivityState(activity)
    // gather info into `info`
    activity.addUserInfoEntries(from: info)
}
</code></pre>

<p>That's all! If every view controller does that, then every view controller that is alive at the time we go into background gets a chance to contribute to the user info of the user activity that will arrive next time we launch.</p>

<h3>Restoration</h3>

<p>This part is harder. The restoration info will arrive as <code>session.stateRestorationActivity</code> into the scene delegate. As the original question rightly asks: now what?</p>

<p>There's more than one way to skin this cat, and I've tried most of them and settled on this one. My rule is this:</p>

<ul>
<li><p>Every view controller must have a <code>restorationInfo</code> property which is a dictionary. When any view controller is created during restoration, its creator (parent) must set that <code>restorationInfo</code> to the <code>userInfo</code> that arrived from <code>session.stateRestorationActivity</code>.</p></li>
<li><p>This <code>userInfo</code> must be copied out right at the start, because it will be wiped out from the saved activity the first time <code>updateUserActivityState</code> is called (that is the part that really drove me crazy working out this architecture).</p></li>
</ul>

<p>The cool part is that if we do this right, the <code>restorationInfo</code> is set <em>before</em> <code>viewDidLoad</code>, and so the view controller can configure itself based on the info it put into the dictionary on saving.</p>

<p>Each view controller must also <em>delete</em> its own <code>restorationInfo</code> when it is done with it, lest it use it again during the app's lifetime. It must be used only the once, on launch.</p>

<p>So we must change our boilerplate:</p>

<pre><code>var restorationInfo :  [AnyHashable : Any]?
override func viewDidAppear(_ animated: Bool) {
    super.viewDidAppear(animated)
    self.userActivity = self.view.window?.windowScene?.userActivity
    self.restorationInfo = nil
}
</code></pre>

<p>So now the only problem is the chain of how the <code>restorationInfo</code> of each view controller is set. The chain starts with the scene delegate, which is responsible for setting this property in the root view controller:</p>

<pre><code>func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {
    guard let scene = (scene as? UIWindowScene) else { return }
    scene.userActivity =
        session.stateRestorationActivity ??
        NSUserActivity(activityType: ""restoration"")
    if let rvc = window?.rootViewController as? RootViewController {
        rvc.restorationInfo = scene.userActivity?.userInfo
    }
}
</code></pre>

<p>Each view controller is then responsible not only for configuring itself in its <code>viewDidLoad</code> based on the <code>restorationInfo</code>, but also for looking to see whether it was the parent / presenter of any further view controller. If so, it must create and present / push / whatever that view controller, making sure to pass on the <code>restorationInfo</code> before that child view controller's <code>viewDidLoad</code> runs.</p>

<p>If every view controller does this correctly, the whole interface and state will be restored!</p>

<h3>A bit more of an example</h3>

<p>Presume we have just two possible view controllers: RootViewController and PresentedViewController. Either RootViewController was presenting PresentedViewController at the time we were backgrounded, or it wasn't. Either way, that information has been written into the info dictionary.</p>

<p>So here is what RootViewController does:</p>

<pre><code>var restorationInfo : [AnyHashable:Any]?
override func viewDidLoad() {
    super.viewDidLoad()
    // configure self, including any info from restoration info
}

// this is the earliest we have a window, so it's the earliest we can present
// if we are restoring the editing window
var didFirstWillLayout = false
override func viewWillLayoutSubviews() {
    if didFirstWillLayout { return }
    didFirstWillLayout = true
    let key = PresentedViewController.editingRestorationKey
    let info = self.restorationInfo
    if let editing = info?[key] as? Bool, editing {
        self.performSegue(withIdentifier: ""PresentWithNoAnimation"", sender: self)
    }
}

// boilerplate
override func viewDidAppear(_ animated: Bool) {
    super.viewDidAppear(animated)
    self.userActivity = self.view.window?.windowScene?.userActivity
    self.restorationInfo = nil
}

// called automatically because we share this activity with the scene
override func updateUserActivityState(_ activity: NSUserActivity) {
    super.updateUserActivityState(activity)
    // express state as info dictionary
    activity.addUserInfoEntries(from: info)
}
</code></pre>

<p>The cool part is that the PresentedViewController does exactly the same thing!</p>

<pre><code>var restorationInfo :  [AnyHashable : Any]?
static let editingRestorationKey = ""editing""

override func viewDidLoad() {
    super.viewDidLoad()
    // configure self, including info from restoration info
}

// boilerplate
override func viewDidAppear(_ animated: Bool) {
    super.viewDidAppear(animated)
    self.userActivity = self.view.window?.windowScene?.userActivity
    self.restorationInfo = nil
}

override func updateUserActivityState(_ activity: NSUserActivity) {
    super.updateUserActivityState(activity)
    let key = Self.editingRestorationKey
    activity.addUserInfoEntries(from: [key:true])
    // and add any other state info as well
}
</code></pre>

<p>I think you can see that at this point it's only a matter of degree. If we have more view controllers to chain during the restoration process, they all work exactly the same way.</p>

<h3>Final notes</h3>

<p>As I said, this is not the only way to skin the restoration cat. But there are problems of timing and of distribution of responsibilities, and I think this is the most equitable approach.</p>

<p>In particular, I do not hold with the idea that the scene delegate should be responsible for the whole restoration of the interface. It would need to know too much about the details of how to initialize each view controller along the line, and there are serious timing issues that are difficult to overcome in a deterministic way. My approach sort of imitates the old view controller-based restoration, making each view controller responsible for its child in the same way it would normally be.</p>
","341994","","341994","","2019-09-11 02:55:00","2019-09-11 02:55:00","","","","7","","",""
"58660208","2","","58660207","2019-11-01 13:39:49","","15","","<p>The standard doesn't require this to compile on <em>any</em> toolchain!</p>

<p>First recall that <code>vector&lt;bool&gt;</code> is weird and subscripting it gives you a temporary object of a proxy type called <code>std::vector&lt;bool&gt;::reference</code>, rather than an actual <code>bool&amp;</code>.</p>

<p>The error message is telling you that it cannot bind this temporary to a non-<code>const</code> lvalue reference in the generic <code>template &lt;typename T&gt; std::swap(T&amp; lhs, T&amp; rhs)</code> implementation.</p>

<h3>Extensions!</h3>

<p>However, it turns out that libstdc++ <a href=""https://github.com/gcc-mirror/gcc/blob/master/libstdc%2B%2B-v3/include/bits/stl_bvector.h#L118"" rel=""noreferrer"">defines an overload</a> for <code>std::swap(std::vector&lt;bool&gt;::reference, std::vector&lt;bool&gt;::reference)</code>, but this is an extension to the standard (or, if it is in there, I can't find any evidence for it).</p>

<p>libc++ <a href=""https://github.com/llvm-mirror/libcxx/blob/master/include/__bit_reference#L86"" rel=""noreferrer"">does this too</a>.</p>

<p>I'd guess that the Visual Studio stdlib implementation, which you're still using, <em>doesn't</em>, but then to add insult to injury <a href=""https://godbolt.org/z/Cn1vEm"" rel=""noreferrer"">you can bind temporaries to lvalue references</a> in VS (unless you're using conformance mode), so the standard, ""generic"", <code>std::swap</code> function works until you substitute the VS compiler for the stricter Clang compiler.</p>

<p>As a result, you've been relying on extensions on all of the three toolchains for which it did work for you, and the Clang on Windows combination is the only one actually exhibiting strict compliance.</p>

<p><em>(In my opinion, those three toolchains <a href=""http://eel.is/c++draft/intro.compliance#8"" rel=""noreferrer"">should have diagnosed this</a> so you didn't ship non-portable code this whole time. 😊)</em></p>

<h3>What now?</h3>

<p>It may be tempting to add your own specialisation of <code>std::swap</code> and <code>std::vector&lt;bool&gt;::reference</code>, but you're not allowed to do this for standard types; indeed, it would conflict with the overloads that libstdc++ and libc++ have chosen to add as extensions.</p>

<p>So, to be portable and compliant, <strong>you should change your code</strong>.</p>

<p>Perhaps a good old-fashioned:</p>

<pre><code>const bool temp = vb[0];
vb[0] = vb[1];
vb[1] = temp;
</code></pre>

<p>Or make use of <a href=""https://en.cppreference.com/w/cpp/container/vector_bool/swap"" rel=""noreferrer"">the special static member function that does exactly what you wanted</a>:</p>

<pre><code>std::vector&lt;bool&gt;::swap(vb[0], vb[1]);
</code></pre>

<p>Also spellable as follows:</p>

<pre><code>vb.swap(vb[0], vb[1]);
</code></pre>
","560648","","560648","","2019-11-01 14:01:53","2019-11-01 14:01:53","","","","13","","",""
"55703850","2","","55703849","2019-04-16 08:35:37","","28","","<p>A possible workaround is to use reflection:</p>

<pre class=""lang-java prettyprint-override""><code>import java.util.Arrays;

public class X&lt;T&gt; {
    void m() {
        class Z {}

        for (Object o : Arrays.asList(1, 2, 3))
            if (Z.class.isInstance(o)) {}
    }
}
</code></pre>
","521799","","","","","2019-04-16 08:35:37","","","","0","","",""
"55703952","2","","55703849","2019-04-16 08:41:30","","3","","<p>This should work either. Using reflection too. But seems a valid solution.</p>

<pre><code>import java.util.Arrays;

public class X&lt;T&gt; {


    void m() {

        class Z2 {
        }

        for(Object o: Arrays.asList(1,2,3)) {
            if(Z2.class.isAssignableFrom(o.getClass())) {

            }
        }

    }

}
</code></pre>
","3865831","","466862","","2019-04-16 08:44:32","2019-04-16 08:44:32","","","","1","","",""
"55703981","2","","55703849","2019-04-16 08:42:40","","5","","<p>Apparently, by making Z generic compilation succeeds. I expected that to require <code>&lt;T&gt;</code> as the type parameter, but you just have to make it generic, so anything will do</p>

<pre class=""lang-java prettyprint-override""><code>import java.util.Arrays;

public class X&lt;T&gt; {
    void m() {
        class Z&lt;Anything&gt; {}

        for (Object o : Arrays.asList(1, 2, 3))
            if (Z.class.isInstance(o)) {}
    }
}
</code></pre>

<p>Proper solution would be qualify the local class, but I don't think you can. Either you refactor it to a private static class or that's probably the best you can get.</p>
","7849","","7849","","2019-04-16 08:47:55","2019-04-16 08:47:55","","","","1","","",""
"55704281","2","","55703849","2019-04-16 08:57:13","","43","","<p>To me this seems to be an oversight or limitation in the Java language and I do not think it is possible. </p>

<p>The referenced type in an <code>instanceof</code> expression must be reifiable according to <a href=""https://docs.oracle.com/javase/specs/jls/se9/html/jls-4.html#jls-4.7"" rel=""noreferrer"">JLS 4.7</a>, meaning that it must be expressed as a reifiable type by its fully qualified name. At the same time, <a href=""https://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.7"" rel=""noreferrer"">JLS 6.7</a> states that local classes do not have a fully qualified name, they can therefore not be expressed as reifiable.</p>

<p>If you declare Z as generic, the <code>instanceof</code> operator treats <code>Z</code> as a raw type where all generic properties to it - in this case the enclosing class - are considered raw as well. (Similar to a generic methods of a raw type being considered as raw despite any generic signature. This is a measure to retain backwards compatiblity of type generification.) Since any raw type is reifiable, declaring Z to be generic will compile.</p>
","1237575","","1237575","","2019-04-16 09:42:10","2019-04-16 09:42:10","","","","6","","",""
"57239093","2","","57239089","2019-07-28 08:16:31","","6","","<p>I found <a href=""https://askubuntu.com/questions/841761/should-i-create-an-alias-for-each-bash-function"">an Ask Ubuntu question about a related topic</a> where one of the answers alleges that this is a misunderstanding of a different design principle: give the function a long and descriptive name, and create a shorter alias for convenience.</p>

<p>This still offers no insight into why you would have the alias redeclare the function every time.</p>
","874188","","874188","","2019-07-28 08:22:05","2019-07-28 08:22:05","","","","4","","",""
"57245366","2","","57239089","2019-07-28 22:15:58","","1","","<p>You can use the alias for turning on and off a function that you don't want to change.
Suppose you have have code that calls the function <code>_</code>. You can switch the implementation of the function for another one with</p>

<pre><code>alias f='_ () { echo ""useful code""; }; _'
alias g='_ () { echo ""Other useful code""; }; _'
alias h='_ () { echo ""Special code""; }; _'
</code></pre>

<p>And now you can call</p>

<pre><code>f
_
g
_
h
_
f
</code></pre>

<p>@DavidC.Rankin commented correctly, that it looked terrible.<br>
I agree.<br>
I thought of some way to use it. You might use it for testing software, something like</p>

<pre><code>alias ok='commitTransaction () { echo ""commited""; return 0; }'
alias nok='commitTransaction () { echo ""unknown error""; return 1; }'
alias locked='commitTransaction () { echo ""locked""; return 2; }'
alias slow='commitTransaction () { sleep 20; echo ""commited""; return 0;  }'
</code></pre>

<p>And now the tester can run his testcases:</p>

<pre><code>ok
# And now start ok test
nok
# And now start nok test
</code></pre>

<p>Still hacking, why not make a better teststub?</p>
","3220113","","3220113","","2019-07-28 22:52:36","2019-07-28 22:52:36","","","","3","","",""
"54669151","2","","54503331","2019-02-13 11:30:58","","4","","<p>First of all a caveat: I am not familiar with the mp4parser library but your question looked interesting so I took a look.</p>

<p>I think its worth you looking at one of the classes the code comments say is ""mainly for testing"". <code>InMemRandomAccessSourceImpl</code>. To create a Movie from any URI, the code would be as follows:</p>

<pre><code>try {
    InputStream  inputStream = getContentResolver().openInputStream(uri);
    Log.e(""InputStream Size"",""Size "" + inputStream);
    int  bytesAvailable = inputStream.available();
    int bufferSize = Math.min(bytesAvailable, MAX_BUFFER_SIZE);
    final byte[] buffer = new byte[bufferSize];

    int read = 0;
    int total = 0;
    while ((read = inputStream.read(buffer)) !=-1 ) {
        total += read;
    }
    if( total &lt; bytesAvailable ){
        Log.e(TAG, ""Read from input stream failed"")
        return;
    }
    //or try inputStream.readAllBytes() if using Java 9
    inputStream.close();

    ByteBuffer bb = ByteBuffer.wrap(buffer);
    Movie m2 = MovieCreator.build(new ByteBufferByteChannel(bb),
        new InMemRandomAccessSourceImpl(bb), ""inmem"");

} catch (FileNotFoundException e) {
    e.printStackTrace();
} catch (IOException e) {
    e.printStackTrace();
}
</code></pre>

<p>But I would say, there looks to be somewhat of a conflict between what you want to achieve and the approach the parser takes. It is depending on local files to avoid large memory overheads, and random access to bytes can only be done if the entire set of data is available, which differs from a streaming approach. </p>

<p>It will require buffering at least the amount of data required for your clip in one go before the parser is given the buffer. That might be workable for you if you are looking to grab short sections and the buffering is not too cumbersome. You may be subject to IO exceptions and the like if the read from the <code>InputStream</code> has issues, especially if it is remote content, whereas you really aren't expecting that with a file on a modern system. </p>

<p>There is also <code>MemoryFile</code> to consider which provides an ashmem backed file-like object. I think somehow that could be worked in.</p>
","949224","","949224","","2019-02-13 12:23:49","2019-02-13 12:23:49","","","","7","","",""
"56582792","2","","56582681","2019-06-13 14:29:48","","13","","<p>More concise solution, but still with unwanted <strong>side effect</strong> in the <code>filter</code> call:</p>

<pre><code>Set&lt;K&gt; removedKeys =
    keysToRemove.stream()
                .filter(fromKeys::remove)
                .collect(Collectors.toSet());
</code></pre>

<p><a href=""https://docs.oracle.com/javase/10/docs/api/java/util/Set.html#remove(java.lang.Object)"" rel=""noreferrer""><code>Set.remove</code></a> already returns <code>true</code> if the <code>set</code> contained the specified element.</p>

<p>&nbsp;P.S. In the end, I would probably stick with the ""old-school code"".</p>
","2668232","","2668232","","2019-06-13 20:06:44","2019-06-13 20:06:44","","","","1","","",""
"56582843","2","","56582681","2019-06-13 14:32:42","","4","","<p>You can use the stream and the removeAll</p>

<pre><code>Set&lt;K&gt; fromKeys = from.keySet();
Set&lt;K&gt; removedKeys = keysToRemove.stream()
    .filter(fromKeys::contains)
    .collect(Collectors.toSet());
fromKeys.removeAll(removedKeys);
return removedKeys;
</code></pre>
","7362988","","","","","2019-06-13 14:32:42","","","","0","","",""
"56582923","2","","56582681","2019-06-13 14:36:56","","4","","<p>You can use this:</p>

<pre><code>Set&lt;K&gt; removedKeys = keysToRemove.stream()
        .filter(from::containsKey)
        .collect(Collectors.toSet());
removedKeys.forEach(from::remove);
</code></pre>

<p>It's similar to <em>Oleksandr</em>'s answer, but avoiding the side effect. But I would stick with that answer, if you are looking for performance.</p>

<p>Alternatively you could use <a href=""https://docs.oracle.com/javase/8/docs/api/java/util/stream/Stream.html#peek-java.util.function.Consumer-"" rel=""nofollow noreferrer""><code>Stream.peek()</code></a> for the remove, but be careful with other side effects (see the comments). So I would not recommend that.</p>

<pre><code>Set&lt;K&gt; removedKeys = keysToRemove.stream()
        .filter(from::containsKey)
        .peek(from::remove)
        .collect(Collectors.toSet());
</code></pre>
","9662601","","9662601","","2019-06-13 18:44:32","2019-06-13 18:44:32","","","","3","","",""
"54073065","2","","54044022","2019-01-07 10:59:46","","1","","<p>If this is an option, substituting the character <code>;</code> with <code>,</code> in the string is faster.
I have written the string <code>x</code> to a file <code>test.dat</code>.</p>

<pre><code>def csv_reader_4(x):
    with open(x, 'r') as f:
        a = f.read()
    return pd.read_csv(StringIO(unicode(a.replace(';', ','))), usecols=[3, 4, 5])
</code></pre>

<p>The <code>unicode()</code> function was necessary to avoid a TypeError in Python 2.</p>

<p>Benchmarking:</p>

<pre><code>%timeit csv_reader_2('test.dat')  # 1.6 s per loop
%timeit csv_reader_4('test.dat')  # 1.2 s per loop
</code></pre>
","3826323","","","","","2019-01-07 10:59:46","","","","2","","",""
"54075275","2","","54044022","2019-01-07 13:23:04","","6","","<h3>Use a command-line tool</h3>

<p>By far the most efficient solution I've found is to use a specialist command-line tool to replace <code>"";""</code> with <code>"",""</code> and <em>then</em> read into Pandas. Pandas or pure Python solutions do not come close in terms of efficiency.</p>

<p>Essentially, using CPython or a tool written in C / C++ is likely to outperform Python-level manipulations.</p>

<p>For example, using <a href=""http://fart-it.sourceforge.net/"" rel=""noreferrer"">Find And Replace Text</a>:</p>

<pre><code>import os

os.chdir(r'C:\temp')                       # change directory location
os.system('fart.exe -c file.csv "";"" "",""')  # run FART with character to replace

df = pd.read_csv('file.csv', usecols=[3, 4, 5], header=None)  # read file into Pandas
</code></pre>
","9209546","","","","","2019-01-07 13:23:04","","","","3","","",""
"54136737","2","","54044022","2019-01-10 20:55:34","","2","","<p>How about using a generator to do the replacement, and combining it with an appropriate decorator to get a file-like object suitable for pandas?</p>

<pre><code>import io
import pandas as pd

# strings in first 3 columns are of arbitrary length
x = '''ABCD,EFGH,IJKL,34.23;562.45;213.5432
MNOP,QRST,UVWX,56.23;63.45;625.234
'''*10**6

def iterstream(iterable, buffer_size=io.DEFAULT_BUFFER_SIZE):
    """"""
    http://stackoverflow.com/a/20260030/190597 (Mechanical snail)
    Lets you use an iterable (e.g. a generator) that yields bytestrings as a
    read-only input stream.

    The stream implements Python 3's newer I/O API (available in Python 2's io
    module).

    For efficiency, the stream is buffered.
    """"""
    class IterStream(io.RawIOBase):
        def __init__(self):
            self.leftover = None
        def readable(self):
            return True
        def readinto(self, b):
            try:
                l = len(b)  # We're supposed to return at most this much
                chunk = self.leftover or next(iterable)
                output, self.leftover = chunk[:l], chunk[l:]
                b[:len(output)] = output
                return len(output)
            except StopIteration:
                return 0    # indicate EOF
    return io.BufferedReader(IterStream(), buffer_size=buffer_size)

def replacementgenerator(haystack, needle, replace):
    for s in haystack:
        if s == needle:
            yield str.encode(replace);
        else:
            yield str.encode(s);

csv = pd.read_csv(iterstream(replacementgenerator(x, "";"", "","")), usecols=[3, 4, 5])
</code></pre>

<p>Note that we convert the string (or its constituent characters) to bytes through str.encode, as this is required for use by Pandas.</p>

<p>This approach is functionally identical to the answer by Daniele except for the fact that we replace values ""on-the-fly"", as they are requested instead of all in one go.</p>
","1408531","","","","","2019-01-10 20:55:34","","","","1","","",""
"54166567","2","","54044022","2019-01-13 06:25:01","","1","","<p>A very very very fast one, <code>3.51</code> is the result, simply just make <code>csv_reader_4</code> the below, it simply converts <code>StringIO</code> to <code>str</code>, then replaces <code>;</code> with <code>,</code>, and reads the dataframe with <code>sep=','</code>:</p>

<pre><code>def csv_reader_4(x):
    with x as fin:
        reader = pd.read_csv(StringIO(fin.getvalue().replace(';',',')), sep=',',header=None)
    return reader
</code></pre>

<p>The benchmark:</p>

<pre><code>%timeit csv_reader_4(StringIO(x)) # 3.51 s per loop
</code></pre>
","8708364","","","","","2019-01-13 06:25:01","","","","3","","",""
"54447359","2","","54446734","2019-01-30 18:36:41","","2","","<p>I would strongly caution against using Dynamic SQL with table names. You are setting yourself up for some serious SQL Injection issues. You should validate anything that goes into the <code>@tableName</code> variable. </p>

<p>That said, in your example...</p>

<pre><code>DECLARE @tableName sysname = 'ContentItems';
DECLARE @sql nvarchar(max) = N'
    CREATE TRIGGER TR_' + @tableName + N' ON ' + @tableName + N' FOR INSERT
        AS
        BEGIN
            PRINT @tableName
        END';
EXEC sp_executesql @sql, N'@tableName sysname', @tableName=@tableName
</code></pre>

<p>... you are trying to input your declared <code>@tableName</code> into the text you're creating for <code>@sql</code>, and then you're trying to pass a parameter through <code>spexecutesql</code>. This makes your <code>@sql</code> invalid when trying to call it. </p>

<p>You can try: </p>

<pre><code>DECLARE @tableName sysname = 'ContentItems';
DECLARE @sql nvarchar(max) = N'
    CREATE TRIGGER TR_'' + @tableName + N'' ON '' + @tableName + N'' FOR INSERT
        AS
        BEGIN
            PRINT @tableName
        END';
EXEC sp_executesql @sql, N'@tableName sysname', @tableName=@tableName
</code></pre>

<p>... which will give you the string ...</p>

<pre><code>'
CREATE TRIGGER TR_' + @tableName + N' ON ' + @tableName + N' FOR INSERT
    AS
    BEGIN
        PRINT @tableName
    END'
</code></pre>

<p>... which can then accept the parameter you pass through ...</p>

<pre><code>EXEC sp_executesql @sql, N'@tableName sysname', @tableName=@tableName ;
</code></pre>

<p>Again, I'd use some heavy validation (and white-listing) before passing anything into dynamic SQL that will use a dynamic table name. </p>

<p>NOTE: As noted below, I believe you are limited on DML statements that can be executed with <code>sp_executesql()</code>, and I think parameterization is limited also. And based on your other comments, it doesn't sound like you're really needing a dynamic process but a way to repeat a specific task for a handful of elements. If that's the case, my recommendation is to do it manually with a copy/paste then execute the statements. </p>
","1970497","","1970497","","2019-01-30 21:37:52","2019-01-30 21:37:52","","","","2","","",""
"54447830","2","","54446734","2019-01-30 19:06:28","","0","","<p>Personally I hate triggers and try to avoid them most of the time ;)</p>

<p>However if you really, really need this dynamic stuff you should use <strong>sp_MSforeachtable</strong> and avoid injection (as pointed out by Shawn) at any cost:</p>

<pre><code>EXEC sys.sp_MSforeachtable
  @command1 = '
        DECLARE @sql NVARCHAR(MAX)
        SET @sql = CONCAT(''CREATE TRIGGER TR_''
            , REPLACE(REPLACE(REPLACE(''?'', ''[dbo].'', ''''),''['',''''),'']'','''')
            , '' ON ? FOR INSERT
    AS
    BEGIN
        PRINT ''''?'''';
    END;'');
    EXEC sp_executesql @sql;'
  , @whereand = ' AND object_id IN (SELECT object_id FROM sys.objects
WHERE name LIKE ''%ContentItems%'')';
</code></pre>
","9529505","","1970497","","2019-01-30 21:05:26","2019-01-30 21:05:26","","","","4","","",""
"54487074","2","","54446734","2019-02-01 20:58:31","","4","","<p>If you execute your <code>create trigger</code> statement that you said you printed... you will find that it does not work.  The print statement in the body of the trigger is trying to output <code>@tablename</code>, but is never defined, so you will get an error:</p>

<blockquote>
  <p>Must declare the scalar variable ""@tableName"".</p>
</blockquote>

<p>But that is not your main issue.  As for why you can't seem to execute a DDL statement with <code>execute_sql</code> with parameters, I couldn't find any documentation to explain why... but your experience and others proves that it's troublesome.  I believe this post has a pretty good theory: <a href=""https://dba.stackexchange.com/questions/43262/sp-executesql-adds-statements-to-executed-dynamic-script"">sp_executesql adds statements to executed dynamic script?</a></p>

<p>You can however execute dynamic sql with DDL statements using the <code>EXECUTE</code> statement.  So what you could do is create a parameterized <code>sp_executesql</code> statement that validates your table name and then creates a dynamic sql string to execute with the <code>EXECUTE</code> statement.</p>

<p>It doesn't look pretty, but it works:</p>

<pre><code>DECLARE @tableName sysname = 'MyTable';
DECLARE @sql nvarchar(max) = 
N'
set @tableName = (SELECT name FROM sys.tables WHERE OBJECT_ID = OBJECT_ID(@tableName)) --validate table
DECLARE @CreateTriggerSQL as varchar(max) =
''
CREATE TRIGGER '' + QUOTENAME(''TR_'' + @tableName) + '' ON '' + QUOTENAME( @tableName) + '' FOR INSERT
AS
BEGIN
    PRINT '''''' + @tableName + ''''''
END
''
print isnull(@CreateTriggerSQL, ''INVALID TABLE'')
exec (@CreateTriggerSQL)
';

EXEC sp_executesql @sql, N'@tableName sysname', @tableName=@tableName;
</code></pre>

<p>You could also convert this into a stored procedure with parameters instead of running <code>sp_executesql</code> if that were more convenient.  It looks a bit cleaner:</p>

<pre><code>CREATE PROCEDURE sp_AddTriggerToTable (@TableName AS sysname) AS

set @tableName = (SELECT name FROM sys.tables WHERE OBJECT_ID = OBJECT_ID(@tableName)) --validate table
DECLARE @CreateTriggerSQL as varchar(max) =
'
CREATE TRIGGER ' + QUOTENAME('TR_' + @tableName) + ' ON ' + QUOTENAME( @tableName) + ' FOR INSERT
AS
BEGIN
    PRINT ''' + @tableName + '''
END
'
print isnull(@CreateTriggerSQL, 'INVALID TABLE')
exec (@CreateTriggerSQL)
GO
</code></pre>
","4765200","","4765200","","2019-02-01 21:58:40","2019-02-01 21:58:40","","","","0","","",""
"59522470","2","","59503760","2019-12-29 19:08:37","","8","","<p>I forgot to see if this was an Android Studio bug. :facepalm:</p>

<p>It turns out that if you run the code, it runs fine. Android Studio 3.5.3 appears to be complaining needlessly.</p>

<p>I filed <a href=""https://issuetracker.google.com/issues/146923572"" rel=""noreferrer"">a bug report</a> to try to get confirmation of the problem.</p>

<p>Many thanks to @natario, whose comment made me realize that this might be an IDE problem!</p>
","115145","","","","","2019-12-29 19:08:37","","","","3","","",""
"59840095","2","","58123398","2020-01-21 11:24:15","","2","","<p>Here is an addition to Jonas Wilms' answer with emphasis on questions 2 and 3 (TS 3.7):</p>

<blockquote>
  <p>What is the difference between JSX.Element, ReactNode and ReactElement?</p>
</blockquote>

<h3>ReactElement and JSX.Element</h3>

<p>are the result of invoking <a href=""https://reactjs.org/docs/react-api.html#createelement"" rel=""nofollow noreferrer""><code>React.createElement</code></a> directly or via JSX transpilation and assumed to be an object with <code>type</code>, <code>props</code> and <code>key</code>. <a href=""https://github.com/DefinitelyTyped/DefinitelyTyped/blob/24f1d0c82da2d898acd03fbb3e692eba3c431f82/types/react/index.d.ts#L2882"" rel=""nofollow noreferrer""><code>JSX.Element</code></a> is <code>ReactElement</code> with <code>any</code> type arguments (current status quo), so I will use them synonymously.</p>

<pre><code>const jsx = &lt;div&gt;hello&lt;/div&gt;
const ele = React.createElement(""div"", null, ""hello"");
</code></pre>

<h3>ReactNode</h3>

<p>is mainly used as return type for <code>render()</code> in class components. It also is a default type for <code>children</code> attribute type (e.g. <a href=""https://github.com/DefinitelyTyped/DefinitelyTyped/blob/24f1d0c82da2d898acd03fbb3e692eba3c431f82/types/react/index.d.ts#L773"" rel=""nofollow noreferrer""><code>PropsWithChildren</code></a>).</p>

<pre><code>&lt;MyComp&gt;
  // children with ReactNode type
  Hello World
&lt;/MyComp&gt;
</code></pre>

<p>It looks more complicated in the <a href=""https://github.com/DefinitelyTyped/DefinitelyTyped"" rel=""nofollow noreferrer"">React type declarations</a>, but can be shortened up to:</p>

<pre><code>type ReactNode =  ... | {} | boolean | null | undefined | string | number;
// omitted other object types, because `{}` is a super type of all
// so it is a very ""broad"" type (I don't want to say useless...)
</code></pre>

<hr>

<blockquote>
  <p>Why do the render methods of class components return ReactNode, but function components return ReactElement?</p>
</blockquote>

<p><strong>tl;dr:</strong> It is a current TS type incompatability not related to core React, see the tracked <a href=""https://github.com/microsoft/TypeScript/issues/21699"" rel=""nofollow noreferrer"">main issue</a>.</p>

<p><strong>Longer answer:</strong></p>

<p>With pure React/JS side of things, <code>render()</code> in class components supports the same return types as a function component, there are <a href=""https://github.com/facebook/react/issues/12155#issuecomment-363089187"" rel=""nofollow noreferrer"">no differences</a>. With regard to TS, the different types currently are just a type incosistency still kept due to historical reasons and the need for backwards-compatibility.</p>

<p>The mentioned issue also wants to take account of the change that a component render return type - function and class - meanwhile supports more types than <code>JSX.Element</code>. Ideally a <a href=""https://reactjs.org/docs/react-component.html#render"" rel=""nofollow noreferrer"">valid return type</a> would look similar to:</p>

<pre><code>type ComponentReturnType = ReactElement | Array&lt;ReactElement&gt; | string | number | boolean | null
// Note: undefined is invalid!
</code></pre>

<p>But currently in TS, a class component is fixed to return <code>ReactNode</code> with <code>render()</code>, which is more loose than React permits. The function component return type is <code>JSX.Element | null</code>, whose types are more restrictive than React supports.</p>

<hr>

<blockquote>
  <p>How do I solve this with respect to null?</p>
</blockquote>

<p>Let me expand your question a bit: what render return type can we use in general for both components?</p>

<p>My favored solution is to just omit the type annotation - TS automatically infers <code>JSX.Element</code> for us. You wouldn't be able to do much with this black box type anyway until it gets a <a href=""https://github.com/microsoft/TypeScript/issues/21699"" rel=""nofollow noreferrer"">stronger type</a>.</p>

<p>Otherwise, I would favor <code>ReactElement</code> over <code>JSX.Element</code> to avoid using something from the global scope (note, we did not have to import <code>JSX.Element</code>). <code>ReactFragment</code> and <code>ReactPortal</code> are already included with <code>ReactElement</code> or <code>JSX.Element</code>, if you need to return them. <code>ReactChild</code> extends the return types further with <code>string | number</code>. <code>ReactNode</code> is a too broad type not really applicable in its current form, almost anything can be assigned to it, so I would avoid it completely.</p>

<p>In an edge case with a function component, you can either cast or use Fragments:</p>

<pre><code>const MyCompFragment: FunctionComponent = () =&gt; &lt;&gt;""huhu""&lt;/&gt;
const MyCompCast: FunctionComponent = () =&gt; ""huhu"" as any // or as unknown as JSX.Element | null
</code></pre>
","5669456","","","","","2020-01-21 11:24:15","","","","0","","",""
"59976781","2","","58759591","2020-01-29 22:53:26","","-1","","<p>There are errors in the code.</p>

<pre><code> memcpy(&amp;s, ""1234567812345678"", 17);
</code></pre>

<p>for example, is risky, even though s starts with b
should be:</p>

<pre><code> memcpy(&amp;s.b, ""1234567812345678"", 17);
</code></pre>

<p>The second strlen() has also errors</p>

<pre><code>n = strlen((char *)&amp;s) / sizeof(BUF);
</code></pre>

<p>for example, should be:</p>

<pre><code>n = strlen((char *)&amp;s.b) / sizeof(BUF);
</code></pre>

<p>The string s.b, if copied correctly, should be 17 letters long.
Not sure how structs are stored in memory, if they are aligned.
Have you checked that s.b actually contains the 17 characters copied?</p>

<p>So a strlen(s.b) should show 17</p>

<p>The printf only shows integer numbers, as %d is integer, and the variable n is declared to be an integer.
sizeof(BUF), should be 8</p>

<p>So a 17 divided by 8 (17/8) should print 2 as n is declared as integer.
As memcpy was used to copy data to s and not to s.b, I would guess that as this has to do with memory alignments; assuming it is a 64 bit computer, than there can be 8 characters on one memory address.</p>

<p>For instance, lets assume that someone has called a malloc(1), than the next ""free space"" are not aligned...</p>

<p>The second strlen call, shows the correct number, as the string copy was done to the s struct instead of to s.b </p>
","5438650","","7362988","","2020-02-28 22:59:24","2020-02-28 22:59:24","","","","0","","",""
"60021402","2","","58759591","2020-02-01 21:54:49","","0","","<p>There are some issues that I can see and they can be affected by how the compiler decides to layout memory.</p>

<pre><code>    n = strlen((char *)&amp;s.b) / sizeof(BUF);
    printf(""%d\n"", n);
</code></pre>

<p>In the above code <code>s.b</code> is a 23 entry array of an array of 8 characters.  When you refer to just <code>s.b</code> you are getting the address of the first entry in the 23 byte array (and the first byte in the 8 character array).  When the code says <code>&amp;s.b</code>, this is asking for the address of the address of the array.  Under the covers, the compiler is more than likely generating some local storage, storing the address of the array in there and supplying the address of the local storage to <code>strlen</code>.</p>

<p>You have 2 possible solutions.  They are:</p>

<pre><code>    n = strlen((char *)s.b) / sizeof(BUF);
    printf(""%d\n"", n);
</code></pre>

<p>or</p>

<pre><code>    n = strlen((char *)&amp;s.b[0]) / sizeof(BUF);
    printf(""%d\n"", n);
</code></pre>

<p>I also tried to run your program and demonstrate the issue, but both clang and the version of gcc I have with any <code>-O</code> options still worked as you expected.  For what it's worth, I'm running clang version 9.0.0-2 and gcc version 9.2.1 on x86_64-pc-linux-gnu).</p>
","6724071","","","","","2020-02-01 21:54:49","","","","0","","",""
"57372610","2","","57372554","2019-08-06 09:08:27","","41","","<p>See <a href=""http://www.ecma-international.org/ecma-262/6.0/#sec-abstract-equality-comparison"" rel=""noreferrer"">Abstract Equality Comparison:</a>:</p>

<blockquote>
  <p>The comparison <code>x == y</code>, where x and y are values, produces true or false. Such a comparison is performed as follows:</p>
</blockquote>

<p>So, in your situation, <code>x</code> is a string, and <code>y</code> is a boolean. The first condition that is fulfilled here is:</p>

<blockquote>
  <ol start=""9"">
  <li>If Type(y) is Boolean, return the result of the comparison <code>x == ToNumber(y)</code>.</li>
  </ol>
</blockquote>

<p>Turning the check into</p>

<pre><code>'\t' == 0
</code></pre>

<p>Which then fulfills:</p>

<blockquote>
  <ol start=""7"">
  <li>If Type(x) is String and Type(y) is Number, return the result of the comparison ToNumber(x) == y.</li>
  </ol>
</blockquote>

<p>And <code>ToNumber('\t') === 0</code>:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>console.log(Number('\t'));</code></pre>
</div>
</div>
</p>

<p>Turning the check into</p>

<pre><code>0 == 0
</code></pre>

<p>which is the same as</p>

<pre><code>0 === 0
</code></pre>

<p>or <code>true</code>.</p>

<p>Note that while a string composed of all whitespace is <code>== false</code>, calling Boolean on such a string will return <code>true</code>, because the string has a non-zero length:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>console.log(
  Boolean(' '),
  Boolean('\t')
);</code></pre>
</div>
</div>
</p>

<p>Of course, it would be best to always avoid <code>==</code> - use <code>===</code> instead, and you won't have to worry about these silly coercion rules.</p>
","9515207","","9515207","","2019-08-06 21:01:30","2019-08-06 21:01:30","","","","0","","",""
"59359959","2","","59359911","2019-12-16 15:47:48","","117","","<p>Double braces escape the braces, so that no interpolation happens: <code>{{</code> ➝ <code>{</code>, and <code>}}</code> ➝ <code>}</code>. And <code>74</code> remains an unchanged string, <code>'74'</code>.</p>

<p>With triple braces, the outer double braces are escaped, same as above. The inner braces, on the other hand, lead to regular string interpolation of the value <code>74</code>.</p>

<p>That is, the string <code>f'{{{74}}}'</code> is equivalent to <code>f'{{ {74} }}'</code>, but without spaces (or, equivalently, to <code>'{' + f'{74}' + '}'</code>).</p>

<p>You can see the difference when replacing the numeric constant by a variable:</p>

<pre><code>In [1]: x = 74

In [2]: f'{{x}}'
Out[2]: '{x}'

In [3]: f'{{{x}}}'
Out[3]: '{74}'
</code></pre>
","1968","","","","","2019-12-16 15:47:48","","","","0","","",""
"56719936","2","","55462658","2019-06-22 23:34:30","","2","","<p>Python 3 Apache Beam + BigQuery
Here’s the key Beam code to read from BigQuery and write to BigQuery:</p>

<pre><code>with beam.Pipeline(RUNNER, options = opts) as p:
    (p 
      | 'read_bq' &gt;&gt; beam.io.Read(beam.io.BigQuerySource(query=query, use_standard_sql=True))
      | 'compute_fit' &gt;&gt; beam.FlatMap(compute_fit)
      | 'write_bq' &gt;&gt; beam.io.gcp.bigquery.WriteToBigQuery(
          'ch05eu.station_stats', schema='station_id:string,ag:FLOAT64,bg:FLOAT64,cg:FLOAT64')
    )
</code></pre>

<p>Essentially, we are running a query on a BigQuery table, running the Python method compute_fit, and writing the output to a BigQuery table.
This is my compute_fit method. As you can see, it’s just plain Python code:</p>

<pre><code>def compute_fit(row):
  from scipy import stats
  import numpy as np
  durations = row['duration_array']
  ag, bg, cg = stats.gamma.fit(durations)
  if np.isfinite(ag) and np.isfinite(bg) and np.isfinite(cg):
      result = {}
      result['station_id'] = str(row['start_station_id'])
      result['ag'] = ag
      result['bg'] = bg
      result['cg'] = cg
      yield result
</code></pre>

<p>Make sure to specify the Python packages that you need installed on the Dataflow workers in a requirements.txt:</p>

<pre><code>%%writefile requirements.txt
numpy
scipy
</code></pre>

<p>Enjoy!
for more info you could refer to this document <a href=""https://thepythoncoding.blogspot.com/2019/06/how-to-run-python-code-on-your-bigquery.html"" rel=""nofollow noreferrer"">How to run Python code on your BigQuery table</a></p>
","10033286","","","","","2019-06-22 23:34:30","","","","0","","",""
"59307908","2","","59306751","2019-12-12 15:26:41","","29","","<p>You have discovered evidence that the program-flow algorithm that produces this warning is relatively unsophisticated when it comes to tracking the meanings encoded in local variables.</p>

<p>I have no specific knowledge of the flow checker's implementation, but having worked on implementations of similar code in the past, I can make some educated guesses. The flow checker is <em>likely</em> deducing two things in the false positive case: (1) <code>_test</code> could be null, because if it could not, you would not have the comparison in the first place, and (2) <code>isNull</code> could be true or false -- because if it could not, you would not have it in an <code>if</code>.  But the connection that the <code>return _test;</code> only runs if <code>_test</code> is not null, that connection is not being made.</p>

<p>This is a surprisingly tricky problem, and you should expect that it will take a while for the compiler to attain the sophistication of tools that have had multiple years of work by experts. The Coverity flow checker, for example, would have no problem at all in deducing that neither of your two variations had a null return, but the Coverity flow checker costs serious money for corporate customers. </p>

<p>Also, the Coverity checkers are designed to run on large codebases <em>overnight</em>; the C# compiler's analysis must run <em>between keystrokes in the editor</em>, which significantly changes the sorts of in-depth analyses you can reasonably perform.</p>
","88656","","88656","","2019-12-16 22:00:00","2019-12-16 22:00:00","","","","2","","",""
"59318824","2","","59306751","2019-12-13 08:37:54","","54","","<p>I can make a reasonable <em>guess</em> as to what's going on here, but it's all a bit complicated :) It involves the <a href=""https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/proposals/csharp-8.0/nullable-reference-types-specification#null-state-and-null-tracking"" rel=""noreferrer"">null state and null tracking described in the draft spec</a>. Fundamentally, at the point where we want to return, the compiler will warn if the state of the expression is ""maybe null"" instead of ""not null"".</p>

<p>This answer is in somewhat narrative form rather than just ""here's the conclusions""... I hope it's more useful that way.</p>

<p>I'm going to simplify the example slightly by getting rid of the fields, and consider a method with one of these two signatures:</p>

<pre class=""lang-cs prettyprint-override""><code>public static string M(string? text)
public static string M(string text)
</code></pre>

<p>In the implementations below I've given each method a different number so I can refer to specific examples unambiguously. It also allows all of the implementations to be present in the same program.</p>

<p>In each of the cases described below, we'll do various things but end up trying to return <code>text</code> - so it's the null state of <code>text</code> that's important.</p>

<h2>Unconditional return</h2>

<p>First, let's just try to return it directly:</p>

<pre class=""lang-cs prettyprint-override""><code>public static string M1(string? text) =&gt; text; // Warning
public static string M2(string text) =&gt; text;  // No warning
</code></pre>

<p>So far, so simple. The nullable state of the parameter at the start of the method is ""maybe null"" if it's of type <code>string?</code> and ""not null"" if it's of type <code>string</code>.</p>

<h2>Simple conditional return</h2>

<p>Now let's check for null within the <code>if</code> statement condition itself. (I would use the conditional operator, which I believe will have the same effect, but I wanted to stay truer to the question.)</p>

<pre class=""lang-cs prettyprint-override""><code>public static string M3(string? text)
{
    if (text is null)
    {
        return """";
    }
    else
    {
        return text; // No warning
    }
}

public static string M4(string text)
{
    if (text is null)
    {
        return """";
    }
    else
    {
        return text; // No warning
    }
}
</code></pre>

<p>Great, so it looks like within an <code>if</code> statement where the condition itself checks for nullity, the state of the variable within each branch of the <code>if</code> statement can be different: within the <code>else</code> block, the state is ""not null"" in both pieces of code. So in particular, in M3 the state changes from ""maybe null"" to ""not null"".</p>

<h2>Conditional return with a local variable</h2>

<p>Now let's try to hoist that condition to a local variable:</p>

<pre class=""lang-cs prettyprint-override""><code>public static string M5(string? text)
{
    bool isNull = text is null;
    if (isNull)
    {
        return """";
    }
    else
    {
        return text; // Warning
    }
}

public static string M6(string text)
{
    bool isNull = text is null;
    if (isNull)
    {
        return """";
    }
    else
    {
        return text; // Warning
    }
}
</code></pre>

<p><em>Both</em> M5 and M6 issue warnings. So not only do we not get the positive effect of the state change from ""maybe null"" to ""not null"" in M5 (as we did in M3)... we get the <em>opposite</em> effect in M6, where the state goes from ""not null"" to ""maybe null"". That really surprised me.</p>

<p>So it looks like we've learned that:</p>

<ul>
<li>Logic around ""how a local variable was computed"" isn't used to propagate state information. More on that later.</li>
<li>Introducing a null comparison can warn the compiler that something it previously thought wasn't null might be null after all.</li>
</ul>

<h2>Unconditional return after an ignored comparison</h2>

<p>Let's look at the second of those bullet points, by introducing a comparison before an unconditional return. (So we're completely ignoring the result of the comparison.):</p>

<pre class=""lang-cs prettyprint-override""><code>public static string M7(string? text)
{
    bool ignored = text is null;
    return text; // Warning
}

public static string M8(string text)
{
    bool ignored = text is null;
    return text; // Warning
}
</code></pre>

<p>Note how M8 feels like it should be equivalent to M2 - both have a not-null parameter which they return unconditionally - but the introduction of a comparison with null changes the state from ""not null"" to ""maybe null"". We can get further evidence of this by trying to dereference <code>text</code> before the condition:</p>

<pre class=""lang-cs prettyprint-override""><code>public static string M9(string text)
{
    int length1 = text.Length;   // No warning
    bool ignored = text is null;
    int length2 = text.Length;   // Warning
    return text;                 // No warning
}
</code></pre>

<p>Note how the <code>return</code> statement doesn't have a warning now: the state <em>after</em> executing <code>text.Length</code> is ""not null"" (because if we execute that expression successfully, it couldn't be null). So the <code>text</code> parameter starts as ""not null"" due to its type, becomes ""maybe null"" due to the null comparison, then becomes ""not null"" again after <code>text2.Length</code>.</p>

<h2>What comparisons affect state?</h2>

<p>So that's a comparison of <code>text is null</code>... what effect similar comparisons have? Here are four more methods, all starting with a non-nullable string parameter:</p>

<pre class=""lang-cs prettyprint-override""><code>public static string M10(string text)
{
    bool ignored = text == null;
    return text; // Warning
}

public static string M11(string text)
{
    bool ignored = text is object;
    return text; // No warning
}

public static string M12(string text)
{
    bool ignored = text is { };
    return text; // No warning
}

public static string M13(string text)
{
    bool ignored = text != null;
    return text; // Warning
}
</code></pre>

<p>So even though <code>x is object</code> is now a recommended alternative to <code>x != null</code>, they don't have the same effect: only a comparison <em>with null</em> (with any of <code>is</code>, <code>==</code> or <code>!=</code>) changes the state from ""not null"" to ""maybe null"".</p>

<h2>Why does hoisting the condition have an effect?</h2>

<p>Going back to our first bullet point earlier, why don't M5 and M6 take account of the condition which led to the local variable? This doesn't surprise me as much as it appears to surprise others. Building that sort of logic into the compiler and specification is a lot of work, and for relatively little benefit. Here's another example with nothing to do with nullability where inlining something has an effect:</p>

<pre class=""lang-cs prettyprint-override""><code>public static int X1()
{
    if (true)
    {
        return 1;
    }
}

public static int X2()
{
    bool alwaysTrue = true;
    if (alwaysTrue)
    {
        return 1;
    }
    // Error: not all code paths return a value
}
</code></pre>

<p>Even though <em>we</em> know that <code>alwaysTrue</code> will always be true, it doesn't satisfy the requirements in the specification that make the code after the <code>if</code> statement unreachable, which is what we need.</p>

<p>Here's another example, around definite assignment:</p>

<pre class=""lang-cs prettyprint-override""><code>public static void X3()
{
    string x;
    bool condition = DateTime.UtcNow.Year == 2020;
    if (condition)
    {
        x = ""It's 2020."";
    }
    if (!condition)
    {
        x = ""It's not 2020."";
    }
    // Error: x is not definitely assigned
    Console.WriteLine(x);
}
</code></pre>

<p>Even though <em>we</em> know that the code will enter exactly one of those <code>if</code> statement bodies, there's nothing in the spec to work that out. Static analysis tools may well be able to do so, but trying to put that into the language specification would be a bad idea, IMO - it's fine for static analysis tools to have all kinds of heuristics which can evolve over time, but not so much for a language specification.</p>
","22656","","","","","2019-12-13 08:37:54","","","","12","","",""
"59328672","2","","59306751","2019-12-13 19:25:06","","37","","<p>The nullable flow analysis tracks the <em>null state</em> of variables, but it does not track other state, such as the value of a <code>bool</code> variable (as <code>isNull</code> above), and it does not track the relationship between the state of separate variables (e.g. <code>isNull</code> and <code>_test</code>).</p>

<p>An actual static analysis engine would probably do those things, but would also be ""heuristic"" or ""arbitrary"" to some degree: you couldn't necessarily tell the rules it was following, and those rules might even change over time.</p>

<p>That's not something we can do directly in the C# compiler. The rules for nullable warnings are quite sophisticated (as Jon's analysis shows!), but they are rules, and can be reasoned about.</p>

<p>As we roll out the feature it feels like we mostly struck the right balance, but there are a few places that do come up as awkward, and we'll be revisiting those for C# 9.0.</p>
","4371133","","","","","2019-12-13 19:25:06","","","","10","","",""
"59368883","2","","59306751","2019-12-17 06:45:12","","8","","<p>All the other answers are pretty much exactly correct.</p>

<p>In case anyone's curious, I tried to spell out the compiler's logic as explicitly as possible in <a href=""https://github.com/dotnet/roslyn/issues/36927#issuecomment-508595947"" rel=""noreferrer"">https://github.com/dotnet/roslyn/issues/36927#issuecomment-508595947</a></p>

<p>The one piece that's not mentioned is how we decide whether a null check should be considered ""pure"", in the sense that if you do it, we should seriously consider whether null is a possibility. There are a lot of ""incidental"" null checks in C#, where you test for null as a part of doing something else, so we decided that we wanted to narrow down the set of checks to ones that we were sure people were doing deliberately. The heuristic we came up with was ""contains the word null"", so that's why <code>x != null</code> and <code>x is object</code> produce different results.</p>
","1454017","","","","","2019-12-17 06:45:12","","","","0","","",""
"59411477","2","","59411397","2019-12-19 14:12:34","","25","","<p>I believe what is actually happening here is a destructuring assignment. Tuple assignment will try to implicitly convert its components, and as it is possible to assign <code>string</code> to <code>object</code>, that is what happens here.</p>

<blockquote>
  <p>The language supports assignment between tuple types that have the same number of elements, where each right-hand side element can be implicitly converted to its corresponding left-hand side element. Other conversions aren't considered for assignments.</p>
</blockquote>

<p><a href=""https://docs.microsoft.com/en-us/dotnet/csharp/tuples#assignment-and-tuples"" rel=""noreferrer"">Source</a></p>

<p><a href=""https://sharplab.io/#v2:D4AQTAjAsAUCDMACciDCiDetE+UkALIgLIAUAlJtrjaSBAAwA0yjlAzogLyKkBEAQz4s+AIz7kA3NRo5SAe1EArAKYBjAC4t6DSvO6J20mLNz0AnAqkzEAX1i2gA"" rel=""noreferrer"">See it on sharplab.io</a></p>
","722121","","722121","","2019-12-24 17:27:46","2019-12-24 17:27:46","","","","2","","",""
"55733335","2","","55730971","2019-04-17 17:47:17","","10","","<blockquote>
  <p>Most of the language ABI changes seem like they wouldn't cause issues, but the calling convention change for empty class types in 12 might?</p>
</blockquote>

<p>The change of the calling convention for empty classes can cause an issue on x86-64. Here's an example:</p>

<p><strong>def.hpp</strong>:</p>

<pre><code>struct Empty { };

struct Foo {
    char dummy[16];
    int a;

    Foo() : a(42) { }
};

void fn(Empty, Foo);
</code></pre>

<p><strong>one.cpp</strong>:</p>

<pre><code>#include ""def.hpp""

int main() {
    fn(Empty(), Foo());
}
</code></pre>

<p><strong>two.cpp</strong>:</p>

<pre><code>#include &lt;stdio.h&gt;
#include ""def.hpp""

void fn(Empty e, Foo foo) {
    printf(""%d\n"", foo.a);
}
</code></pre>

<p>Now, if you compile these with G++ 8 with differing ABIs of 11 and 12, for example:</p>

<pre><code>g++ -c -fabi-version=11 one.cpp
g++ -c -fabi-version=12 two.cpp
g++ one.o two.o
</code></pre>

<p>the resulting <code>a.out</code> won't print the expected <code>42</code>.</p>

<p>The reason is that the old ABI (11) reserves space for <code>Empty()</code> on the stack, but the new ABI (12) doesn't. So the address of <code>foo</code> will differ between the caller and the callee side. </p>

<p>(Note: I've included <code>Foo::dummy</code> so <code>Foo</code> gets passed using the stack instead of registers. If <code>Foo</code> was passed using registers, there would be no problem.)</p>
","8157187","","","","","2019-04-17 17:47:17","","","","0","","",""
"55736661","2","","55730971","2019-04-17 22:12:38","","4","","<p>Most of them alter mangling in minor ways, which could cause some undefined references while linking, or just some code bloat due to identical source code producing two equivalent symbols with different names, so won't be merged by the linker.</p>

<blockquote>
  <p>the calling convention change for empty class types in 12 might?</p>
</blockquote>

<p>Yes, definitely. If you have non-final parameters that are empty types then that affects the ABI for the function, and differences can lead to undefined behaviour (in practice, accessing junk on the stack, or parameters getting the wrong values).</p>
","981959","","","","","2019-04-17 22:12:38","","","","0","","",""
"55929473","2","","55929472","2019-04-30 22:31:46","","43","","<p><code>{% load staticfiles %}</code> and <code>{% load admin_static %}</code> were <a href=""https://docs.djangoproject.com/en/2.2/releases/2.1/#features-deprecated-in-2-1"" rel=""noreferrer"">deprecated in Django 2.1</a>, and <a href=""https://docs.djangoproject.com/en/dev/releases/3.0/#features-removed-in-3-0"" rel=""noreferrer"">removed in Django 3.0</a>.</p>

<p>If you have any of the following in your template:</p>

<pre><code>{% load staticfiles %}
{% load static from staticfiles %}
{% load admin_static %}
</code></pre>

<p>You should replace the tag with simply:</p>

<pre><code>{% load static %}
</code></pre>
","113962","","113962","","2020-01-29 10:19:52","2020-01-29 10:19:52","","","","0","","",""
"55934491","2","","55934490","2019-05-01 09:56:54","","66","","<p>Reserved keywords cannot be used as <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#Reserved_word_usage"" rel=""noreferrer"">identifiers (variable names)</a>. Unlike most other special Javascript words (like those listed in the question, <code>let</code>, <code>finally</code>, ...), <code>await</code> is <em>not</em> a reserved keyword, so using it as a variable name does not throw a SyntaxError. Why wasn't it made into a reserved keyword when the new syntax came out?</p>

<h1>Backwards compatibility</h1>

<p>Back in 2011, when ES5 was still a relatively new thing, code that used <code>await</code> (and <code>async</code>) as variable names was perfectly valid, so you may have seen something like this on a couple sites:</p>

<pre><code>function timeout(ms) {
  var await = $.Deferred();
  setTimeout(await.resolve, ms);
  return await.promise();
};
</code></pre>

<p>The choice of that variable name may seem odd, but there was nothing <em>wrong</em> with it. <code>await</code> and <code>async</code> have never been reserved keywords - if the writers of the ES2017 specification made <code>await</code> into a reserved keyword, and browsers implemented that change, people visiting those older sites on newer browsers would not be able to use those sites; they would likely be broken.</p>

<p>So perhaps if they were made into reserved keywords, a <em>few</em> sites which chose a peculiar variable name wouldn't work properly - why should the existence of those sites permanently affect the future evolution of ECMAscript and result in confusing code like in the question?</p>

<p><strong>Because browsers will refuse to implement a feature which breaks existing sites.</strong> If a user finds that a site does not work on one browser, but works on another, that will incentivize them to switch browsers - the maker of the first browser would not want that, because that would mean less market share for them, even if it's a feature which makes the language more consistent and understandable. In addition, the editors of the specification do not want to add something that will never be implemented (or will only be implemented sporadically), because then the specification would lose some of its status as a standard - contrary to its main goal.</p>

<p>You could see these interactions in action with <a href=""https://github.com/tc39/proposal-flatMap/pull/56"" rel=""noreferrer""><code>Array.prototype.flatten</code></a> and <a href=""https://bugzilla.mozilla.org/show_bug.cgi?id=1075059"" rel=""noreferrer""><code>Array.prototype.contains</code></a> - when browsers started shipping them, it was found that they broke a few existing sites due to name conflicts, so the browsers backed out of the implementation, and the specification had to be tweaked (the methods were renamed to <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat"" rel=""noreferrer""><code>.flat</code></a> and <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes"" rel=""noreferrer""><code>.includes</code></a>).</p>

<hr>

<p>There actually <em>is</em> a situation in which <code>await</code> cannot be used as an identifier, which is inside of ES6 modules:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;script type=""module""&gt;
  const await = 'Does it work?';
&lt;/script&gt;</code></pre>
</div>
</div>
</p>

<p>This is because while ES6 (ES2015) modules were being figured out, <code>async</code>/<code>await</code> was already on the horizon (<a href=""https://github.com/tc39/ecmascript-asyncawait/commit/97b5cbee1594b2861f3e9f4771beb39747ba064c"" rel=""noreferrer"">initial commit for the <code>async</code>/<code>await</code> proposal</a> can be seen at the beginning of 2014), so while designing modules, <code>await</code> could be made a reserved keyword in preparation for the future, without breaking any existing sites.</p>

<hr>

<p>With regards to the first snippet in the question:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const foo = await /barbaz/
myFn()</code></pre>
</div>
</div>
</p>

<p>This is syntactically valid because <code>await</code> is a valid variable name outside of <code>async</code> functions, and the interpreter thinks you're trying to <em>divide</em>, rather than use a regular expression:</p>

<pre><code>const foo = await / barbaz / myFn()
</code></pre>

<p>Not relying on Automatic Semicolon Insertion would have identified the problem earlier, because the last <code>/</code> could not have been interpreted as division:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const foo = await /barbaz/;
myFn();</code></pre>
</div>
</div>
</p>

<p>This exact somewhat-ambiguous situation was actually specifically brought up in a <a href=""https://github.com/rwaldron/tc39-notes/blob/master/es7/2016-07/jul-28.md#10iv-async-functions"" rel=""noreferrer"">TC39 meeting</a> on <code>async</code>/<code>await</code>:</p>

<blockquote>
  <p><strong>YK:</strong> What are you worried about?</p>
  
  <p><strong>WH:</strong> Ambiguities on code sequences that start with await/ and then get interpreted in diverging ways (due to the await-as-identifier vs await-as-operator distinction that flips the / between division and starting a regexp) by cover grammars vs. real grammars. It's a potential bug farm.</p>
</blockquote>
","9515207","","","","","2019-05-01 09:56:54","","","","2","","",""
"56008679","2","","55975924","2019-05-06 15:57:28","","9","","<p>I do not know of any existing names for this pattern, but if you take a good look at how the STL is naming things, you can use name close enough to make your code explicit.</p>

<p>I also liked the <code>dispatcher_t</code> idea from @Jarod42 , I think it is more generic than <code>dichotomy_t</code> or <code>n_chotomy_t</code>. </p>

<p><code>dichotomy()</code> could be called <code>make_variant(b)</code>. Since it will return the <code>std::variant</code> value of a boolean given in argument. Much like <code>std::make_tuple</code> makes a tuple from multiple arguments.</p>

<p>I would suggest to replace <code>bools_at_compile_time</code> by <code>static_eval</code>. Much like <code>static_assert</code> makes an assertion at compile time.</p>

<p>Not that if <code>eval</code> is not the correct adjective for your use case you can easily adapt it <code>static_*</code>.</p>

<pre><code>#include &lt;type_traits&gt;
#include &lt;variant&gt;
#include &lt;utility&gt;

using dichotomy_t = std::variant&lt;std::false_type, std::true_type&gt;;
// (or a struct that inherits from that, and overloads operator bool())

constexpr dichotomy_t make_variant( bool b ) {
  if (b) return std::true_type{};
  return std::false_type{};
}
template&lt;class F, class...Bools&gt;
constexpr auto static_eval( F&amp;&amp; f, Bools...bools ) {
  static_assert( (std::is_same&lt;Bools, bool&gt;{} &amp;&amp; ...) );
  return std::visit( std::forward&lt;F&gt;(f), make_variant(bools)... );
}

template&lt;bool x, bool y&gt;
auto some_template() {
    return x || y;
}

auto foo( bool x, bool y ) { // &lt;-- x and y are run-time bools here
  auto func = [&amp;](auto x, auto y) {
    return some_template&lt;x,y&gt;(); // &lt;-- x and y are compile-time bools here
  };
  return static_eval( func, x, y ); // &lt;-- converts runtime to compile time bools
}

#include &lt;iostream&gt;

int main() {
    std::cout &lt;&lt; foo( true, true ) &lt;&lt; ""\n"";
}
</code></pre>
","7556604","","7556604","","2019-05-06 16:03:09","2019-05-06 16:03:09","","","","1","","",""
"54362646","2","","54362209","2019-01-25 09:47:07","","36","","<p><strong>TL;DR:</strong></p>

<ul>
<li>in C++98/03 the clause was not present, and the standard did not specify relational operators for <code>void</code> pointers (core issue 879, see end of this post);</li>
<li>the odd clause about comparing <code>void</code> pointers was added in C++11 to resolve it, but this in turn gave rise to two other core issues 583 &amp; 1512 (see below);</li>
<li>the resolution of these issues required the clause to be removed and be replaced with the wording found in C++14 standard, which allows for ""normal"" <code>void *</code> comparison.</li>
</ul>

<hr>

<p>Core Issue 583: <a href=""http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#583"" rel=""noreferrer"">Relational pointer comparisons against the null pointer constant</a></p>

<blockquote>
  <ol start=""583"">
  <li>Relational pointer comparisons against the null pointer constant Section: 8.9  [expr.rel]      </li>
  </ol>
  
  <p>In C, this is ill-formed (cf C99 6.5.8):</p>

<pre><code>void f(char* s) {
    if (s &lt; 0) { }
} ...but in C++, it's not. Why? Who would ever need to write (s &gt; 0) when they could just as well write (s != 0)?
</code></pre>
  
  <p>This has been in the language since the ARM (and possibly earlier);
  apparently it's because the pointer conversions (7.11 [conv.ptr]) need
  to be performed on both operands whenever one of the operands is of
  pointer type. So it looks like the ""null-ptr-to-real-pointer-type""
  conversion is hitching a ride with the other pointer conversions.</p>
  
  <p>Proposed resolution (April, 2013):</p>
  
  <p>This issue is resolved by the resolution of <strong>issue 1512</strong>.</p>
</blockquote>

<p>Core Issue 1512: <a href=""http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#1512"" rel=""noreferrer"">Pointer comparison vs qualification conversions</a></p>

<blockquote>
  <ol start=""1512"">
  <li>Pointer comparison vs qualification conversions Section: 8.9  [expr.rel]     </li>
  </ol>
  
  <p>According to 8.9 [expr.rel] paragraph 2, describing pointer
  comparisons,</p>
  
  <p>Pointer conversions (7.11 [conv.ptr]) and qualification conversions
  (7.5 [conv.qual]) are performed on pointer operands (or on a pointer
  operand and a null pointer constant, or on two null pointer constants,
  at least one of which is non-integral) to bring them to their
  composite pointer type. This would appear to make the following
  example ill-formed,</p>

<pre><code> bool foo(int** x, const int** y) {
 return x &lt; y;  // valid ?   } because int** cannot be converted to const int**, according to the rules of 7.5 [conv.qual] paragraph 4.
</code></pre>
  
  <p>This seems too strict for pointer comparison, and current
  implementations accept the example.</p>
  
  <p>Proposed resolution (November, 2012):</p>
</blockquote>

<hr>

<p>Relevant excerpts from <strong>resolution of the above issues</strong> are found in the paper: <a href=""http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2013/n3624.html"" rel=""noreferrer"">Pointer comparison vs qualification conversions (revision 3)</a>.</p>

<blockquote>
  <p><em>The following also resolves core <strong>issue 583</strong>.</em></p>
  
  <p>Change in 5.9 expr.rel paragraphs 1 to 5:</p>
</blockquote>

<p>In this section the following statement (the <strong><em>odd clause in C++11</em></strong>) has been <strong>expunged</strong>:</p>

<blockquote>
  <p>Pointers to <code>void</code> (after pointer conversions) can be compared, with a result defined as follows: If both pointers represent the same address or are both the null pointer value, the result is <code>true</code> if the operator is <code>&lt;=</code> or <code>&gt;=</code> and <code>false</code> otherwise; otherwise the result is unspecified</p>
</blockquote>

<p>And the following statements have been <strong>added</strong>:  </p>

<blockquote>
  <ul>
  <li>If two pointers point to different elements of the same array, or to subobjects thereof, the pointer to the element with the higher subscript compares greater.  </li>
  <li>If one pointer points to an element of an array, or to a subobject thereof, and another pointer points one past the last element of the array, the latter pointer compares greater.  </li>
  </ul>
</blockquote>

<p>So in the final working draft of <strong>C++14</strong> (n4140) section [expr.rel]/3, the above statements are found as they were stated at the time of the resolution.</p>

<hr>

<p>Digging for the reason why this odd clause was added led me to a much earlier issue 879: <a href=""http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_defects.html#879"" rel=""noreferrer"">Missing built-in comparison operators for pointer types</a>.
The proposed resolution of this issue (in July, 2009) led to the addition of this clause which was voted into WP in October, 2009.   </p>

<p>And that is how it came to be included in the C++11 standard.</p>
","10190237","","214671","","2019-01-29 21:44:40","2019-01-29 21:44:40","","","","14","","",""
"57665148","2","","57661132","2019-08-26 21:27:19","","4","","<p>I finally managed to get it to work:</p>

<pre><code>if (!__builtin_constant_p((int)(uintptr_t)b) || b != 0) {
</code></pre>

<p>With this you get only one warning.</p>

<p>It seems that <code>gcc</code> can't do <code>__builtin_constant_p</code> on a pointer type. The <code>__builtin_constant_p(b)</code> always returns 0, so the warn function is always linked. Casting <code>b</code> to <code>int</code> strangely works. Although it looses precision in the pointer value, we don't care about it, cause we only check if it's a constant.</p>
","9072753","","9072753","","2019-08-27 10:56:43","2019-08-27 10:56:43","","","","7","","",""
"56941692","2","","56936336","2019-07-08 19:47:33","","2","","<p>Absolutely not! NTLM and Kerberos operate completely different. First of all, I would highly recommend get rid off NTLM as fast as you can.</p>

<p>You can solve your problem in an easy fashion if you can access C interfaces. I also assume you MIT Kerberos on a Unix-like OS like CentOS or FreeBSD, etc.</p>

<p>NTLM will provide you the downlevel logon name. You need first to convert the NetBIOS domain to a DNS domain via LDAP (use <code>libopenldap</code>) then you can construct the Kerberos principal or the enterprise principal for your client. Then create a service account in your KDC and enable protocol transition and contrained delegation on that account for the target service. Now request a TGT on behalf of that user principal and request a service ticket for the user, voila you can access your Kerberos backend.
Here is a decent read: <a href=""https://k5wiki.kerberos.org/wiki/Projects/Services4User"" rel=""nofollow noreferrer"">https://k5wiki.kerberos.org/wiki/Projects/Services4User</a></p>

<p>If you run HTTPd as your reverse proxy, it might handle all the magic for your with <code>mod_auth_gssapi</code>.</p>

<p>On Windows, this is a bit of a pain with the security API and SSPI. While the the principal transformation comes for free with Windows. You'll need <code>LsaLogonUser</code> with <code>KERB_S4U_LOGON</code>, impersonate with that handle and then require SSPI to acquire a cred handle...</p>
","696632","","","","","2019-07-08 19:47:33","","","","5","","",""
"56668369","2","","56668186","2019-06-19 13:05:38","","40","","<p>A <code>std::array&lt;int, 3&gt;</code> is 96 bits wide on your implementation.  As such the ABI declares that it should be returned in RAX + the low 32 bits of RDX (aka EDX).</p>

<p>4294967296 is 2<sup>32</sup>, in hex it is <code>$1'0000'0000</code>.  So the <code>movabs</code> stores 0 in the low order 32 bits of RAX, and 1 in the high order bits of RAX.  The <code>mov</code> stores 2 in EDX (which is exactly what you wanted).</p>
","771073","","771073","","2019-06-20 05:32:40","2019-06-20 05:32:40","","","","5","","",""
"57842757","2","","57842756","2019-09-08 14:20:35","","339","","<h1>Why enable warnings?</h1>

<p>C and C++ compilers are notoriously bad at reporting some common programmer mistakes <em>by default</em>, such as:</p>

<ul>
<li>forgetting to initialise a variable</li>
<li>forgetting to <code>return</code> a value from a function</li>
<li>arguments in <code>printf</code> and <code>scanf</code> families not matching the format string</li>
<li>a function is used without being declared beforehand (C only)</li>
</ul>

<p>These can be detected and reported, just usually not by default; this feature must be explicitly requested via compiler options.</p>

<h1>How to enable warnings?</h1>

<p>This depends on your compiler. </p>

<p>Microsoft C and C++ compilers understand switches like <code>/W1</code>, <code>/W2</code>, <code>/W3</code>, <code>/W4</code> and <code>/Wall</code>. Use at least <code>/W3</code>. <code>/W4</code> and <code>/Wall</code> may emit spurious warnings for system header files, but if your project compiles cleanly with one of these options, go for it. These options are mutually exclusive.</p>

<p>Most other compilers understand options like <code>-Wall</code>, <code>-Wpedantic</code> and <code>-Wextra</code>. <code>-Wall</code> is essential and all the rest are recommended (note that, despite its name, <code>-Wall</code> only enables the most important warnings, not <em>all</em> of them). These options can be used separately or all together.</p>

<p>Your IDE may have a way to enable these from the user interface. </p>

<h1>Why treat warnings as errors? They are just warnings!</h1>

<p>A compiler warning signals a potentially serious problem in your code. The problems listed above are almost always fatal; others may or may not be, but you want compilation to fail <em>even if</em> it turns out to be a false alarm. Investigate each warning, find the root cause, and fix it. In the case of a false alarm, work around it — that is, use a different language feature or construct so that the warning is no longer triggered. If this proves to be very hard, disable that particular warning on a case by case basis.</p>

<p>You don't want to just leave warnings as warnings even if all of them are false alarms. It could be OK for very small projects where the total number of warnings emitted is less than 7. Anything more, and it's easy for a new warning to get lost in a flood of old familiar ones. Don't allow that. Just cause all your project to compile cleanly.</p>

<p>Note this applies to program development. If you are releasing your project to the world in the source form, then it might be a good idea not to supply <code>-Werror</code> or equivalent in your <em>released</em> build script. People might try to build your project with a different version of the compiler, or with a different compiler altogether, which may have a different set of warnings enabled. You may want their build to succeed. It is still a good idea to keep the warnings enabled, so that people who see warning messages could send you bug reports or patches.</p>

<h1>How to treat warnings as errors?</h1>

<p>This is again done with compiler switches. <code>/WX</code> is for Microsoft, most others use <code>-Werror</code>. In either case, the compilation will fail if there are any warnings produced.</p>
","775806","","775806","","2019-09-10 18:59:30","2019-09-10 18:59:30","","","","24","","",""
"57843036","2","","57842756","2019-09-08 14:54:12","","92","","<p>C is, famously, a rather low-level language as HLLs go.  C++, though it might seem to be a considerably higher-level language than C, still shares a number of its traits.  And one of those traits is that the languages were designed by programmers, for programmers -- and, specifically, programmers who knew what they were doing.</p>

<p>[For the rest of this answer I'm going to focus on C.  Most of what I'll say also applies to C++, though perhaps not as strongly.  Although as Bjarne Stroustrup has famously said, <a href=""http://www.stroustrup.com/bs_faq.html#really-say-that"" rel=""nofollow noreferrer"">""C makes it easy to shoot yourself in the foot; C++ makes it harder, but when you do it blows your whole leg off.""</a>]</p>

<p>If you know what you are doing -- <em>really</em> know what you are doing -- sometimes you may have to ""break the rules"".  But most of the time, most of us will agree that well-intentioned rules keep us all out of trouble, and that wantonly breaking those rules all the time is a bad idea.</p>

<p>But in C and C++, there are surprisingly large numbers of things you can do that are ""bad ideas"" but which aren't formally ""against the rules"".  Sometimes they're a bad idea some of the time (but might be defensible other times); sometimes they're a bad idea virtually all of the time.  But the tradition has always been <em>not</em> to warn about these things -- because, again, the assumption is that programmers know what they are doing, they wouldn't be doing these things without a good reason, they'd be annoyed by a bunch of unnecessary warnings.</p>

<p>But of course not all programmers <em>really</em> know what they're doing.  And, in particular, every C programmer (no matter how experienced) goes through a phase of being a beginning C programmer.  And even experienced C programmers can get careless and make mistakes.</p>

<p>Finally, experience has shown not only that programmers do make mistakes, but that these mistakes can have real, serious consequences.  If you make a mistake, and the compiler doesn't warn you about it, and somehow the program doesn't immediately crash or do something obviously wrong because of it, the mistake can lurk there, hidden, sometimes for years, until it causes a <em>really</em> big problem.</p>

<p>So it turns out that, most of the time, warnings are a good idea, after all.  Even the experienced programmers have learned (actually, it's ""<em>especially</em> the experienced programmers have learned"") that, on balance, the warnings tend to do more good than harm.  For every time you did something wrong deliberately and the warning was a nuisance, there are probably at least ten times you did something wrong by accident and the warning saved you from further trouble.  And most warnings can be disabled or worked around for those few times when you really want to do the ""wrong"" thing.</p>

<p>(A classic example of such a ""mistake"" is the test <code>if(a = b)</code>.  Most of the time, this is a mistake, so most compilers these days warn about it -- some even by default.  But if you <em>really</em> wanted to both assign <code>b</code> to <code>a</code> and test the result, you can disable the warning by typing <code>if((a = b))</code>.)</p>

<p>The second question is, why would you want to ask the compiler to treat warnings as errors?  I'd say it's because of human nature, specifically, the all-too-easy reaction of saying ""Oh, that's just a warning, that's not so important, I'll clean that up later.""  But if you're a procrastinator (and I don't know about you, but I'm a <em>terrible</em> procrastinator) it's easy to put off the necessarily cleanup for basically ever -- and if you get into the habit of ignoring warnings, it gets easier and easier to miss an <em>important</em> warning message that's sitting there, unnoticed, in the midst of all the ones you're ignoring.</p>

<p>So asking the compiler to treat warnings as errors is a little trick you can play on yourself to get around this human foible.</p>

<p>Personally, I'm not as insistent about treating warnings as errors.  (In fact, if I'm honest, I can say that I virtually never enable that option in my ""personal"" programming.)  But you can be sure I've got that option enabled at work, where our style guide (which I wrote) mandates its use.  And I would say -- I suspect most professional programmers would say -- that any shop that doesn't treat warnings as errors in C is behaving irresponsibly, is not adhering to commonly-accepted industry best practices.</p>
","3923896","","3923896","","2019-11-11 12:42:13","2019-11-11 12:42:13","","","","10","","",""
"57843972","2","","57842756","2019-09-08 16:59:07","","2","","<p>Some warning may mean possible semantic error in code or possible UB. E.g. <code>;</code> after <code>if()</code>, unused variable, global variable masked by local,  or comparison of signed and unsigned. Many warnings are related to static code analyzer in compiler or to breaches of ISO standard detectable at compile time, which ""require diagnostics"". While those occurrences may be legal in one particular case, they would be result of design issues most of time.</p>

<p>Some compilers, e.g. gcc, have a command line option to activate ""warnings as errors"" mode, it's a nice , if cruel, tool to educate novice coders.</p>
","2742717","","","","","2019-09-08 16:59:07","","","","0","","",""
"55348571","2","","54057958","2019-03-26 01:21:44","","3","","<p>As <a href=""https://stackoverflow.com/questions/54057958/comparing-ways-to-create-singletons-in-dart#comment94953126_54057958"">Günter Zöchbauer stated in the comments</a>, each of the three ways you listed of creating singletons are the same. Use your personal preference to choose one.</p>

<p>I'm going to add some additional notes:</p>

<ul>
<li><code>SingletonOne</code> when instantiated looks like any other class. So you could use this one if you want to hide the fact that it is a singleton (and leave the option to make it not be a singleton in the future). You could also pass in arguments in the constructor.</li>
<li><code>SingletonTwo</code> would allow you to do other work before returning the instance.</li>
<li><code>SingletonThree</code> is the shortest, and short clean code is desirable in my book, all other things being equal.</li>
</ul>
","3681880","","3681880","","2020-01-05 22:21:35","2020-01-05 22:21:35","","","","0","","",""
"56273494","2","","56273345","2019-05-23 10:43:39","","45","","<p>An identifier that uses the scope resolution operator is a qualified name as per [expr.prim.id.qual]. Otherwise it is unqualified.</p>

<p>The standard doesn't define the meaning of <em>fully qualified</em>, but it <em>does</em> mention it in [library]/[requirements]/[organization]/[contents] which says (quote from standard draft)</p>

<blockquote>
  <p>Whenever a name x defined in the standard library is mentioned, the name x is assumed to be fully qualified as ::std::x, unless explicitly described otherwise.
  For example, if the Effects: element for library function F is described as calling library function G, the function ::std::G is meant.</p>
</blockquote>

<p>Wikipedia defines <a href=""https://en.wikipedia.org/wiki/Fully_qualified_name"" rel=""noreferrer"">Fully qualified name</a>:</p>

<blockquote>
  <p>In computer programming, a fully qualified name is an unambiguous name that specifies which object, function, or variable a call refers to without regard to the context of the call</p>
</blockquote>

<p>Only a name qualified starting from the global namespace is unambiguous without context. This is the common usage.</p>
","2079303","","2079303","","2019-05-28 18:07:03","2019-05-28 18:07:03","","","","0","","",""
"56273510","2","","56273345","2019-05-23 10:44:15","","23","","<p>Indeed, it is not a standard term. It has no definition in the standard.</p>

<p>However, the phrase ""fully qualified"" appears exactly once, in [contents] (15.5.1.1 ""Library contents"" in the as-of-writing most current draft N4800) paragraph 3:</p>

<blockquote>
  <p>Whenever a name <code>x</code> defined in the standard library is mentioned, the name <code>x</code> is assumed to be fully qualified as <code>::std::x</code>, unless explicitly described otherwise.</p>
</blockquote>

<p>So in this definition, only names starting with <code>::</code> are fully qualified.</p>
","8922","","","","","2019-05-23 10:44:15","","","","0","","",""
"56403085","2","","56402988","2019-06-01 00:50:24","","8","","<p>One thing I love about python is that you can peak into source code of almost anything. And from <code>pd.Series.eq</code> source code, it calls:</p>

<pre><code>def flex_wrapper(self, other, level=None, fill_value=None, axis=0):
    # other stuff
    # ...

    if isinstance(other, ABCSeries):
        return self._binop(other, op, level=level, fill_value=fill_value)
</code></pre>

<p>and go on to <code>pd.Series._binop</code>:</p>

<pre><code>def _binop(self, other, func, level=None, fill_value=None):

    # other stuff
    # ...
    if not self.index.equals(other.index):
        this, other = self.align(other, level=level, join='outer',
                                 copy=False)
        new_index = this.index
</code></pre>

<p>That means the <code>eq</code> operator aligns the two series before comparison (which, apparently, the normal operator <code>==</code> does not).</p>
","4238408","","","","","2019-06-01 00:50:24","","","","0","","",""
"56403101","2","","56402988","2019-06-01 00:53:42","","5","","<p>Back to 2012 , when we do not have <code>eq</code> , <code>ne</code> and <code>gt</code> , <code>pandas</code> have the problem : disorder <code>Series</code> will return the unexpected output with logic (<code>&gt;,&lt;,==,!=</code>) , so they doing with a fix (new function added, <code>gt</code>,<code>ge</code>,<code>ne</code>..) </p>

<p>GitHub Ticket <a href=""https://github.com/pandas-dev/pandas/issues/1134"" rel=""noreferrer"">reference</a> </p>
","7964527","","","","","2019-06-01 00:53:42","","","","0","","",""
"56583721","2","","56582681","2019-06-13 15:19:00","","5","","<p>I wouldn’t use Streams for this.  I would take advantage of <a href=""https://docs.oracle.com/en/java/javase/12/docs/api/java.base/java/util/Collection.html#retainAll%28java.util.Collection%29"" rel=""nofollow noreferrer"">retainAll</a>:</p>

<pre><code>public Set&lt;K&gt; removeEntries(Map&lt;K, V&gt; from) {
    Set&lt;K&gt; matchingKeys = new HashSet&lt;&gt;(from.keySet());
    matchingKeys.retainAll(keysToRemove);

    from.keySet().removeAll(matchingKeys);

    return matchingKeys;
}
</code></pre>
","1831987","","1831987","","2019-06-13 15:47:24","2019-06-13 15:47:24","","","","3","","",""
"56584064","2","","56582681","2019-06-13 15:38:14","","25","","<p>The “old-school code” should rather be</p>

<pre><code>public Set&lt;K&gt; removeEntries(Map&lt;K, ?&gt; from) {
    Set&lt;K&gt; fromKeys = from.keySet(), removedKeys = new HashSet&lt;&gt;(keysToRemove);
    removedKeys.retainAll(fromKeys);
    fromKeys.removeAll(removedKeys);
    return removedKeys;
}
</code></pre>

<p>Since you said that <code>keysToRemove</code> is rather small, the copying overhead likely doesn’t matter. Otherwise, use the loop, but don’t do the hash lookup twice:</p>

<pre><code>public Set&lt;K&gt; removeEntries(Map&lt;K, ?&gt; from) {
    Set&lt;K&gt; fromKeys = from.keySet();
    Set&lt;K&gt; removedKeys = new HashSet&lt;&gt;();
    for(K keyToRemove : keysToRemove)
        if(fromKeys.remove(keyToRemove)) removedKeys.add(keyToRemove);
    return removedKeys;
}
</code></pre>

<p>You can express the same logic as a stream as</p>

<pre><code>public Set&lt;K&gt; removeEntries(Map&lt;K, ?&gt; from) {
    return keysToRemove.stream()
        .filter(from.keySet()::remove)
        .collect(Collectors.toSet());
}
</code></pre>

<p>but since this is a stateful filter, it is highly discouraged. A cleaner variant would be</p>

<pre><code>public Set&lt;K&gt; removeEntries(Map&lt;K, ?&gt; from) {
    Set&lt;K&gt; result = keysToRemove.stream()
        .filter(from.keySet()::contains)
        .collect(Collectors.toSet());
    from.keySet().removeAll(result);
    return result;
}
</code></pre>

<p>and if you want to maximize the “streamy” usage, you can replace <code>from.keySet().removeAll(result);</code> with <code>from.keySet().removeIf(result::contains)</code>, which is quiet expensive, as it is iterating over the larger map, or with <code>result.forEach(from.keySet()::remove)</code>, which doesn’t have that disadvantage, but still, isn’t more readable than <code>removeAll</code>.</p>

<p>All in all, the “old-school code” is much better than that.</p>
","2711488","","","","","2019-06-13 15:38:14","","","","10","","",""
"56585387","2","","56582681","2019-06-13 17:01:19","","3","","<p>To add another variant to the approaches, one could also partition the keys and return the required <code>Set</code> as:</p>

<pre><code>public Set&lt;K&gt; removeEntries(Map&lt;K, ?&gt; from) {
    Map&lt;Boolean, Set&lt;K&gt;&gt; partitioned = keysToRemove.stream()
            .collect(Collectors.partitioningBy(k -&gt; from.keySet().remove(k),
                    Collectors.toSet()));
    return partitioned.get(Boolean.TRUE);
}
</code></pre>
","1746118","","","","","2019-06-13 17:01:19","","","","1","","",""
"56647591","2","","56647032","2019-06-18 10:59:17","","1","","<p>The short answer to your question is what is in the Java doc: We have <em>two</em> constants because we now need to be able to distinguish the <em>two</em> different initializations later, see below.</p>

<p>Instead of two constants they could of course have introduced e.g. a boolean field in <code>ArrayList</code>, <code>private boolean initializedWithDefaultCapacity</code>; but that would require additional memory <em>per instance</em>, which seems to be against the goal to <em>save</em> a few bytes of memory.</p>

<p>Why do we need to distinguish those two?</p>

<p>Looking at <code>ensureCapacity()</code> we see what happens with <code>DEFAULTCAPACITY_EMPTY_ELEMENTDATA</code>:</p>

<pre><code>public void ensureCapacity(int minCapacity) {
    int minExpand = (elementData != DEFAULTCAPACITY_EMPTY_ELEMENTDATA)
        // any size if not default element table
        ? 0
        // larger than default for default empty table. It's already
        // supposed to be at default size.
        : DEFAULT_CAPACITY;

    if (minCapacity &gt; minExpand) {
        ensureExplicitCapacity(minCapacity);
    }
}
</code></pre>

<p>It seems that it is done this way to be somewhat 'compatible' to the behavior of the old implementation:</p>

<p>If you did initialize the list with the default capacity, it will actually be initialized with an empty array now, <em>but</em>, as soon as the first element is inserted, it will basically revert to the same behavior as the old implementation, i.e. after the first element is added, the backing array has the <code>DEFAULT_CAPACITY</code> and from then on, the list behaves the same as previously.</p>

<p>If, on the other hand, you explicitly specifiy an inital capacity, the array does not 'jump' to <code>DEFAULT_CAPACITY</code> but grows relatively from your specified initial capacity.</p>

<p>I figure the reason for this 'optimization' may be for cases where you know you will be only storing one or two (i.e. less than <code>DEFAULT_CAPACITY</code>) elements in the list and you specify the initial capacity accordingly; in these cases, for example for a single-element list, you only get a single-element array, instead of a <code>DEFAULT_CAPACITY</code>-sized.</p>

<p>Don't ask me what the <em>practical</em> benefit is of saving nine array elements of a reference type. Might be up to about 9*64 bit = 72 bytes of RAM per list. Yeay. ;-)</p>
","1015327","","1015327","","2019-06-18 11:19:48","2019-06-18 11:19:48","","","","5","","",""
"57275844","2","","57239089","2019-07-30 16:08:45","","13","","<p>Here are my 2 cents on this and it represents my personal opinion as well as understanding on the topic. </p>

<ul>
<li>Using aliases with functions is to some extent a personal preference of developers. I will add some differences between the two approaches, which may also account for personal preferences of using aliases vs functions</li>
<li>There are times when most of the things I want to do are possible with aliases itself but only a few require to take a parameter. So instead of mixing aliases with functions, I use an alias with the function itself</li>
</ul>

<p>Example:</p>

<pre class=""lang-sh prettyprint-override""><code>alias kgps='kubectl get pods --all-namespaces | grep '
</code></pre>

<p>This works great and I can search my kubernetes pods. Now for deleting these pods, I need to pass the same parameter but in between the command, so I use an alias with a function inside</p>

<pre class=""lang-sh prettyprint-override""><code>alias kdp=""_(){ kubectl get pods --all-namespaces  | grep \$1 | awk '{print \$2}' | xargs kubectl delete pod; }; _""
</code></pre>

<p>So most of my shortcut commands are possible to execute through <code>aliases</code> and only few which needs such things I use aliases with functions.</p>

<h2>Aliases vs Functions</h2>

<p>Now there are few differences between aliases and functions which I would like to highlight</p>

<p><strong>Aliases can override system commands much more easily compared to functions</strong></p>

<p>If I need to override <code>ls</code>, I can do that much easier with <code>alias</code></p>

<pre class=""lang-sh prettyprint-override""><code>alias ls='ls -altrh'
</code></pre>

<p>While a function equivalent of the same would be like below</p>

<pre class=""lang-sh prettyprint-override""><code>ls() { command ls -altrh ""$@"";}
ls() { /bin/ls -altrh ""$@"";}
</code></pre>

<p><strong>Aliases intention is mostly for shortcuts</strong></p>

<p>Aliases are majorly used to create shortcut commands while functions are used for a lot of things, complex combinations of commands, auto-completion, bash prompts</p>

<p><strong>Aliases are easier to manage</strong></p>

<p>Run <code>alias</code> command you get a list of currently active aliases</p>

<pre class=""lang-sh prettyprint-override""><code>$ alias
....
vs='vagrant ssh'
vu='vagrant up'
vus='vu &amp;&amp; vs'
....
</code></pre>

<p>To get the list of functions we need to use <code>declare -f</code> or another similar command</p>

<pre class=""lang-sh prettyprint-override""><code>$ declare -f | wc -l
  8226
$ alias | wc -l
  217
</code></pre>

<p>Now if I post a partial output of <code>declare -f</code> I get</p>

<pre class=""lang-sh prettyprint-override""><code>$ declare -f
...
vi_mode_prompt_info () {
    return 1
}
virtualenv_prompt_info () {
    return 1
}
work_in_progress () {
    if $(git log -n 1 2&gt;/dev/null | grep -q -c ""\-\-wip\-\-"")
    then
        echo ""WIP!!""
    fi
}
zle-line-finish () {
    echoti rmkx
}
zle-line-init () {
    echoti smkx
}
zsh_stats () {
    fc -l 1 | awk '{CMD[$2]++;count++;}END { for (a in CMD)print CMD[a] "" "" CMD[a]/count*100 ""% "" a;}' | grep -v ""./"" | column -c3 -s "" "" -t | sort -nr | nl | head -n20
}
</code></pre>

<p>As you can see there are lots of functions which are used but are not relevant to me. While the <code>alias</code> command gives me a very concise output and I can easily see what all is there. In my case, 100% of them are shortcut commands</p>

<p><strong>Escaping aliases and functions syntax is different for system commands</strong></p>

<p>To escape a defined alias you need to prefix it with <code>\</code> while for <code>functions</code> you need to either use <code>command &lt;originalcommand&gt;</code> or absolute path of the command <code>/bin/originalcommand</code></p>

<p><strong>Aliases have higher priority over function</strong></p>

<p>Look at the below example</p>

<pre class=""lang-sh prettyprint-override""><code>alias ls='echo alias &amp;&amp; ls'
$ ls() { /bin/ls -al }
alias
$ ls
alias
total 23173440
drwxrwxr-x+ 255 tarunlalwani  staff        8160 Jul 30 22:39 .
drwxr-xr-x+ 113 tarunlalwani  staff        3616 Jul 30 23:12 ..
...
</code></pre>

<p>As you can see when we run the <code>ls</code> command, first the alias is used and then the next <code>ls</code> is calling the function. </p>

<p>This becomes also a way of wrapping an exiting function with the same name and re-using the original function inside as well, which can only be done using <code>alias</code> and promotes the format in the question</p>
","2830850","","3834036","","2019-08-05 20:34:40","2019-08-05 20:34:40","","","","5","","",""
"57363062","2","","57239089","2019-08-05 17:02:22","","5","","<p>I found this <a href=""https://unix.stackexchange.com/questions/30925/in-bash-when-to-alias-when-to-script-and-when-to-write-a-function/233751#233751"">answer too <em>[U&amp;L] In Bash, when to alias, when to script, and when to write a function?</em></a> which explains the benefit of defining a function in an alias.</p>

<blockquote>
  <p>The benefit of doing so over declaring a function is that your alias
  cannot be simply overwritten by source-ing (or using <code>.</code>) a script which
  happens to declare a same-named function.</p>
</blockquote>
","3819421","","8344060","","2020-01-20 13:58:58","2020-01-20 13:58:58","","","","0","","",""
"57377914","2","","57239089","2019-08-06 14:04:40","","1","","<blockquote>
  <p>Is this just plainly an antipattern (sic)...</p>
</blockquote>

<p>I think its prevalence may just be <a href=""https://en.wikipedia.org/wiki/Cargo_cult_programming"" rel=""nofollow noreferrer"">cargo cult programming</a>. Aliases are easy to understand, so users often learn them first. As users' skill and needs increase, they discover aliases lack flexible argument processing. So they do a web search, like ""shell alias parameter passing"", and find posts suggesting the pattern:</p>

<pre><code>alias foo='_() { echo $2 $3 $1; }; _'
</code></pre>

<p>Lo and behold, it works. Users are happy, and they move on.</p>

<p>But because the <code>_()</code> sequence looks a lot like a shell incantation (<code>2&gt;&amp;1</code>, <code>&gt;&gt;</code>, etc.), users never think that <code>_()</code> is just compact syntax for <code>function _</code> and never go to the next step of learning functions. With this alias pattern, they get all the benefit of functions and don't have to learn ""new"" syntax. Most probably never even notice the nasty side effect: overwriting any prior functions named <code>_</code>.</p>

<p>I searched through Usenet from 1981 to 1991, but I didn't find any direct evidence of this theory, however.</p>

<blockquote>
  <p>... or is there an actual reason to do this? Under what circumstances would this design make sense?</p>
</blockquote>

<p>In the five days I drafted this answer, every reason I conjured came back to an argument against it. The selected answer - that aliases can't be masked in subshells - is a solid reason, though I've never thought to be that paranoid: I don't go around sourc'ing code I've not fully vetted.</p>
","2908724","","874188","","2019-08-07 10:41:16","2019-08-07 10:41:16","","","","0","","",""
"58429103","2","","58427394","2019-10-17 09:19:06","","3","","<p>I am guessing that the <code>__total__</code> field signifies whether instances must be complete (the default) or not (all fields optional). I started my search at <a href=""https://www.python.org/dev/peps/pep-0589/#totality"" rel=""nofollow noreferrer"">PEP 589</a>, which introduced <code>TypedDict</code> and describes totality as such. It used a <code>total</code> argument, which it would make sense to rename dunder-style for the <code>class</code>  syntax. However, I did not find when such a renaming took place. </p>

<p>Looking into MyPy, which is the actual type checker that cares about these annotations, there is <a href=""https://www.python.org/dev/peps/pep-0589/#totality"" rel=""nofollow noreferrer"">similar documentation on <code>TypedDict</code> and totality</a>, but again no reference to the dunder syntax. Digging into its implementation led to more confusion, as <a href=""https://github.com/python/mypy/blob/8990ebdb884ed2d5b5dcb1dac5d8a8407358ef21/mypy/types.py#L1348"" rel=""nofollow noreferrer""><code>TypedDictType</code> in types.py</a> doesn't have a total field, but separate <code>items</code> and <code>required_keys</code>. Totality would imply that <code>items.keys()==required_keys</code> but the implementation makes different assumptions, such as <code>can_be_false</code> relying on <code>items</code> alone. <code>total=False</code> should in principle mean <code>required_keys</code> is empty. </p>

<p>The CPython source for <a href=""https://github.com/python/cpython/blob/8252c52e57283515ace5d4251584255dc5c60eb5/Lib/typing.py#L1698"" rel=""nofollow noreferrer"">_TypedDictMeta</a> at least reveals that the <code>total</code> argument and <code>__total__</code> dunder are one and the same, although the source describes <code>TypedDict</code> itself as ""may be added soon"". </p>
","379311","","","","","2019-10-17 09:19:06","","","","2","","",""
"54496327","2","","54446734","2019-02-02 18:45:01","","2","","<blockquote>
  <p>Since the SQL runs fine either directly or when not supplying
  parameters to sp_executesql, this seems like I'm running into a true
  limitation in the SQL engine, but I don't see it documented anywhere.</p>
</blockquote>

<p>This behavior is documented, albeit not intuitive. The relevant excerpt from <a href=""https://docs.microsoft.com/en-us/sql/t-sql/statements/create-trigger-transact-sql"" rel=""nofollow noreferrer"">the documentation</a> under the trigger limitations topic:</p>

<blockquote>
  <p>CREATE TRIGGER must be the first statement in the batch</p>
</blockquote>

<p>When you execute a parameterized query, the parameter declarations are counted as being part of the batch. Consequently, a <code>CREATE TRIGGER</code> batch (and other CREATE statements for programmability objects like procs, functions, etc.) cannot be executed as a parameterized query.</p>

<p>The invalid syntax error message you get when you attempt to run <code>CREATE TRIGGER</code> as a parameterized query isn't particularly helpful. Below is an simplified version of your code using the undocumented and unsupported internal parameterized query syntax. </p>

<pre><code>EXECUTE(N'(@tableName sysname = N''MyTable'')CREATE TRIGGER TR_MyTable ON dbo.MyTable FOR INSERT AS');
</code></pre>

<p>This at least yields an error calling out the <code>CREATE TRIGGER</code> limitation:</p>

<blockquote>
  <p>Msg 1050, Level 15, State 1, Line 73 This syntax is only allowed for
  parameterized queries. Msg 111, Level 15, State 1, Line 73 'CREATE
  TRIGGER' must be the first statement in a query batch.</p>
</blockquote>

<p>Similarly executing another parameterized statement with this method runs successfully:</p>

<pre><code>EXECUTE (N'(@tableName sysname = N''MyTable'')PRINT @tableName');
</code></pre>

<p>But if you don't actually use the parameter in the batch, an error results</p>

<pre><code>EXECUTE (N'(@tableName sysname = N''MyTable'')PRINT ''done''');
</code></pre>

<blockquote>
  <p>Msg 1050, Level 15, State 1, Line 75 This syntax is only allowed for
  parameterized queries.</p>
</blockquote>

<p>The bottom line is that you need to build the <code>CREATE TRIGGER</code> statement as a string without parameters and execute the statement as a non-parameterized query to create a trigger.</p>
","3711162","","","","","2019-02-02 18:45:01","","","","0","","",""
"54500505","2","","54446734","2019-02-03 06:26:21","","2","","<blockquote>
  <p>Is it possible to issue CREATE statements using sp_executesql with
  parameters?</p>
</blockquote>

<p>Simple answer is <strong>""No""</strong>, you can't</p>

<p>According to <strong>MSDN</strong></p>

<blockquote>
  <p>Generally, parameters are valid only in Data Manipulation Language
  (DML) statements, and not in Data Definition Language (DDL) statements</p>
</blockquote>

<p>You can check more details about this <a href=""https://docs.microsoft.com/en-us/sql/odbc/reference/develop-app/statement-parameters?view=sql-server-2017"" rel=""nofollow noreferrer"">Statement Parameters</a></p>

<p><strong>What is the issue?</strong></p>

<p>Parameters are only allowed in place of scalar literals, like quoted strings or dates, or numeric values. You can't parameterise a <code>DDL</code> operation. </p>

<p><strong>What can be done?</strong></p>

<p>I believe that you want to use parameterized <code>sp_executesql</code> is to avoid any <strong>SQL Injection Attack</strong>. To achieve this for the <code>DDL</code> operations you can do following thing to minimize the possibility of attack.</p>

<ol>
<li><strong>Use Delimiters :</strong>  You can use <code>QUOTENAME()</code> for <code>SYSNAME</code> parameters like Trigger Name, Table Names and Column  names.</li>
<li><strong>Limiting Permissions</strong> : User Account you are using to run the dynamic <code>DDL</code>, should have only limited permission. Like on a
specific schema with only <code>CREATE</code> permission.</li>
<li><strong>Hiding Error Message</strong> : Don't throw the actual error to the user. SQL Injection are mainly performed by trial and error approach. If
you hide the actual error message, it will become tough to crack it.</li>
<li><strong>Input Validation</strong> : You can always have a function which validates the input string, escape the required characters, check
for specific keywords like <code>DROP</code>.</li>
</ol>

<p><strong>Any workaround?</strong></p>

<p>If you want to parameterized your statement using  <code>sp_executesql</code>, in that case you can get the query to be executed in a <code>OUTPUT</code> variable and run the query in next statement like following.</p>

<p>By this, the first call to <code>sp_executesql</code> will parameterized your query, and the actual execution will be performed by the second call to <code>sp_executesql</code> </p>

<p>For example.</p>

<pre><code>DECLARE @TableName VARCHAR(100) = 'MyTable' 
DECLARE @returnStatement NVARCHAR(max); 
DECLARE @sql1 NVARCHAR(max)= 
N'SELECT @returnStatement = ''CREATE TRIGGER TR_''                                          
    +  @TableName + '' ON '' +  @TableName  +  '' FOR INSERT AS BEGIN PRINT 1 END'''

EXEC Sp_executesql 
  @sql1, 
  N'@returnStatement VARCHAR(MAX) OUTPUT, @TableName VARCHAR(100)', 
  @returnStatement output, 
  @TableName 

EXEC Sp_executesql @returnStatement 
</code></pre>
","297322","","297322","","2019-02-05 11:36:16","2019-02-05 11:36:16","","","","0","","",""
"57955231","2","","57129668","2019-09-16 10:48:02","","5","","<p>On 6th Sept 2019 Apple released <a href=""https://developer.apple.com/documentation/uikit/uiviewcontroller/restoring_your_app_s_state"" rel=""nofollow noreferrer"">this sample app</a> that demonstrates iOS 13 state restoration with backwards compatibility with iOS 12.</p>

<p><strong>From Readme.md</strong></p>

<p><em>The sample supports two different state preservation approaches. In iOS 13 and later, apps save state for each window scene using NSUserActivity objects. In iOS 12 and earlier, apps preserve the state of their user interface by saving and restoring the configuration of view controllers.</em></p>

<p>The Readme convers in detail how it works - the basic trick is that on iOS 12 it encodes the Activity Object (available in iOS 12 for another purpose) in the old <code>encodeRestorableState</code> method.</p>

<pre><code>override func encodeRestorableState(with coder: NSCoder) {
    super.encodeRestorableState(with: coder)

    let encodedActivity = NSUserActivityEncoder(detailUserActivity)
    coder.encode(encodedActivity, forKey: DetailViewController.restoreActivityKey)
}
</code></pre>

<p>And on iOS 13 it implements the missing automatic view controller hierarchy restoration using the configure method of the <code>SceneDelegate</code>.</p>

<pre><code>func configure(window: UIWindow?, with activity: NSUserActivity) -&gt; Bool {
    if let detailViewController = DetailViewController.loadFromStoryboard() {
        if let navigationController = window?.rootViewController as? UINavigationController {
            navigationController.pushViewController(detailViewController, animated: false)
            detailViewController.restoreUserActivityState(activity)
            return true
        }
    }
    return false
}
</code></pre>

<p>Lastly, the Readme includes testing advice but I'd like to add if you launch the Xcode 10.2 simulator first, e.g. iPhone 8 Plus and then launch Xcode 11 you will have the iPhone 8 Plus (12.4) as an option and you can experience the backwards-compatible behaviour. I also like to use these user defaults, the second allows the restoration archive to survive crashes:</p>

<pre><code>[NSUserDefaults.standardUserDefaults setBool:YES forKey:@""UIStateRestorationDebugLogging""];
[NSUserDefaults.standardUserDefaults setBool:YES forKey:@""UIStateRestorationDeveloperMode""];
</code></pre>
","259521","","259521","","2019-09-19 08:59:34","2019-09-19 08:59:34","","","","4","","",""
"56725644","2","","56606447","2019-06-23 16:06:57","","0","","<p>It is good stuff what you are looking for. :) Sadly thanks to some trends in ~2010 as far as I know there is no actively maintained and supported API for this. <strong>But...</strong></p>

<p><strong>If you want to have full <code>ANSI SQL</code></strong> on the client side in memory and you are willing to populate the database you could run the mentioned <a href=""https://github.com/kripken/sql.js/"" rel=""nofollow noreferrer""><code>SQLite</code></a>. Maybe this the only fulfilling option for you (if you could not leave some of the requirements).</p>

<p>If you could allow the luxury to copy data you could check out the <a href=""https://alasql.org/"" rel=""nofollow noreferrer""><strong><code>AlaSQL</code></strong> project</a> it <strong>does support <code>join</code>-s and some of the ANSI SQL features, but it is not complete</strong> and it contains known <a href=""https://github.com/agershun/alasql/labels/Bug"" rel=""nofollow noreferrer"">disruptive bugs</a>:</p>

<blockquote>
  <p>Please be aware that AlaSQL has bugs. Beside having some bugs, there
  are a number of limitations:</p>
  
  <p>AlaSQL has a (long) list of keywords that must be escaped if used for
  column names. When selecting a field named key please write SELECT
  <code>key</code> FROM ... instead. This is also the case for words like <code>value</code>,
  <code>read</code>, <code>count</code>, <code>by</code>, <code>top</code>, <code>path</code>, <code>deleted</code>, <code>work</code> and <code>offset</code>.
  Please consult the full list of keywords.</p>
  
  <p>It is OK to SELECT 1000000 records or to JOIN two tables with 10000
  records in each (You can use streaming functions to work with longer
  datasources - see test/test143.js) but be aware that the workload is
  multiplied so SELECTing from more than 8 tables with just 100 rows in
  each will show bad performance. This is one of our top priorities to
  make better.</p>
  
  <p>Limited functionality for transactions (supports only for
  localStorage) - Sorry, transactions are limited, because AlaSQL
  switched to more complex approach for handling PRIMARY KEYs / FOREIGN
  KEYs. Transactions will be fully turned on again in a future version.</p>
  
  <p>A (FULL) OUTER JOIN and RIGHT JOIN of more than 2 tables will not
  produce expected results. INNER JOIN and LEFT JOIN are OK.</p>
  
  <p>Please use aliases when you want fields with the same name from
  different tables (SELECT a.id AS a_id, b.id AS b_id FROM ?).</p>
  
  <p>At the moment AlaSQL does not work with JSZip 3.0.0 - please use
  version 2.x.</p>
  
  <p>JOINing a sub-SELECT does not work. Please use a with structure
  (Example here) or fetch the sub-SELECT to a variable and pass it as an
  argument (Example here).</p>
  
  <p>AlaSQL uses the FileSaver.js library for saving files locally from the
  browser. Please be aware that it does not save files in Safari 8.0.</p>
  
  <p>There are probably many others. Please help us fix them by submitting
  an issue. Thank you!</p>
</blockquote>

<p>We planned to use it in one project, but there were more problems than solutions (for us) while introducing the project to our stack. So we backed out of from it. So I do not have production experience with this piece software... </p>

<p>At older times I hoped that <strong><code>Google Gears</code></strong> will support something like the desired function but partly it got replaced by <code>HTML5</code> client side storage and sadly the project got <a href=""http://gearsblog.blogspot.com/2011/03/stopping-gears.html"" rel=""nofollow noreferrer""><strong>discontinued</strong>.</a> </p>

<p>The <a href=""https://www.w3.org/TR/webdatabase/"" rel=""nofollow noreferrer""><strong><code>HTML5 WebSQL Database</code></strong></a> <strong>would have been perfect for your use-case, but it is sadly <a href=""https://softwareengineering.stackexchange.com/questions/220254/why-is-web-sql-database-deprecated"">depricated</a></strong>. Tho most (?) browsers still support it in 2019. You can check some examples <a href=""https://www.tutorialspoint.com/html5/html5_web_sql.htm"" rel=""nofollow noreferrer"">here</a>. If you can allow yourself to build on a depricated API this could be the solution, but I do not really recommend it as it is not guaranteed that it will work...</p>

<p>When our project run having the same problems we ended up having to use the <a href=""https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage"" rel=""nofollow noreferrer"">localStorage</a> and program every ""SELECT"" manually, which of course was not at all ANSI SQL like...</p>

<p>If we roll back to the original problem <strong>""[SQL] query the Arrow data directly""</strong> I have no adapter in mind to use it as SQL... These kind of operations still tend to be on the server side and with the wasm SQLite I think those are the options.</p>
","4823977","","","","","2019-06-23 16:06:57","","","","0","","",""
"56725639","2","","56606447","2019-06-23 16:05:52","","0","","<p>You can use <a href=""https://alasql.org/"" rel=""nofollow noreferrer"">Alasql</a> to do some of what you want, but it does not support grouping.</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>var data = [
  {
    name: 'Tom',
    age: 29,
    isAdult: 1
  },
  {
    name: 'Tom',
    age: 14,
    isAdult: 0
  },
  {
    name: 'Dina',
    age: 20,
    isAdult: 1
  }
];

var res = alasql('SELECT name, age from ? a1 JOIN ? a2 WHERE a1.isAdult != a2.isAdult AND a1.name = a2.name', [data, data]);
  
document.getElementById('result').textContent = JSON.stringify(res);</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;script src=""https://cdn.jsdelivr.net/alasql/0.2/alasql.min.js""&gt;&lt;/script&gt; 

&lt;span id=""result""&gt;&lt;/span&gt;</code></pre>
</div>
</div>
</p>
","731416","","731416","","2019-06-23 16:13:12","2019-06-23 16:13:12","","","","0","","",""
"54600838","2","","54596743","2019-02-08 22:01:53","","4","","<p>After digging a little bit through the source code, here are a few observations:</p>

<ol>
<li><p>The actual function creation is done by <a href=""https://github.com/wch/r-source/blob/780021752eb83a71e2198019acf069ba8741103b/src/main/dstruct.c#L78"" rel=""nofollow noreferrer"">mkCLOSXP()</a>. This is what gets called by <code>function() {}</code>, by <code>as.function.default()</code> and by <code>.Primitive(""function"")</code> (a.k.a. <code>`function`</code>)</p></li>
<li><p><code>as.function.default()</code> gets routed to <a href=""https://github.com/wch/r-source/blob/780021752eb83a71e2198019acf069ba8741103b/src/main/coerce.c#L1521"" rel=""nofollow noreferrer"">do_asfunction()</a>, which <a href=""https://github.com/wch/r-source/blob/780021752eb83a71e2198019acf069ba8741103b/src/main/coerce.c#L1555"" rel=""nofollow noreferrer"">also calls CheckFormals()</a>. However, it directly constructs these formals a few lines above that.</p></li>
<li><p>As you pointed out, the other place where <code>CheckFormals()</code> gets called is inside <code>do_function()</code>. However, I don't think <code>do_function()</code> gets called by anything <em>other than</em> <code>.Primitive(""function"")</code>, so this is the only situation where <code>CheckFormals()</code> is called on the user's input.</p></li>
<li><p><code>CheckFormals()</code> does actually correctly validate a <code>pairlist</code> object.</p></li>
</ol>

<p>You can check the last point yourself by running parts of the <code>CheckFormals()</code> function using <code>inline::cfunction</code></p>

<pre><code>inline::cfunction( c(x=""ANY""),
  'Rprintf(""is list?: %d\\nTag1 OK?: %d\\nTag2 OK?: %d\\nTag3 NULL?: %d\\n"",
     isList(x), TYPEOF(TAG(x)) == SYMSXP, TYPEOF(TAG(CDR(x))) == SYMSXP,
     CDR(CDR(x)) == R_NilValue); return R_NilValue;' )( formals(mean) )

# is list?: 1
# Tag1 OK?: 1
# Tag2 OK?: 1
# Tag3 NULL?: 1
</code></pre>

<p>So, somewhere between you passing <code>formals(means)</code> to <code>.Primitive(""function"")</code> and it getting forwarded to <code>CheckFormals()</code> by <code>do_function()</code>, the argument loses its validity. (I don't know the R source well enough to tell you how that happens.) However, since <code>do_function()</code> is only called by <code>.Primitive(""function"")</code>, you don't encounter this situation with any other examples.</p>
","300187","","","","","2019-02-08 22:01:53","","","","3","","",""
"56647661","2","","56647032","2019-06-18 11:02:47","","0","","<p>This is most likely due to the case that the two constructor have different perceived default uses. </p>

<p>The default (empty) constructor assumes that this will be a ""typical <code>ArrayList</code>"". Therefore, the number <code>10</code> is chosen as a sort of heuristic, aka ""what the typical average number of elements inserted will be that will not take up too much space but will not grow the array needlessly too"". On the other hand, the capacity constructor has the presupposition of ""you know what you're doing"" or ""you know what you will be using the <code>ArrayList for</code>"". Therefore, no heuristics of this type are present.</p>
","6650970","","","","","2019-06-18 11:02:47","","","","0","","",""
"56647709","2","","56647032","2019-06-18 11:05:24","","3","","<p>If you use the default constructor, the idea is to try to balance memory usage and reallocation. Hence a small default size (10) is used that should be fine for most applications.</p>

<p>If you use the constructor with an explicit size, it is assumed that you know what you're doing. If you initialize it with 0 you are essentially saying: I am pretty sure this will either stay empty or not grow beyond very few elements.</p>

<p>Now if you look at the implementations of <code>ensureCapacityInternal</code> in openjdk (<a href=""http://hg.openjdk.java.net/jdk8/jdk8/jdk/file/tip/src/share/classes/java/util/ArrayList.java"" rel=""nofollow noreferrer"">link</a>), you can see that only the first time you add an item, this difference comes into play:</p>

<pre><code>private void ensureCapacityInternal(int minCapacity) {
    if (elementData == EMPTY_ELEMENTDATA) {
        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);
    }

    ensureExplicitCapacity(minCapacity);
}
</code></pre>

<p>If the default constructor is used, the size grows to <code>DEFAULT_CAPACITY</code> (10). This is to prevent too many reallocations if multiple elements are added. However if you explicitly created this ArrayList with size 0, it will simply grow to size 1 on the first element you add. This is because you told it that you know what you're doing.</p>

<p><code>ensureExplicitCapacity</code> basically just calls <code>grow</code> (with some range/overflow checks), so let's look at that:</p>

<pre><code>private void grow(int minCapacity) {
    // overflow-conscious code
    int oldCapacity = elementData.length;
    int newCapacity = oldCapacity + (oldCapacity &gt;&gt; 1);
    if (newCapacity - minCapacity &lt; 0)
        newCapacity = minCapacity;
    if (newCapacity - MAX_ARRAY_SIZE &gt; 0)
        newCapacity = hugeCapacity(minCapacity);
    // minCapacity is usually close to size, so this is a win:
    elementData = Arrays.copyOf(elementData, newCapacity);
}
</code></pre>

<p>As you can see, it doesn't simply grow to a specific size, but it tries to be smart. The bigger the array is, the bigger it will grow even if <code>minCapacity</code> is just 1 bigger than the current capacity. The reasoning behind that is simple: The probability that a lof of items will be added is higher if the list is already big and vice versa. This is also why you see growth increments by 1 and then by 2 after the 5th element.</p>
","9199167","","","","","2019-06-18 11:05:24","","","","2","","",""
"56647799","2","","56647032","2019-06-18 11:11:32","","0","","<p>The capacity with the default constructor is 10 simply because <a href=""https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html#ArrayList--"" rel=""nofollow noreferrer"">the docs say so</a>. It would have been chosen as a sensible compromise between not using up too much memory off the bat, and not having to perform lots of array copies when adding the first few elements.</p>

<p>The zero behaviour is slightly speculative, but I'm fairly confident with my reasoning here:</p>

<p>It's because if you <em>explicitly</em> initialise an <code>ArrayList</code> with a size of zero, then add something to it, you're saying ""I'm not expecting this list to hold much, if anything at all."" It therefore makes much, much more sense to grow the backing array slowly, as though it was initialised with a value of 1, rather than treating it as if it had no initial value specified at all. So it handles the special case of growing it to just 1 element, and then carries on as normal.</p>

<p>To then complete the picture, an <code>ArrayList</code> explicitly initialised with a size of 1 would be expected to grow much more slowly (up to the point it hits the default ""10 element"" size) than the default one, otherwise there'd be no reason to initialise it with a small value in the first place.</p>
","551406","","551406","","2019-06-18 13:21:11","2019-06-18 13:21:11","","","","0","","",""
"56647869","2","","56647032","2019-06-18 11:15:39","","0","","<blockquote>
  <p>but why would one inflate to 10 (a lot more than I asked for) and the other one to 1 (exactly as much as I requested)</p>
</blockquote>

<p>Probably because most people that create lists want to store <strong>more than</strong> 1 element in it.</p>

<p>You know, when you want exactly one entry, why not use <code>Collections.singletonList()</code> for example.</p>

<p>In other words, I think the answer is <strong>pragmatism</strong>. When you use the default constructor, the <strong>typical</strong> use case would be that you are going to add maybe a handful or so of elements quickly. </p>

<p>Meaning: ""unknown"" is interpreted as ""a few"", whereas ""exactly 0 (or 1)"" is interpreted ""hmm, exactly 0 or 1"". </p>
","1531124","","","","","2019-06-18 11:15:39","","","","0","","",""
"56648003","2","","56647032","2019-06-18 11:22:59","","15","","<p>You get precisely what you asked for, respective what has been specified, even in older versions, where the implementation was different:</p>

<a href=""https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html#ArrayList--"" rel=""noreferrer""><code>ArrayList()</code></a>

<blockquote>
  <p>Constructs an empty list with an initial capacity of ten.</p>
</blockquote>

<a href=""https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html#ArrayList-int-"" rel=""noreferrer""><code>ArrayList(int)</code></a>

<blockquote>
  <p>Constructs an empty list with the specified initial capacity.</p>
</blockquote>

<p>So, constructing the <code>ArrayList</code> with the default constructor will give you an <code>ArrayList</code> with an initial capacity of ten, so as long as the list size is ten or smaller, no resize operation will ever be needed.</p>

<p>In contrast, the constructor with the <code>int</code> argument will precisely use the specified capacity, subject to the <a href=""https://docs.oracle.com/javase/8/docs/api/java/util/ArrayList.html"" rel=""noreferrer"">growing policy</a> which is specified as</p>

<blockquote>
  <p>The details of the growth policy are not specified beyond the fact that adding an element has constant amortized time cost.</p>
</blockquote>

<p>which applies even when you specify an initial capacity of zero.</p>

<p>Java 8 added the optimization that the creation of the ten elements array is postponed until the first element is added. This is specifically addressing the common case that <code>ArrayList</code> instances (created with the default capacity) stay empty for a long time or even their entire lifetime. Further, when the first actual operation is <code>addAll</code>, it might skip the first array resize operation. This does not affect lists with an explicit initial capacity, as those are usually chosen carefully.</p>

<p>As stated in <a href=""https://stackoverflow.com/a/34250231/2711488"">this answer</a>:</p>

<blockquote>
  <p>According to our performance analysis team, approximately 85% of ArrayList instances are created at default size so this optimization will be valid for an overwhelming majority of cases.</p>
</blockquote>

<p>The motivation was to optimize precisely these scenarios, not to touch the specified default capacity, which was defined back when <code>ArrayList</code> was created. (Though <a href=""https://web.archive.org/web/20031204164228/http://java.sun.com/j2se/1.4.1/docs/api/java/util/ArrayList.html#ArrayList()"" rel=""noreferrer"">JDK 1.4</a> is the first one specifying it explicitly)</p>
","2711488","","2711488","","2019-06-18 11:30:56","2019-06-18 11:30:56","","","","4","","",""
"56698732","2","","56309165","2019-06-21 07:24:33","","-1","","<p>Use below code</p>

<pre><code>/**
* Get the apk path of this application.
*
* @param context any context (e.g. an Activity or a Service)
* @return full apk file path, or null if an exception happened (it should not happen)
*/
public static String getApkName(Context context) {
    String packageName = context.getPackageName();
    PackageManager pm = context.getPackageManager();
    try {
        ApplicationInfo ai = pm.getApplicationInfo(packageName, 0);
        String apk = ai.publicSourceDir;
        return apk;
    } catch (Throwable x) {
        return null;
    }
}
</code></pre>
","8758414","","1664430","","2019-06-21 07:49:40","2019-06-21 07:49:40","","","","2","","",""
"55077446","2","","54776759","2019-03-09 12:39:34","","1","","<p>Somewhat simpler to implement than @CertainPerformance's answer, you can use a <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy"" rel=""nofollow noreferrer""><code>Proxy</code></a> to catch implicit access to everything except <code>window</code>. The only caveat is you can't run this in strict mode:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const strictWindow = Object.create(
  new Proxy(window, {
    get (target, property) {
      if (typeof property !== 'string') return undefined
      console.log(`implicit access to ${property}`)
      throw new ReferenceError(`${property} is not defined`)
    }
  }),
  Object.getOwnPropertyDescriptors({ window })
)

with (strictWindow) {
  try {
    const foo = location
  } catch (error) {
    window.console.log(error.toString())
  }

  // doesn't throw error
  const foo = window.location
}</code></pre>
</div>
</div>
</p>

<p>Notice that even <code>console</code> has to have an explicit reference in order to not throw. If you want to add that as another exception, just modify <code>strictWindow</code> with another own property using</p>

<pre><code>Object.getOwnPropertyDescriptors({ window, console })
</code></pre>

<p>In fact, there are <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects"" rel=""nofollow noreferrer"">a lot of standard built-in objects</a> you may want to add exceptions for, but that is beyond the scope of this answer (no pun intended).</p>

<p>In my opinion, the benefits this offers fall short of the benefits of running in strict mode. A much better solution is to use a properly configured linter that catches implicit references during development rather than at runtime in non-strict mode.</p>
","1541563","","1541563","","2019-03-09 12:48:21","2019-03-09 12:48:21","","","","0","","",""
"58612888","2","","58427394","2019-10-29 17:47:17","","1","","<p><code>TypedDict</code> was accepted in Python 3.8 via <a href=""https://www.python.org/dev/peps/pep-0589/#totality"" rel=""nofollow noreferrer"">PEP 589</a>. From Python, it appears <code>__total__</code> is a boolean flag set to <code>True</code> by default:</p>

<pre><code>tot = TypedDict.__total__
print(type(tot))
print(tot)

# &lt;class 'bool'&gt;
# True
</code></pre>

<p>As mentioned in other posts, details on this method are limited in the <a href=""https://docs.python.org/3.8/library/typing.html#typing.TypedDict"" rel=""nofollow noreferrer"">docs</a>, but @Yann Vernier's link to the <a href=""https://github.com/python/cpython/blob/8252c52e57283515ace5d4251584255dc5c60eb5/Lib/typing.py#L1698-L1718"" rel=""nofollow noreferrer"">CPython source code</a> strongly suggests <code>__total__</code> is related to the new <code>total</code> keyword <a href=""https://twitter.com/raymondh/status/1175105764823719942"" rel=""nofollow noreferrer"">introduced in Python 3.8</a>:</p>

<pre><code># cypthon/typing.py

class _TypedDictMeta(type):
    def __new__(cls, name, bases, ns, total=True):
        """"""Create new typed dict class object.
        ...
        """"""
        ...
        if not hasattr(tp_dict, '__total__'):
            tp_dict.__total__ = total
        ...
</code></pre>

<p>How does it work?</p>

<p><em>Synopsis</em>: by default, all keys are required when instantiating a defined <code>TypedDict</code>.  <code>total=False</code> overrides this restriction and allows optional keys.  See the following demonstration.</p>

<p><strong>Given</strong></p>

<p>A test directory tree:</p>

<p><a href=""https://i.stack.imgur.com/sGbrU.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/sGbrU.png"" alt=""enter image description here""></a></p>

<p><strong>Code</strong></p>

<p>Files in the test directory:</p>

<pre><code># rgb_bad.py

from typing import TypedDict


class Color(TypedDict):
    r: int
    g: int
    b: int
    a: float


blue = Color(r=0, g=0, b=255)                     # missing ""a""
</code></pre>

<p></p>

<pre><code># rgb_good.py

from typing import TypedDict


class Color(TypedDict, total=False):
    r: int
    g: int
    b: int
    a: float


blue = Color(r=0, g=0, b=255)                     # missing ""a""
</code></pre>

<p><strong>Demo</strong></p>

<p>If a key is missing, mypy will complain at the commandline:</p>

<pre><code>&gt; mypy code/rgb_bad.py
code\rgb_bad.py:11: error: Key 'a' missing for TypedDict ""Color""
...
</code></pre>

<p>Setting <code>total=False</code> permits optional keys:</p>

<p></p>

<pre><code>&gt; mypy code/rgb_good.py
Success: no issues found in 1 source file
</code></pre>

<p><strong>See Also</strong></p>

<ul>
<li><a href=""https://twitter.com/raymondh/status/1175105764823719942"" rel=""nofollow noreferrer"">Tweet</a> by R. Hettinger demonstating totality</li>
<li>PEP <a href=""https://www.python.org/dev/peps/pep-0589/#totality"" rel=""nofollow noreferrer"">section</a> on totality in PEP 589</li>
<li>Article <a href=""https://realpython.com/python38-new-features/#more-precise-types"" rel=""nofollow noreferrer"">Section</a> on types and <code>TypedDict</code> in Python 3.8 by Real Python</li>
<li><a href=""https://pypi.org/project/typing-extensions/"" rel=""nofollow noreferrer""><code>typing-extensions</code> package</a> to use <code>TypedDict</code> in Python 3.5, 3.6</li>
</ul>
","4531270","","4531270","","2019-10-29 19:42:07","2019-10-29 19:42:07","","","","0","","",""
"60530639","2","","54506744","2020-03-04 16:30:49","","0","","<p>you can let the build happen even in presence of typescript errors 
<a href=""https://create-react-app.dev/docs/advanced-configuration/#"" rel=""nofollow noreferrer"">https://create-react-app.dev/docs/advanced-configuration/#</a>! ctr+f TSC_COMPILE_ON_ERROR</p>
","1191175","","","","","2020-03-04 16:30:49","","","","0","","",""
"56901549","2","","56901198","2019-07-05 10:46:15","","15","","<p>The lambda case is actually different than the others! You don't specify a return type for the lambda, so it is deduced. For the deduction to happen the lambda has to be instantiated.</p>

<p>This is not the case for the function object, since there you specified the return type to be <code>void</code>. Changing the lambda to return <code>void</code> to avoid the deduction makes gcc/clang happy. :)</p>

<pre><code>auto foo = [](auto... args) -&gt; void // &lt;---
{
    static_assert(sizeof...(args) == 42, ""!"");
    ((args += """"), ...);
};
</code></pre>

<p>And if you change the function object as follows:</p>

<pre><code>struct Foo
{
    template &lt;typename ...Ts&gt;
    auto operator ()(Ts... args) const // &lt;---- placeholder as return type
    {
        static_assert(sizeof...(args) == 42, ""!"");
        ((args += """"), ...);
    }
} foo;
</code></pre>

<p>it does also instantiate <code>Foo::operator()</code> to be able to deduce the return type.</p>
","3980929","","","","","2019-07-05 10:46:15","","","","0","","",""
"56555883","2","","56555709","2019-06-12 06:28:26","","38","","<p>You can use type erasure, <code>AnyView</code> in the case of SwiftUI <code>View</code>.</p>

<p>I would refactor <code>WKHostingController</code> to return <code>AnyView</code>.</p>

<p>This seems to compile fine on my end.</p>

<pre class=""lang-swift prettyprint-override""><code>class HostingController : WKHostingController&lt;AnyView&gt; {
    override var body: AnyView {
        return AnyView(ContentView().environmentObject(DataModel()))
    }
}
</code></pre>
","2890168","","2890168","","2019-06-12 06:53:12","2019-06-12 06:53:12","","","","3","","",""
"56916949","2","","56916948","2019-07-06 19:12:17","","62","","<p>The template in Xcode 11 uses a scene delegate. Scene delegates and the related classes are new in iOS 13; they don't exist in iOS 12 and before, and the launch process is different.</p>

<p>To make a project generated from an Xcode 11 app template backward compatible, you need to mark the entire SceneDelegate class, and any methods in the AppDelegate class that refer to UISceneSession, as <code>@available(iOS 13.0, *)</code>.</p>

<p>You also need to declare a <code>window</code> property in the AppDelegate class (if you don't do that, the app will run and launch but the screen will be black):</p>

<pre><code>var window : UIWindow?
</code></pre>

<p>The result is that when this app runs in iOS 13, the scene delegate has the <code>window</code>, but when it runs in iOS 12 or before, the app delegate has the <code>window</code> — and your other code may then need to take account of <em>that</em> in order to be backward compatible.</p>
","341994","","341994","","2019-07-06 19:48:01","2019-07-06 19:48:01","","","","10","","",""
"57939770","2","","56555709","2019-09-14 22:36:00","","1","","<p>For anyone like Brett (in the comments) who was getting </p>

<pre><code>""Property 'body' with type 'AnyView' cannot override a property with type 'ContentView'""
</code></pre>

<p>I got the same error because I hadn't replaced the return value and wrapped the ContentView being returned.</p>

<p>ie. this is what my first attempt looked like.. notice the 
<code>WKHostingController&lt;ContentView&gt;</code>
that should be
<code>WKHostingController&lt;AnyView&gt;</code></p>

<pre><code>class HostingController : WKHostingController&lt;ContentView&gt; {
    override var body: AnyView {
        return AnyView(ContentView().environmentObject(DataModel()))
    }
}
</code></pre>
","538217","","","","","2019-09-14 22:36:00","","","","1","","",""
"58656323","2","","58654714","2019-11-01 08:44:13","","87","","<p>OK, Turns out if you watch the WWDC video, they explain it:
<a href=""https://developer.apple.com/videos/play/wwdc2019/416/"" rel=""noreferrer"">https://developer.apple.com/videos/play/wwdc2019/416/</a></p>

<p>You need to set the <strong>Build Libraries for Distribution</strong> option to <strong>Yes</strong> in your framework's build settings, otherwise the swift compiler doesn't generate the neccessary <code>.swiftinterface</code> files which are the key to future compilers being able to load your old library.</p>

<p>This ends up in your project.pbxproj file as:</p>

<pre><code>BUILD_LIBRARY_FOR_DISTRIBUTION = YES;
</code></pre>

<p>After setting this flag, a framework I compiled using Xcode 11.0 (swift 5.1) was able to be used by Xcode 11.2 (swift 5.1.2) and everything appears to be working correctly.</p>

<p>Hopefully this question/answer will serve as a useful reference for everyone who hasn't watched all the WWDC videos</p>

<p>If the error still persists go to <strong>Product</strong> > <strong>Clean Build Folder</strong> and <strong>Build</strong> again. </p>
","234","","2854494","","2020-02-05 16:29:02","2020-02-05 16:29:02","","","","13","","",""
"58817118","2","","58654714","2019-11-12 10:50:58","","1","","<p>I had the same error importing 3rd party libraries.
I fixed it using toolchains in Xcode and taking the release September 19 2019 from here <a href=""https://swift.org/download/#releases"" rel=""nofollow noreferrer"">https://swift.org/download/#releases</a>.
After that I had to re-import my libraries and it worked.</p>
","12213553","","","","","2019-11-12 10:50:58","","","","0","","",""
"58883382","2","","58654714","2019-11-15 19:20:27","","3","","<p>I started seeing the same issue and found out that I was using the incorrect xcode Command Line Tools. Went to Preferences > Locations and changed the command line tools from Xcode 11.1 to 11.2.1. Just to be safe, I also cleared the derived data directory and ran <code>carthage build</code>.</p>
","5419979","","","","","2019-11-15 19:20:27","","","","0","","",""
"56067414","2","","55975924","2019-05-09 20:52:13","","0","","<p>Maybe staticCastValue?
As in you are casting a dynamic(runtime) value to a static value.
Can be used with templates or overloads for different types.</p>

<p>Or maybe assertInmutable?
As in you are converting a mutable type into an inmutable one.</p>

<p>Or perhaps expressConstantly?
As in you are expressing the same value but in constant form.
A form similar to constexpr.</p>

<p>A wild one:
staticBifurcate?
As in theres two things to choose from, thus a bifurcation is there.</p>

<p>bifurcate
verb
/ˈbʌɪfəkeɪt/
1.
divide into two branches or forks.
""just below Cairo the river bifurcates""</p>

<p>Or finally convertToConstExpr?
Explicitly saying that the value will be converted to something akin or compatible with a constexpr.</p>
","4416169","","","","","2019-05-09 20:52:13","","","","1","","",""
"56083145","2","","55975924","2019-05-10 18:36:11","","5","","<p>Generation of specialized version of a function is called <em>cloning</em>. (see <a href=""https://www.sciencedirect.com/science/article/pii/009605519390005L"" rel=""noreferrer"">Procedure Cloning</a>). The term <em>clone</em> is used to name the specialized function generated by the optimizer during constant propagation (see <a href=""https://gcc.gnu.org/onlinedocs/gcc/Optimize-Options.html"" rel=""noreferrer"">gcc doc</a>).</p>

<p>The set of specialized functions generated by <code>std::visit</code> could be named <em>clone set</em>.</p>

<p>This set is generated for all <a href=""https://en.wikipedia.org/wiki/Combination"" rel=""noreferrer"">combinations</a> of argument value. This term <em>combination</em> let us suppose that the set of possible value of each argument is finite. </p>

<p>So we could have a long name for the set of clones such as, <em>set of clones for all combination of argument values</em>. An other option more obscure but shorter could be <em>combinatorial clone set</em>.</p>

<p>As already pointed out, the action of selecting the right function to call in term of the argument could be called <em>dispatch</em>.</p>

<p>So I would propose <code>combinatiorial_clone_set_dispatch</code> or <code>dispatch_in_combinatorial_clone_set</code> ...</p>
","5632316","","5632316","","2019-05-10 18:42:51","2019-05-10 18:42:51","","","","0","","",""
"56088964","2","","55975924","2019-05-11 09:27:34","","2","","<p>As I am unaware of a similar implementation, I'll just go type by type with bikeshed colors.</p>

<hr>

<pre><code>using boolean_t = std::variant&lt;std::false_type, std::true_type&gt;;
</code></pre>

<p>This is pretty self-explanatory, as it's a variant that can store one or the other of the <code>std::integral_constant</code>s for true or false. It's kind of a <code>bool</code>, but <code>bool_t</code> is likely to cause confusion. An alternative is <code>boolean_variant</code>, but that may be too verbose.</p>

<hr>

<pre><code>constexpr boolean_t to_boolean_t( bool b ) {
  if (b) return std::true_type{};
  return std::false_type{};
}
</code></pre>

<p>I started with <code>convert_bool</code>, but that's a bit too generic. <code>to_boolean_t</code> is more expressive. <code>make_boolean_t</code> is also a possibility, as it is basically a <code>boolean_t</code> factory function. Note: I previously chose <code>to_constexpr_boolean</code>, but that's unnecessarily verbose.</p>

<hr>

<pre><code>template&lt;class F, class...Bools&gt;
constexpr auto static_eval( F&amp;&amp; f, Bools...bools ) {
  static_assert( (std::is_same&lt;Bools, bool&gt;{} &amp;&amp; ...) );
  return std::visit( std::forward&lt;F&gt;(f), to_boolean_t(bools)... );
}
</code></pre>

<p>I chose <code>static_eval</code> here as I like Clonk's reasoning, but ""static"" has contextual meaning in C++, so alternatives are (in no order of importance):</p>

<ul>
<li><code>boolean_visit</code></li>
<li><code>static_visit</code></li>
<li><code>constexpr_eval</code></li>
<li><code>constexpr_visit</code></li>
</ul>
","4732082","","4732082","","2019-05-11 18:21:18","2019-05-11 18:21:18","","","","0","","",""
"56111673","2","","55975924","2019-05-13 11:47:50","","1","","<p><strong>You issue was:</strong>  (bold mine)</p>

<blockquote>
  <p>I'm looking for a name that is well known in any community (even a
  non-C++ one), even a verb that describes ""<strong>taking a runtime value and
  creating a switch and a set of compile time value in generated code to
  pick between</strong>"" better than a sentence.</p>
</blockquote>

<p>There is, but only if you will adopt it from a related field of science:</p>

<blockquote>
  <p>The U.S. National Electrical Code (NEC) defines a switchboard as ""a
  large single panel, frame, or assembly of panels on which are mounted,
  on the face, back, or both, switches, over-current and other
  protective devices, buses, and usually instruments"". The role of a
  switchboard is to allow the division of the current supplied to the
  switchboard into smaller currents for further distribution and to
  provide switching, current protection and (possibly) metering for
  those various currents. In general, switchboards may distribute power
  to transformers, panelboards, control equipment, and, ultimately, to
  individual system loads.</p>
</blockquote>

<p>Adopting this thinking, you would simply call it <strong>switches</strong>.</p>

<p>I will also add that it is quite unusual to specify (ie. <em>repeat</em>) the storage type or cv-qualifier, etc. in type/variable names - even when not directly visible you would usually  leave that as implicit - unless it really needs to be emphasized.</p>
","2261538","","","","","2019-05-13 11:47:50","","","","0","","",""
"55456481","2","","55212788","2019-04-01 13:36:29","","1","","<p>Please check this.
when we send</p>

<pre><code>adb install-multiple apk1 apk2 ...
</code></pre>

<p>it calls this code 
<a href=""http://androidxref.com/7.1.2_r36/xref/system/core/adb/commandline.cpp#1815"" rel=""nofollow noreferrer"">install-multiple</a></p>

<pre><code> std::string install_cmd;
    if (_use_legacy_install()) {
        install_cmd = ""exec:pm"";
    } else {
        install_cmd = ""exec:cmd package"";
    }

    std::string cmd = android::base::StringPrintf(""%s install-create -S %"" PRIu64, install_cmd.c_str(), total_size);
    for (i = 1; i &lt; first_apk; i++) {
        cmd += "" "" + escape_arg(argv[i]);
    }
</code></pre>

<p>which in turn calls Pm.java or a new way of executing PackageManagerService code, both are similar</p>

<p>I tried to integrate that code in my app, The problem which I faced, apk installation was not able to complete, it is due to the reason that the app needs. </p>

<pre><code>&lt;uses-permission android:name=""android.permission.INSTALL_PACKAGES""/&gt;
</code></pre>

<p>But it is only given to system-priv apps. When I executed these steps from adb shell apk installation was successful and when I created my app a system priv-app apk install was successfull. </p>

<p>code to call new apis of PackageManager, mostly copied from Pm.java
Steps in installing split apks</p>

<ol>
<li><p>Create a session with argument -S  , return session id.</p>

<p>(install-create, -S, 52488426)
52488426 -- total size of apks.</p></li>
<li><p>Write split apks in that session with size , name and path</p>

<p>(install-write, -S, 44334187, 824704264, 1_base.apk, -)</p>

<p>(install-write, -S, 1262034, 824704264, 2_split_config.en.apk, -)</p>

<p>(install-write, -S, 266117, 824704264, 3_split_config.hdpi.apk, -)</p>

<p>(install-write, -S, 6626088, 824704264, 4_split_config.x86.apk, -)</p></li>
<li><p>commit the session with session id</p>

<p>(install-commit, 824704264)</p></li>
</ol>

<p>I have placed airbnb apk in my sdcard.</p>

<pre><code>OnePlus5:/sdcard/com.airbnb.android-1 $ ll
total 51264
-rw-rw---- 1 root sdcard_rw 44334187 2019-04-01 14:20 base.apk
-rw-rw---- 1 root sdcard_rw  1262034 2019-04-01 14:20 split_config.en.apk
-rw-rw---- 1 root sdcard_rw   266117 2019-04-01 14:20 split_config.hdpi.apk
-rw-rw---- 1 root sdcard_rw  6626088 2019-04-01 14:20 split_config.x86.apk
</code></pre>

<p>and calling functions to install apk. </p>

<pre><code>final InstallParams installParams = makeInstallParams(52488426l);

            try {
                int sessionId = runInstallCreate(installParams);

                runInstallWrite(44334187,sessionId, ""1_base.apk"", ""/sdcard/com.airbnb.android-1/base.apk"");

                runInstallWrite(1262034,sessionId, ""2_split_config.en.apk"", ""/sdcard/com.airbnb.android-1/split_config.en.apk"");

                runInstallWrite(266117,sessionId, ""3_split_config.hdpi.apk"", ""/sdcard/com.airbnb.android-1/split_config.hdpi.apk"");

                runInstallWrite(6626088,sessionId, ""4_split_config.x86.apk"", ""/sdcard/com.airbnb.android-1/split_config.x86.apk"");


                if (doCommitSession(sessionId, false )
                        != PackageInstaller.STATUS_SUCCESS) {
                }
                System.out.println(""Success"");

            } catch (RemoteException e) {
                e.printStackTrace();
            }

private int runInstallCreate(InstallParams installParams) throws RemoteException {
    final int sessionId = doCreateSession(installParams.sessionParams);
    System.out.println(""Success: created install session ["" + sessionId + ""]"");
    return sessionId;
}

private int doCreateSession(PackageInstaller.SessionParams params)
        throws RemoteException {

    int sessionId = 0 ;
    try {
        sessionId = packageInstaller.createSession(params);
    } catch (IOException e) {
        e.printStackTrace();
    }
    return sessionId;
}

private int runInstallWrite(long size, int sessionId , String splitName ,String path ) throws RemoteException {
    long sizeBytes = -1;

    String opt;
    sizeBytes = size;
    return doWriteSession(sessionId, path, sizeBytes, splitName, true /*logSuccess*/);
}


private int doWriteSession(int sessionId, String inPath, long sizeBytes, String splitName,
                           boolean logSuccess) throws RemoteException {
    if (""-"".equals(inPath)) {
        inPath = null;
    } else if (inPath != null) {
        final File file = new File(inPath);
        if (file.isFile()) {
            sizeBytes = file.length();
        }
    }

    final PackageInstaller.SessionInfo info = packageInstaller.getSessionInfo(sessionId);

    PackageInstaller.Session session = null;
    InputStream in = null;
    OutputStream out = null;
    try {
        session = packageInstaller.openSession(sessionId);

        if (inPath != null) {
            in = new FileInputStream(inPath);
        }

        out = session.openWrite(splitName, 0, sizeBytes);

        int total = 0;
        byte[] buffer = new byte[65536];
        int c;
        while ((c = in.read(buffer)) != -1) {
            total += c;
            out.write(buffer, 0, c);
        }
        session.fsync(out);

        if (logSuccess) {
            System.out.println(""Success: streamed "" + total + "" bytes"");
        }
        return PackageInstaller.STATUS_SUCCESS;
    } catch (IOException e) {
        System.err.println(""Error: failed to write; "" + e.getMessage());
        return PackageInstaller.STATUS_FAILURE;
    } finally {
        try {
            out.close();
            in.close();
            session.close();
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
}


private int doCommitSession(int sessionId, boolean logSuccess) throws RemoteException {
    PackageInstaller.Session session = null;
    try {
        try {
            session = packageInstaller.openSession(sessionId);
        } catch (IOException e) {
            e.printStackTrace();
        }
        session.commit(PendingIntent.getBroadcast(getApplicationContext(), sessionId,
                new Intent(""android.intent.action.MAIN""), 0).getIntentSender());
        System.out.println(""install request sent"");

        Log.d(TAG, ""doCommitSession: "" + packageInstaller.getMySessions());

        Log.d(TAG, ""doCommitSession: after session commit "");

        return 1;
    } finally {
        session.close();
    }
}



private static class InstallParams {
    PackageInstaller.SessionParams sessionParams;
}

private InstallParams makeInstallParams(long totalSize ) {
    final PackageInstaller.SessionParams sessionParams = new PackageInstaller.SessionParams(PackageInstaller.SessionParams.MODE_FULL_INSTALL);
    final InstallParams params = new InstallParams();
    params.sessionParams = sessionParams;
    String opt;
    sessionParams.setSize(totalSize);
    return params;
}
</code></pre>

<p>This is the list of commands that are actually received in Pm.java when we do adb install-multiple</p>

<pre><code>04-01 16:04:40.626  4886  4886 D Pm      : run() called with: args = [[install-create, -S, 52488426]]
04-01 16:04:41.862  4897  4897 D Pm      : run() called with: args = [[install-write, -S, 44334187, 824704264, 1_base.apk, -]]
04-01 16:04:56.036  4912  4912 D Pm      : run() called with: args = [[install-write, -S, 1262034, 824704264, 2_split_config.en.apk, -]]
04-01 16:04:57.584  4924  4924 D Pm      : run() called with: args = [[install-write, -S, 266117, 824704264, 3_split_config.hdpi.apk, -]]
04-01 16:04:58.842  4936  4936 D Pm      : run() called with: args = [[install-write, -S, 6626088, 824704264, 4_split_config.x86.apk, -]]
04-01 16:05:01.304  4948  4948 D Pm      : run() called with: args = [[install-commit, 824704264]]
</code></pre>

<p>So for apps which are not system priv-app, I don't know how can they can install split apks.
Play store being a system priv-app can use these apis and install split apks without any issues.</p>
","2773112","","","","","2019-04-01 13:36:29","","","","3","","",""
"55475988","2","","55212788","2019-04-02 13:27:18","","0","","<p>If you have root, you can use this code.</p>

<p>Please get the read/write sdcard permission.(via runtime permissions or permission granted from settings app) before executing this code.
airbnb apk was successfully installed after running this code.</p>

<p>Calling this function with args ""/split-apks/"" ,  I have placed the airbnb split apks in a directory in /sdcard/split-apks/.</p>

<pre><code>installApk(""/split-apks/"");


 public void installApk(String apkFolderPath)
{
    PackageInstaller packageInstaller =  getPackageManager().getPackageInstaller();
    HashMap&lt;String, Long&gt; nameSizeMap = new HashMap&lt;&gt;();
    long totalSize = 0;

    File folder = new File(Environment.getExternalStorageDirectory().getPath()+ apkFolderPath);
    File[] listOfFiles = folder.listFiles();
    for (int i = 0; i &lt; listOfFiles.length; i++) {
        if (listOfFiles[i].isFile()) {
            System.out.println(""File "" + listOfFiles[i].getName());
            nameSizeMap.put(listOfFiles[i].getName(),listOfFiles[i].length());
            totalSize += listOfFiles[i].length();
        }
    }

    String su = ""/system/xbin/su"";


    final String[] pm_install_create = new String[]{su, ""-c"", ""pm"" ,""install-create"", ""-S"", Long.toString(totalSize) };
    execute(null, pm_install_create);

    List&lt;PackageInstaller.SessionInfo&gt; sessions = packageInstaller.getAllSessions();

    int sessId = sessions.get(0).getSessionId();

    String sessionId = Integer.toString(sessId);


    for(Map.Entry&lt;String,Long&gt; entry : nameSizeMap.entrySet())
    {
        String[] pm_install_write = new String[]{su, ""-c"", ""pm"" ,""install-write"", ""-S"", Long.toString(entry.getValue()),sessionId, entry.getKey(), Environment.getExternalStorageDirectory().getPath()+apkFolderPath+ entry.getKey()};

        execute(null,pm_install_write);

    }

    String[] pm_install_commit  = new String[]{su, ""-c"", ""pm"" ,""install-commit"", sessionId};


    execute(null, pm_install_commit);

}
public String execute(Map&lt;String, String&gt; environvenmentVars, String[] cmd) {

    boolean DEBUG = true;
    if (DEBUG)
        Log.d(""log"",""command is "" + Arrays.toString(cmd));

    try {
        Process process = Runtime.getRuntime().exec(cmd);
        if (DEBUG)
            Log.d(""log"", ""process is "" + process);

        BufferedReader reader = new BufferedReader(new InputStreamReader(process.getInputStream()));
        if (DEBUG)
            Log.d(""log"", ""bufferreader is "" + reader);

        if (DEBUG)
            Log.d(""log"", ""readline "" + reader.readLine());
        StringBuffer output = new StringBuffer();

        char[] buffer = new char[4096];
        int read;

        while ((read = reader.read(buffer)) &gt; 0) {
            output.append(buffer, 0, read);
        }

        reader.close();

        process.waitFor();
        if (DEBUG)
            Log.d(""log"", output.toString());

        return output.toString();

    }

    catch (Exception e)
    {
        e.printStackTrace();
    }

    return null;

}
</code></pre>

<hr>

<p>EDIT: same code, but in Kotlin, as it's shorter:</p>

<p>sample usage: </p>

<pre><code>Foo.installApk(context,fullPathToSplitApksFolder)
</code></pre>

<p>Example:</p>

<pre><code>        AsyncTask.execute {
            Foo.installApk(this@MainActivity,""/storage/emulated/0/Download/split"")
        }
</code></pre>

<p>Code:</p>

<pre><code>object Foo {
    @WorkerThread
    @JvmStatic
    fun installApk(context: Context, apkFolderPath: String) {
        val packageInstaller = context.packageManager.packageInstaller
        val nameSizeMap = HashMap&lt;File, Long&gt;()
        var totalSize: Long = 0
        val folder = File(apkFolderPath)
        val listOfFiles = folder.listFiles().filter { it.isFile &amp;&amp; it.name.endsWith("".apk"") }
        for (file in listOfFiles) {
            Log.d(""AppLog"", ""File "" + file.name)
            nameSizeMap[file] = file.length()
            totalSize += file.length()
        }
        val su = ""su""
        val pmInstallCreate = arrayOf(su, ""-c"", ""pm"", ""install-create"", ""-S"", totalSize.toString())
        execute(pmInstallCreate)
        val sessions = packageInstaller.allSessions
        val sessionId = Integer.toString(sessions[0].sessionId)
        for ((file, value) in nameSizeMap) {
            val pmInstallWrite = arrayOf(su, ""-c"", ""pm"", ""install-write"", ""-S"", value.toString(), sessionId, file.name, file.absolutePath)
            execute(pmInstallWrite)
        }
        val pmInstallCommit = arrayOf(su, ""-c"", ""pm"", ""install-commit"", sessionId)
        execute(pmInstallCommit)
    }

    @WorkerThread
    @JvmStatic
    private fun execute(cmd: Array&lt;String&gt;): String? {
        Log.d(""AppLog"", ""command is "" + Arrays.toString(cmd))
        try {
            val process = Runtime.getRuntime().exec(cmd)
            Log.d(""AppLog"", ""process is $process"")
            val reader = BufferedReader(InputStreamReader(process.inputStream))
            Log.d(""AppLog"", ""bufferreader is $reader"")
            Log.d(""AppLog"", ""readline "" + reader.readLine())
            val output = StringBuilder()
            val buffer = CharArray(4096)
            var read: Int
            while (true) {
                read = reader.read(buffer)
                if (read &lt;= 0)
                    break
                output.append(buffer, 0, read)
            }
            reader.close()
            process.waitFor()
            Log.d(""AppLog"", output.toString())
            return output.toString()
        } catch (e: Exception) {
            e.printStackTrace()
        }
        return null
    }
}
</code></pre>
","2773112","","878126","","2019-04-13 20:37:05","2019-04-13 20:37:05","","","","16","","",""
"55672367","2","","55212788","2019-04-14 05:56:44","","2","","<p>No root required implementation 
Check this git hub link: <a href=""https://github.com/nkalra0123/splitapkinstall"" rel=""nofollow noreferrer"">https://github.com/nkalra0123/splitapkinstall</a></p>

<p>We have to create a service and pass that handle in session.commit()</p>

<pre><code> Intent callbackIntent = new Intent(getApplicationContext(), APKInstallService.class);
 PendingIntent pendingIntent = PendingIntent.getService(getApplicationContext(), 0, callbackIntent, 0);
 session.commit(pendingIntent.getIntentSender());
</code></pre>

<hr>

<p>EDIT: Since the solution works, but not really published here, I've decided to write it before marking it as correct solution. Here's the code:</p>

<p><strong>manifest</strong></p>

<pre><code>&lt;manifest package=""com.nitin.apkinstaller"" xmlns:android=""http://schemas.android.com/apk/res/android"" xmlns:tools=""http://schemas.android.com/tools""&gt;
  &lt;uses-permission android:name=""android.permission.WRITE_EXTERNAL_STORAGE""/&gt;
  &lt;uses-permission android:name=""android.permission.REQUEST_INSTALL_PACKAGES""/&gt;
  &lt;uses-permission android:name=""android.permission.READ_EXTERNAL_STORAGE""/&gt;
  &lt;application
    android:allowBackup=""true"" android:icon=""@mipmap/ic_launcher"" android:label=""@string/app_name"" android:roundIcon=""@mipmap/ic_launcher_round"" android:supportsRtl=""true""
    android:theme=""@style/AppTheme"" tools:ignore=""AllowBackup,GoogleAppIndexingWarning""&gt;
    &lt;activity
      android:name="".MainActivity"" android:label=""@string/app_name"" android:theme=""@style/AppTheme.NoActionBar""&gt;
      &lt;intent-filter&gt;
        &lt;action android:name=""android.intent.action.MAIN""/&gt;

        &lt;category android:name=""android.intent.category.LAUNCHER""/&gt;
      &lt;/intent-filter&gt;
    &lt;/activity&gt;

    &lt;service android:name="".APKInstallService""/&gt;
  &lt;/application&gt;
&lt;/manifest&gt;
</code></pre>

<p><strong>APKInstallService</strong></p>

<pre><code>class APKInstallService : Service() {
    override fun onStartCommand(intent: Intent, flags: Int, startId: Int): Int {
        when (if (intent.hasExtra(PackageInstaller.EXTRA_STATUS)) null else intent.getIntExtra(PackageInstaller.EXTRA_STATUS, 0)) {
            PackageInstaller.STATUS_PENDING_USER_ACTION -&gt; {
                Log.d(""AppLog"", ""Requesting user confirmation for installation"")
                val confirmationIntent = intent.getParcelableExtra&lt;Intent&gt;(Intent.EXTRA_INTENT)
                confirmationIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
                try {
                    startActivity(confirmationIntent)
                } catch (e: Exception) {
                }
            }
            PackageInstaller.STATUS_SUCCESS -&gt; Log.d(""AppLog"", ""Installation succeed"")
            else -&gt; Log.d(""AppLog"", ""Installation failed"")
        }
        stopSelf()
        return START_NOT_STICKY
    }

    override fun onBind(intent: Intent): IBinder? {
        return null
    }
}
</code></pre>

<p><strong>MainActivity</strong></p>

<pre><code>class MainActivity : AppCompatActivity() {
    private lateinit var packageInstaller: PackageInstaller

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        val toolbar = findViewById&lt;Toolbar&gt;(R.id.toolbar)
        setSupportActionBar(toolbar)
        val fab = findViewById&lt;FloatingActionButton&gt;(R.id.fab)
        fab.setOnClickListener {
            packageInstaller = packageManager.packageInstaller
            val ret = installApk(""/storage/emulated/0/Download/split/"")
            Log.d(""AppLog"", ""onClick: return value is $ret"")
        }

    }

    private fun installApk(apkFolderPath: String): Int {
        val nameSizeMap = HashMap&lt;String, Long&gt;()
        var totalSize: Long = 0
        var sessionId = 0
        val folder = File(apkFolderPath)
        val listOfFiles = folder.listFiles()
        try {
            for (listOfFile in listOfFiles) {
                if (listOfFile.isFile) {
                    Log.d(""AppLog"", ""installApk: "" + listOfFile.name)
                    nameSizeMap[listOfFile.name] = listOfFile.length()
                    totalSize += listOfFile.length()
                }
            }
        } catch (e: Exception) {
            e.printStackTrace()
            return -1
        }
        val installParams = PackageInstaller.SessionParams(PackageInstaller.SessionParams.MODE_FULL_INSTALL)
        installParams.setSize(totalSize)
        try {
            sessionId = packageInstaller.createSession(installParams)
            Log.d(""AppLog"",""Success: created install session [$sessionId]"")
            for ((key, value) in nameSizeMap) {
                doWriteSession(sessionId, apkFolderPath + key, value, key)
            }
            doCommitSession(sessionId)
            Log.d(""AppLog"",""Success"")
        } catch (e: IOException) {
            e.printStackTrace()
        }
        return sessionId
    }

    private fun doWriteSession(sessionId: Int, inPath: String?, sizeBytes: Long, splitName: String): Int {
        var inPathToUse = inPath
        var sizeBytesToUse = sizeBytes
        if (""-"" == inPathToUse) {
            inPathToUse = null
        } else if (inPathToUse != null) {
            val file = File(inPathToUse)
            if (file.isFile)
                sizeBytesToUse = file.length()
        }
        var session: PackageInstaller.Session? = null
        var inputStream: InputStream? = null
        var out: OutputStream? = null
        try {
            session = packageInstaller.openSession(sessionId)
            if (inPathToUse != null) {
                inputStream = FileInputStream(inPathToUse)
            }
            out = session!!.openWrite(splitName, 0, sizeBytesToUse)
            var total = 0
            val buffer = ByteArray(65536)
            var c: Int
            while (true) {
                c = inputStream!!.read(buffer)
                if (c == -1)
                    break
                total += c
                out!!.write(buffer, 0, c)
            }
            session.fsync(out!!)
            Log.d(""AppLog"", ""Success: streamed $total bytes"")
            return PackageInstaller.STATUS_SUCCESS
        } catch (e: IOException) {
            Log.e(""AppLog"", ""Error: failed to write; "" + e.message)
            return PackageInstaller.STATUS_FAILURE
        } finally {
            try {
                out?.close()
                inputStream?.close()
                session?.close()
            } catch (e: IOException) {
                e.printStackTrace()
            }
        }
    }

    private fun doCommitSession(sessionId: Int) {
        var session: PackageInstaller.Session? = null
        try {
            try {
                session = packageInstaller.openSession(sessionId)
                val callbackIntent = Intent(applicationContext, APKInstallService::class.java)
                val pendingIntent = PendingIntent.getService(applicationContext, 0, callbackIntent, 0)
                session!!.commit(pendingIntent.intentSender)
                session.close()
                Log.d(""AppLog"", ""install request sent"")
                Log.d(""AppLog"", ""doCommitSession: "" + packageInstaller.mySessions)
                Log.d(""AppLog"", ""doCommitSession: after session commit "")
            } catch (e: IOException) {
                e.printStackTrace()
            }

        } finally {
            session!!.close()
        }
    }
}
</code></pre>
","2773112","","878126","","2019-04-20 09:49:38","2019-04-20 09:49:38","","","","8","","",""
"57530883","2","","57530882","2019-08-16 20:43:13","","6","","<h2>.NET / C# - Construction from date parts</h2>

<p><em>Impact Category 1</em></p>

<p><strong>Defective Code</strong></p>

<pre class=""lang-cs prettyprint-override""><code>DateTime dt = DateTime.Now;
DateTime result = new DateTime(dt.Year + 1, dt.Month, dt.Day);
</code></pre>

<p>This code will work properly until <code>dt</code> becomes February 29th.  Then, it will attempt to create a February 29th of a common year, which does not exist.  The <code>DateTime</code> constructor will throw an <code>ArgumentOutOfRangeException</code>.</p>

<p>Variations include any form of <code>DateTime</code> or <code>DateTimeOffset</code> constructor that accepts year, month, and day parameters, when those values are derived from different sources or manipulated without regard to validity as a whole.</p>

<p><strong>Corrected Code</strong></p>

<pre class=""lang-cs prettyprint-override""><code>DateTime dt = DateTime.Now;
DateTime result = dt.AddYears(1);
</code></pre>

<hr>

<h3>Common Variation - Birthdays (and other anniversaries)</h3>

<p>One variation is when determining a user's current birthday without considering leaplings (persons born on February 29th).  It also applies to other types of anniversaries, such as hire date, date of service, billing date, etc.</p>

<p><strong>Defective Code</strong></p>

<pre class=""lang-cs prettyprint-override""><code>DateTime birthdayThisYear = new DateTime(DateTime.Now.Year, dob.Month, dob.Day);
</code></pre>

<p>This approach needs adjustment, such as the following which uses February 28th for common years. (Though, march 1st might be preferred depending on the use case.)</p>

<p><strong>Corrected Code</strong></p>

<pre class=""lang-cs prettyprint-override""><code>int year = DateTime.Now.Year;
int month = dob.Month;
int day = dob.Day;
if (month == 2 &amp;&amp; day == 29 &amp;&amp; !DateTime.IsLeapYear(year))
    day--;

DateTime birthdayThisYear = new DateTime(year, month, day);
</code></pre>

<p><strong>Corrected Code (alternative implementation)</strong></p>

<pre class=""lang-cs prettyprint-override""><code>DateTime birthdayThisYear = dob.AddYears(DateTime.Now.Year - dob.Year);
</code></pre>
","634824","","634824","","2019-11-05 18:29:24","2019-11-05 18:29:24","","","","0","","","2019-08-16 20:43:13"
"57530901","2","","57530882","2019-08-16 20:44:17","","3","","<h2>Win32 / C++ - <code>SYSTEMTIME</code> struct manipulation</h2>

<p><em>Impact Category 1</em></p>

<p><strong>Defective Code</strong></p>

<pre class=""lang-cpp prettyprint-override""><code>SYSTEMTIME st;
FILETIME ft;

GetSystemTime(&amp;st);
st.wYear++;

SystemTimeToFileTime(&amp;st, &amp;ft);
</code></pre>

<p>This code will work properly until <code>st</code> becomes February 29th.  Then, it will attempt to create a February 29th of a common year, which does not exist.  Passing this to any function that accepts a <code>SYSTEMTIME</code> struct will likely fail.</p>

<p>For example, the <code>SystemTimeToFileTime</code> call shown here will return an error code.  Since that return value is unchecked (which is extremely common), this will result in <code>ft</code> being left uninitialized.</p>

<p><strong>Corrected Code</strong></p>

<pre class=""lang-cpp prettyprint-override""><code>SYSTEMTIME st;
FILETIME ft;

GetSystemTime(&amp;st);
st.wYear++;

bool isLeapYear = st.wYear % 4 == 0 &amp;&amp; (st.wYear % 100 != 0 || st.wYear % 400 == 0);
st.wDay = st.wMonth == 2 &amp;&amp; st.wDay == 29 &amp;&amp; !isLeapYear ? 28 : st.wDay;

bool ok = SystemTimeToFileTime(&amp;st, &amp;ft);
if (!ok)
{
  // handle error
}
</code></pre>

<p>This fix checks for Feb 29th of a common year, and corrects it to Feb 28th.</p>
","634824","","","","","2019-08-16 20:44:17","","","","0","","","2019-08-16 20:44:17"
"57732847","2","","57174400","2019-08-30 20:24:28","","0","","<blockquote>
  <p>... A trailing template parameter pack ([temp.variadic]) not otherwise
  deduced will be deduced as an empty sequence of template arguments.
  ...</p>
</blockquote>

<p>It could be enough to say that the <em>not otherwise deduced</em> is not a clause that should somehow or automagically relax some other rules or actually it is has nothing to do with why it's malformed (contrary to what I think you imply).</p>

<p>This <em>other rule</em> is perhaps best demonstrated by another very simpel example:</p>

<pre><code>template&lt;class T&gt;
void f(T, T){};

int main() {
    f(int{42},short{42});
}
</code></pre>

<p>The above fails to compile. Why ? because even while allowed to convert short to int seamlessly (<em>promotion</em>) they are not the same type.</p>

<p>Additionally since <code>nullptr</code> just has the somewhat <em>plain</em> type of <code>std::nullptr_t</code> - it is very ill-suited to participate in template argument deduction <em>at all</em>.</p>

<p>So forget about non-deduced context for a moment and try with deduced one:</p>

<pre><code>template &lt;class... T&gt;
void g(S&lt;T...&gt;*, S&lt;T...&gt;* ) {}

int main() {
    S&lt;&gt; s1;
    g(&amp;s1, nullptr);
}
</code></pre>

<p><em>or if your prefer just</em></p>

<pre><code>int main() {
    S&lt;&gt; s1;
    g(&amp;s1, 0);
}
</code></pre>

<p>and both fails for the same reason.</p>

<p>Now, if you would like to allow conversion - then use an identity template - and this even works for the non-deduced context!</p>

<p>For your case, the example could look like (<a href=""/questions/tagged/c%2b%2b2a"" class=""post-tag"" title=""show questions tagged &#39;c++2a&#39;"" rel=""tag"">c++2a</a>):</p>

<pre><code>template &lt;class... T&gt;
void g(typename S&lt;T...&gt;::type, std::type_identity_t&lt;S&lt;T...&gt; &gt;*) {}

int main() {
    f(42);
    g(42, nullptr);
} 
</code></pre>

<p>Which is valid. (note if you don't have have <a href=""/questions/tagged/c%2b%2b2a"" class=""post-tag"" title=""show questions tagged &#39;c++2a&#39;"" rel=""tag"">c++2a</a> just write the identity template yourself)</p>

<p>As stated in a <a href=""http://Jul%2024%20at%204:07"" rel=""nofollow noreferrer"">comment</a>, turning the question around could perhaps lead to a more interesting question ?</p>

<p><em>What's the reasoning for allowing empty template argument deduction in non-deduced contexts?</em></p>
","2261538","","","","","2019-08-30 20:24:28","","","","2","","",""
"54330388","2","","54329200","2019-01-23 15:17:48","","21","","<p>Trait object types have an associated lifetime bound, but it can be omitted. A full trait object type is written <code>dyn Trait + 'a</code> (when behind a reference, parentheses must be added around it: <code>&amp;(dyn Trait + 'a)</code>).</p>

<p>The tricky part is that when a lifetime bound is omitted, <a href=""https://doc.rust-lang.org/reference/lifetime-elision.html#default-trait-object-lifetimes"" rel=""noreferrer"">the rules are a bit complicated</a>.</p>

<p>First, we have:</p>

<pre><code>impl PartialOrd for dyn SimpleOrder {
</code></pre>

<p>Here, the compiler infers <code>+ 'static</code>. Lifetime parameters are never introduced on <code>impl</code> blocks (as of Rust 1.32.0).</p>

<p>Next, we have:</p>

<pre><code>    fn partial_cmp(&amp;self, other: &amp;dyn SimpleOrder) -&gt; Option&lt;Ordering&gt; {
</code></pre>

<p>The type of <code>other</code> is inferred to be <code>&amp;'b (dyn SimpleOrder + 'b)</code>, where <code>'b</code> is an implicit lifetime parameter introduced on <code>partial_cmp</code>.</p>

<pre><code>    fn partial_cmp&lt;'a, 'b&gt;(&amp;'a self, other: &amp;'b (dyn SimpleOrder + 'b)) -&gt; Option&lt;Ordering&gt; {
</code></pre>

<p>So now we have that <code>self</code> has type <code>&amp;'a (dyn SimpleOrder + 'static)</code> while <code>other</code> has type <code>&amp;'b (dyn SimpleOrder + 'b)</code>. What's the problem?</p>

<p>Indeed, <code>cmp</code> doesn't give any error, because its implementation doesn't require that the lifetime of the two trait objects be equal. Why does <code>partial_cmp</code> care, though?</p>

<p>Because <code>partial_cmp</code> is calling <code>Ord::cmp</code>. When type checking a call to a trait method, the compiler checks against the signature from the trait. Let's review that signature:</p>

<pre><code>pub trait Ord: Eq + PartialOrd&lt;Self&gt; {
    fn cmp(&amp;self, other: &amp;Self) -&gt; Ordering;
</code></pre>

<p>The trait requires that <code>other</code> be of type <code>Self</code>. That means that when <code>partial_cmp</code> calls <code>cmp</code>, it tries to pass a <code>&amp;'b (dyn SimpleOrder + 'b)</code> to a parameter that expects a <code>&amp;'b (dyn SimpleOrder + 'static)</code>, because <code>Self</code> is <code>dyn SimpleOrder + 'static</code>. This conversion is not valid (<code>'b</code> cannot be converted to <code>'static</code>), so the compiler gives an error.</p>

<p>So then, why is it valid to set the type of <code>other</code> to <code>&amp;'b (dyn SimpleOrder + 'b)</code> when implementing <code>Ord</code>? Because <code>&amp;'b (dyn SimpleOrder + 'b)</code> is a <a href=""https://doc.rust-lang.org/nomicon/subtyping.html"" rel=""noreferrer"">supertype</a> of <code>&amp;'b (dyn SimpleOrder + 'static)</code>, and Rust lets you replace a parameter type with one of its supertypes when implementing a trait method (it makes the method strictly more general, even though it's apparently not used much in type checking).</p>

<hr>

<p>In order to make your implementation as generic as possible, you should introduce a lifetime parameter on the <code>impl</code>s:</p>

<pre><code>use std::cmp::Ordering;

pub trait SimpleOrder {
    fn key(&amp;self) -&gt; u32;
}

impl&lt;'a&gt; PartialOrd for dyn SimpleOrder + 'a {
    fn partial_cmp(&amp;self, other: &amp;Self) -&gt; Option&lt;Ordering&gt; {
        Some(self.cmp(other))
    }
}

impl&lt;'a&gt; Ord for dyn SimpleOrder + 'a {
    fn cmp(&amp;self, other: &amp;Self) -&gt; Ordering {
        self.key().cmp(&amp;other.key())
    }
}

impl&lt;'a&gt; PartialEq for dyn SimpleOrder + 'a {
    fn eq(&amp;self, other: &amp;Self) -&gt; bool {
        self.key() == other.key()
    }
}

impl&lt;'a&gt; Eq for dyn SimpleOrder + 'a {}
</code></pre>
","234590","","234590","","2019-01-24 21:46:55","2019-01-24 21:46:55","","","","9","","",""
"57424828","2","","56309165","2019-08-09 06:54:28","","6","","<p>OK I think I found a way using the Android framework (someone on reddit gave me this solution), to use file-path and use it, but it's not perfect at all. Some notes:</p>

<ol>
<li>Not as direct as before. </li>
<li>Good thing is that it might also be possible to handle even files that are outside of the device storage. </li>
<li>It looks like a workaround, and I'm not sure for how long it will work.</li>
<li>For some reason, I can't load the app label (it always returns just the package name instead), and same goes for the app-icon (always null or default icon).</li>
</ol>

<p>The solution, in short, is using this:</p>

<pre><code>val fileDescriptor = contentResolver.openFileDescriptor(uri, ""r"") ?: return
val packageArchiveInfo = packageManager.getPackageArchiveInfo(""/proc/self/fd/"" + fileDescriptor.fd, 0)
</code></pre>

<p>I think this same approach can be used for all cases that you need a file-path.</p>

<p>Here's a sample app (also available <a href=""https://issuetracker.google.com/issues/128591846#comment246"" rel=""nofollow noreferrer""><strong>here</strong></a>) :</p>

<pre><code>class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        startActivityForResult(
                Intent(Intent.ACTION_OPEN_DOCUMENT).addCategory(Intent.CATEGORY_OPENABLE)
                        .setType(""application/vnd.android.package-archive""), 1
        )
    }

    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
        super.onActivityResult(requestCode, resultCode, data)
        try {
            val uri = data?.data ?: return
            val takeFlags = Intent.FLAG_GRANT_READ_URI_PERMISSION or Intent.FLAG_GRANT_WRITE_URI_PERMISSION
            contentResolver.takePersistableUriPermission(uri, takeFlags)
            val isDocumentUri = DocumentFile.isDocumentUri(this, uri)
            if (!isDocumentUri)
                return
            val documentFile = DocumentFile.fromSingleUri(this, uri) ?: return
            val fileDescriptor = contentResolver.openFileDescriptor(uri, ""r"") ?: return
            val packageArchiveInfo = packageManager.getPackageArchiveInfo(""/proc/self/fd/"" + fileDescriptor.fd, 0)
            Log.d(""AppLog"", ""got APK info?${packageArchiveInfo != null}"")
            if (packageArchiveInfo != null) {
                val appLabel = loadAppLabel(packageArchiveInfo.applicationInfo, packageManager)
                Log.d(""AppLog"", ""appLabel:$appLabel"")
            }
        } catch (e: Exception) {
            e.printStackTrace()
            Log.e(""AppLog"", ""failed to get app info: $e"")
        }
    }

    fun loadAppLabel(applicationInfo: ApplicationInfo, packageManager: PackageManager): String =
            try {
                applicationInfo.loadLabel(packageManager).toString()
            } catch (e: java.lang.Exception) {
                """"
            }
    }
}
</code></pre>
","878126","","878126","","2019-11-09 14:14:59","2019-11-09 14:14:59","","","","0","","",""
"58857896","2","","54381791","2019-11-14 13:27:06","","0","","<p>For</p>

<p><code>const int&amp; r1=42</code></p>

<p>The reference is of type <code>const int</code>, so <em>cv1</em> is <code>const</code>, and the prvalue is of type <code>const int</code>, so the materialized temporary is also of type <code>const int</code>.</p>
","5597","","","","","2019-11-14 13:27:06","","","","1","","",""
"59559276","2","","59503994","2020-01-02 06:40:56","","-2","","<p>You can decode the JSON by calling the <code>jsonDecode()</code> function, with the JSON string as the method argument.</p>

<pre><code>Map&lt;String, dynamic&gt; user = jsonDecode(jsonString);

print('Howdy, ${user['name']}!');
print('We sent the verification link to ${user['email']}.');
</code></pre>

<p>Now, Use the <code>User.fromJson()</code> constructor, for constructing a new User instance from a map structure and a <code>toJson()</code> method, which converts a User instance into a map.</p>

<p><strong>employee.dart</strong></p>

<pre><code>class Employee {
  final String name;
  final String id;

  Employee(this.name, this.id);

  Employee.fromJson(Map&lt;String, dynamic&gt; json)
      : name = json['name'],
        id = json['id'];

  Map&lt;String, dynamic&gt; toJson() =&gt;
    {
      'name': name,
      'id': id,
    };
}
</code></pre>

<p><code>json_serializable</code> is an automated source code generator that generates the JSON serialization boilerplate for you.</p>

<p>You need one regular dependency, and two dev dependencies to include <code>json_serializable</code> in your project.</p>

<pre><code>dependencies:
  json_annotation: ^0.2.3

dev_dependencies:
  build_runner: ^0.8.0
  json_serializable: ^0.5.0
</code></pre>

<p>For more details on JSON serialization you can refer <a href=""https://flutter.dev/docs/development/data-and-backend/json"" rel=""nofollow noreferrer"">here</a></p>

<p>you can also use the <a href=""https://pub.dartlang.org/packages/smoke"" rel=""nofollow noreferrer"">Smoke</a> library.</p>

<p>It's a subset of the Mirrors functionality but has both a Mirrors-based and a Codegen-based implementation. It's written by the PolymerDart team, so it's as close to ""Official"" as we're going to get.</p>

<p>While developing, it'll use the Mirrors-based encoding/decoding; but for publishing you can create a small transformer that will generate code.</p>

<p>Seth Ladd created <a href=""https://gist.github.com/sethladd/34b0d812b29c3bfd9529"" rel=""nofollow noreferrer"">a code sample here</a>, which I <a href=""https://gist.github.com/DanTup/d0b486d276f49da93e74"" rel=""nofollow noreferrer"">extended slightly</a> to support child-objects:</p>
","1853243","","","","","2020-01-02 06:40:56","","","","3","","",""
"56458794","2","","56436559","2019-06-05 10:34:41","","41","","<h1>As of Xcode 11 beta 3</h1>

<blockquote>
  <p>There is now the <a href=""https://developer.apple.com/documentation/uikit/uisegmentedcontrol/3335209-selectedsegmenttintcolor"" rel=""noreferrer""><code>selectedSegmentTintColor</code></a> property on <code>UISegmentedControl</code>.</p>
</blockquote>

<p>See <a href=""https://stackoverflow.com/a/56874473/191463"">rmaddy's answer</a></p>

<hr>

<h1>To get back iOS 12 appearance</h1>

<p>I wasn't able to tint the color of the selected segment, hopefully it will be fixed in an upcoming beta.</p>

<p>Setting the background image of the selected state doesn't work without setting the background image of the normal state (which removes all the iOS 13 styling)</p>

<p>But I was able to get it back to the iOS 12 appearance (or near enough, I wasn't able to return the corner radius to its smaller size). </p>

<p>It's not ideal, but a bright white segmented control looks a bit out of place in our app.</p>

<p>(Didn't realise <code>UIImage(color:)</code> was an extension method in our codebase. But the code to implement it is around the web)</p>

<pre><code>extension UISegmentedControl {
    /// Tint color doesn't have any effect on iOS 13.
    func ensureiOS12Style() {
        if #available(iOS 13, *) {
            let tintColorImage = UIImage(color: tintColor)
            // Must set the background image for normal to something (even clear) else the rest won't work
            setBackgroundImage(UIImage(color: backgroundColor ?? .clear), for: .normal, barMetrics: .default)
            setBackgroundImage(tintColorImage, for: .selected, barMetrics: .default)
            setBackgroundImage(UIImage(color: tintColor.withAlphaComponent(0.2)), for: .highlighted, barMetrics: .default)
            setBackgroundImage(tintColorImage, for: [.highlighted, .selected], barMetrics: .default)
            setTitleTextAttributes([.foregroundColor: tintColor, NSAttributedString.Key.font: UIFont.systemFont(ofSize: 13, weight: .regular)], for: .normal)
            setDividerImage(tintColorImage, forLeftSegmentState: .normal, rightSegmentState: .normal, barMetrics: .default)
            layer.borderWidth = 1
            layer.borderColor = tintColor.cgColor
        }
    }
}
</code></pre>

<p><a href=""https://i.stack.imgur.com/7g9vD.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/7g9vD.png"" alt=""Image showing the effect of the above code""></a></p>
","191463","","191463","","2019-07-04 08:05:21","2019-07-04 08:05:21","","","","13","","",""
"56465501","2","","56436559","2019-06-05 17:41:54","","8","","<p>I've tried the workaround and it works great for me. Here's the Objective-C version:</p>

<pre><code>@interface UISegmentedControl (Common)
- (void)ensureiOS12Style;
@end
</code></pre>

<pre><code>@implementation UISegmentedControl (Common)
- (void)ensureiOS12Style {
    // UISegmentedControl has changed in iOS 13 and setting the tint
    // color now has no effect.
    if (@available(iOS 13, *)) {
        UIColor *tintColor = [self tintColor];
        UIImage *tintColorImage = [self imageWithColor:tintColor];
        // Must set the background image for normal to something (even clear) else the rest won't work
        [self setBackgroundImage:[self imageWithColor:self.backgroundColor ? self.backgroundColor : [UIColor clearColor]] forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
        [self setBackgroundImage:tintColorImage forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];
        [self setBackgroundImage:[self imageWithColor:[tintColor colorWithAlphaComponent:0.2]] forState:UIControlStateHighlighted barMetrics:UIBarMetricsDefault];
        [self setBackgroundImage:tintColorImage forState:UIControlStateSelected|UIControlStateSelected barMetrics:UIBarMetricsDefault];
        [self setTitleTextAttributes:@{NSForegroundColorAttributeName: tintColor, NSFontAttributeName: [UIFont systemFontOfSize:13]} forState:UIControlStateNormal];
        [self setDividerImage:tintColorImage forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
        self.layer.borderWidth = 1;
        self.layer.borderColor = [tintColor CGColor];
    }
}

- (UIImage *)imageWithColor: (UIColor *)color {
    CGRect rect = CGRectMake(0.0f, 0.0f, 1.0f, 1.0f);
    UIGraphicsBeginImageContext(rect.size);
    CGContextRef context = UIGraphicsGetCurrentContext();
    CGContextSetFillColorWithColor(context, [color CGColor]);
    CGContextFillRect(context, rect);
    UIImage *theImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return theImage;
}
@end
</code></pre>
","9938677","","1033581","","2019-06-07 06:32:17","2019-06-07 06:32:17","","","","2","","",""
"59605830","2","","59503994","2020-01-06 01:52:14","","3","","<p>Check the build.yaml config file documentation for more info, but I think you should use the <a href=""https://github.com/dart-lang/build/blob/master/build_config/README.md#defining-builders-to-apply-to-dependents"" rel=""nofollow noreferrer""><code>applies_builders</code> param</a> that allows to execute another build after the defined one.</p>

<p>The example shows a builder that generates .tar.gz files and then executes another build that takes the .tar.gz files as input</p>

<pre><code>builders:
  # The regular builder config, creates .tar.gz files.
  regular_builder:
    import: ""package:my_package/builder.dart""
    builder_factories: [""myBuilder""]
    build_extensions: {"".dart"": ["".tar.gz""]}
    auto_apply: dependents
    apply_builders: ["":archive_extract_builder""]
post_process_builders:
  # The post process builder config, extracts .tar.gz files.
  extract_archive_builder:
    import: ""package:my_package/extract_archive_builder.dart""
    builder_factory: ""myExtractArchiveBuilder""
    input_extensions: ["".tar.gz""]
</code></pre>

<p>so with <code>source_gen</code> you should implement for your build </p>

<pre><code>applies_builders: [""source_gen|combining_builder"", ""json_serializable""]
</code></pre>

<p>and configure the other builder </p>

<pre><code>json_serializable:
    import: ""package:json_serializable/builder.dart""
    builder_factories: [""jsonSerializable""]
    build_extensions: {"".dart"": [""json_serializable.g.part""]}
    auto_apply: dependents
    build_to: cache
    applies_builders: [""source_gen|combining_builder""]
</code></pre>
","8096916","","8096916","","2020-01-06 01:59:45","2020-01-06 01:59:45","","","","0","","",""
"59613535","2","","59503994","2020-01-06 14:05:12","","2","","<p>It's not possible just with annotation because there maybe two packages that both have the <code>@JsonSerializable</code> annotation</p>

<p>There are two situtations :</p>

<ul>
<li><p>You know what other generators should run after your generator.</p>

<ul>
<li><a href=""https://stackoverflow.com/a/59605830/6877472"">https://stackoverflow.com/a/59605830/6877472</a> is one of the solutions</li>
<li>you can use the other generator's code in your own generator and call their generator's.generate function. example code:</li>
</ul></li>
</ul>

<pre class=""lang-dart prettyprint-override""><code>
class Example extends Generator {
    @override
    String generate(LibraryReader library, BuildStep buildStep) {
      return JsonSerializable().generate('''
          @JsonSerializable(nullable: false)
          class Person {
            final String firstName;
            final String lastName;
            final DateTime dateOfBirth;
            Person({this.firstName, this.lastName, this.dateOfBirth});
            factory Person.fromJson(Map&lt;String, dynamic&gt; json) =&gt; _PersonFromJson(json);
            Map&lt;String, dynamic&gt; toJson() =&gt; _PersonToJson(this);
          }
        ''');
     }

}

</code></pre>

<ul>
<li>You don't know what other generators should run after your generator.</li>
</ul>

<p>Unfortunately currently there is no way to tell the source_gen that your generator may produce a code that needs code generation.</p>

<p>I created an issue here <a href=""https://github.com/dart-lang/source_gen/issues/442"" rel=""nofollow noreferrer"">https://github.com/dart-lang/source_gen/issues/442</a> if you want to subscribe</p>
","6877472","","","","","2020-01-06 14:05:12","","","","0","","",""
"56620860","2","","56436559","2019-06-16 16:54:01","","10","","<h1>As of Xcode 11 beta 3</h1>

<blockquote>
  <p>There is now the <a href=""https://developer.apple.com/documentation/uikit/uisegmentedcontrol/3335209-selectedsegmenttintcolor"" rel=""noreferrer""><code>selectedSegmentTintColor</code></a> property on <code>UISegmentedControl</code>.</p>
</blockquote>

<p>Thank you @rmaddy!</p>

<hr>

<h1>Original answer, for Xcode 11 beta and beta 2</h1>

<blockquote>
  <p>Is there a proper solution, using public APIs, that doesn't require digging into the private subview structure?</p>
</blockquote>

<p>With Xcode 11.0 beta, it seems to be a challenge to do it by-the-rules, because it basically requires to redraw all the background images for every states by yourself, with round corners, transparency and <code>resizableImage(withCapInsets:)</code>. For instance, you would need to generate a colored image similar to:<br>
<a href=""https://i.stack.imgur.com/GFej9.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/GFej9.png"" alt=""enter image description here""></a></p>

<p>So for now, the let's-dig-into-the-subviews way seems much easier:</p>

<pre><code>class TintedSegmentedControl: UISegmentedControl {

    override func layoutSubviews() {
        super.layoutSubviews()

        if #available(iOS 13.0, *) {
            for subview in subviews {
                if let selectedImageView = subview.subviews.last(where: { $0 is UIImageView }) as? UIImageView,
                    let image = selectedImageView.image {
                    selectedImageView.image = image.withRenderingMode(.alwaysTemplate)
                    break
                }
            }
        }
    }
}
</code></pre>

<p>This solution will correctly apply the tint color to the selection, as in:
<a href=""https://i.stack.imgur.com/Z5KcA.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/Z5KcA.png"" alt=""enter image description here""></a></p>
","1033581","","1033581","","2019-07-03 17:37:21","2019-07-03 17:37:21","","","","4","","",""
"56695191","2","","56657639","2019-06-20 23:49:46","","0","","<p>EDIT: Found a workaround, but it might not work some day.</p>

<p>It uses reflection to get the real path of the StorageVolume instance, and it uses what I had before to get the path of persistedUriPermissions . If there are intersections between them, it means I have access to the storageVolume.</p>

<p>Seems to work on emulator, which finally has both internal storage and SD-card.</p>

<p>Hopefully we will get proper API and not need to use reflections.</p>

<p>If there is a better way to do it, without those kinds of tricks, please let me know.</p>

<p>So, here's an example:</p>

<p><strong>MainActivity.kt</strong></p>

<pre><code>class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        val storageManager = getSystemService(Context.STORAGE_SERVICE) as StorageManager
        val storageVolumes = storageManager.storageVolumes
        val primaryVolume = storageManager.primaryStorageVolume
        checkAccessButton.setOnClickListener {
            val persistedUriPermissions = contentResolver.persistedUriPermissions
            val storageVolumePathsWeHaveAccessTo = HashSet&lt;String&gt;()
            Log.d(""AppLog"", ""got access to paths:"")
            for (persistedUriPermission in persistedUriPermissions) {
                val path = FileUtilEx.getFullPathFromTreeUri(this, persistedUriPermission.uri)
                        ?: continue
                Log.d(""AppLog"", ""path: $path"")
                storageVolumePathsWeHaveAccessTo.add(path)
            }
            Log.d(""AppLog"", ""storage volumes:"")
            for (storageVolume in storageVolumes) {
                val volumePath = FileUtilEx.getVolumePath(storageVolume)
                if (volumePath == null) {
                    Log.d(""AppLog"", ""storageVolume \""${storageVolume.getDescription(this)}\"" - failed to get volumePath"")
                } else {
                    val hasAccess = storageVolumePathsWeHaveAccessTo.contains(volumePath)
                    Log.d(""AppLog"", ""storageVolume \""${storageVolume.getDescription(this)}\"" - volumePath:$volumePath - gotAccess? $hasAccess"")
                }
            }
        }
        requestAccessButton.setOnClickListener {
            val intent = primaryVolume.createOpenDocumentTreeIntent()
            startActivityForResult(intent, 1)
        }
    }

    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
        super.onActivityResult(requestCode, resultCode, data)
        Log.d(""AppLog"", ""resultCode:$resultCode"")
        val uri = data?.data ?: return
        val takeFlags = Intent.FLAG_GRANT_READ_URI_PERMISSION or Intent.FLAG_GRANT_WRITE_URI_PERMISSION
        contentResolver.takePersistableUriPermission(uri, takeFlags)
        val fullPathFromTreeUri = FileUtilEx.getFullPathFromTreeUri(this, uri)
        Log.d(""AppLog"", ""granted uri:$uri $fullPathFromTreeUri"")
    }
}
</code></pre>

<p><strong>FileUtilEx.java</strong></p>

<pre><code>/**
 * Get the full path of a document from its tree URI.
 *
 * @param treeUri The tree RI.
 * @return The path (without trailing file separator).
 */
public static String getFullPathFromTreeUri(Context context, final Uri treeUri) {
    if (treeUri == null)
        return null;
    String volumePath = getVolumePath(context, getVolumeIdFromTreeUri(treeUri));
    if (volumePath == null)
        return File.separator;
    if (volumePath.endsWith(File.separator))
        volumePath = volumePath.substring(0, volumePath.length() - 1);
    String documentPath = getDocumentPathFromTreeUri(treeUri);
    if (documentPath.endsWith(File.separator))
        documentPath = documentPath.substring(0, documentPath.length() - 1);
    if (documentPath.length() &gt; 0)
        if (documentPath.startsWith(File.separator))
            return volumePath + documentPath;
        else return volumePath + File.separator + documentPath;
    return volumePath;
}

public static String getVolumePath(StorageVolume storageVolume){
    if (VERSION.SDK_INT &lt; VERSION_CODES.LOLLIPOP)
        return null;
    try{
        final Class&lt;?&gt; storageVolumeClazz = StorageVolume.class;
        final Method getPath = storageVolumeClazz.getMethod(""getPath"");
        return (String) getPath.invoke(storageVolume);
    } catch (NoSuchMethodException | IllegalAccessException | InvocationTargetException e) {
        e.printStackTrace();
    }
    return null;
}

/**
 * Get the path of a certain volume.
 *
 * @param volumeId The volume id.
 * @return The path.
 */
@SuppressLint(""ObsoleteSdkInt"")
private static String getVolumePath(Context context, final String volumeId) {
    if (Build.VERSION.SDK_INT &lt; Build.VERSION_CODES.LOLLIPOP)
        return null;
    try {
        final StorageManager storageManager = (StorageManager) context.getSystemService(Context.STORAGE_SERVICE);
        if (android.os.Build.VERSION.SDK_INT &gt;= android.os.Build.VERSION_CODES.N) {
            final Class&lt;?&gt; storageVolumeClazz = StorageVolume.class;
            //noinspection JavaReflectionMemberAccess
            final Method getPath = storageVolumeClazz.getMethod(""getPath"");
            final List&lt;StorageVolume&gt; storageVolumes = storageManager.getStorageVolumes();
            for (final StorageVolume storageVolume : storageVolumes) {
                final String uuid = storageVolume.getUuid();
                final boolean primary = storageVolume.isPrimary();
                // primary volume?
                if (primary &amp;&amp; PRIMARY_VOLUME_NAME.equals(volumeId)) {
                    return (String) getPath.invoke(storageVolume);
                }
                // other volumes?
                if (uuid != null &amp;&amp; uuid.equals(volumeId))
                    return (String) getPath.invoke(storageVolume);
            }
            return null;
        }
        final Class&lt;?&gt; storageVolumeClazz = Class.forName(""android.os.storage.StorageVolume"");
        final Method getVolumeList = storageManager.getClass().getMethod(""getVolumeList"");
        final Method getUuid = storageVolumeClazz.getMethod(""getUuid"");
        //noinspection JavaReflectionMemberAccess
        final Method getPath = storageVolumeClazz.getMethod(""getPath"");
        final Method isPrimary = storageVolumeClazz.getMethod(""isPrimary"");
        final Object result = getVolumeList.invoke(storageManager);
        final int length = Array.getLength(result);
        for (int i = 0; i &lt; length; i++) {
            final Object storageVolumeElement = Array.get(result, i);
            final String uuid = (String) getUuid.invoke(storageVolumeElement);
            final Boolean primary = (Boolean) isPrimary.invoke(storageVolumeElement);
            // primary volume?
            if (primary &amp;&amp; PRIMARY_VOLUME_NAME.equals(volumeId)) {
                return (String) getPath.invoke(storageVolumeElement);
            }
            // other volumes?
            if (uuid != null &amp;&amp; uuid.equals(volumeId))
                return (String) getPath.invoke(storageVolumeElement);
        }
        // not found.
        return null;
    } catch (Exception ex) {
        return null;
    }
}

/**
 * Get the document path (relative to volume name) for a tree URI (LOLLIPOP).
 *
 * @param treeUri The tree URI.
 * @return the document path.
 */
@TargetApi(VERSION_CODES.LOLLIPOP)
private static String getDocumentPathFromTreeUri(final Uri treeUri) {
    final String docId = DocumentsContract.getTreeDocumentId(treeUri);
    //TODO avoid using spliting of a string (because it uses extra strings creation)
    final String[] split = docId.split("":"");
    if ((split.length &gt;= 2) &amp;&amp; (split[1] != null))
        return split[1];
    else
        return File.separator;
}

/**
 * Get the volume ID from the tree URI.
 *
 * @param treeUri The tree URI.
 * @return The volume ID.
 */
@TargetApi(VERSION_CODES.LOLLIPOP)
private static String getVolumeIdFromTreeUri(final Uri treeUri) {
    final String docId = DocumentsContract.getTreeDocumentId(treeUri);
    final int end = docId.indexOf(':');
    String result = end == -1 ? null : docId.substring(0, end);
    return result;
}
</code></pre>

<p><strong>activity_main.xml</strong></p>

<pre><code>&lt;LinearLayout
  xmlns:android=""http://schemas.android.com/apk/res/android"" xmlns:tools=""http://schemas.android.com/tools"" android:layout_width=""match_parent"" android:layout_height=""match_parent""
  android:gravity=""center"" android:orientation=""vertical"" tools:context="".MainActivity""&gt;

  &lt;Button
    android:id=""@+id/checkAccessButton"" android:layout_width=""wrap_content"" android:layout_height=""wrap_content"" android:text=""checkAccess""/&gt;

  &lt;Button
    android:id=""@+id/requestAccessButton"" android:layout_width=""wrap_content"" android:layout_height=""wrap_content"" android:text=""requestAccess""/&gt;

&lt;/LinearLayout&gt;
</code></pre>

<p>To put it in a simple function, here:</p>

<pre><code>/** for each storageVolume, tells if we have access or not, via a HashMap (true for each iff we identified it has access*/
fun getStorageVolumesAccessState(context: Context): HashMap&lt;StorageVolume, Boolean&gt; {
    val storageManager = context.getSystemService(Context.STORAGE_SERVICE) as StorageManager
    val storageVolumes = storageManager.storageVolumes
    val persistedUriPermissions = context.contentResolver.persistedUriPermissions
    val storageVolumePathsWeHaveAccessTo = HashSet&lt;String&gt;()
    //            Log.d(""AppLog"", ""got access to paths:"")
    for (persistedUriPermission in persistedUriPermissions) {
        val path = FileUtilEx.getFullPathFromTreeUri(context, persistedUriPermission.uri)
                ?: continue
        //                Log.d(""AppLog"", ""path: $path"")
        storageVolumePathsWeHaveAccessTo.add(path)
    }
    //            Log.d(""AppLog"", ""storage volumes:"")
    val result = HashMap&lt;StorageVolume, Boolean&gt;(storageVolumes.size)
    for (storageVolume in storageVolumes) {
        val volumePath = FileUtilEx.getVolumePath(storageVolume)
        val hasAccess = volumePath != null &amp;&amp; storageVolumePathsWeHaveAccessTo.contains(volumePath)
        result[storageVolume] = hasAccess
    }
    return result
}
</code></pre>
","878126","","878126","","2019-06-24 21:57:00","2019-06-24 21:57:00","","","","0","","",""
"56727419","2","","56436559","2019-06-23 20:15:01","","4","","<p>Here is my take on Jonathan.'s answer for Xamarin.iOS (C#), but with fixes for image sizing. As with Cœur's comment on Colin Blake's answer, I made all images except the divider the size of the segmented control. The divider is 1xheight of the segment. </p>

<pre class=""lang-cs prettyprint-override""><code>public static UIImage ImageWithColor(UIColor color, CGSize size)
{
    var rect = new CGRect(0, 0, size.Width, size.Height);
    UIGraphics.BeginImageContext(rect.Size);
    var context = UIGraphics.GetCurrentContext();
    context.SetFillColor(color.CGColor);
    context.FillRect(rect);
    var image = UIGraphics.GetImageFromCurrentImageContext();
    UIGraphics.EndImageContext();
    return image;
}

// https://stackoverflow.com/a/56465501/420175
public static void ColorSegmentiOS13(UISegmentedControl uis, UIColor tintColor, UIColor textSelectedColor, UIColor textDeselectedColor)
{
    if (!UIDevice.CurrentDevice.CheckSystemVersion(13, 0))
    {
        return;
    }

    UIImage image(UIColor color)
    {
        return ImageWithColor(color, uis.Frame.Size);
    }

    UIImage imageDivider(UIColor color)
    {
        return ImageWithColor(color, 1, uis.Frame.Height);
    }

    // Must set the background image for normal to something (even clear) else the rest won't work
    //setBackgroundImage(UIImage(color: backgroundColor ?? .clear), for: .normal, barMetrics: .default)
    uis.SetBackgroundImage(image(UIColor.Clear), UIControlState.Normal, UIBarMetrics.Default);

    // setBackgroundImage(tintColorImage, for: .selected, barMetrics: .default)
    uis.SetBackgroundImage(image(tintColor), UIControlState.Selected, UIBarMetrics.Default);

    // setBackgroundImage(UIImage(color: tintColor.withAlphaComponent(0.2)), for: .highlighted, barMetrics: .default)
    uis.SetBackgroundImage(image(tintColor.ColorWithAlpha(0.2f)), UIControlState.Highlighted, UIBarMetrics.Default);

    // setBackgroundImage(tintColorImage, for: [.highlighted, .selected], barMetrics: .default)
    uis.SetBackgroundImage(image(tintColor), UIControlState.Highlighted | UIControlState.Selected, UIBarMetrics.Default);

    // setTitleTextAttributes([.foregroundColor: tintColor, NSAttributedString.Key.font: UIFont.systemFont(ofSize: 13, weight: .regular)], for: .normal)
    // Change: support distinct color for selected/de-selected; keep original font
    uis.SetTitleTextAttributes(new UITextAttributes() { TextColor = textDeselectedColor }, UIControlState.Normal); //Font = UIFont.SystemFontOfSize(13, UIFontWeight.Regular)
    uis.SetTitleTextAttributes(new UITextAttributes() { TextColor = textSelectedColor, }, UIControlState.Selected); //Font = UIFont.SystemFontOfSize(13, UIFontWeight.Regular)

    // setDividerImage(tintColorImage, forLeftSegmentState: .normal, rightSegmentState: .normal, barMetrics: .default)
    uis.SetDividerImage(imageDivider(tintColor), UIControlState.Normal, UIControlState.Normal, UIBarMetrics.Default);

    //layer.borderWidth = 1
    uis.Layer.BorderWidth = 1;

    //layer.borderColor = tintColor.cgColor
    uis.Layer.BorderColor = tintColor.CGColor;
}
</code></pre>
","420175","","1033581","","2019-06-24 01:34:05","2019-06-24 01:34:05","","","","0","","",""
"57798602","2","","55212788","2019-09-05 04:50:43","","-1","","<blockquote>
  <p>What is the way to merge those all into one APK file?</p>
</blockquote>

<p>After installing (see question 2), use eg TotalCommander to copy the apk from
 'installed apps'</p>

<blockquote>
  <p>Is it possible to install split APK files without root and without PC ? </p>
</blockquote>

<p>Use any terminal app, then:</p>

<pre><code> pm install &lt;split1&gt; &lt;split2&gt; ...
</code></pre>
","12023163","","4099593","","2019-09-05 05:13:39","2019-09-05 05:13:39","","","","1","","",""
"58278392","2","","58278260","2019-10-07 23:40:11","","19","","<h3>TL;DR</h3>

<p>It appears that Apple considers <code>/usr/include</code> as something that has gone the way of the dodo — it is extinct — or maybe it's like Monty Python's <a href=""https://www.dailymotion.com/video/x2hwqnp"" rel=""noreferrer"">Parrot</a>.</p>

<p>Using the Apple-provided GCC (actually, that's Clang by any other name, as the version information shows) or Clang avoids problems.  Both <code>/usr/bin/gcc</code> and <code>/usr/bin/clang</code> will find the system libraries four directory levels below:</p>

<pre><code>/Applications/Xcode.app/Contents/Developer/Platforms/…
</code></pre>

<p>If you build your own GCC or other compiler, you will (probably) need to configure it to find the system libraries under the Xcode application directory.</p>

<h3>Explorations</h3>

<p>Immediately after the upgrade, I ran XCode 11.0.  It wanted to install some extra components, so I let it do so.  However, that did not reinstate <code>/usr/include</code> or the directory under <code>/Library</code>.</p>

<p>One of the other bits of advice in the previous <a href=""https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave"">question</a> was to run:</p>

<blockquote>
<pre><code>xcode-select --install
</code></pre>
</blockquote>

<p>When doing so, it claimed that it downloaded the command line utilities, and it ensured that <code>/usr/bin/gcc</code> and <code>/usr/bin/clang</code> etc were present.  That's a useful step (though I didn't definitively check whether they were present before).</p>

<pre><code>$ /usr/bin/gcc --version
Configured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include/c++/4.2.1
Apple clang version 11.0.0 (clang-1100.0.33.8)
Target: x86_64-apple-darwin19.0.0
Thread model: posix
InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
$
</code></pre>

<p>Using <code>/usr/bin/gcc</code>, it is now possible to compile programs:</p>

<pre><code>$ make CC=/usr/bin/gcc al
co  RCS/al.c,v al.c
RCS/al.c,v  --&gt;  al.c
revision 1.7
done
/usr/bin/gcc -I/Users/jleffler/inc -g -O3 -std=c11 -pedantic -Wall -Wextra -Werror -Wshadow -Wmissing-prototypes -Wpointer-arith  -Wold-style-definition -Wcast-qual -Wstrict-prototypes -DHAVE_MEMMEM -DHAVE_STRNDUP -DHAVE_STRNLEN  -DHAVE_GETDELIM   -o al al.c -L/Users/jleffler/lib/64  -ljl
$
</code></pre>

<p>However, <code>/usr/include</code> is still missing.  There is a directory under <code>/Library</code> now:</p>

<pre><code>$ ls /Library/Developer
CommandLineTools  PrivateFrameworks
$ ls /Library/Developer/CommandLineTools
Library SDKs    usr
$ ls /Library/Developer/CommandLineTools/SDKs
MacOSX.sdk      MacOSX10.14.sdk MacOSX10.15.sdk
$ ls /Library/Developer/CommandLineTools/SDKs/MacOSX10.15.sdk/
Entitlements.plist SDKSettings.json   System
Library            SDKSettings.plist  usr
$
</code></pre>

<p>Neither the <code>System</code> nor the <code>Library</code> directory contain anything very promising.</p>

<h3>When all else fails, read the manual</h3>

<p>Next step — find and read the release notes:</p>

<ul>
<li><a href=""https://developer.apple.com/documentation/xcode_release_notes/xcode_11_release_notes"" rel=""noreferrer"">Xcode 11 Release Notes</a></li>
<li><a href=""https://developer.apple.com/documentation/macos_release_notes/macos_catalina_10_15_release_notes"" rel=""noreferrer"">macOS Catalina 10.15 Release Notes</a></li>
</ul>

<p>There's no information in there that relates to this.  So, the probability is (AFAICS, after only an hour or two's effort) that Apple no longer support <code>/usr/include</code> — though it does still have a fully-loaded <code>/usr/lib</code> (no <code>/lib</code> though).</p>

<p>Time to check another compilation with GCC option <code>-v</code> added (in the makefile I used, setting <code>UFLAGS</code> adds the option to C compiler command line):</p>

<pre><code>$ make UFLAGS=-v CC=/usr/bin/gcc ww
co  RCS/ww.c,v ww.c
RCS/ww.c,v  --&gt;  ww.c
revision 4.9
done
/usr/bin/gcc -I/Users/jleffler/inc -g -O3 -std=c11 -pedantic -Wall -Wextra -Werror -Wshadow -Wmissing-prototypes -Wpointer-arith  -Wold-style-definition -Wcast-qual -Wstrict-prototypes -DHAVE_MEMMEM -DHAVE_STRNDUP -DHAVE_STRNLEN  -DHAVE_GETDELIM -v  -o ww ww.c -L/Users/jleffler/lib/64  -ljl
Apple clang version 11.0.0 (clang-1100.0.33.8)
Target: x86_64-apple-darwin19.0.0
Thread model: posix
InstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin
 ""/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang"" -cc1 -triple x86_64-apple-macosx10.15.0 -Wdeprecated-objc-isa-usage -Werror=deprecated-objc-isa-usage -emit-obj -disable-free -disable-llvm-verifier -discard-value-names -main-file-name ww.c -mrelocation-model pic -pic-level 2 -mthread-model posix -mdisable-fp-elim -fno-strict-return -masm-verbose -munwind-tables -target-sdk-version=10.15 -target-cpu penryn -dwarf-column-info -debug-info-kind=standalone -dwarf-version=4 -debugger-tuning=lldb -ggnu-pubnames -target-linker-version 512.4 -v -resource-dir /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/11.0.0 -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -I /Users/jleffler/inc -D HAVE_MEMMEM -D HAVE_STRNDUP -D HAVE_STRNLEN -D HAVE_GETDELIM -I/usr/local/include -O3 -Wall -Wextra -Werror -Wshadow -Wmissing-prototypes -Wpointer-arith -Wold-style-definition -Wcast-qual -Wstrict-prototypes -Wno-framework-include-private-from-public -Wno-atimport-in-framework-header -Wno-extra-semi-stmt -Wno-quoted-include-in-framework-header -pedantic -std=c11 -fdebug-compilation-dir /Users/jleffler/src/cmd -ferror-limit 19 -fmessage-length 110 -stack-protector 1 -fstack-check -mdarwin-stkchk-strong-link -fblocks -fencode-extended-block-signature -fregister-global-dtors-with-atexit -fobjc-runtime=macosx-10.15.0 -fmax-type-align=16 -fdiagnostics-show-option -fcolor-diagnostics -vectorize-loops -vectorize-slp -o /var/folders/77/zx9nk6dn7_dg4xd4stvt42v00000gn/T/ww-4cb85b.o -x c ww.c
clang -cc1 version 11.0.0 (clang-1100.0.33.8) default target x86_64-apple-darwin19.0.0
ignoring nonexistent directory ""/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/local/include""
ignoring nonexistent directory ""/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/Library/Frameworks""
#include ""..."" search starts here:
#include &lt;...&gt; search starts here:
 /Users/jleffler/inc
 /usr/local/include
 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/11.0.0/include
 /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/include
 /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include
 /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/System/Library/Frameworks (framework directory)
End of search list.
 ""/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/ld"" -demangle -lto_library /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/libLTO.dylib -dynamic -arch x86_64 -macosx_version_min 10.15.0 -syslibroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk -o ww -L/Users/jleffler/lib/64 /var/folders/77/zx9nk6dn7_dg4xd4stvt42v00000gn/T/ww-4cb85b.o -ljl -L/usr/local/lib -lSystem /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/lib/clang/11.0.0/lib/darwin/libclang_rt.osx.a
 ""/Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/dsymutil"" -o ww.dSYM ww
$
</code></pre>

<p>The key information in that blizzard of data is:</p>

<pre><code>-isysroot /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk
</code></pre>

<p>That's effectively the 'root' directory for the compilation, so there should be sub-directories under that for <code>usr</code> and <code>usr/include</code>:</p>

<pre><code>$ ls /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk
Entitlements.plist SDKSettings.json   System
Library            SDKSettings.plist  usr
$ ls /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr
bin     include lib     libexec share
$ ls /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include
AppleTextureEncoder.h  dns_util.h             memory.h               simd
AssertMacros.h         dtrace.h               menu.h                 slapi-plugin.h
Availability.h         editline               miscfs                 spawn.h
AvailabilityInternal.h err.h                  module.modulemap       sqlite3.h
AvailabilityMacros.h   errno.h                monetary.h             sqlite3ext.h
AvailabilityVersions.h eti.h                  monitor.h              stab.h
…lots more lines…
dirent.h               mach-o                 security               xcselect.h
disktab.h              mach_debug             semaphore.h            xlocale
dispatch               machine                servers                xlocale.h
dlfcn.h                malloc                 setjmp.h               xpc
dns.h                  math.h                 sgtty.h                zconf.h
dns_sd.h               membership.h           signal.h               zlib.h
$
</code></pre>

<p>This shows that the mile-long and totally unmemorable directory name does contain the standard C and POSIX headers, plus Apple-specific extras.</p>

<p>The previous <code>/usr/local/</code> directory appears to be intact; the warning about <code>usr/local/include</code> not existing under the <code>-isysrootdir</code> is harmless (and not visible without the <code>-v</code> option).</p>
","15168","","15168","","2019-10-08 00:19:32","2019-10-08 00:19:32","","","","9","","",""
"58323411","2","","58278260","2019-10-10 12:55:04","","28","","<p>For me adding the following path to <code>CPATH</code> solved the issue:</p>

<pre><code>export CPATH=/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX.sdk/usr/include
</code></pre>
","12195198","","15168","","2019-10-11 11:23:03","2019-10-11 11:23:03","","","","6","","",""
"58349403","2","","58278260","2019-10-11 23:06:43","","43","","<p>Before you proceed, make sure to install xcode command line tools.</p>

<pre><code>xcode-select --install
</code></pre>

<p>Actually, you can do it! Actually all the C headers are found here in this folder:</p>

<pre><code>/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/
</code></pre>

<p>We just need to create symlink for all the headers file into this folder:</p>

<pre><code>/usr/local/include/
</code></pre>

<p>It worked for me! the following command line will take care of all the problems:</p>

<pre><code>sudo ln -s /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/* /usr/local/include/
</code></pre>

<p>You will get some warning. Some of the headers already exists, like this:</p>

<pre><code>ln: /usr/local/include//tcl.h: File exists
ln: /usr/local/include//tclDecls.h: File exists
ln: /usr/local/include//tclPlatDecls.h: File exists
ln: /usr/local/include//tclTomMath.h: File exists
ln: /usr/local/include//tclTomMathDecls.h: File exists
ln: /usr/local/include//tk.h: File exists
ln: /usr/local/include//tkDecls.h: File exists
ln: /usr/local/include//tkPlatDecls.h: File exists
</code></pre>

<p>totally ok to ignore. that's all.</p>
","2673692","","2673692","","2019-10-11 23:12:45","2019-10-11 23:12:45","","","","10","","",""
"58359366","2","","58278260","2019-10-12 23:18:49","","7","","<p>Set the following implicit <code>Make</code> variables to point to where the headers are now located for Xcode Command Line Tools (Xcode CLI): </p>

<pre class=""lang-sh prettyprint-override""><code>export CFLAGS+=-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
export CCFLAGS+=-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
export CXXFLAGS+=-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
export CPPFLAGS+=-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
</code></pre>

<p>The <a href=""https://clang.llvm.org/docs/ClangCommandLineReference.html#cmdoption-clang-isysroot-dir"" rel=""nofollow noreferrer""><code>-isysroot</code> option</a> updates the location of the root files away from the system root directory <code>/</code>.</p>

<p>So, this ensures that the common <code>/usr/*</code> files are found in their new place.</p>

<p>That is, the files at <code>/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk</code> are now found. These files are: </p>

<pre><code>Entitlements.plist 
Library
SDKSettings.json
SDKSettings.plist
System
usr
</code></pre>
","1345455","","1345455","","2019-12-04 16:19:44","2019-12-04 16:19:44","","","","5","","",""
"58363901","2","","58278260","2019-10-13 13:12:14","","0","","<p>apue.h dependency was still missing in my <code>/usr/local/include</code> after following <strong>Komol Nath Roy</strong> answer in this question.</p>

<p>I downloaded the dependency manually from git and placed it in <code>/usr/local/include</code></p>
","3861691","","","","","2019-10-13 13:12:14","","","","3","","",""
"58381033","2","","58278260","2019-10-14 16:52:15","","3","","<p>I am a newbie with C++ compiler for R in OSX and I got the same issue that C++ could not find the header after OS was updated (<em>missing math.h although it was there</em>). I followed instructions from  <a href=""https://thecoatlessprofessor.com/programming/cpp/r-compiler-tools-for-rcpp-on-macos/"" rel=""nofollow noreferrer"">https://thecoatlessprofessor.com/programming/cpp/r-compiler-tools-for-rcpp-on-macos/</a> but nothing changed.</p>

<p>Finally, it worked for me after I reinstalled the Xcode CLI</p>

<pre><code>xcode-select --install
</code></pre>

<p>and then change the flags to Var as @Coatless suggested:</p>

<pre><code>export CFLAGS=-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
export CCFLAGS=-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
export CXXFLAGS=-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
export CPPFLAGS=-isysroot /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
</code></pre>
","12215823","","12215823","","2019-10-14 20:38:10","2019-10-14 20:38:10","","","","0","","",""
"54571297","2","","54506744","2019-02-07 10:32:20","","20","","<p>Add this to your <code>tsconfig.json</code>:</p>

<pre><code>{
  ""compilerOptions"": {
    ...
    ""checkJs"": false
    ...
  }
}
</code></pre>

<p>and stick to <code>.js</code>/<code>.jsx</code> files for now. Use the <code>.ts</code>/<code>.tsx</code> extension only when you're ready to use types.</p>

<p>If you would rather suppress the errors on a per-line basis, you can use a <code>// @ts-ignore</code> comment.</p>
","10325032","","10325032","","2019-02-07 10:38:00","2019-02-07 10:38:00","","","","1","","",""
"57848116","2","","57842756","2019-09-09 05:03:48","","-31","","<p>Take it easy: you don't have to, it is not necessary. -Wall and -Werror was designed by code-refactoring maniacs for themselves: <strong>it was invented by compiler developers to avoid breaking existing builds after compiler updates on the user side</strong>. The feature is nothing, but all about the decision to break or not to break the build.</p>

<p>It is totally up to your preference to use it or not. I use it all the time because it helps me to fix my mistakes.</p>
","2873201","","2873201","","2019-10-07 04:32:16","2019-10-07 04:32:16","","","","5","","",""
"57848301","2","","57842756","2019-09-09 05:27:26","","39","","<p>Warnings consist of the best advice some of the most skilled C++ developers could bake into an application.  They're worth keeping around.</p>

<p>C++, being a Turing complete language, has plenty of cases where the compiler must simply trust that you knew what you are doing.  However, there are many cases where the compiler can realize that you probably did not intend to write what you wrote.   A classic example is printf() codes which don't match the arguments, or std::strings passed to printf (not that that <em>ever</em> happens to me!).  In these cases, the code you wrote is not an error.  It is a valid C++ expression with a valid interpretation for the compiler to act on.  But the compiler has a strong hunch that you simply overlooked something which is easy for a modern compiler to detect.  These are warnings.  They are things that are obvious to a compiler, using all the strict rules of C++ at its disposal, that you might have overlooked.</p>

<p>Turning warnings off, or ignoring them, is like choosing to ignore free advice from those more skilled than you.  Its a lesson in huberis that ends either when you fly too close to the sun and your wings melt, or a memory corruption error occurs.  Between the two, I'll take falling from the sky any day!</p>

<p>""Treat warnings as errors"" is the extreme version of this philosophy.  The idea here is that you resolve <em>every</em> warning the compiler gives you -- you listen to every bit of free advice and act on it.  Whether this is a good model for development for you depends on the team and what kind of product you are working on.  It's the ascetic approach that a monk might have.  For some, it works great.  For others, it does not.</p>

<p>On many of my applications we do not treat warnings as errors.  We do this because these particular applications need to compile on several platforms with several compilers of varying ages.  Sometimes we find it is actually impossible to fix a warning on one side without it turning into a warning on another platform.  So we are merely careful.  We respect warnings, but we don't bend over backwards for them.</p>
","2728148","","","","","2019-09-09 05:27:26","","","","17","","",""
"57849551","2","","57842756","2019-09-09 07:29:42","","19","","<p>Not only does handling the warnings make better code, it makes you a better programmer. Warnings will tell you about things that may seem little to you today, but one day that bad habit will come back and bite your head off. </p>

<p>Use the correct type, return that value, evaluate that return value. Take time and reflect ""Is this really the correct type in this context?"" ""Do I need to return this?"" And the biggie; ""Is this code going to be portable for the next 10 years?""</p>

<p>Get into the habit of writing warning-free code in the first place.</p>
","716681","","","","","2019-09-09 07:29:42","","","","0","","",""
"57850358","2","","57842756","2019-09-09 08:30:32","","13","","<p>Treating warnings as errors is just a mean of self-discipline: you were compiling a program to test that shiny new feature, but you <strong>can't</strong> until you fix the sloppy parts. There is no additional information <code>Werror</code> provides, it just sets priorities very clearly:</p>

<blockquote>
  <p>Don't add new code until you fix problems in the existing code</p>
</blockquote>

<p>It's really the mindset that's important, not the tools. Compiler diagnostics output is a tool. MISRA (for embedded C) is another tool. It doesn't matter which one you use, but arguably compiler warnings is the easiest tool you can get (it's just one flag to set) and the signal to noise ratio is very high. So there's no reason <em>not</em> to use it.</p>

<p>No tool is infallible. If you write <code>const float pi = 3.14;</code>, most tools won't tell you that you defined π with a bad precision which may lead to problems down the road. Most tools won't raise an eyebrow on <code>if(tmp &lt; 42)</code>, even if it's commonly known that giving variables meaningless names and using magic numbers is a way to disaster in big projects. <em>You</em> have to understand that any ""quick test"" code you write is just that: a test, and you have to get it right before you move on to other tasks, while you still see its shortcomings. If you leave that codes as is, debugging if after you spend two months adding new features will be significantly harder.</p>

<p>Once you get into the right mindset, there is no point in using <code>Werror</code>. Having warnings as warnings will allow you to take an informed decision whether it still makes sense to run that debug session you were about to start, or to abort it and fix the warnings first.</p>
","4350586","","4350586","","2019-10-05 11:09:35","2019-10-05 11:09:35","","","","3","","",""
"56782485","2","","56657639","2019-06-27 00:28:43","","1","","<p>Here is an alternate way to get what you want. It is a work-around like you have posted without using reflection or file paths.</p>

<p>On an emulator, I see the following items for which I have permitted access.</p>

<p>persistedUriPermissions array contents (value of URI only):</p>

<blockquote>
  <p>0 uri = content://com.android.externalstorage.documents/tree/primary%3A<br/>
   1 uri = content://com.android.externalstorage.documents/tree/1D03-2E0E%3ADownload<br/>
   2 uri = content://com.android.externalstorage.documents/tree/1D03-2E0E%3A<br/>
   3 uri = content://com.android.externalstorage.documents/tree/primary%3ADCIM<br/>
   4 uri = content://com.android.externalstorage.documents/tree/primary%3AAlarms</p>
</blockquote>

<p>""%3A"" is a colon ("":""). So, it appears that the URI is constructed as follows for a volume where ""&lt;volume>"" is the UUID of the volume.</p>

<blockquote>
  <p>uri = ""content://com.android.externalstorage.documents/tree/&lt;volume>:""</p>
</blockquote>

<p>If the uri is a directory directly under a volume, then the structure is:</p>

<blockquote>
  <p>uri = ""content://com.android.externalstorage.documents/tree/&lt;volume>:&lt;directory>""</p>
</blockquote>

<p>For directories deeper in the structure, the format is:</p>

<blockquote>
  <p>uri = ""content://com.android.externalstorage.documents/tree/&lt;volume>:&lt;directory>/&lt;directory>/&lt;directory>...""</p>
</blockquote>

<p>So, it is just a matter of extracting volumes from URIs in these formats. The volume extracted can be used as a key for <code>StorageManager.storageVolumes</code>. The following code does just this.</p>

<p>It seems to me that there should be an easier way to go about this. There must be a missing linkage in the API between storage volumes and URIs. I can't say that this technique covers all circumstances.</p>

<p>I also question the UUID that is returned by <code>storageVolume.uuid</code> which seems to be a 32-bit value. I thought that UUIDs are 128 bits in length. Is this an alternative format for a UUID or somehow derived from the UUID? Interesting, and it is all about to drop! :(</p>

<p><strong>MainActivity.kt</strong></p>

<pre><code>class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)

        val storageManager = getSystemService(Context.STORAGE_SERVICE) as StorageManager
        var storageVolumes = storageManager.storageVolumes
        val storageVolumePathsWeHaveAccessTo = HashSet&lt;String&gt;()

        checkAccessButton.setOnClickListener {
            checkAccessToStorageVolumes()
        }

        requestAccessButton.setOnClickListener {
            storageVolumes = storageManager.storageVolumes
            val primaryVolume = storageManager.primaryStorageVolume
            val intent = primaryVolume.createOpenDocumentTreeIntent()
            startActivityForResult(intent, 1)
        }
    }

    private fun checkAccessToStorageVolumes() {
        val storageVolumePathsWeHaveAccessTo = HashSet&lt;String&gt;()
        val persistedUriPermissions = contentResolver.persistedUriPermissions
        persistedUriPermissions.forEach {
            storageVolumePathsWeHaveAccessTo.add(it.uri.toString())
        }
        val storageManager = getSystemService(Context.STORAGE_SERVICE) as StorageManager
        val storageVolumes = storageManager.storageVolumes

        for (storageVolume in storageVolumes) {
            val uuid = if (storageVolume.isPrimary) {
                // Primary storage doesn't get a UUID here.
                ""primary""
            } else {
                storageVolume.uuid
            }
            val volumeUri = uuid?.let { buildVolumeUriFromUuid(it) }
            when {
                uuid == null -&gt; 
                    Log.d(""AppLog"", ""UUID is null for ${storageVolume.getDescription(this)}!"")
                storageVolumePathsWeHaveAccessTo.contains(volumeUri) -&gt; 
                    Log.d(""AppLog"", ""Have access to $uuid"")
                else -&gt; Log.d(""AppLog"", ""Don't have access to $uuid"")
            }
        }
    }

    private fun buildVolumeUriFromUuid(uuid: String): String {
        return DocumentsContract.buildTreeDocumentUri(
            ""com.android.externalstorage.documents"",
            ""$uuid:""
        ).toString()
    }

    override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
        super.onActivityResult(requestCode, resultCode, data)
        Log.d(""AppLog"", ""resultCode:$resultCode"")
        val uri = data?.data ?: return
        val takeFlags =
            Intent.FLAG_GRANT_READ_URI_PERMISSION or Intent.FLAG_GRANT_WRITE_URI_PERMISSION
        contentResolver.takePersistableUriPermission(uri, takeFlags)
        Log.d(""AppLog"", ""granted uri: ${uri.path}"")
    }
}
</code></pre>
","6287910","","6287910","","2019-06-29 21:44:07","2019-06-29 21:44:07","","","","5","","",""
"56874473","2","","56436559","2019-07-03 16:24:43","","118","","<p>As of iOS 13b3, there is now a <code>selectedSegmentTintColor</code> on <code>UISegmentedControl</code>.</p>

<p>To change the overall color of the segmented control use its <code>backgroundColor</code>.</p>

<p>To change the color of the selected segment use <code>selectedSegmentTintColor</code>.</p>

<p>To change the color/font of the unselected segment titles, use <code>setTitleTextAttributes</code> with a state of <code>.normal</code>/<code>UIControlStateNormal</code>.</p>

<p>To change the color/font of the selected segment titles, use <code>setTitleTextAttributes</code> with a state of <code>.selected</code>/<code>UIControlStateSelected</code>.</p>

<p>If you create a segmented control with images, if the images are created as template images, then the segmented control's <code>tintColor</code> will be used to color the images. But this has a problem. If you set the <code>tintColor</code> to the same color as <code>selectedSegmentTintColor</code> then the image won't be visible in the selected segment. If you set the <code>tintColor</code> to the same color as <code>backgroundColor</code>, then the images on the unselected segments won't be visible. This means your segmented control with images must use 3 different colors for everything to be visible. Or you can use non-template images and not set the <code>tintColor</code>.</p>

<p>Under iOS 12 or earlier, simply set the segmented control's <code>tintColor</code> or rely on the app's overall tint color.</p>
","1226963","","1226963","","2019-07-04 19:22:08","2019-07-04 19:22:08","","","","8","","",""
"57555264","2","","56436559","2019-08-19 10:50:52","","8","","<pre><code>if (@available(iOS 13.0, *)) {

    [self.segmentedControl setTitleTextAttributes:@{NSForegroundColorAttributeName: [UIColor whiteColor], NSFontAttributeName: [UIFont systemFontOfSize:13]} forState:UIControlStateSelected];
    [self.segmentedControl setSelectedSegmentTintColor:[UIColor blueColor]];

} else {

[self.segmentedControl setTintColor:[UIColor blueColor]];}
</code></pre>
","4960816","","","","","2019-08-19 10:50:52","","","","0","","",""
"57754615","2","","56436559","2019-09-02 09:37:00","","-2","","<p>Expanding a little bit on <strong>Jonathan</strong> answer in case you don't want round corners</p>

<pre><code>extension UISegmentedControl {
    /// Tint color doesn't have any effect on iOS 13.
    func ensureiOS12Style(roundCorner: Bool = true) {
        if #available(iOS 13, *) {
            let tintColorImage = UIImage(color: tintColor)
            // Must set the background image for normal to something (even clear) else the rest won't work
            setBackgroundImage(UIImage(color: backgroundColor ?? .clear), for: .normal, barMetrics: .default)
            setBackgroundImage(tintColorImage, for: .selected, barMetrics: .default)
            setBackgroundImage(UIImage(color: tintColor.withAlphaComponent(0.2)), for: .highlighted, barMetrics: .default)
            setBackgroundImage(tintColorImage, for: [.highlighted, .selected], barMetrics: .default)
            setTitleTextAttributes([.foregroundColor: tintColor, NSAttributedString.Key.font: UIFont.systemFont(ofSize: 13, weight: .regular)], for: .normal)
            setDividerImage(tintColorImage, forLeftSegmentState: .normal, rightSegmentState: .normal, barMetrics: .default)

            if !roundCorner {
                layer.masksToBounds = false

                let borderView = UIView()
                borderView.layer.borderWidth = 1
                borderView.layer.borderColor = UIColor.black.cgColor
                borderView.isUserInteractionEnabled = false
                borderView.translatesAutoresizingMaskIntoConstraints = false

                addSubview(borderView)

                NSLayoutConstraint(item: borderView, attribute: .centerX, relatedBy: .equal, toItem: self, attribute: .centerX, multiplier: 1, constant: 0).isActive = true
                NSLayoutConstraint(item: borderView, attribute: .centerY, relatedBy: .equal, toItem: self, attribute: .centerY, multiplier: 1, constant: 0).isActive = true
                NSLayoutConstraint(item: borderView, attribute: .width, relatedBy: .equal, toItem: self, attribute: .width, multiplier: 1, constant: 0).isActive = true
                NSLayoutConstraint(item: borderView, attribute: .height, relatedBy: .equal, toItem: self, attribute: .height, multiplier: 1, constant: 0).isActive = true
            }
        }
    }
}
</code></pre>
","1528605","","","","","2019-09-02 09:37:00","","","","0","","",""
"56403114","2","","56402988","2019-06-01 00:56:31","","31","","<p>Viewing the whole traceback for a Series comparison with mismatched indexes, particularly focusing on the exception message:</p>

<pre><code>In [1]: import pandas as pd
In [2]: x = pd.Series([1, 2, 3], index=list('abc'))
In [3]: y = pd.Series([2, 3, 3], index=list('bca'))
In [4]: x == y
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
&lt;ipython-input-4-73b2790c1e5e&gt; in &lt;module&gt;()
----&gt; 1 x == y
/usr/lib/python3.7/site-packages/pandas/core/ops.py in wrapper(self, other, axis)
   1188 
   1189         elif isinstance(other, ABCSeries) and not self._indexed_same(othe
r):
-&gt; 1190             raise ValueError(""Can only compare identically-labeled ""
   1191                              ""Series objects"")
   1192 
ValueError: Can only compare identically-labeled Series objects
</code></pre>

<p>we see that this is a deliberate implementation decision. Also, this is not unique to Series objects - DataFrames raise a similar error.</p>

<p>Digging through the Git blame for the relevant lines eventually turns up some relevant commits and issue tracker threads. For example, <code>Series.__eq__</code> used to completely ignore the RHS's index, and in a <a href=""https://github.com/pandas-dev/pandas/issues/1134#issuecomment-5347816"" rel=""noreferrer"">comment</a> on a bug report about that behavior, Pandas author Wes McKinney says the following:</p>

<blockquote>
  <p>This is actually a feature / deliberate choice and not a bug-- it's
  related to <a href=""https://github.com/pandas-dev/pandas/issues/652"" rel=""noreferrer"">#652</a>. Back in January I changed the comparison methods to
  do auto-alignment, but found that it led to a large amount of bugs /
  breakage for users and, in particular, many NumPy functions (which
  regularly do things like <code>arr[1:] == arr[:-1]</code>; example: <code>np.unique</code>)
  stopped working.</p>
  
  <p>This gets back to the issue that Series isn't quite ndarray-like
  enough and should probably not be a subclass of ndarray.</p>
  
  <p>So, I haven't got a good answer for you except for that;
  auto-alignment would be ideal but I don't think I can do it unless I
  make Series not a subclass of ndarray. I think this is probably a good
  idea but not likely to happen until 0.9 or 0.10 (several months down
  the road).</p>
</blockquote>

<p>This was then <a href=""https://github.com/pandas-dev/pandas/commit/5152cdd77ba4799a276d2716535255c3301e9741"" rel=""noreferrer"">changed</a> to the current behavior in pandas 0.19.0. Quoting the <a href=""http://pandas.pydata.org/pandas-docs/version/0.19.0/whatsnew.html#series-operators-for-different-indexes"" rel=""noreferrer"">""what's new"" page</a>:</p>

<blockquote>
  <p>Following Series operators have been changed to make all operators
  consistent, including DataFrame (<a href=""https://github.com/pydata/pandas/issues/1134"" rel=""noreferrer"">GH1134</a>, <a href=""https://github.com/pydata/pandas/issues/4581"" rel=""noreferrer"">GH4581</a>,
  <a href=""https://github.com/pydata/pandas/issues/13538"" rel=""noreferrer"">GH13538</a>)</p>
  
  <ul>
  <li>Series comparison operators now raise ValueError when index are different.</li>
  <li>Series logical operators align both index of left and right hand side.</li>
  </ul>
</blockquote>

<p>This made the Series behavior match that of DataFrame, which already rejected mismatched indices in comparisons.</p>

<p>In summary, making the comparison operators align indices automatically turned out to break too much stuff, so this was the best alternative.</p>
","2357112","","","","","2019-06-01 00:56:31","","","","1","","",""
"57230625","2","","57169862","2019-07-27 08:50:09","","-1","","<p>Since you can get the numpy source onto the machine, I would assume you can get any files you like into your user space. Have you considered installing numpy from a wheel?</p>

<p>Numpy 1.16.4 has support for Python 2.7. You haven't said what architecture your nodes are, but I would be a bit surprised if there isn't a wheel available. You should be able to download it directly from PyPi yourself:</p>

<p><a href=""https://pypi.org/project/numpy/1.16.4/#files"" rel=""nofollow noreferrer"">https://pypi.org/project/numpy/1.16.4/#files</a></p>

<p>Once you've downloaded the wheel file and transferred it, assuming you've already installed <code>pip</code>, etc., you can install it:</p>

<p><code>pip install --no-index --user (file).whl</code></p>

<p>Also, I would be reluctant about saying that ATLAS/LAPACK is the best option. It has been benchmarked here, and it looks like OpenBLAS is just fine: <a href=""https://markus-beuckelmann.de/blog/boosting-numpy-blas.html"" rel=""nofollow noreferrer"">https://markus-beuckelmann.de/blog/boosting-numpy-blas.html</a>.</p>
","761625","","","","","2019-07-27 08:50:09","","","","0","","",""
"54500878","2","","54446734","2019-02-03 07:41:35","","0","","<p>If you want to use the parameter as string, add double ' before and after the parameter name</p>

<p><strong>like this</strong> :</p>

<pre><code>DECLARE @tableName sysname = 'ContentItems'; 

DECLARE @sql nvarchar(max) = N'
        CREATE TRIGGER TR_' + @tableName + N' ON ' + @tableName + N' FOR INSERT
            AS
            BEGIN
               print ''' + @tableName
            +''' END';


    EXEC sp_executesql @sql
</code></pre>

<p>And if you want to use it as table name, use select instead of print ,</p>

<p><strong>like this :</strong></p>

<pre><code>DECLARE @tableName sysname = 'ContentItems';

DECLARE @sql nvarchar(max) = N'
    CREATE TRIGGER TR_' + @tableName + N' ON ' + @tableName + N' FOR INSERT
        AS
        BEGIN
            select * from ' + @tableName
        +' END';


EXEC sp_executesql @sql
</code></pre>
","4369793","","","","","2019-02-03 07:41:35","","","","0","","",""
"54501433","2","","54446734","2019-02-03 09:11:57","","1","","<blockquote>
  <p>Is it possible to issue CREATE statements using sp_executesql with
  parameters?</p>
</blockquote>

<p>The answer is <strong>""Yes""</strong>, but with small adjustment:</p>

<pre><code>USE msdb

DECLARE @tableName sysname = 'sysjobsteps';

DECLARE @sql nvarchar(max) = N'
EXECUTE (''                              -- Added nested EXECUTE()
    CREATE TRIGGER [TR_'' + @tableName + N''] ON ['' + @tableName + N''] FOR INSERT
        AS
        BEGIN
            PRINT '''''+@tableName+'''''
        END''
        )'                            -- End of EXECUTE()


EXEC sp_executesql @sql, N'@tableName sysname', @tableName=@tableName
</code></pre>

<p>Adjsutments list:</p>

<ol>
<li>Extra EXECUTE involved, comment below explains why</li>
<li>Extra square brackets added to make SQL Injections slightly harder</li>
</ol>

<hr>

<blockquote>
  <p>I'm looking for specific (ideally, documented) restrictions of
  sp_executesql with parameters and if there are any workarounds for
  those specific restrictions (beyond not using parameters)</p>
</blockquote>

<p>in this case it is a limitation of DDL commands, not sp_executesql. DDL statements cannot be parametrized using variables. Microsoft documentation says: </p>

<blockquote>
  <p>Variables can be used only in expressions, not in place of <strong>object
  names</strong> or keywords. To construct dynamic SQL statements, use EXECUTE.</p>
</blockquote>

<p>source: <a href=""https://docs.microsoft.com/en-us/sql/t-sql/language-elements/declare-local-variable-transact-sql?view=sql-server-2017"" rel=""nofollow noreferrer"">DECLARE (Transact-SQL)</a></p>

<p>Therefore, the solution with EXECUTE is provided by me as a workaround</p>
","5021687","","5021687","","2019-02-03 11:49:31","2019-02-03 11:49:31","","","","3","","",""
"54507048","2","","54366277","2019-02-03 20:06:37","","1","","<p>So I <a href=""https://github.com/khmarbaise/javaee/commit/b51ccd76fd51e32ca7c3c360e6eba0bb4e451876#diff-e1a6958b3feca268fecd28f2e9aa9620"" rel=""nofollow noreferrer"">have checked via printing out the system properties with some simple tests</a>.</p>

<p>During the tests via maven-surefire-plugin the <code>user.dir</code> will be changed to the root of the appropriate module in a multi module build.</p>

<p>But as I mentioned already there is a system property available <code>basedir</code> which can be used to correctly handle the location for tests which needs to access them via <code>File</code>...The <code>basedir</code> is pointed to the location of the <code>pom.xml</code> of the appropriate module. </p>

<p>But unfortunately the <code>basedir</code> property is <strong>not</strong> set by IDEA IntelliJ during the test run. </p>

<p>But this can be solved by a setup like this:</p>

<pre><code> private String basedir;

 @Before
 public void before() {
    this.basedir = System.getProperty(""basedir"", System.getProperty(""user.dir"", ""Need to think about the default value""));
 }

 @Test
 public void testX() {
   File file = new File(this.basedir, ""src/main/java/com/pany/Foo.java"");
   assertTrue(""Missing file: "" + file.getAbsolutePath(), file.exists());
 }
</code></pre>

<p>This will work in Maven Surefire with <code>-DforkCount=0</code> as well as <code>-DforkCount=1</code> and in IDE's (checked only IDEA IntelliJ).</p>

<p>And yes that is an issue in Maven Surefire plugin changing the <code>user.dir</code>. </p>

<p>We might convince IDE's to support the <code>basedir</code> property as well ? </p>
","296328","","","","","2019-02-03 20:06:37","","","","0","","",""
"57281706","2","","57169862","2019-07-31 00:43:47","","0","","<p>BLAS/LAPACK is an optional dependency for numpy. So, depending on what you are trying to do, you might leave ATLAS out completely.</p>

<p>If you want to make sure that your numpy was compiled against the correct libraries, I would go outside of Python and numpy and use <code>ldd</code> on the compiled libraries.</p>

<p>I'm on latest numpy and Python 3.7, so filenames will look different for you.</p>

<pre><code>&gt; cd &lt;numpy_dir&gt;
&gt; find . -name ""*.so""

./core/_dummy.cpython-37m-darwin.so
./core/_multiarray_tests.cpython-37m-darwin.so
./core/_multiarray_umath.cpython-37m-darwin.so
./core/_operand_flag_tests.cpython-37m-darwin.so
./core/_rational_tests.cpython-37m-darwin.so
./core/_struct_ufunc_tests.cpython-37m-darwin.so
./core/_umath_tests.cpython-37m-darwin.so
./fft/fftpack_lite.cpython-37m-darwin.so
./linalg/_umath_linalg.cpython-37m-darwin.so
./linalg/lapack_lite.cpython-37m-darwin.so
./random/mtrand.cpython-37m-darwin.so
</code></pre>

<p>Then I ran <code>ldd</code> (I used <code>otool -L</code> since I'm on macOS) on each file. The following 3 files were compiled against the BLAS library.</p>

<pre><code>core/_multiarray_umath.cpython-37m-darwin.so
linalg/_umath_linalg.cpython-37m-darwin.so
linalg/lapack_lite.cpython-37m-darwin.so
</code></pre>
","2683776","","","","","2019-07-31 00:43:47","","","","5","","",""
"58456649","2","","58201173","2019-10-18 18:52:19","","2","","<p>This is a tough call considering how little we know about what's occurring in your loading route.</p>

<p>But...</p>

<p>I've never had a need to build a loading route, only ever loading component(s) that gets rendered on multiple routes during init/data gathering stage.</p>

<p>One argument for not having a loading route would be that a user could potentially navigate directly to this URL (accidentally) and then it seems like it wouldn't have enough context to know where to send the user or what action to take. Though this could mean that it falls through to an error route at this point. Overall, not a great experience.</p>

<p>Another is that if you simplify your routes, navigation between routes becomes much simpler and behaves as expected/desired without the use of <code>$router.replace</code>.</p>

<p>I understand this doesn't solve the question in the way you're asking. But I'd suggest rethinking this loading route.</p>

<p><strong>App</strong></p>

<pre><code>&lt;shell&gt;
    &lt;router-view&gt;&lt;/router-view&gt;
&lt;/shell&gt;

const routes = [
  { path: '/', component: Main },
  { path: '/results', component: Results }
]

const router = new VueRouter({
  routes,
})

const app = new Vue({
  router
}).$mount('#app')
</code></pre>

<p><strong>Shell</strong></p>

<pre><code>&lt;div&gt;
    &lt;header&gt;
        &lt;nav&gt;...&lt;/nav&gt;
    &lt;/header&gt;
    &lt;main&gt;
        &lt;slot&gt;&lt;/slot&gt;
    &lt;/main&gt;
&lt;/div&gt;
</code></pre>

<p><strong>Main Page</strong></p>

<pre><code>&lt;section&gt;
    &lt;form&gt;...&lt;/form&gt;
&lt;/section&gt;

{
    methods: {
        onSubmit() {
            // ...

            this.$router.push('/results')
        }
    }
}
</code></pre>

<p><strong>Results Page</strong></p>

<pre><code>&lt;section&gt;
    &lt;error v-if=""error"" :error=""error"" /&gt;
    &lt;results v-if=""!error"" :loading=""loading"" :results=""results"" /&gt;
    &lt;loading v-if=""loading"" :percentage=""loadingPercentage"" /&gt;
&lt;/section&gt;

{
    components: {
        error: Error,
        results: Results,
    },
    data() {
        return {
            loading: false,
            error: null,
            results: null,
        }
    },
    created () {
        this.fetchData()
    },
    watch: {
        '$route': 'fetchData'
    },
    methods: {
        fetchData () {
            this.error = this.results = null
            this.loading = true

            getResults((err, results) =&gt; {
                this.loading = false

                if (err) {
                    this.error = err.toString()
                } else {
                    this.results = results
                }
            })
        }
    }
}
</code></pre>

<p><strong>Results Component</strong></p>

<p>Basically the exact same results component you already have, but if <code>loading</code> is true, or if <code>results</code> is null, however you prefer, you can create a fake dataset to iterate over and create skeleton versions, if you'd like to. Otherwise, you can just keep things the way you have it.</p>
","2069860","","2069860","","2019-10-22 20:00:24","2019-10-22 20:00:24","","","","5","","",""
"57853772","2","","57842756","2019-09-09 12:10:02","","3","","<p>You should always enable compiler warnings because the compiler can often tell you what's wrong with your code. To do this, you pass <code>-Wall -Wextra</code> to the compiler.</p>

<p>You should usually treat warnings as errors because the warnings usually signify that there's something wrong with your code. However, it's often very easy to ignore these errors. Therefore, treating them as errors will cause the build to fail so you can't ignore the errors. To treat warnings as errors, pass <code>-Werror</code> to the compiler.</p>
","10795151","","10795151","","2019-11-18 23:01:58","2019-11-18 23:01:58","","","","0","","",""
"57860713","2","","57842756","2019-09-09 20:20:39","","13","","<h2><strong>Non-fixed warnings will</strong>, sooner or later, <strong>lead to errors in your code</strong>.</h2>

<hr>

<p>Debugging a segmentation fault, for instance, requires the programmer to trace the root (cause) of the fault, which usually is located in a prior place in your code than the line that eventually caused the segmentation fault.</p>

<p>It's very typical that the cause is a line for which the compiler had issued a warning that you ignored, and the line that caused the segmentation fault the line that eventually threw the error.</p>

<p>Fixing the warning leads to fixing the problem.. A classic!</p>

<p>A demonstration of the above.. Consider the following code:</p>

<pre><code>#include &lt;stdio.h&gt;

int main(void) {
  char* str = ""Hello world!"";
  int idx;

  // Colossal amount of code here, irrelevant to 'idx'

  printf(""%c\n"", str[idx]);

  return 0;
}
</code></pre>

<p>which when compiled with ""Wextra"" flag passed to GCC, gives:</p>

<pre><code>main.c: In function 'main':
main.c:9:21: warning: 'idx' is used uninitialized in this function [-Wuninitialized]
    9 |   printf(""%c\n"", str[idx]);
      |                     ^
</code></pre>

<p>which I <em>could</em> ignore and execute the code anyway.. And then I would witness a ""grand"" segmentation fault, as my IP epicurus professor used to say:</p>

<blockquote>
  <p>Segmentation fault</p>
</blockquote>

<p>In order to debug this in a real world scenario, one would start from the line that causes the segmentation fault and attempt to trace what is the root of the cause.. They would have to search for what has happened to <code>i</code> and <code>str</code> inside that colossal amount of code over there...</p>

<p>Until, one day, they found theirselves in the situation where they discover that <code>idx</code> is used uninitialized, thus it has a garbage value, which results in indexing the string (way) beyond out of its bounds, which leads to a segmentation fault.</p>

<p>If only they hadn't ignored the warning, they would have found the bug immediately! </p>
","2411320","","6699433","","2019-11-12 13:43:32","2019-11-12 13:43:32","","","","6","","",""
"57861481","2","","57842756","2019-09-09 21:34:42","","6","","<p>This is a specific answer to C, and why this is far more important to C than to anything else.</p>

<pre><code>#include &lt;stdio.h&gt;
int main()
{
   FILE *fp = ""some string"";
}
</code></pre>

<p>This code compiles with a <em>warning</em>. What are and should be errors in just about every other language on the planet (barring assembly language) are <em>warnings</em> in C. Warnings in C are almost always errors in disguise. Warnings should be fixed, not suppressed.</p>

<p>With <code>gcc</code>, we do this as <code>gcc -Wall -Werror</code>.</p>

<p>This was also the reason for the high rantyness about some MS non-secure API warnings. Most people programming C have learned the hard way to treat warnings as errors and this stuff appeared that just wasn't the same kind of thing and wanted non-portable fixes.</p>
","14768","","14768","","2019-09-10 01:55:50","2019-09-10 01:55:50","","","","0","","",""
"57861725","2","","57842756","2019-09-09 22:04:28","","8","","<p>As someone who works with legacy embedded C code, enabling compiler warnings has helped show a lot of weakness and areas to investigate when proposing fixes. In gcc utilizing <code>-Wall</code> and <code>-Wextra</code> and even <code>-Wshadow</code> have become vital. I'm not going to go every single hazard, but I'll list a few that have popped up that helped show code issues.</p>

<h2>Variables being left behind</h2>

<p>This one can easily point to unfinished work and areas that might not be utilizing all of the passed variables which could be an issue. Let's look at a simple function that may trigger this:</p>

<pre><code>int foo(int a, int b)
{
   int c = 0;

   if (a &gt; 0)
   {
        return a;
   }
   return 0;
}
</code></pre>

<p>Just compiling this without -Wall or -Wextra returns no issues. -Wall will tell you though that <code>c</code> is never used: </p>

<blockquote>
  <p>foo.c: In function ‘foo’: </p>
  
  <p>foo.c:9:20: warning: unused variable ‘c’
  [-Wunused-variable]</p>
</blockquote>

<p>-Wextra will also tell you that your parameter b doesn't do anything:</p>

<blockquote>
  <p>foo.c: In function ‘foo’: </p>
  
  <p>foo.c:9:20: warning: unused variable ‘c’
  [-Wunused-variable]</p>
  
  <p>foo.c:7:20: warning: unused parameter ‘b’ [-Wunused-parameter]  int foo(int a, int b)</p>
</blockquote>

<h2>Global Variable shadowing</h2>

<p>This one bit hard and did not show up until <code>-Wshadow</code> was used. Let's modify the example above to just add, but there just happens to be a global with the same name as a local which causes a lot of confusion when trying to use both.</p>

<pre><code>int c = 7;

int foo(int a, int b)
{
   int c = a + b;
   return c;
}
</code></pre>

<p>When -Wshadow was turned on, it's easy to spot this issue.</p>

<blockquote>
  <p>foo.c:11:9: warning: declaration of ‘c’ shadows a global declaration
  [-Wshadow]</p>
  
  <p>foo.c:1:5: note: shadowed declaration is here</p>
</blockquote>

<h2>Format strings</h2>

<p>This doesn't require any extra flags in gcc, but it has still be the source of problems in the past. A simple function trying to print data, but has a formatting error could look like this: </p>

<pre><code>void foo(const char * str)
{
    printf(""str = %d\n"", str);
}
</code></pre>

<p>This doesn't print the string since the formatting flag is wrong and gcc will happily tell you this is probably not what you wanted:</p>

<blockquote>
  <p>foo.c: In function ‘foo’: </p>
  
  <p>foo.c:10:12: warning: format ‘%d’ expects
  argument of type ‘int’, but argument 2 has type ‘const char *’
  [-Wformat=]</p>
</blockquote>

<hr>

<p>These are just three of the many things the compiler can double check for you. There are a lot of others like using an uninitialized variable that others have pointed out.</p>
","2848117","","","","","2019-09-09 22:04:28","","","","2","","",""
"58605168","2","","58278260","2019-10-29 10:03:26","","0","","<p>In my case I seemed to have <code>llvm</code> and <code>gcc</code> also installed using homebrew. When I removed those, and thus relied fully on the macOS clang, it could find the headers and the compiling worked again.</p>
","2071450","","","","","2019-10-29 10:03:26","","","","0","","",""
"59346086","2","","58278260","2019-12-15 16:58:13","","0","","<p>The solution was simpler than I thought. Install clang/llvm.</p>

<pre><code>brew install llvm
</code></pre>

<p>Then we need to create symlinks ourselves.</p>

<pre><code>for f in /usr/local/Cellar/llvm/9.0.0_1/bin/clang*; do ln -s ${f} /usr/local/bin/""${f##*/}""; done
</code></pre>

<p>And</p>

<pre><code>ln -s /usr/local/Cellar/llvm/9.0.0_1/include/c++ /usr/local/include/c++
</code></pre>

<p>Depending upon your llvm version, modify the above commands.</p>

<p>Now, you can compile C++ programs without passing any custom flags.</p>

<pre><code>clang++ hello.cpp
</code></pre>
","359120","","","","","2019-12-15 16:58:13","","","","0","","",""
"59363193","2","","57530882","2019-12-16 19:35:04","","0","","<p>Here's an interesting one I just came across.  Just another argument to use UTC wherever possible.</p>

<pre><code>// **** Appears to ""Leap"" forward **** //
moment('2020-02-29T00:00:00Z').toISOString();
// or
moment('2020-02-29T00:00:00Z').toJSON();
// 2020-02-29T00:00:00.000Z

moment('2020-02-29T00:00:00Z').add(1, 'year').toISOString();
// or
moment('2020-02-29T00:00:00Z').add(1, 'year').toJSON();
// 2021-03-01T00:00:00.000Z


// **** Falls back **** //
moment.utc('2020-02-29T00:00:00Z').toISOString();
// or
moment.utc('2020-02-29T00:00:00Z').toJSON();
// 2020-02-29T00:00:00.000Z

moment.utc('2020-02-29T00:00:00Z').add(1, 'year').toISOString();
// or
moment.utc('2020-02-29T00:00:00Z').add(1, 'year').toJSON();
// 2021-02-28T00:00:00.000Z
</code></pre>

<p>Given C#'s default behavior is to fall back...</p>

<pre><code>DateTime dt = new DateTime(2020, 02, 29, 0, 0, 0, DateTimeKind.Utc);
DateTime result = dt.AddYears(1);
// 2021-02-28T00:00:00.0000000Z
</code></pre>

<p>This could be crucial to ensure the front end and back end agree on whether to fall back or leap forward a day.</p>
","960073","","960073","","2019-12-17 16:15:40","2019-12-17 16:15:40","","","","2","","",""
"59572313","2","","58278260","2020-01-03 01:55:04","","0","","<p>I tried 1) manually linking 2) brew install llvm, but they did not work.</p>

<p>Finally, this worked for me:
 <a href=""https://gitmemory.com/issue/pytorch/pytorch/31190/565153503"" rel=""nofollow noreferrer"">https://gitmemory.com/issue/pytorch/pytorch/31190/565153503</a></p>

<p>By setting the following env vars:</p>

<pre><code>export CC=clang
export CXX=clang++
export MACOSX_DEPLOYMENT_TARGET=10.9
</code></pre>
","4147022","","4844273","","2020-01-03 04:57:02","2020-01-03 04:57:02","","","","0","","",""
"59865749","2","","57530882","2020-01-22 18:02:33","","0","","<h2>JavaScript - Adding Year(s)</h2>

<p><em>Impact Category 2</em></p>

<p><strong>Defective Code</strong></p>

<pre class=""lang-js prettyprint-override""><code>var dt = new Date();
dt.setFullYear(dt.getFullYear() + 1);
</code></pre>

<p>This code will work properly until <code>dt</code> becomes February 29th, such as on <code>2020-02-29</code>.  Then it will attempt to set the year to 2021.  Since <code>2021-02-29</code> doesn't exist, the <code>Date</code> object will roll forward to the next valid date, which is <code>2020-03-01</code>.</p>

<p>This may be the intended behavior in some cases.  In other cases, being one day off may have negligible impact (such as an expiration date).</p>

<p>However, in many cases the intention when advancing a year is to stay roughly in the same position for the month and day.  In other words, if you started at the end of February (<code>2020-02-29</code>) and advanced a year, you likely intended the result to also be and the end of February (<code>2021-02-28</code>), not at the start of March (<code>2021-03-01</code>).</p>

<p><strong>Corrected Code</strong></p>

<p>To add years in JavaScript while retaining an end-of-February behavior, use the following function.</p>

<pre class=""lang-js prettyprint-override""><code>function addYears(dt, n) {
  var m = dt.getMonth();
  dt.setFullYear(dt.getFullYear() + n);
  if (dt.getMonth() !== m)
    dt.setDate(dt.getDate() - 1);
}

// example usage
addYears(dt, 1);
</code></pre>

<hr>

<h3>Common Variation - Immutable Form</h3>

<p>One may often have code that doesn't mutate the original object, such as the following:</p>

<p><strong>Defective Code</strong></p>

<pre class=""lang-js prettyprint-override""><code>var dt = new Date();
var result = new Date(dt.getFullYear() + 1, dt.getMonth(), dt.getDate());
</code></pre>

<p>The immutable form that retains end-of-February behavior is as follows:</p>

<p><strong>Corrected Code</strong></p>

<pre class=""lang-js prettyprint-override""><code>function addYears(dt, n) {
  var result = new Date(dt);
  result.setFullYear(result.getFullYear() + n);
  if (result.getMonth() !== dt.getMonth())
    result.setDate(result.getDate() - 1);
  return result;
}

// example usage
var result = addYears(dt, 1);
</code></pre>

<hr>

<h3>Libraries</h3>

<p>JavaScript has many date/time libraries, such as <a href=""https://moment.github.io/luxon/"" rel=""nofollow noreferrer"">Luxon</a>, <a href=""https://date-fns.org/"" rel=""nofollow noreferrer"">Date-Fns</a>, <a href=""https://momentjs.com/"" rel=""nofollow noreferrer"">Moment</a>, and <a href=""https://js-joda.github.io/js-joda/"" rel=""nofollow noreferrer"">js-Joda</a>.  All of these libraries already use an end-of-February behavior for their add-years functions.  No additional adjustment is necessary unless you desire a start-of-March behavior instead.</p>
","634824","","","","","2020-01-22 18:02:33","","","","0","","","2020-01-22 18:02:33"
"58457365","2","","58201173","2019-10-18 19:53:44","","0","","<p>This can be done with the <code>beforeEach</code> hook of the router.</p>

<p>What you need to do is you must save a variable globally or in localStorage in the <code>loading</code> component when the data is loaded (before redirecting to the <code>results</code> component):</p>

<pre><code>export default {
  name: ""results"",
  ...
  importantTask() {
    // do the important work...
    localStorage.setItem('DATA_LOADED', JSON.stringify(true));
    this.$router.push({path: ""/results/xxxx""});
  }
}
</code></pre>

<p>And then you should check for this variable in the beforeEach hook and skip to the correct component:</p>

<pre><code>// router.js...
router.beforeEach((to, from, next) =&gt; {
  const dataLoaded = JSON.parse(localStorage.getItem('DATA_LOADED'));
  if (to.name === ""loading"" &amp;&amp; dataLoaded)
  {
    if (from.name === ""results"")
    {
      next({ name: ""main""} );
    }
    if (from.name === ""main"")
    {
      next({ name: ""results""} );
    }
  }
  next();
});
</code></pre>

<p>Also, do remember to reset the value to false in your <code>main</code> component when the query button is clicked (before routing to the <code>loading</code> component):</p>

<pre><code>export default {
  name: ""main"",
  ...
  queryButtonClicked() {
    localStorage.setItem('DATA_LOADED', JSON.stringify(false));
    this.$router.push({path: ""/loading""});
  }
}
</code></pre>
","162176","","","","","2019-10-18 19:53:44","","","","1","","",""
"58457798","2","","58201173","2019-10-18 20:31:12","","8","","<p><strong>There is a perfect way to handle this situation</strong></p>

<p>You can use <a href=""https://router.vuejs.org/guide/advanced/navigation-guards.html#in-component-guards"" rel=""noreferrer"">in-component guard</a> to control the route in granule level</p>

<p>Make the following changes in your code</p>

<p><strong>In main screen component</strong></p>

<blockquote>
  <p>Add this beofreRouteLeave guard in component options, before leaving to 'result screen' you are setting the route to go only
  through loading screen</p>
</blockquote>

<pre><code>beforeRouteLeave(to, from, next) {
   if (to.path == ""/result"") {
      next('/loading')
    }
    next();
  }, 
</code></pre>

<p><strong>In loading screen component</strong></p>

<blockquote>
  <p>If the route go backs from result to loading then , it should not land
  here and directly jump to main screen</p>
</blockquote>

<pre><code>beforeRouteEnter(to, from, next) {
    if (from.path == ""/result"") {
      next('/main')
    }
     next();
  },
</code></pre>

<blockquote>
  <p>In loading screen, The beforeRouteEnter guard does NOT have access to
  this, because the guard is called before the navigation is confirmed,
  thus the new entering component has not even been created yet. So taking the advantage of this, you <strong><em>won't get the infinite calls</em></strong> fired when routing from results screen</p>
</blockquote>

<p><strong>In result screen component</strong></p>

<blockquote>
  <p>if you use go back then it should not land in loading and directly
  jump to main screen</p>
</blockquote>

<pre><code>beforeRouteLeave(to, from, next) {
    if (to.path == ""/loading"") {
      next('/')
    }
    next();
  },
</code></pre>

<p>I have just created small vue application to reproduce the same issue. It works in my local as per your question. Hope it <strong>resolves your issue</strong> as well. </p>
","10555785","","","","","2019-10-18 20:31:12","","","","1","","",""
"58458535","2","","58201173","2019-10-18 21:41:47","","2","","<p>I guess <code>router.replace</code> is the way to go - but still some lines of thought (untested):</p>

<hr>

<p>Basically on <code>$router</code> change it renders the loading-component until it emits <code>load:stop</code>, then it renders the <code>router-view</code></p>

<hr>

<pre><code>import { Vue, Component, Watch, Prop } from ""vue-property-decorator"";

@Component&lt;RouteLoader&gt;({
    render(h){
        const rv = (this.$slots.default || [])
        .find(
            child =&gt; child.componentOptions
            //@ts-ignore 
            &amp;&amp; child.componentOptions.Ctor.extendedOptions.name === ""RouterView""
        )
        if(rv === undefined) 
            throw new Error(""RouterView is missing - add &lt;router-view&gt; to default slot"")

        const loader = (this.$slots.default || [])
        .find(
            child =&gt; child.componentOptions
            //@ts-ignore 
            &amp;&amp; child.componentOptions.Ctor.extendedOptions.name === this.loader
        )
        if(loader === undefined) 
            throw new Error(""LoaderView is missing - add &lt;loader-view&gt; to default slot"")
        const _vm = this 
        const loaderNode = loader.componentOptions &amp;&amp; h(
            loader.componentOptions.Ctor,
            {
                on: {
                    // ""load:start"": () =&gt; this.loading = true,
                    ""load:stop"": () =&gt; _vm.loading = false
                },
                props: loader.componentOptions.propsData,
                //@ts-ignore
                attrs: loader.data.attrs
            }
        )
        return this.loading &amp;&amp; loaderNode || rv
    }
})
export default class RouteLoader extends Vue {
    loading: boolean = false
    @Prop({default: ""LoaderView""}) readonly loader!: string
    @Watch(""$route"")
    loads(nRoute: string, oRoute: string){
        this.loading = true
    }
}

@Component&lt;Loader&gt;({
    name: ""LoaderView"",
    async mounted(){

        await console.log(""async call"")
        this.$emit(""load:stop"")
        // this.$destroy()
    }
})
export class Loader extends Vue {}
</code></pre>
","11204469","","","","","2019-10-18 21:41:47","","","","2","","",""
"58078791","2","","56436559","2019-09-24 10:58:31","","3","","<p>You can implement following method</p>

<pre><code>extension UISegmentedControl{
    func selectedSegmentTintColor(_ color: UIColor) {
        self.setTitleTextAttributes([.foregroundColor: color], for: .selected)
    }
    func unselectedSegmentTintColor(_ color: UIColor) {
        self.setTitleTextAttributes([.foregroundColor: color], for: .normal)
    }
}
</code></pre>

<p>Usage code</p>

<pre><code>segmentControl.unselectedSegmentTintColor(.white)
segmentControl.selectedSegmentTintColor(.black)
</code></pre>
","7116078","","4826457","","2019-09-24 11:07:34","2019-09-24 11:07:34","","","","0","","",""
"58085833","2","","56436559","2019-09-24 17:56:52","","8","","<p>Swift version of @Ilahi Charfeddine answer:</p>

<pre><code>if #available(iOS 13.0, *) {
   segmentedControl.setTitleTextAttributes([.foregroundColor: UIColor.white], for: .selected)
   segmentedControl.selectedSegmentTintColor = UIColor.blue
} else {
   segmentedControl.tintColor = UIColor.blue
}
</code></pre>
","5450103","","","","","2019-09-24 17:56:52","","","","0","","",""
"58319583","2","","56436559","2019-10-10 09:22:57","","3","","<p>iOS13 UISegmentController </p>

<p>how to use:</p>

<pre><code>segment.setOldLayout(tintColor: .green)

extension UISegmentedControl
{
    func setOldLayout(tintColor: UIColor)
    {
        if #available(iOS 13, *)
        {
            let bg = UIImage(color: .clear, size: CGSize(width: 1, height: 32))
             let devider = UIImage(color: tintColor, size: CGSize(width: 1, height: 32))

             //set background images
             self.setBackgroundImage(bg, for: .normal, barMetrics: .default)
             self.setBackgroundImage(devider, for: .selected, barMetrics: .default)

             //set divider color
             self.setDividerImage(devider, forLeftSegmentState: .normal, rightSegmentState: .normal, barMetrics: .default)

             //set border
             self.layer.borderWidth = 1
             self.layer.borderColor = tintColor.cgColor

             //set label color
             self.setTitleTextAttributes([.foregroundColor: tintColor], for: .normal)
             self.setTitleTextAttributes([.foregroundColor: UIColor.white], for: .selected)
        }
        else
        {
            self.tintColor = tintColor
        }
    }
}
extension UIImage {
    convenience init(color: UIColor, size: CGSize) {
        UIGraphicsBeginImageContextWithOptions(size, false, 1)
        color.set()
        let ctx = UIGraphicsGetCurrentContext()!
        ctx.fill(CGRect(origin: .zero, size: size))
        let image = UIGraphicsGetImageFromCurrentImageContext()!
        UIGraphicsEndImageContext()

        self.init(data: image.pngData()!)!
    }
}
</code></pre>
","5321001","","","","","2019-10-10 09:22:57","","","","0","","",""
"58521655","2","","56436559","2019-10-23 11:17:57","","21","","<p>IOS 13 and Swift 5.0 (Xcode 11.0)Segment Control 100% Working</p>

<p><a href=""https://i.stack.imgur.com/4VNuC.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/4VNuC.png"" alt=""enter image description here""></a></p>

<p><a href=""https://i.stack.imgur.com/tmMer.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/tmMer.png"" alt=""enter image description here""></a></p>

<pre><code> if #available(iOS 13.0, *) {
      yoursegmentedControl.backgroundColor = UIColor.black
      yoursegmentedControl.layer.borderColor = UIColor.white.cgColor
      yoursegmentedControl.selectedSegmentTintColor = UIColor.white
      yoursegmentedControl.layer.borderWidth = 1

      let titleTextAttributes = [NSAttributedString.Key.foregroundColor: UIColor.white]    
      yoursegmentedControl.setTitleTextAttributes(titleTextAttributes, for:.normal)

      let titleTextAttributes1 = [NSAttributedString.Key.foregroundColor: UIColor.black]
      yoursegmentedControl.setTitleTextAttributes(titleTextAttributes1, for:.selected)
  } else {
              // Fallback on earlier versions
}
</code></pre>
","6644353","","","","","2019-10-23 11:17:57","","","","2","","",""
"60029993","2","","55929472","2020-02-02 19:54:11","","5","","<p>In Django 3.0 you should use below tag instead:</p>

<pre><code>{% load static %}
</code></pre>
","6672114","","","","","2020-02-02 19:54:11","","","","0","","",""
"58377812","2","","56436559","2019-10-14 13:25:19","","1","","<p><strong>XCODE 11.1 &amp; iOS 13</strong></p>

<p>Based on @Jigar Darji 's answer but a safer implementation.</p>

<p>We first create a failable convenience initialiser:</p>

<pre><code>extension UIImage {

convenience init?(color: UIColor, size: CGSize) {
    UIGraphicsBeginImageContextWithOptions(size, false, 1)
    color.set()
    guard let ctx = UIGraphicsGetCurrentContext() else { return nil }
    ctx.fill(CGRect(origin: .zero, size: size))
    guard
        let image = UIGraphicsGetImageFromCurrentImageContext(),
        let imagePNGData = image.pngData()
        else { return nil }
    UIGraphicsEndImageContext()

    self.init(data: imagePNGData)
   }
}
</code></pre>

<p>Then we extend UISegmentedControl:</p>

<pre><code>extension UISegmentedControl {

func fallBackToPreIOS13Layout(using tintColor: UIColor) {
    if #available(iOS 13, *) {
        let backGroundImage = UIImage(color: .clear, size: CGSize(width: 1, height: 32))
        let dividerImage = UIImage(color: tintColor, size: CGSize(width: 1, height: 32))

        setBackgroundImage(backGroundImage, for: .normal, barMetrics: .default)
        setBackgroundImage(dividerImage, for: .selected, barMetrics: .default)

        setDividerImage(dividerImage,
                        forLeftSegmentState: .normal,
                        rightSegmentState: .normal, barMetrics: .default)

        layer.borderWidth = 1
        layer.borderColor = tintColor.cgColor

        setTitleTextAttributes([.foregroundColor: tintColor], for: .normal)
        setTitleTextAttributes([.foregroundColor: UIColor.white], for: .selected)
    } else {
        self.tintColor = tintColor
    }
  }
}
</code></pre>
","5522002","","","","","2019-10-14 13:25:19","","","","0","","",""
"58080375","2","","57842756","2019-09-24 12:29:36","","4","","<p>The compiler warnings in C++ is very useful for some reasons.</p>

<p>1 - It permit to show you where you can have made a mistake who can impact the final result of your operations. For example if you didn't initialize a variable or if you put ""="" instead of ""=="" ( there are just examples )</p>

<p>2 - It permits also to show you where your code is not conform to the standard of the c++. It's useful because if the code is conform to the actual standard it will be easy to move the code into an other plateform for example.</p>

<p>In general, the warnings are very useful to show you where you have mistakes in your code who can affect the result of your algorithm or prevent some error when the user will use your program.</p>
","10744028","","","","","2019-09-24 12:29:36","","","","0","","",""
"58184431","2","","57842756","2019-10-01 12:06:42","","-1","","<p>You should definitely enable compiler warnings as some compilers are bad at reporting some common programming mistakes, including the following:-</p>

<p>-> initialise a variable gets forgotten
-> return a value from a function get missed
-> the simple arguments in printf and scanf families not matching the format string
a function is used without being declared beforehand, though happens in c only</p>

<p>So as these functions can be detected and reported, just usually not by default; so this feature must be explicitly requested via compiler options.</p>
","11999260","","","","","2019-10-01 12:06:42","","","","0","","",""
"58197831","2","","57842756","2019-10-02 08:24:44","","3","","<p>A warning is an error waiting to happen.
So you must enable compiler warnings and tidy up your code to remove any warning.</p>
","5006863","","","","","2019-10-02 08:24:44","","","","0","","",""
"58206329","2","","57842756","2019-10-02 17:20:26","","4","","<p>Ignoring warnings means you left sloppy code that not only could cause problems in the future for someone else, but also will make important compile messages less noticed by you.
The more compiler output, the less anyone will notice or bother.  Cleaner the better.  It also means you know what you are doing.  Warnings are very unprofessional, careless, and risky.</p>
","1991440","","","","","2019-10-02 17:20:26","","","","1","","",""
"58214138","2","","57842756","2019-10-03 07:18:43","","3","","<p>There's only <em>one</em> problem with treating warnings as errors:  When you're using code coming from other sources (e.g., micro$**t libraries, open source projects), <strong><em>they</em></strong> didn't do their job right, and compiling their code generates <em>tons</em> of warnings.</p>

<p>I <em>always</em> write my code so it doesn't generate any warnings or errors, and clean it up until it compiles without generating any extraneous noise.  The garbage I have to work with appalls me, and I'm astounded when I have to build a big project and watch a stream of warnings go by where the compilation should only be announcing which files it processed.</p>

<p>I also document my code because I know the real lifetime cost of software comes mostly from maintenance, not from writing it initially, but that's a different story...</p>
","6713758","","","","","2019-10-03 07:18:43","","","","2","","",""
"58228653","2","","57842756","2019-10-04 01:07:08","","4","","<p>COMPILER WARNINGS ARE YOUR FRIEND (not shouting, uppercase for emphasis).</p>

<p>I work on legacy Fortran-77 systems. The compiler tells me valuable things: argument datatype mismatches on a subroutine call, using a local variable before a value has been set into the variable, if I have a variable or subroutine argument that is not used. These are almost always errors.</p>

<p>Avoiding a long post:
When my code compiles cleanly, 97% it works.
The other guy I work with compiles with all warnings off, spends hours or days in the debugger, then asks me to help. I just compile his code with the warnings on and tell him what to fix.</p>
","8684591","","","","","2019-10-04 01:07:08","","","","0","","",""
"58239703","2","","57842756","2019-10-04 15:51:54","","3","","<p>I once worked for a large (Fortune 50) company that manufactured electronic testing equipment.</p>

<p>The core product of my group was an MFC program that, over the years, came to generate literally hundreds of warnings.  Which were ignored in almost all cases.</p>

<p>This is a frigging nightmare when bugs occur.</p>

<p>After that position, I was lucky enough to be hired as the first developer in a new startup.</p>

<p>I encouraged a 'no warning' policy for all builds, with compiler warning levels set to be pretty noisy.  </p>

<p>Our practice was to use #pragma warning - push/disable/pop for code that the developer was sure was really fine, along with a log statement at the debug level, just in case.</p>

<p>This practice worked well for us.</p>
","15079","","","","","2019-10-04 15:51:54","","","","2","","",""
"59865989","2","","57530882","2020-01-22 18:18:25","","1","","<h2>Determining if a Year is a Leap Year</h2>

<p><em>C# is used in examples to illustrate, but the pattern is common to all languages.</em></p>

<p><em>Impact Category 2</em></p>

<p><strong>Defective Code</strong></p>

<pre class=""lang-cs prettyprint-override""><code>bool isLeapYear = year % 4 == 0;
</code></pre>

<p>This code incorrectly assumes that a leap year occurs exactly every four years.  This is not the case with the Gregorian calendar system that we most commonly use in business and computing.</p>

<p><strong>Corrected Code</strong></p>

<p>The full algorithm (<a href=""https://en.wikipedia.org/wiki/Leap_year#Algorithm"" rel=""nofollow noreferrer"">from Wikipedia</a>) is as follows:</p>

<blockquote>
  <p><strong>if</strong> (<em>year</em> is not divisible by 4) then (it is a common year)<br>
  <strong>else if</strong> (<em>year</em> is not divisible by 100) <strong>then</strong> (it is a leap year)<br>
  <strong>else if</strong> (<em>year</em> is not divisible by 400) <strong>then</strong> (it is a common year)<br>
  <strong>else</strong> (it is a leap year)</p>
</blockquote>

<p>One implementation of this algorithm is as follows:</p>

<pre class=""lang-cs prettyprint-override""><code>bool isLeapYear = year % 4 == 0 &amp;&amp; (year % 100 != 0 || year % 400 == 0);
</code></pre>

<p>In many platforms, this function is built in.  For example, in .Net, the following is preferred:</p>

<pre class=""lang-cs prettyprint-override""><code>bool isLeapYear = DateTime.IsLeapyear(year);
</code></pre>
","634824","","","","","2020-01-22 18:18:25","","","","0","","","2020-01-22 18:18:25"
"60468711","2","","57530882","2020-02-29 19:14:00","","3","","<h2>Python - Replacing the year</h2>

<p><em>Impact Category 1</em></p>

<p><strong>Defective Code</strong></p>

<pre class=""lang-py prettyprint-override""><code>from datetime import date
today = date.today()
later = today.replace(year = today.year + 1)
</code></pre>

<p>This code will work properly until <code>today</code> becomes February 29th.  Then, it will attempt to create a February 29th of a common year, which does not exist.  The <code>date</code> constructor will raise an <code>ValueError</code> with the message <code>""day is out of range for month""</code>.</p>

<p>Variations:</p>

<pre class=""lang-py prettyprint-override""><code>from datetime import date
today = date.today()
later = date(today.year + 1, today.month, today.day)
</code></pre>

<p><strong>Corrected Code</strong></p>

<p>Without using any additional libraries, one can trap the error:</p>

<pre class=""lang-py prettyprint-override""><code>from datetime import date
today = date.today()
try:
    later = today.replace(year = today.year + 1)
except ValueError:
    later = date(today.year + 1, 2, 28)
</code></pre>

<p>However, it is usually better to use a library such as <a href=""https://dateutil.readthedocs.io/"" rel=""nofollow noreferrer"">dateutil</a>:</p>

<pre class=""lang-py prettyprint-override""><code>from datetime import date
from dateutil.relativedelta import relativedelta
today = date.today()
later = today + relativedelta(years=1)
</code></pre>
","634824","","634824","","2020-02-29 22:41:01","2020-02-29 22:41:01","","","","0","","","2020-02-29 19:14:00"
"60486885","2","","58278260","2020-03-02 10:27:30","","0","","<p>For me, it works well as follow:</p>

<pre><code>1. xcode-select --install

2. sudo ln -s /Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/* /usr/local/include/

3. export SDKROOT=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk
</code></pre>
","4596402","","","","","2020-03-02 10:27:30","","","","0","","",""
"56227651","2","","56227419","2019-05-20 20:19:58","","47","","<p><code>_PyHASH_INF</code> is <a href=""https://github.com/python/cpython/blob/master/Include/pyhash.h#L29"" rel=""noreferrer"">defined as a constant</a> equal to <code>314159</code>.</p>

<p>I can't find any discussion about this, or comments giving a reason.  I think it was chosen more or less arbitrarily.  I imagine that as long as they don't use the same meaningful value for other hashes, it shouldn't matter.  </p>
","6779307","","","","","2019-05-20 20:19:58","","","","2","","",""
"56227918","2","","56227419","2019-05-20 20:42:07","","219","","<p>Summary: It's not a coincidence; <a href=""https://github.com/python/cpython/blob/a5119e7d75c9729fc36c059d05f3d7132e7f6bb4/Include/pyhash.h#L29"" rel=""noreferrer""><code>_PyHASH_INF</code> is hardcoded as 314159</a> in the default CPython implementation of Python, and was picked as an arbitrary value (obviously from the digits of π) <a href=""https://github.com/python/cpython/commit/39dce29365d287dc6b353b2a527dc11fe58dcfa6#diff-b1b488004963172ac81a4a8127ecfd23R560"" rel=""noreferrer"">by Tim Peters in 2000</a>.</p>

<hr>

<p>The value of <code>hash(float('inf'))</code> is one of the system-dependent parameters of the built-in hash function for numeric types, and <a href=""https://docs.python.org/3/library/sys.html#sys.hash_info"" rel=""noreferrer"">is also available</a> as <code>sys.hash_info.inf</code> in Python 3:</p>

<pre><code>&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.hash_info
sys.hash_info(width=64, modulus=2305843009213693951, inf=314159, nan=0, imag=1000003, algorithm='siphash24', hash_bits=64, seed_bits=128, cutoff=0)
&gt;&gt;&gt; sys.hash_info.inf
314159
</code></pre>

<p>(Same results <a href=""https://tio.run/##NYwxCsAgDEV3T9FRh7r0QOKgGNAkaJacPpVit/fh/ccqjfC5WVnNYDBNuZYud5B7lkpzOJ6A4v8Z@fulbfUyCkoWIPQhHG8XYsurJcBKwewF"" rel=""noreferrer"">with PyPy</a> too.)</p>

<hr>

<p>In terms of code, <a href=""https://docs.python.org/3/library/functions.html#hash"" rel=""noreferrer""><code>hash</code></a> is a built-in function. Calling it on a Python float object invokes the function whose pointer is given by the <a href=""https://docs.python.org/3/c-api/typeobj.html#c.PyTypeObject.tp_hash"" rel=""noreferrer""><code>tp_hash</code> attribute</a> of the built-in float type (<code>PyTypeObject PyFloat_Type</code>), which <a href=""https://github.com/python/cpython/blob/a5119e7d75c9729fc36c059d05f3d7132e7f6bb4/Objects/floatobject.c#L1910,L1924"" rel=""noreferrer"">is</a> the <code>float_hash</code> function, <a href=""https://github.com/python/cpython/blob/a5119e7d75c9729fc36c059d05f3d7132e7f6bb4/Objects/floatobject.c#L528,L532"" rel=""noreferrer"">defined</a> as <code>return _Py_HashDouble(v-&gt;ob_fval)</code>, which in turn <a href=""https://github.com/python/cpython/blob/a5119e7d75c9729fc36c059d05f3d7132e7f6bb4/Python/pyhash.c#L93-L94"" rel=""noreferrer"">has</a></p>

<pre class=""lang-c prettyprint-override""><code>    if (Py_IS_INFINITY(v))
        return v &gt; 0 ? _PyHASH_INF : -_PyHASH_INF;
</code></pre>

<p>where <code>_PyHASH_INF</code> is <a href=""https://github.com/python/cpython/blob/a5119e7d75c9729fc36c059d05f3d7132e7f6bb4/Include/pyhash.h#L29"" rel=""noreferrer"">defined as</a> 314159:</p>

<pre class=""lang-c prettyprint-override""><code>#define _PyHASH_INF 314159
</code></pre>

<hr>

<p>In terms of history, the first mention of <code>314159</code> in this context in the Python code (you can find this with <code>git bisect</code> or <code>git log -S 314159 -p</code>) was added by <a href=""https://en.wikipedia.org/w/index.php?title=Tim_Peters_(software_engineer)&amp;oldid=886078303"" rel=""noreferrer"">Tim Peters</a> in August 2000, in what is now  commit <a href=""https://github.com/python/cpython/commit/39dce29365d287dc6b353b2a527dc11fe58dcfa6"" rel=""noreferrer"">39dce293</a> in the <code>cpython</code> git repository.</p>

<p>The commit message says:</p>

<blockquote>
  <p>Fix for <a href=""http://sourceforge.net/bugs/?func=detailbug&amp;bug_id=111866&amp;group_id=5470"" rel=""noreferrer"">http://sourceforge.net/bugs/?func=detailbug&amp;bug_id=111866&amp;group_id=5470</a>.
  This was a misleading bug -- the true ""bug"" was that <code>hash(x)</code> gave an error
  return when <code>x</code> is an infinity.  Fixed that.  Added new <code>Py_IS_INFINITY</code> macro to
  <code>pyport.h</code>.  Rearranged code to reduce growing duplication in hashing of float and
  complex numbers, pushing Trent's earlier stab at that to a logical conclusion.
  Fixed exceedingly rare bug where hashing of floats could return -1 even if there
  wasn't an error (didn't waste time trying to construct a test case, it was simply
  obvious from the code that it <em>could</em> happen).  Improved complex hash so that
  <code>hash(complex(x, y))</code> doesn't systematically equal <code>hash(complex(y, x))</code> anymore.</p>
</blockquote>

<p>In particular, in this commit he ripped out the code of <code>static long float_hash(PyFloatObject *v)</code> in <code>Objects/floatobject.c</code> and made it just <code>return _Py_HashDouble(v-&gt;ob_fval);</code>, and in the definition of <code>long _Py_HashDouble(double v)</code> in <code>Objects/object.c</code> he added the lines:</p>

<pre class=""lang-c prettyprint-override""><code>        if (Py_IS_INFINITY(intpart))
            /* can't convert to long int -- arbitrary */
            v = v &lt; 0 ? -271828.0 : 314159.0;
</code></pre>

<p>So as mentioned, it was an arbitrary choice. Note that 271828 is formed from the first few decimal digits of <a href=""https://en.wikipedia.org/wiki/e_(mathematical_constant)"" rel=""noreferrer"">e</a>.</p>

<p>Related later commits:</p>

<ul>
<li><p><a href=""https://github.com/python/cpython/commit/f3eeca16cbadd7da5836ed781572343863b1a074"" rel=""noreferrer"">By Mark Dickinson in Apr 2010</a> (<a href=""https://github.com/python/cpython/commit/ac256ab2843dfb6c28af0227202df67664ed462e"" rel=""noreferrer"">also</a>), making the <code>Decimal</code> type behave similarly</p></li>
<li><p><a href=""https://github.com/python/cpython/commit/5e0c2748fb2e16b3b0f33f0bb55f1aaa1272f887"" rel=""noreferrer"">By Mark Dickinson in Apr 2010</a> (<a href=""https://github.com/python/cpython/commit/5daab45158094e577b9791cda7d8a0f4e34f45cb"" rel=""noreferrer"">also</a>), moving this check to the top and adding test cases</p></li>
<li><p><a href=""https://github.com/python/cpython/commit/dc787d2055a7b562b64ca91b8f1af6d49fa39f1c"" rel=""noreferrer"">By Mark Dickinson in May 2010</a> as <a href=""https://bugs.python.org/issue8188"" rel=""noreferrer"">issue 8188</a>, completely rewriting the hash function to <a href=""https://docs.python.org/3/library/stdtypes.html#hashing-of-numeric-types"" rel=""noreferrer"">its current implementation</a>, but retaining this special case, giving the constant a name <code>_PyHASH_INF</code> (also removing the 271828 which is why in Python 3 <code>hash(float('-inf'))</code> returns <code>-314159</code> rather than <code>-271828</code> as it does in Python 2)</p></li>
<li><p><a href=""https://github.com/python/cpython/commit/e7dfe74ce39cad736da8e3a24fdc4cfb50c7c515"" rel=""noreferrer"">By Raymond Hettinger in Jan 2011</a>, adding an explicit example in the ""What's new"" for Python 3.2 of <code>sys.hash_info</code> showing the above value. (See <a href=""https://docs.python.org/3/whatsnew/3.2.html#decimal-and-fractions"" rel=""noreferrer"">here</a>.)</p></li>
<li><p><a href=""https://github.com/python/cpython/commit/1919b7e72bc43315b32f38a6f5f01e8c717907f4"" rel=""noreferrer"">By Stefan Krah in Mar 2012</a> modifying the Decimal module but keeping this hash.</p></li>
<li><p><a href=""https://github.com/python/cpython/commit/985ecdcfc29adfc36ce2339acf03f819ad414869"" rel=""noreferrer"">By Christian Heimes in Nov 2013</a>, moved the definition of <code>_PyHASH_INF</code> from <code>Include/pyport.h</code> to <code>Include/pyhash.h</code> where it now lives.</p></li>
</ul>
","4958","","4958","","2019-05-23 18:24:46","2019-05-23 18:24:46","","","","6","","",""
"56242834","2","","56227419","2019-05-21 16:39:13","","12","","<p>Indeed,</p>

<pre><code>sys.hash_info.inf
</code></pre>

<p>returns <code>314159</code>. The value is not generated, it's built into the source code.
In fact,</p>

<pre><code>hash(float('-inf'))
</code></pre>

<p>returns <code>-271828</code>, or approximately -e, in python 2 (<a href=""https://docs.python.org/3/library/stdtypes.html#hashing-of-numeric-types"" rel=""nofollow noreferrer"">it's -314159 now</a>).</p>

<p>The fact that the two most famous irrational numbers of all time are used as the hash values makes it very unlikely to be a coincidence.</p>
","7583953","","7583953","","2019-05-24 02:04:09","2019-05-24 02:04:09","","","","0","","",""
"56599142","2","","55578429","2019-06-14 13:24:20","","1","","<p><strong>You question was:</strong></p>

<blockquote>
  <p>Do we need to use std::launder when doing pointer arithmetic within a
  standard-layout object (e.g., with offsetof)?</p>
</blockquote>

<p>No.</p>

<p><code>std::launder</code> won't change anything in this case and therefore has nothing to do with the presented example (<em>imo</em> edit launder out of the question or ask another question).</p>

<p><code>std::launder</code> is usually just needed in a subset of cases (eg. due to a const member) where you change (or create) <em>an underlying object</em> in some <em>runtime</em> manner (eg. via placement new). Mnemonic: the object is 'dirty' and needs to be <code>std::launder</code>'ed.</p>

<p><strong>Using only a standard layout type cannot result in a situation where you would ever need to use std::launder.</strong></p>
","2261538","","2261538","","2020-02-21 15:39:27","2020-02-21 15:39:27","","","","3","","",""
"57820266","2","","57820195","2019-09-06 10:26:00","","43","","<p>For <code>foo&lt;int&gt;(a)</code>, <code>ARG_T</code> is being deduced from <code>a</code>, and is not taken from the default template argument. Since it's a by value function parameter, and <code>a</code> is an expression of type <code>int</code>, it's deduced as <code>int</code>.</p>

<p>In general, default template arguments are not used when template argument deduction can discover what the argument is.</p>

<p>But we can force the use of the default argument by introducing a non-deduced context for the function parameter. For instance:</p>

<pre><code>template &lt;class T, class ARG_T = T&amp;&gt;
T foo(std::enable_if_t&lt;true, ARG_T&gt; v1){
    //...
}
</code></pre>

<p>Or the C++20 <code>type_identity</code> utility, such as the other answer demonstrates.</p>
","817643","","817643","","2019-09-06 10:38:21","2019-09-06 10:38:21","","","","5","","",""
"57820304","2","","57820195","2019-09-06 10:28:29","","29","","<p>You need to stop <a href=""https://en.cppreference.com/w/cpp/language/template_argument_deduction#Non-deduced_contexts"" rel=""noreferrer"">template argument deduction</a> for <code>ARG_T</code> from the function argument <code>v</code>, (with the help of <a href=""https://en.cppreference.com/w/cpp/types/type_identity"" rel=""noreferrer""><code>std::type_identity</code></a>, which could be used to exclude specific arguments from deduction); Otherwise, the default template argument won't be used. e.g.</p>

<pre><code>template &lt;class T, class ARG_T = T&amp;&gt;
T foo(std::type_identity_t&lt;ARG_T&gt; v){
    return std::is_reference&lt;decltype(v)&gt;::value;
}
</code></pre>

<p><a href=""https://wandbox.org/permlink/dPyHO4uD5WfyJ9Sa"" rel=""noreferrer"">LIVE</a></p>

<p>BTW: If your compiler doesn't support <code>std::type_identity</code> (since C++20), you might make your own.</p>

<pre><code>template&lt;typename T&gt; struct type_identity { typedef T type; };
template&lt; class T &gt;
using type_identity_t = typename type_identity&lt;T&gt;::type;
</code></pre>
","3309790","","3309790","","2019-09-07 07:59:40","2019-09-07 07:59:40","","","","1","","",""
"58546609","2","","58201173","2019-10-24 17:40:57","","1","","<p>Another option is to use the <a href=""https://developer.mozilla.org/en-US/docs/Web/API/History_API"" rel=""nofollow noreferrer"">History API</a>.</p>

<p>Once you are in the Results screen, you can utilize the <a href=""https://developer.mozilla.org/en-US/docs/Web/API/History/replaceState"" rel=""nofollow noreferrer"">ReplaceState</a> to replace the URL in history of the browser.</p>
","159342","","","","","2019-10-24 17:40:57","","","","0","","",""
"58920576","2","","57169862","2019-11-18 18:11:06","","0","","<p>I did it with numpy 1.11.1 (which means that my answer may not be 100% accurate in your case) with the following receipe:</p>

<pre><code>export ATLAS=&lt;folder with the atlas/lapack libraries&gt;
export LAPACK=$ATLAS
cat &gt; site.cfg &lt;&lt;EOF
[atlas]
atlas_libs = lapack, f77blas, cblas, atlas
EOF
python setup.py bdist_wheel
</code></pre>
","5847025","","","","","2019-11-18 18:11:06","","","","0","","",""
"59381285","2","","57169862","2019-12-17 19:58:48","","1","","<p>An orthogonal suggestion, but it may be helpful in general, not just for your particular problem.</p>

<p>Give a look at <a href=""https://spack.io/"" rel=""nofollow noreferrer"">Spack</a>.
It is a package manager that builds packages from sources. It is a very interesting and promising project which allows you to build a vast variety of libraries/software with just a few steps.</p>

<p>I've just checked and <code>py-numpy</code> is a supported package (i.e. <code>spack list numpy</code>). If you want to install with default options (check them with <code>spack info py-numpy</code>), you can just install it with a simple <code>spack install py-numpy</code> and it will be built along with missig dependencies.</p>

<p>If you want to change something, e.g. you may want to use a particular implementation or version of BLAS/LAPACK, you can easily specify the wanted dependency (i.e. <code>spack install py-numpy ^openblas</code>)</p>

<p>I can assure you it will save you a lot of headaches, it did for me a lot of times. I use it both on the HPC I work on and on my local machines.</p>

<p>I've just shown you a few commands, but I just scraped the surface of what you can easily do with it (you may have multiple variant of numpy built with different BLAS implementations, or same implementation with different options, or ... in case I suggest you to start looking at <a href=""https://spack.readthedocs.io/en/latest/basic_usage.html#specs-dependencies"" rel=""nofollow noreferrer"">""spec syntax""</a>).</p>
","12494143","","","","","2019-12-17 19:58:48","","","","0","","",""
"55403422","2","","55402733","2019-03-28 17:14:45","","19","","<p>Polymorphic recursion (where a function calls itself at a different type than the one at which it was called) <em>always</em> requires a type signature. The full explanation is in <a href=""https://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-810004.4.1"" rel=""noreferrer"">Section 4.4.1</a> of the Haskell 2010 Report:</p>

<blockquote>
  <p>If a variable <code>f</code> is defined without providing a corresponding type signature declaration, then each use of <code>f</code> outside its own declaration group (see <a href=""https://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-880004.5"" rel=""noreferrer"">Section 4.5</a>) is treated as having the corresponding inferred, or <em>principal</em> type. However, to ensure that type inference is still possible, the defining occurrence, and all uses of <code>f</code> within its declaration group must have the same monomorphic type (from which the principal type is obtained by generalization, as described in <a href=""https://www.haskell.org/onlinereport/haskell2010/haskellch4.html#x10-900004.5.2"" rel=""noreferrer"">Section 4.5.2</a>).</p>
</blockquote>

<p>The same section later presents an example of polymorphic recursion supported by a type signature.</p>

<p>My understanding is that unaided type inference is generally undecidable in the presence of polymorphic recursion, so Haskell doesn't even try.</p>

<p>In this case, the type checker starts with</p>

<pre><code>w :: a
</code></pre>

<p>where <code>a</code> is a meta-variable. Since <code>fromInteger</code> is called with <code>w</code> as an argument within its own declaration (and therefore within its declaration group), the type checker unifies <code>a</code> with <code>Integer</code>. There are no variables left to generalize.</p>

<p>A slight modification of your program gives a different result for the same reason:</p>

<pre><code>v = fromIntegral v
</code></pre>

<p>By your original reasoning, Haskell would infer <code>v :: forall a. Num a =&gt; a</code>, defaulting the <code>v</code> on the RHS to type <code>Integer</code>:</p>

<pre><code>v :: forall a. Num a =&gt; a
v = fromIntegral (v :: Integer)
</code></pre>

<p>But instead, it starts with <code>v :: a</code>. Since <code>v</code> is passed to <code>fromIntegral</code>, it imposes <code>Integral a</code>. Finally, it generalizes <code>a</code>. In the end, the program turns out to be</p>

<pre><code>v :: forall a. Integral a =&gt; a
v = fromIntegral (v :: a)
</code></pre>
","1477667","","1477667","","2019-03-28 22:02:17","2019-03-28 22:02:17","","","","7","","",""
"58324379","2","","58322107","2019-10-10 13:41:31","","5","","<blockquote>
  <p>Does C offer something with similar functionality which would allow safely comparing arbitrary pointers.</p>
</blockquote>

<p>No</p>

<hr>

<p>First let us only consider <em>object pointers</em>.  <em>Function pointers</em> bring in a whole other set of concerns.</p>

<p>2 pointers <code>p1, p2</code> can have different encodings and point to the same address so <code>p1 == p2</code> even though <code>memcmp(&amp;p1, &amp;p2, sizeof p1)</code> is not 0.   Such architectures are rare.</p>

<p>Yet conversion of these pointer to <code>uintptr_t</code> does not require the same integer result leading to <code>(uintptr_t)p1 != (uinptr_t)p2</code>.  </p>

<p><code>(uintptr_t)p1 &lt; (uinptr_t)p2</code> itself is well legal code, by may not provide the hoped for functionality.  </p>

<hr>

<p>If code truly needs to compare unrelated pointers, form a helper function <code>less(const void *p1, const void *p2)</code> and perform platform specific code there.</p>

<p>Perhaps:</p>

<pre><code>// return -1,0,1 for &lt;,==,&gt; 
int ptrcmp(const void *c1, const void *c1) {
  // Equivalence test works on all platforms
  if (c1 == c2) {
    return 0;
  }
  // At this point, we know pointers are not equivalent.
  #ifdef UINTPTR_MAX
    uintptr_t u1 = (uintptr_t)c1;
    uintptr_t u2 = (uintptr_t)c2;
    // Below code ""works"" in that the computation is legal,
    //   but does it function as desired?
    // Likely, but strange systems lurk out in the wild. 
    // Check implementation before using
    #if tbd
      return (u1 &gt; u2) - (u1 &lt; u2);
    #else
      #error TBD code
    #endif
  #else
    #error TBD code
  #endif 
}
</code></pre>
","2410359","","2410359","","2019-10-10 21:31:06","2019-10-10 21:31:06","","","","0","","",""
"58332627","2","","58322107","2019-10-11 00:14:00","","19","","<p>On implementations with a flat memory model (basically everything), casting to <code>uintptr_t</code> will Just Work. </p>

<p>(But see <a href=""https://stackoverflow.com/questions/47687805/should-pointer-comparisons-be-signed-or-unsigned-in-64-bit-x86"">Should pointer comparisons be signed or unsigned in 64-bit x86?</a> for discussion of whether you should treat pointers as signed or not, including issues of forming pointers outside of objects which is UB in C.)</p>

<p><strong>But systems with non-flat memory models do exist, and thinking about them can help explain the current situation, like C++ having different specs for <code>&lt;</code> vs. <code>std::less</code>.</strong></p>

<hr>

<p>Part of the point of <code>&lt;</code> on pointers to separate objects being UB in C (or at least unspecified in some C++ revisions) is to allow for weird machines, including non-flat memory models.</p>

<p>A well-known example is x86-16 real mode where pointers are segment:offset, forming a 20-bit linear address via <code>(segment &lt;&lt; 4) + offset</code>.  The same linear address can be represented by multiple different seg:off combinations.</p>

<p><strong>C++ <code>std::less</code> on pointers on weird ISAs might need to be expensive</strong>, e.g. ""normalize"" a segment:offset on x86-16 to have offset &lt;= 15.  However, there's no <em>portable</em> way to implement this.  <strong>The manipulation required to normalize a <code>uintptr_t</code> (or the object-representation of a pointer object) is implementation-specific.</strong></p>

<p>But even on systems where C++ <code>std::less</code> has to be expensive, <code>&lt;</code> doesn't have to be.  For example, assuming a ""large"" memory model where an object fits within one segment, <code>&lt;</code> can just compare the offset part and not even bother with the segment part.  (Pointers inside the same object will have the same segment, and otherwise it's UB in C.  C++17 changed to merely ""unspecified"", which might still allow skipping normalization and just comparing offsets.)  This is assuming all pointers to any part of an object always use the same <code>seg</code> value, never normalizing.  This is what you'd expect an ABI to require for a ""large"" as opposed to ""huge"" memory model.  (See <a href=""https://stackoverflow.com/questions/58322107/does-c-have-an-equivalent-of-stdless-from-c/58332627#comment103050729_58332627"">discussion in comments</a>).</p>

<p>(Such a memory model might have a max object size of 64kiB for example, but a much larger max total address space that has room for many such max-sized objects.  ISO C allows implementations to have a limit on object size that's lower than the max value (unsigned) <code>size_t</code> can represent, <code>SIZE_MAX</code>.  For example even on flat memory model systems, GNU C limits max object size to <code>PTRDIFF_MAX</code> so size calculation can ignore signed overflow.)  See <a href=""https://stackoverflow.com/questions/9386979/what-is-the-maximum-size-of-an-array-in-c/9387041#9387041"">this answer</a> and discussion in comments.</p>

<p>If you want to allow objects larger than a segment, you need a ""huge"" memory model that has to worry about overflowing the offset part of a pointer when doing <code>p++</code> to loop through an array, or when doing indexing / pointer arithmetic.  This leads to slower code everywhere, but would probably mean that <code>p &lt; q</code> would happen to work for pointers to different objects, because an implementation targeting a ""huge"" memory model would normally choose to keep all pointers normalized all the time.  See <a href=""https://stackoverflow.com/questions/3575592/what-are-near-far-and-huge-pointers"">What are near, far and huge pointers?</a> - some real C compilers for x86 real mode did have an option to compile for the ""huge"" model where all pointers defaulted to ""huge"" unless declared otherwise.</p>

<p><strong>x86 real-mode segmentation isn't the only non-flat memory model possible</strong>, it's merely a useful concrete example to illustrate how it's been handled by C/C++ implementations.  In real life, implementations extended ISO C with the concept of <code>far</code> vs. <code>near</code> pointers, allowing programmers to choose when they can get away with just storing / passing around the 16-bit offset part, relative to some common data segment.</p>

<p>But a pure ISO C implementation would have to choose between a small memory model (everything except code in the same 64kiB with 16-bit pointers) or large or huge with all pointers being 32-bit.  Some loops could optimize by incrementing just the offset part, but pointer objects couldn't be optimized to be smaller.</p>

<hr>

<p><strong>If you knew what the magic manipulation was for any given implementation, you could implement it in pure C</strong>.  The problem is that different systems use different addressing and the details aren't parameterized by any portable macros.</p>

<p>Or maybe not: it might involve looking something up from a special segment table or something, e.g. like x86 protected mode instead of real mode where the segment part of the address is an index, not a value to be left shifted.  You could set up partially-overlapping segments in protected mode, and the segment selector parts of addresses wouldn't necessarily even be ordered in the same order as the corresponding segment base addresses.  Getting a linear address from a seg:off pointer in x86 protected mode might involve a system call, if the GDT and/or LDT aren't mapped into readable pages in your process.</p>

<p>(Of course mainstream OSes for x86 use a flat memory model so the segment base is always 0 (except for thread-local storage using <code>fs</code> or <code>gs</code> segments), and only the 32-bit or 64-bit ""offset"" part is used as a pointer.)</p>

<p>You could manually add code for various specific platforms, e.g. by default assume flat, or <code>#ifdef</code> something to detect x86 real mode and split <code>uintptr_t</code> into 16-bit halves for <code>seg -= off&gt;&gt;4; off &amp;= 0xf;</code> then combine those parts back into a 32-bit number.</p>
","224132","","2676371","","2019-12-30 23:03:27","2019-12-30 23:03:27","","","","18","","",""
"60160539","2","","56782788","2020-02-11 00:52:23","","0","","<p>I ended up creating a custom widget to handle text rendering. At the time of this writing it doesn't correctly rotate emoji and CJK characters, but it does handle orientation and line wrapping.</p>

<ul>
<li>The package is here: <a href=""https://pub.dev/packages/mongol"" rel=""nofollow noreferrer"">https://pub.dev/packages/mongol</a></li>
<li>I described how I made the package here: <a href=""https://www.raywenderlich.com/4562681-flutter-text-rendering"" rel=""nofollow noreferrer"">https://www.raywenderlich.com/4562681-flutter-text-rendering</a></li>
</ul>

<p>It wasn't a trivial task, but it is flexible. Other visitors to this question can follow a similar pattern if the other answers don't meet your needs. </p>

<p>If you would like more control over text rendering in Flutter, read <a href=""https://medium.com/@suragch/my-first-disappointment-with-flutter-5f6967ba78bf"" rel=""nofollow noreferrer"">My First Disappointment with Flutter</a> and add a comment to <a href=""https://github.com/flutter/flutter/issues/35994"" rel=""nofollow noreferrer"">this GitHub issue</a>.</p>
","3681880","","","","","2020-02-11 00:52:23","","","","0","","",""
"58322233","2","","58322107","2019-10-10 11:49:14","","17","","<p>I <a href=""https://stackoverflow.com/questions/57639853/is-comparing-two-pointers-with-undefined-behavior-if-they-are-both-cast-to-an"">once tried to find a way around this</a> and I did find a solution that works for overlapping objects and in most other cases assuming the compiler does the ""usual"" thing.</p>

<p>You can first implement the suggestion in <a href=""https://stackoverflow.com/questions/4023320/how-to-implement-memmove-in-standard-c-without-an-intermediate-copy"">How to implement memmove in standard C without an intermediate copy?</a> and then if that doesn't work cast to <code>uintptr</code> (a wrapper type for either <code>uintptr_t</code> or <code>unsigned long long</code> depending on whether <code>uintptr_t</code> is available) and get a most-likely accurate result (although it probably wouldn't matter anyway):</p>

<pre><code>#include &lt;stdint.h&gt;
#ifndef UINTPTR_MAX
typedef unsigned long long uintptr;
#else
typedef uintptr_t uintptr;
#endif

int pcmp(const void *p1, const void *p2, size_t len)
{
    const unsigned char *s1 = p1;
    const unsigned char *s2 = p2;
    size_t l;

    /* Check for overlap */
    for( l = 0; l &lt; len; l++ )
    {
        if( s1 + l == s2 || s1 + l == s2 + len - 1 )
        {
            /* The two objects overlap, so we're allowed to
               use comparison operators. */
            if(s1 &gt; s2)
                return 1;
            else if (s1 &lt; s2)
                return -1;
            else
                return 0;
        }
    }

    /* No overlap so the result probably won't really matter.
       Cast the result to `uintptr` and hope the compiler
       does the ""usual"" thing */
    if((uintptr)s1 &gt; (uintptr)s2)
        return 1;
    else if ((uintptr)s1 &lt; (uintptr)s2)
        return -1;
    else
        return 0;
}
</code></pre>
","10795151","","10795151","","2020-01-11 17:09:11","2020-01-11 17:09:11","","","","0","","",""
"54203135","2","","54200988","2019-01-15 16:36:34","","59","","<p>The situation is exactly analogous to <code>noexcept(noexcept(...))</code>. Sure, this sounds more like a bad thing than a good thing, but let me explain. :)  We'll start with what you already know:</p>

<p>C++11 has ""<code>noexcept</code>-clauses"" and ""<code>noexcept</code>-expressions."" They do different things.</p>

<ul>
<li><p>A <code>noexcept</code>-clause says, ""This function <em>should be noexcept when...</em> (some condition)."" It goes on a function declaration, takes a boolean parameter, and causes a behavioral change in the declared function.</p></li>
<li><p>A <code>noexcept</code>-expression says, ""Compiler, <em>please tell me whether</em> (some expression) is noexcept."" It is itself a boolean expression. It has no ""side effects"" on the behavior of the program — it's just asking the compiler for the answer to a yes/no question. ""Is this expression noexcept?""</p></li>
</ul>

<p>We <em>can</em> nest a <code>noexcept</code>-expression inside a <code>noexcept</code>-clause, but we typically consider it bad style to do so.</p>

<pre><code>template&lt;class T&gt;
void incr(T t) noexcept(noexcept(++t));  // NOT SO HOT
</code></pre>

<p>It's considered better style to encapsulate the <code>noexcept</code>-expression in a type-trait.</p>

<pre><code>template&lt;class T&gt; inline constexpr bool is_nothrow_incrable_v =
    noexcept(++std::declval&lt;T&amp;&gt;());  // BETTER, PART 1

template&lt;class T&gt;
void incr(T t) noexcept(is_nothrow_incrable_v&lt;T&gt;);  // BETTER, PART 2
</code></pre>

<hr>

<p>The C++2a Working Draft has ""<code>requires</code>-clauses"" and ""<code>requires</code>-expressions."" They do different things.</p>

<ul>
<li><p>A <code>requires</code>-clause says, ""This function <em>should participate in overload resolution when...</em> (some condition)."" It goes on a function declaration, takes a boolean parameter, and causes a behavioral change in the declared function.</p></li>
<li><p>A <code>requires</code>-expression says, ""Compiler, <em>please tell me whether</em> (some set of expressions) is well-formed."" It is itself a boolean expression. It has no ""side effects"" on the behavior of the program — it's just asking the compiler for the answer to a yes/no question. ""Is this expression well-formed?""</p></li>
</ul>

<p>We <em>can</em> nest a <code>requires</code>-expression inside a <code>requires</code>-clause, but we typically consider it bad style to do so.</p>

<pre><code>template&lt;class T&gt;
void incr(T t) requires (requires(T t) { ++t; });  // NOT SO HOT
</code></pre>

<p>It's considered better style to encapsulate the <code>requires</code>-expression in a type-trait...</p>

<pre><code>template&lt;class T&gt; inline constexpr bool is_incrable_v =
    requires(T t) { ++t; };  // BETTER, PART 1

template&lt;class T&gt;
void incr(T t) requires is_incrable_v&lt;T&gt;;  // BETTER, PART 2
</code></pre>

<p>...or in a (C++2a Working Draft) concept.</p>

<pre><code>template&lt;class T&gt; concept Incrable =
    requires(T t) { ++t; };  // BETTER, PART 1

template&lt;class T&gt;
void incr(T t) requires Incrable&lt;T&gt;;  // BETTER, PART 2
</code></pre>
","1424877","","1424877","","2019-01-16 16:08:59","2019-01-16 16:08:59","","","","4","","",""
"58900342","2","","54401851","2019-11-17 12:17:32","","-1","","<p>If you learn both technology in deep. So, you will find big differences:</p>

<ol>
<li>Programming language- Java Script and Dart</li>
<li>Technical architecture- Flex and Skia.</li>
<li>UI components and development API: Widget in flutter but views in React native.</li>
<li>Developer productivity: Debugging is very easy in Flutter.</li>
<li>Community: Big Community support in React Native. </li>
<li>Documentation &amp; Toolkit: Flutter team have created simple duc for all widgets.</li>
<li>Testing support: Flutter providing testing libs.</li>
<li>DevOps and CI/CD: Flutter Providing CI/CD supports.</li>
</ol>

<p>There are more difference between <a href=""https://www.developerlibs.com/2019/11/flutter-vs-react-native.html"" rel=""nofollow noreferrer"">React Native and Flutter that you can read her</a>.</p>
","3816476","","","","","2019-11-17 12:17:32","","","","0","","",""
"59062682","2","","58654714","2019-11-27 03:44:08","","0","","<p>You can use Carthage to add the RxSwift framework. </p>

<p>Basically, Carthage gives you a similar <em>traditional RxSwift.framework style package</em>.</p>

<p>Then try <code>carthage update --no-use-binaries</code>.</p>
","4810957","","","","","2019-11-27 03:44:08","","","","0","","",""
"59458311","2","","59458257","2019-12-23 16:14:40","","10","","<p>Yes, <em>iterables</em> and <em>iterators</em> are different things, but most iterators (including all of the ones you get from JavaScript itself, such as from the <code>keys</code> or <code>values</code> methods on <code>Array.prototype</code> or generators from generator functions) inherit from the <a href=""https://tc39.es/ecma262/#sec-%25iteratorprototype%25-object"" rel=""nofollow noreferrer"">%IteratorPrototype% object</a>, which has a <code>Symbol.iterator</code> method like this:</p>

<pre><code>[Symbol.iterator]() {
    return this;
}
</code></pre>

<p>The result is that all standard iterators are also iterables. That's so you can use them directly, or use them in <code>for-of</code> loops and such (which expect iterables, not iterators).</p>

<p>Consider the <code>keys</code> method of arrays: It returns an array iterator that visits the array's keys (its indexes, as numbers). Note that it returns an <em>iterator</em>. But a common use of it is:</p>

<pre><code>for (const index of someArray.keys()) {
    // ...
}
</code></pre>

<p><code>for-of</code> takes an <em>iterable</em>, not an <em>iterator</em>, so why does that work?</p>

<p>It works because the iterator is also iterable; <code>Symbol.iterator</code> just returns <code>this</code>.</p>

<p>Here's an example I use in Chapter 6 of my book: If you wanted to loop over all entries but skip the first one and you didn't want to use <code>slice</code> to slice off the subset, you can get the iterator, read the first value, then hand off to a <code>for-of</code> loop:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const a = [""one"", ""two"", ""three"", ""four""];
const it = a[Symbol.iterator]();
// Skip the first one
it.next();
// Loop through the rest
for (const value of it) {
    console.log(value);
}</code></pre>
</div>
</div>
</p>

<p>Note that this is all <em>standard</em> iterators. Sometime people show examples of manually-coded iterators like this:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""true"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code snippet-currently-hidden"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function range(start, end) {
    let value = start;
    let inc = start &lt; end ? 1 : -1;
    return {
        next() {
            const done = value == end;
            const result = {done, value};
            if (!done) {
                value += inc;
            }
            return result;
        }
    };
}

// Works when used directly
const it = range(1, 5);
let result;
while (!(result = it.next()).done) {
    console.log(result.value);
}

// Fails when an iterable is expected
try {
    for (const value of range(1, 5)) {
        console.log(value);
    }
} catch (e) {
    console.error(e.message);
}</code></pre>
</div>
</div>
</p>

<p>The iterator returned by <code>range</code> there is <em>not</em> an iterable, so it fails when we try to use it with <code>for-of</code>.</p>

<p>To make it iterable, we'd need to either:</p>

<ol>
<li>Add the <code>Symbol.iterator</code> method at the beginning of the answer above to it, or</li>
<li>Make it inherit from %IteratorPrototype%, which already has that method</li>
</ol>

<p>Sadly, TC39 decided not to provide a direct way to get the %IteratorPrototype% object. There's an indirect way (getting an iterator from an array, then taking its prototype, which is defined to be %IteratorPrototype%), but it's a pain.</p>

<p>But there's no need to write iterators manually like that anyway; just use a generator function, since the generator it returns is iterable:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""true"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code snippet-currently-hidden"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function* range(start, end) {
    let value = start;
    let inc = start &lt; end ? 1 : -1;
    while (value !== end) {
        yield value;
        value += inc;
    }
}

// Works when used directly
const it = range(1, 5);
let result;
while (!(result = it.next()).done) {
    console.log(result.value);
}

// Also works when an iterable is expected
for (const value of range(1, 5)) {
    console.log(value);
}</code></pre>
</div>
</div>
</p>

<hr>

<p>In contrast, not all iterables are iterators. Arrays are iterable, but not iterators. So are strings, Maps, and Sets.</p>
","157247","","157247","","2019-12-24 08:32:35","2019-12-24 08:32:35","","","","0","","",""
"59499592","2","","59458257","2019-12-27 10:45:49","","0","","<p>I found that there are some more precise definitions of the terms, and these are the more definitive answers:</p>

<p>According to <a href=""http://www.ecma-international.org/ecma-262/6.0/#sec-generatorfunction-objects"" rel=""nofollow noreferrer"">the ES6 Specs</a> and <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/function*"" rel=""nofollow noreferrer"">MDN</a>:</p>

<p>When we have</p>

<pre><code>function* foo() {   // note the ""*""
    yield 1;
    yield 3;
    yield 5;
}
</code></pre>

<p><code>foo</code> is called generator <em>function</em>. And then when we have</p>

<pre><code>let bar = foo();
</code></pre>

<p><code>bar</code> is a generator <em>object</em>. And <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator"" rel=""nofollow noreferrer"">a generator object conforms to both the iterable protocol and the iterator protocol</a>.</p>

<p>The simpler version is the iterator interface, which is just a <code>.next()</code> method.</p>

<p>The iterable protocol is: for the object <code>obj</code>, <code>obj[Symbol.iterator]</code> gives a ""zero arguments function that returns an object, conforming to the iterator protocol"".</p>

<p>By the <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Generator"" rel=""nofollow noreferrer"">title of the MDN link</a>, it also seems we can also just call a generator object a ""generator"".</p>

<p>Note that in <a href=""https://leanpub.com/understandinges6/read"" rel=""nofollow noreferrer"">Nicolas Zakas's book Understanding ECMAScript 6</a>, he probably loosely called a ""generator function"" as a ""generator"", and a ""generator object"" as an ""iterator"".  The take away point is, they are really both ""generator"" related -- one is a generator function, and one is a generator object, or generator.  The generator object conforms to both the iteratable protocol and the iterator protocol.</p>

<p>If it is just an object conforming to the <strong>iterator</strong> protocol, you <strong>cannot</strong> use <code>[...iter]</code> or <code>for (a of iter)</code>. It has to be an object that conforms to the <strong>iterable</strong> protocol.</p>

<p>And then, there is also <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Iterator"" rel=""nofollow noreferrer"">a new Iterator class, in a future JavaScript specs that is still in a draft</a>. It has a larger interface, including methods such as <code>forEach</code>, <code>map</code>, <code>reduce</code> of the current Array interface, and new ones, such as and <code>take</code>, and <code>drop</code>. The current iterator refers to the object with just the <code>next</code> interface.</p>

<p>To answer the original question: what is the difference between an iterator and an iterable, the answer is: an iterator is an object with the interface <code>.next()</code>, and an iterable is an object <code>obj</code> such that <code>obj[Symbol.iterator]</code> can give a zero-argument function that, when invoked, returns an iterator.</p>

<p>And a generator is both an iterable and iterator, to add to that.</p>
","325418","","325418","","2019-12-29 20:23:31","2019-12-29 20:23:31","","","","0","","",""
"58342351","2","","58340585","2019-10-11 13:29:34","","4","","<p>This is the result of (as far as I can tell) an undocumented feature of the ruby language, which is best explained by <a href=""https://github.com/ruby/ruby/blob/c866663784ea5a8f16e7fe5127127fb46ae90e6e/spec/ruby/language/regexp_spec.rb#L5-L15"" rel=""nofollow noreferrer"">this spec</a>:</p>

<pre><code>it ""matches against $_ (last input) in a conditional if no explicit matchee provided"" do
  -&gt; {
    eval &lt;&lt;-EOR
    $_ = nil
    (true if /foo/).should_not == true
    $_ = ""foo""
    (true if /foo/).should == true
    EOR
  }.should complain(/regex literal in condition/)
end
</code></pre>

<p>You can generally think of <code>$_</code> as the ""last string read by <code>gets</code>""</p>

<p>To make matters even more confusing, <a href=""https://ruby-doc.org/docs/ruby-doc-bundle/UsersGuide/rg/globalvars.html"" rel=""nofollow noreferrer""><code>$_</code> (along with <code>$-</code>) is <strong>not</strong> a global variable; it has local scope</a>.</p>

<hr>

<p>When a ruby script starts, <code>$_ == nil</code>.</p>

<p>So, the code:</p>

<pre><code>// ? 'Regexps are truthy' : 'Regexps are falsey'
</code></pre>

<p>Is being interpreted like:</p>

<pre><code>(// =~ nil) ? 'Regexps are truthy' : 'Regexps are falsey'
</code></pre>

<p>...Which returns falsey.</p>

<p>On the other hand, for a <strong>non-literal</strong> regexp (e.g. <code>r = //</code> or <code>Regexp.new('')</code>), this special interpretation does not apply.</p>

<p><code>//</code> is truthy; just like all other object in ruby besides <code>nil</code> and <code>false</code>.</p>

<hr>

<p>Unless running a ruby script directly on the command line (i.e. with the <code>-e</code> flag), the ruby parser will display a warning against such usage:</p>

<blockquote>
  <p>warning: regex literal in condition</p>
</blockquote>

<p>You <em>could</em> make use of this behaviour in a script, with something like:</p>

<pre><code>puts ""Do you want to play again?""
gets
# (user enters e.g. 'Yes' or 'No')
/y/i ? play_again : back_to_menu
</code></pre>

<p>...But it would be more normal to assign a local variable to the result of <code>gets</code> and perform the regex check against this value explicitly.</p>

<p>I'm not aware of any use case for performing this check with an <em>empty</em> regex, especially when defined as a literal value. The result you've highlighted would indeed catch most ruby developers off-guard.</p>
","1954610","","1954610","","2019-10-11 13:57:43","2019-10-11 13:57:43","","","","7","","",""
"58342366","2","","58340585","2019-10-11 13:30:27","","6","","<p>This isn’t a bug. What is happening is Ruby is rewriting the code so that</p>

<pre><code>if /foo/
  whatever
end
</code></pre>

<p>effectively becomes</p>

<pre><code>if /foo/ =~ $_
  whatever
end
</code></pre>

<p>If you are running this code in a normal script (and not using the <code>-e</code> option) then you should see a warning:</p>

<pre class=""lang-none prettyprint-override""><code>warning: regex literal in condition
</code></pre>

<p>This is probably somewhat confusing most of the time, which is why the warning is given, but can be useful for one lines using the <code>-e</code> option. For example you can print all lines matching a given regexp from a file with</p>

<pre><code>$ ruby -ne 'print if /foo/' filename
</code></pre>

<p>(The default argument for <code>print</code> is <code>$_</code> as well.)</p>
","214790","","214790","","2019-10-15 14:04:51","2019-10-15 14:04:51","","","","4","","",""
"58230491","2","","57842756","2019-10-04 05:35:25","","0","","<p>The fact that C++ compilers accept compiling code that obviously results in undefined behavior <em>at all</em> is a major flaw in the compilers.  The reason they don't fix this is because doing so would probably break some usable builds.</p>

<p>Most of the warnings should be fatal errors that prevent the build from completing.  The defaults to just display errors and do the build anyway are wrong and if you don't override them to treat warnings as errors and leave some warnings then you will likely end up with your program crashing and doing random things.</p>
","281920","","","","","2019-10-04 05:35:25","","","","2","","",""
"57861636","2","","57842756","2019-09-09 21:52:39","","17","","<p>The other answers are excellent and I don't want to repeat what they have said. </p>

<p>One other aspect to ""why enable warnings"" that hasn't properly been touched on is that they help enormously with code maintenance. When you write a program of significant size, it becomes impossible to keep the whole thing in your head at once. You typically have a function or three that you're actively writing and thinking about, and perhaps a file or three on your screen that you can refer to, but the bulk of the program exists in the background somewhere and you have to trust that it keeps working.</p>

<p>Having warnings on, and having them as energetic and in your face as possible, helps to alert you if something you change makes trouble for something that you can't see. </p>

<p>Take for example, the clang warning <code>-Wswitch-enum</code>. That triggers a warning if you use a switch on an enum and miss out one of the possible enum values. It's something you might think would be an unlikely mistake to make: you probably at least looked at the list of enum values when you wrote the switch statement. You might even have an IDE that generated the switch options for you, leaving no room for human error.</p>

<p>This warning really comes into its own when, six months later you add another possible entry to the enum. Again, if you're thinking about the code in question you'll probably be fine. But if this enum is used for multiple different purposes and it's for one of those that you need the extra option, it's very easy to forget to update a switch in a file you haven't touched for 6 months. </p>

<p>You can think of warnings in the same way as you'd think of automated test cases: they help you make sure that the code is sensible and doing what you need when you first write it, but they help even more to make sure that it keeps doing what you need while you prod at it. The difference is that test cases work very narrowly to the requirements of your code and you have to write them, while warnings work broadly to sensible standards for almost all code, and they're very generously supplied by the boffins who make the compilers. </p>
","1688786","","","","","2019-09-09 21:52:39","","","","2","","",""
"55490354","2","","55487397","2019-04-03 08:21:47","","41","","<p>We cannot directly upgrade VS 2017 to VS 2019.  They are compatible and work side by side though (like the following).  Please download and install VS 2019 from <a href=""https://docs.microsoft.com/en-us/visualstudio/releases/2019/release-notes"" rel=""noreferrer"">https://docs.microsoft.com/en-us/visualstudio/releases/2019/release-notes</a> 
<a href=""https://i.stack.imgur.com/L3Gay.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/L3Gay.png"" alt=""enter image description here""></a></p>
","6593065","","5405967","","2019-06-29 14:25:46","2019-06-29 14:25:46","","","","5","","",""
"60294314","2","","56916948","2020-02-19 06:31:17","","8","","<p>Could you please add this line code like the following</p>

<p><strong>STEP1:-</strong></p>

<p><strong>@available out the SceneDelegate.swift</strong></p>

<pre><code>@available(iOS 13.0, *)
class SceneDelegate: UIResponder, UIWindowSceneDelegate {

//...

}
</code></pre>

<p><strong>STEP2:-</strong></p>

<p><strong>@available out some methods in AppDelegate.swift</strong></p>

<pre><code>// AppDelegate.swift

@available(iOS 13.0, *)
func application(_ application: UIApplication, configurationForConnecting connectingSceneSession: UISceneSession, options: UIScene.ConnectionOptions) -&gt; UISceneConfiguration {
    // Called when a new scene session is being created.
    // Use this method to select a configuration to create the new scene with.
    return UISceneConfiguration(name: ""Default Configuration"", sessionRole: connectingSceneSession.role)
}

@available(iOS 13.0, *)
func application(_ application: UIApplication, didDiscardSceneSessions sceneSessions: Set&lt;UISceneSession&gt;) {
    // Called when the user discards a scene session.
    // If any sessions were discarded while the application was not running, this will be called shortly after application:didFinishLaunchingWithOptions.
    // Use this method to release any resources that were specific to the discarded scenes, as they will not return.
}
</code></pre>

<p><strong>STEP3:-</strong></p>

<p>You should declare <strong>window</strong> property in AppDelegate.swift file
 like <em>var window: UIWindow?</em></p>

<pre><code>class AppDelegate: UIResponder, UIApplicationDelegate {

     var window: UIWindow?

    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool {
        // Override point for customization after application launch.
        return true
    }
</code></pre>
","1980105","","1980105","","2020-02-19 06:36:33","2020-02-19 06:36:33","","","","1","","",""
"60448145","2","","54401851","2020-02-28 08:50:19","","1","","<blockquote>
  <p>Flutter vs React Native: A Developer’s Perspective</p>
</blockquote>

<p><code>React Native</code> by Facebook and <code>Flutter</code> by Google – two hot cross-platform app development technologies creating a buzz. In this post, we will compare both of them in detail from a developer’s perspective.</p>

<p><strong>What’s Flutter and React Native?</strong></p>

<p><code>React Native</code> is a project started by Facebook internally that they open-sourced in 2015. On the other side is <code>Flutter</code>, a project started by Google which they have been heavily promoting since I/O 2017. Both of these technologies help app developers build cross-platform apps faster by using a single programming language. React Native is already a mature tool and has a huge community, but Flutter also started seeing huge adoption rates since 2017. In this post, we will compare each of them using ten criteria:</p>

<ul>
<li>Programming language</li>
<li>Technical architecture</li>
<li>Installation</li>
<li>Setup and project configuration</li>
<li>UI components and development API</li>
<li>Developer productivity</li>
<li>Community support</li>
<li>Testing support</li>
<li>Build &amp; release automation support</li>
<li>DevOps and CI/CD support</li>
</ul>

<p><strong>Programming Language</strong></p>

<p>The key benefit of using a cross-platform mobile app development technology is the ability to use a single programming language to develop apps for both iOS and Android.</p>

<ul>
<li>React Native — JavaScript</li>
<li>Flutter — Dart</li>
</ul>

<p><strong>Installation</strong></p>

<p>The installation method should be straightforward without having too many complicated steps so that it could be easily learned by developers that are just starting with it.</p>

<ul>
<li>React Native - NPM</li>
<li>Flutter - Binary Download from Source</li>
</ul>

<p><strong>UI Components and Development API</strong></p>

<ul>
<li>React Native - Less Components</li>
<li>Flutter - Rich in Components</li>
</ul>

<p><strong>Conclusion</strong></p>

<p>React Native and Flutter both have their pros and cons. Some of the industry experts have predicted that Flutter is the future of mobile app development. Considering the comparison above, it’s clear that Flutter has entered the cross-platform mobile development race very strongly. Let’s not predict the future but wait and watch!</p>
","12092200","","","","","2020-02-28 08:50:19","","","","0","","",""
"54176770","2","","54044022","2019-01-14 06:41:25","","1","","<p>In my environment (Ubuntu 16.04, 4GB RAM, Python 3.5.2) the fastest method was (the prototypical<sup>1</sup>) <code>csv_reader_5</code> (taken from <a href=""https://stackoverflow.com/a/54166567/6394138"">U9-Forward's answer</a>) which ran only less than 25% slower than reading the entire CSV file with no conversions. I improved that approach by implementing a filter/wrapper that replaces the char in the <code>read()</code> method:</p>

<pre><code>class SingleCharReplacingFilter:

    def __init__(self, reader, oldchar, newchar):
        def proxy(obj, attr):
            a = getattr(obj, attr)
            if attr in ('read'):
                def f(*args):
                    return a(*args).replace(oldchar, newchar)
                return f
            else:
                return a

        for a in dir(reader):
            if not a.startswith(""_"") or a == '__iter__':
                setattr(self, a, proxy(reader, a))

def csv_reader_6(x):
    with x as fin:
        return pd.read_csv(SingleCharReplacingFilter(fin, "";"", "",""),
                            sep=',', header=None, usecols=[3, 4, 5])
</code></pre>

<p>The result is a little better performance compared to reading the entire CSV file with no conversions:</p>

<pre><code>In [3]: %timeit pd.read_csv(StringIO(x))
605 ms ± 3.24 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)

In [4]: %timeit csv_reader_5(StringIO(x))
733 ms ± 3.49 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)

In [5]: %timeit csv_reader_6(StringIO(x))
568 ms ± 2.98 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
</code></pre>

<hr>

<p><sup>1</sup> I call it prototypical because it assumes that the input stream is of <code>StringIO</code> type (since it calls <code>.getvalue()</code> on it).</p>
","6394138","","6394138","","2019-01-16 08:50:56","2019-01-16 08:50:56","","","","3","","",""
"56508769","2","","56508764","2019-06-08 17:42:45","","97","","<p><strong>iOS 13 has a new way of sending app lifecycle events</strong>. Instead of coming through the <code>UIApplicationDelegate</code> they come through the <a href=""https://developer.apple.com/documentation/uikit/uiwindowscenedelegate"" rel=""noreferrer""><code>UIWindowSceneDelegate</code></a> which is a <a href=""https://developer.apple.com/documentation/uikit/uiscenedelegate?language=objc"" rel=""noreferrer""><code>UISceneDelegate</code></a> sub-protocol. <code>UISceneDelegate</code> has the important delegate methods.</p>

<p>This change is to support multiple windows in iOS 13. There's more information in WWDC 2019 session 212 ""<a href=""https://developer.apple.com/videos/play/wwdc2019/212/"" rel=""noreferrer"">Introducing Multiple Windows on iPad</a>"". The technical information starts at <a href=""https://developer.apple.com/videos/play/wwdc2019-212/?time=818"" rel=""noreferrer"">around 14:30</a> and is presented by a man with very sparkly high-tops. The shorter session 258 <a href=""https://developer.apple.com/videos/play/wwdc2019/258/"" rel=""noreferrer"">Architecting Your App for Multiple Windows</a> also has a great introduction to what's changed.</p>

<p><strong>Here's how it works:</strong> If you have an ""<strong>Application Scene Manifest</strong>"" in your Info.plist and your app delegate has a <code>configurationForConnectingSceneSession</code> method, the <code>UIApplication</code> won't send background and foreground lifecycle messages to your app delegate. That means the code in these methods won't run:</p>

<ul>
<li><code>applicationDidBecomeActive</code> </li>
<li><code>applicationWillResignActive</code> </li>
<li><code>applicationDidEnterBackground</code> </li>
<li><code>applicationWillEnterForeground</code></li>
</ul>

<p>The app delegate will still receive the <code>willFinishLaunchingWithOptions:</code> and <code>didFinishLaunchingWithOptions:</code> method calls so any code in those methods will work as before.</p>

<p><strong>If you want the old behaviour back</strong> you need to</p>

<ol>
<li>Delete the ""Application Scene Manifest"" entry from the app's Info.plist</li>
<li>Comment or delete the <code>application:configurationForConnectingSceneSession:options:</code> method (or the Swift <code>application(_:configurationForConnecting:options:)</code>function)</li>
<li>Add the window property back to your app delegate (<code>@property (strong, nonatomic) UIWindow *window;</code>)</li>
</ol>

<p>Alternatively, open the SceneDelegate file that Xcode made and use the new lifecycle methods in there:</p>

<pre><code>- (void)sceneDidBecomeActive:(UIScene *)scene {
}
- (void)sceneWillResignActive:(UIScene *)scene {
}
... etc
</code></pre>

<p>It's possible to use the new <code>UIScene</code> lifecycle stuff without adopting multiple window support by setting ""Enable Multiple Windows"" (""UIApplicationSupportsMultipleScenes"") to ""NO"" in the Info.plist (this is the default for new projects). This way you can start adopting the new API in smaller steps.</p>

<p>You can see that the scene delegate method names are a close match for the app delegate ones. One confusing thing is that the app delegate methods aren't deprecated so you won't get a warning if you have both app delegate and scene delegate methods in place but only one will be called.</p>

<p>Other things that <code>UISceneDelegate</code> takes over are user activities (<code>continueUserActivity:</code> etc), state restoration (<code>stateRestorationActivityForScene:</code> etc), status bar questions and opening URLs. (I'm not sure if these replace the app delegate methods). It also has analogous notifications for the lifecycle events (like <code>UISceneWillDeactivateNotification</code>).</p>

<p><strong>From the WWDC Session, some images for you:</strong></p>

<p>The function equivalents for Swift:</p>

<p><a href=""https://i.stack.imgur.com/b9Xj0.jpg"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/b9Xj0.jpg"" alt=""enter image description here""></a></p>

<p>The class responsibilities:</p>

<p><a href=""https://i.stack.imgur.com/nz4t6.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/nz4t6.png"" alt=""enter image description here""></a></p>
","74118","","74118","","2019-11-29 13:25:51","2019-11-29 13:25:51","","","","11","","",""
"56577324","2","","56577201","2019-06-13 09:23:03","","91","","<p>Typescript treats files without import/exports as legacy script files. As such files are not modules and any definitions they have get merged in the global namespace. <code>isolatedModules</code> forbids such files.</p>

<p>Adding any import or export to a file makes it a module and the error disappears.</p>

<p>Also <code>export {}</code> is a handy way to make a file a module without importing anything.</p>
","125734","","454137","","2019-08-28 23:23:39","2019-08-28 23:23:39","","","","0","","",""
"58648094","2","","58647874","2019-10-31 16:59:35","","2","","<p>It is only a requirement for sequence containers to support the construction from iterators that satisfy the criteria of implicit convertibility.</p>

<p>This does not by itself disallow sequence containers to from supporting that construction from iterators that don't satisfy that criteria as far as I can tell<sup>1</sup>. There is explicit rule about that:</p>

<blockquote>
  <p>If the constructor ... is called with a type InputIterator that does not <em>qualify as an input iterator</em>, then the constructor shall not participate in overload resolution.</p>
</blockquote>

<p>It is unclear what ""qualify as an input iterator"" means exactly in the context. Is it informal way to express Cpp17InputIterator, or does it attempt to refer to requirements of i and j? I don't know. Whether it is allowed or not, standard doesn't have a strict requirement for detecting it:</p>

<blockquote>
  <p>[container.requirements.general]</p>
  
  <p>The behavior of certain container member functions and deduction guides depends on whether types qualify as input iterators or allocators.
  The extent to which an implementation determines that a type cannot be an input iterator is unspecified, except that as a minimum integral types shall not qualify as input iterators. ...</p>
</blockquote>

<p>With the interpretation that any Cpp17InputIterator ""qualifies as an input iterator"", the example program would not be required to be ill-formed. But it is not guaranteed to be well-formed either.</p>

<p><sup>1</sup>In such case, it might be considered a quality of implementation issue to warn when relying on it. On the other hand, this limitation to implicit conversions may be considered a <a href=""https://cplusplus.github.io/LWG/issue3297"" rel=""nofollow noreferrer"">defect</a>.</p>

<hr>

<p>P.S. This compiles without warnings in Clang (with libc++) and Msvc as well.</p>

<p>P.P.S. This wording seems to have been added in C++11 (which is natural, as then were explicit constructors also introduced).</p>
","2079303","","2079303","","2019-10-31 17:35:30","2019-10-31 17:35:30","","","","5","","",""
"58726292","2","","56508764","2019-11-06 08:55:00","","2","","<p>This thread helped me:</p>

<p><a href=""https://stackoverflow.com/questions/57488057/view-controller-responds-to-app-delegate-notifications-in-ios-12-but-not-in-ios?noredirect=1&amp;lq=1"">View controller responds to app delegate notifications in iOS 12 but not in iOS 13</a></p>

<p>Objective C:</p>

<pre><code>if (@available(iOS 13.0, *)) {
    [[NSNotificationCenter defaultCenter] addObserver:self 
          selector:@selector(appWillResignActive:) 
          name:UISceneWillDeactivateNotification object:nil];

    [[NSNotificationCenter defaultCenter] addObserver:self 
          selector:@selector(appDidBecomeActive:) 
          name:UISceneDidActivateNotification object:nil];

}
else {
    [[NSNotificationCenter defaultCenter] addObserver:self 
          selector:@selector(appWillResignActive:) 
          name:UIApplicationWillResignActiveNotification object:nil];


    [[NSNotificationCenter defaultCenter]addObserver:self
          selector:@selector(appDidBecomeActive:)
          name:UIApplicationDidBecomeActiveNotification
                                              object:nil];
}
</code></pre>
","1815840","","1815840","","2019-11-06 10:31:48","2019-11-06 10:31:48","","","","0","","",""
"59054876","2","","59054707","2019-11-26 16:01:07","","8","","<p>That makes sense. 
It's an 'invalid pointer value' because it does not point to an object. </p>

<p>See later in that section, where it says:</p>

<blockquote>
  <p>A pointer value becomes invalid when the storage it denotes reaches the end of its storage duration</p>
</blockquote>

<p>That implies that it's not the ""value"" of the pointer that makes it invalid, but rather that it does not point to a valid object.</p>
","992490","","","","","2019-11-26 16:01:07","","","","2","","",""
"59054943","2","","59054707","2019-11-26 16:04:32","","6","","<p>That is correct.</p>

<p>There is no object at that location in memory. The memory ""belongs to you"". However, whether a pointer is valid is determined not by memory allocations, but by the existence of an object that it points to. This pointer does not point to any object, so it is an invalid pointer.</p>

<p><a href=""http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2019/p0593r3.html"" rel=""nofollow noreferrer"">p0593rX</a>, if adopted in the future, would change this, basically by putting an object there for you. That's actually quite important, because at the moment any use of <code>malloc</code> in C++ I can think of (including placement new) currently has undefined behaviour.</p>
","560648","","560648","","2019-11-26 19:36:26","2019-11-26 19:36:26","","","","3","","",""
"59418515","2","","59418514","2019-12-20 00:26:27","","22","","<p>This is remarkably easy with the <a href=""http://eel.is/c++draft/#time"" rel=""nofollow noreferrer"">C++20 chrono specification</a>.  Below I show a function which inputs an arbitrary date, and prints this information to <code>cout</code>.  Though at the time of this writing, the <a href=""http://eel.is/c++draft/#time"" rel=""nofollow noreferrer"">C++20 chrono specification</a> isn't yet shipping, it is approximated by a <a href=""https://github.com/HowardHinnant/date"" rel=""nofollow noreferrer"">free, open-source library</a>.  So you can experiment with it today, and even include it in shipping applications as long as you adopt C++11 or later.</p>

<p>This answer will take the form of a function:</p>

<pre><code>void info(std::chrono::sys_days sd);
</code></pre>

<p><code>sys_days</code> is a day-precision <code>time_point</code> in the <code>system_clock</code> family.  That means it is simply a count of days since 1970-01-01 00:00:00 UTC.  The type alias <code>sys_days</code> is new with C++20, but the underlying type has been available since C++11 (<code>time_point&lt;system_clock, duration&lt;int, ratio&lt;86400&gt;&gt;&gt;</code>).  If you use the <a href=""https://github.com/HowardHinnant/date"" rel=""nofollow noreferrer"">open-source C++20 preview library</a>, <code>sys_days</code> is in <code>namespace date</code>.</p>

<p>The code below assumes function-local:</p>

<pre><code>using namespace std;
using namespace std::chrono;
</code></pre>

<p>to reduce verbosity.  If you are experimenting with the <a href=""https://github.com/HowardHinnant/date"" rel=""nofollow noreferrer"">open-source C++20 preview library</a>, also assume:</p>

<pre><code>using namespace date;
</code></pre>

<p><strong>Heading</strong></p>

<p>To output the first two lines is simple:</p>

<pre><code>cout &lt;&lt; format(""{:%d %B %Y is a %A}\n"", sd)
     &lt;&lt; ""\nAdditional facts\n"";
</code></pre>

<p>Just take the date <code>sd</code> and use <code>format</code> with the familiar <code>strftime</code>/<code>put_time</code> flags to print out the date and text.  The <a href=""https://github.com/HowardHinnant/date"" rel=""nofollow noreferrer"">open-source C++20 preview library</a> hasn't yet integrated the <a href=""https://github.com/fmtlib/fmt"" rel=""nofollow noreferrer"">fmt library</a>, and so uses the slightly altered format string <code>""%d %B %Y is a %A\n""</code>.</p>

<p>This will output (for example):</p>

<pre><code>26 December 2019 is a Thursday

Additional facts
</code></pre>

<p><strong>Common intermediate results computed once</strong></p>

<p>This section of the function is written last, because one doesn't yet know what computations will be needed multiple times.  But once you know, here is how to compute them:</p>

<pre><code>year_month_day ymd = sd;
auto y = ymd.year();
auto m = ymd.month();
weekday wd{sd};
sys_days NewYears = y/1/1;
sys_days LastDayOfYear = y/12/31;
</code></pre>

<p>We will need the year and month fields of <code>sd</code>, and the <code>weekday</code> (day of the week).  It is efficient to compute them once and for all in this manner.  We will also need (multiple times) the first and last days of the current year.  It is hard to tell at this point, but it is efficient to store these values as type <code>sys_days</code> as their subsequent use is only with day-oriented arithmetic which <code>sys_days</code> is <em>very</em> efficient at (sub-nanosecond speeds).</p>

<p><strong>Fact 1:  day number of year, and number of days left in year</strong></p>

<pre><code>auto dn = sd - NewYears + days{1};
auto dl = LastDayOfYear - sd;
cout &lt;&lt; ""* It is day number "" &lt;&lt; dn/days{1} &lt;&lt; "" of the year, ""
     &lt;&lt; dl/days{1} &lt;&lt; "" days left.\n"";
</code></pre>

<p>This prints out the day number of the year, with January 1 being day 1, and then also prints out the number of days remaining in the year, not including <code>sd</code>.  The computation to do this is trivial.  Dividing each result by <code>days{1}</code> is a way to extract the number of days in <code>dn</code> and <code>dl</code> into an integral type for formatting purposes.</p>

<p><strong>Fact 2: Number of this weekday and total number of weekdays in year</strong></p>

<pre><code>sys_days first_wd = y/1/wd[1];
sys_days last_wd = y/12/wd[last];
auto total_wd = (last_wd - first_wd)/weeks{1} + 1;
auto n_wd = (sd - first_wd)/weeks{1} + 1;
cout &lt;&lt; format(""* It is {:%A} number "", wd) &lt;&lt; n_wd &lt;&lt; "" out of ""
     &lt;&lt; total_wd &lt;&lt; format("" in {:%Y}.\n}"", y);
</code></pre>

<p><code>wd</code> is the day of the week (Monday thru Sunday) computed at the top of this article.  To perform this computation we first need the dates of the first and last <code>wd</code>'s in the year <code>y</code>.  <code>y/1/wd[1]</code> is the first <code>wd</code> in January, and <code>y/12/wd[last]</code> is the last <code>wd</code> in December.</p>

<p>The total number of <code>wd</code>s in the year is just the number of weeks between these two dates (plus 1).  The sub-expression <code>last_wd - first_wd</code> is the number of days between the two dates.  Dividing this result by 1 week results in an integral type holding the number of weeks between the two dates.</p>

<p>The week number is done the same way as the total number of weeks except one starts with the current day instead of the last <code>wd</code> of the year: <code>sd - first_wd</code>.</p>

<p><strong>Fact 3: Number of this weekday and total number of weekdays in month</strong></p>

<pre><code>first_wd = y/m/wd[1];
last_wd = y/m/wd[last];
total_wd = (last_wd - first_wd)/weeks{1} + 1;
n_wd = (sd - first_wd)/weeks{1} + 1;
cout &lt;&lt; format(""* It is {:%A} number }"", wd) &lt;&lt; n_wd &lt;&lt; "" out of ""
     &lt;&lt; total_wd &lt;&lt; format("" in {:%B %Y}.\n"", y/m);
</code></pre>

<p>This works just like Fact 2, except we start with the first and last <code>wd</code>s of the year-month pair <code>y/m</code> instead of the entire year.</p>

<p><strong>Fact 4: Number of days in year</strong></p>

<pre><code>auto total_days = LastDayOfYear - NewYears + days{1};
cout &lt;&lt; format(""* Year {:%Y} has "", y) &lt;&lt; total_days/days{1} &lt;&lt; "" days.\n"";
</code></pre>

<p>The code pretty much speaks for itself.</p>

<p><strong>Fact 5 Number of days in month</strong></p>

<pre><code>total_days = sys_days{y/m/last} - sys_days{y/m/1} + days{1};
cout &lt;&lt; format(""* {:%B %Y} has "", y/m) &lt;&lt; total_days/days{1} &lt;&lt; "" days.\n"";
</code></pre>

<p>The expression <code>y/m/last</code> is the last day of the year-month pair <code>y/m</code>, and of course <code>y/m/1</code> is the first day of the month.  Both are converted to <code>sys_days</code> so that they can be subtracted to get the number of days between them.  Add 1 for the 1-based count.</p>

<p><strong>Use</strong></p>

<p><code>info</code> can be used like this:</p>

<pre><code>info(December/26/2019);
</code></pre>

<p>or like this:</p>

<pre><code>info(floor&lt;days&gt;(system_clock::now()));
</code></pre>

<p>Here is example output:</p>

<pre><code>26 December 2019 is a Thursday

Additional facts
* It is day number 360 of the year, 5 days left.
* It is Thursday number 52 out of 52 in 2019.
* It is Thursday number 4 out of 4 in December 2019.
* Year 2019 has 365 days.
* December 2019 has 31 days.
</code></pre>

<hr>

<p><strong>Edit</strong></p>

<p>For those who are not fond of the ""conventional syntax"", there is a complete ""constructor syntax"" that can be used instead.</p>

<p>For example:</p>

<pre><code>sys_days NewYears = y/1/1;
sys_days first_wd = y/1/wd[1];
sys_days last_wd = y/12/wd[last];
</code></pre>

<p>can be replaced by:</p>

<pre><code>sys_days NewYears = year_month_day{y, month{1}, day{1}};
sys_days first_wd = year_month_weekday{y, month{1}, weekday_indexed{wd, 1}};
sys_days last_wd = year_month_weekday_last{y, month{12}, weekday_last{wd}};
</code></pre>
","576911","","576911","","2020-02-15 15:22:37","2020-02-15 15:22:37","","","","5","","",""
"54177234","2","","54044022","2019-01-14 07:28:07","","1","","<p>Python has powerfull features to manipulate data, but don't expect performance using python.When performance is needed , C and C++ are your friend .
Any fast library in python is written in C/C++. It is quite easy to use C/C++ code in python, have a look at swig utility (<a href=""http://www.swig.org/tutorial.html"" rel=""nofollow noreferrer"">http://www.swig.org/tutorial.html</a>) . You can write a c++ class that may contain some fast utilities that you will use in your python code when needed. </p>
","1033326","","","","","2019-01-14 07:28:07","","","","0","","",""