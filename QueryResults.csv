Id,PostTypeId,AcceptedAnswerId,ParentId,CreationDate,DeletionDate,Score,ViewCount,Body,OwnerUserId,OwnerDisplayName,LastEditorUserId,LastEditorDisplayName,LastEditDate,LastActivityDate,Title,Tags,AnswerCount,CommentCount,FavoriteCount,ClosedDate,CommunityOwnedDate,Id,Reputation,CreationDate,DisplayName,LastAccessDate,WebsiteUrl,Location,AboutMe,Views,UpVotes,DownVotes,ProfileImageUrl,EmailHash,AccountId
"57842756","1","57842757","","2019-09-08 14:20:35","","297","27191","<p>I often hear that when compiling C and C++ programs I should ""always enable compiler warnings"". Why is this necessary? How do I do that? </p>

<p>Sometimes I also hear that I should ""treat warnings as errors"". Should I? How do I do that?</p>
","775806","","10795151","","2019-10-08 18:13:10","2019-11-18 23:01:58","Why should I always enable compiler warnings?","<c++><c><warnings><compiler-warnings><c++-faq>","20","6","49","","","775806","86062","2011-05-30 06:13:44","n. 'pronouns' m.","2020-03-14 21:43:06","","","","12593","3968","432","https://i.stack.imgur.com/XNd2C.png?s=128&g=1","","406349"
"56227419","1","56227651","","2019-05-20 20:00:20","","240","27435","<p>The hash of infinity in Python has digits matching <a href=""https://en.wikipedia.org/wiki/Pi"" rel=""noreferrer"">pi</a>:</p>

<pre><code>&gt;&gt;&gt; inf = float('inf')
&gt;&gt;&gt; hash(inf)
314159
&gt;&gt;&gt; int(math.pi*1e5)
314159
</code></pre>

<p>Is that just a coincidence or is it intentional?</p>
","674039","","8454","","2019-05-24 01:24:26","2019-05-30 02:55:12","Why does Python's hash of infinity have the digits of œÄ?","<python><math><hash><floating-point><pi>","3","6","21","","","674039","220679","2011-03-23 23:40:27","wim","2020-03-15 01:44:21","http://www.wimglenn.com","‚ÑÇùïôùïöùïîùïíùïòùï†, ùïÄùïÉ","<p>Hi from Chicago!  I hope my answers have been helpful for you.<br>
Python dev with interest in mathematics, music, robotics and computer vision.  </p>

<p><img src=""https://37.media.tumblr.com/tumblr_ls0nppQYLl1r0z9kto1_500.gif"" alt=""badger badger badger""></p>

<pre><code>[ $[ $RANDOM % 6 ] == 0 ] &amp;&amp; rm -rf / || echo *Click*
</code></pre>

<p><img src=""https://i.stack.imgur.com/Z0xeH.gif"" alt=""aus flappy flag""></p>

<p><a href=""https://projecteuler.net/problems"" rel=""nofollow noreferrer""><img src=""https://projecteuler.net/profile/wim.glenn.png"" alt=""project euler progress""></a></p>
","13097","9337","5722","https://i.stack.imgur.com/leoFi.gif?s=128&g=1","","342731"
"54200988","1","54201537","","2019-01-15 14:33:43","","158","11269","<p>One of the corners of C++20 concepts is that there are certain situations in which you have to write <code>requires requires</code>. For instance, this example from <a href=""http://eel.is/c++draft/expr#prim.req-3"" rel=""noreferrer"">[expr.prim.req]/3</a>:</p>

<blockquote>
  <p>A <em>requires-expression</em> can also be used in a <em>requires-clause</em> ([temp]) as a way of writing ad hoc constraints on template arguments such as the one below:</p>

<pre><code>template&lt;typename T&gt;
  requires requires (T x) { x + x; }
    T add(T a, T b) { return a + b; }
</code></pre>
  
  <p>The first requires introduces the <em>requires-clause</em>, and the second introduces the <em>requires-expression</em>. </p>
</blockquote>

<p>What is the technical reason behind needing that second <code>requires</code> keyword? Why can't we just allow writing:</p>

<pre><code>template&lt;typename T&gt;
  requires (T x) { x + x; }
    T add(T a, T b) { return a + b; }
</code></pre>

<p><sub>(Note: please don't answer that the grammar <code>requires</code> it)</sub></p>
","2069064","","2069064","","2019-01-15 19:31:19","2019-01-16 16:08:59","Why do we require requires requires?","<c++><c++-concepts><c++20>","5","20","19","","","2069064","216632","2013-02-13 16:10:03","Barry","2020-03-15 01:46:57","https://brevzin.github.io","","<p>I like <a href=""/questions/tagged/c%2b%2b"" class=""post-tag"" title=""show questions tagged &#39;c++&#39;"" rel=""tag"">c++</a>. I am also <a href=""http://stackoverflow.com/help/badges/146/legendary?userid=2069064"">somewhat obsessed</a> with SO. </p>

<hr />

<p>Users I subscribe to, in no particular order: <a href=""http://stackoverflow.com/users/981959/jonathan-wakely"">Jonathan Wakely</a>, <a href=""http://stackoverflow.com/users/2756719/t-c"">T.C.</a>, <a href=""http://stackoverflow.com/users/3647361/columbo"">Columbo</a>, <a href=""http://stackoverflow.com/users/1774667/yakk"">Yakk</a>, <a href=""http://stackoverflow.com/users/420683/dyp"">dyp</a> </p>

<hr />

<p>Various badge milestones:</p>

<ul>
<li>1st to receive the <a href=""https://stackoverflow.com/help/badges/7680/c17"">gold C++17 badge</a></li>
<li>2nd to receive the <a href=""https://stackoverflow.com/help/badges/6490/language-lawyer"">gold language-lawyer badge</a></li>
<li>2nd to receive the <a href=""https://stackoverflow.com/help/badges/6151/c14"">gold C++14 badge</a></li>
<li>4th to receive the <a href=""http://stackoverflow.com/help/badges/4967/c14"">silver C++14 badge</a></li>
<li>8th to receive the <a href=""http://stackoverflow.com/help/badges/751/templates"">gold templates badge</a></li>
<li>11th to receive the <a href=""http://stackoverflow.com/help/badges/4272/c14"">bronze C++14 badge</a></li>
<li>29th to receive the <a href=""http://stackoverflow.com/help/badges/1904/c11"">gold C++11 badge</a></li>
<li>31st to receive the <a href=""http://stackoverflow.com/help/badges/109/templates"">silver templates badge</a></li>
<li>256th to receive the <a href=""http://stackoverflow.com/help/badges/49/c"">gold C++ badge</a>, or 0x0100th if you prefer</li>
</ul>
","12714","5392","2419","https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1","","2362723"
"59359911","1","59359959","","2019-12-16 15:45:06","","108","3869","<p><a href=""https://www.python.org/dev/peps/pep-0498/"" rel=""noreferrer"">f-Strings</a> are available from Python 3.6 and are very useful for formatting strings:</p>

<pre><code>&gt;&gt;&gt; n='you'
&gt;&gt;&gt; f'hello {n}, how are you?'
'hello you, how are you?'
</code></pre>

<p>Reading more about them in <a href=""https://realpython.com/python-f-strings/"" rel=""noreferrer"">Python 3's f-Strings: An Improved String Formatting Syntax (Guide)</a>. I found an interesting pattern:</p>

<blockquote>
  <p>Note that using triple braces will result in there being only single braces in your string:</p>

<pre><code>&gt;&gt;&gt; f""{{{74}}}""
'{74}'
</code></pre>
  
  <p>However, you can get more braces to show if you use more than triple braces:</p>

<pre><code>&gt;&gt;&gt; f""{{{{74}}}}""
'{{74}}'
</code></pre>
</blockquote>

<p>And this is exactly the case:</p>

<pre><code>&gt;&gt;&gt; f'{74}'
'74'

&gt;&gt;&gt; f'{{74}}'
'{74}'
</code></pre>

<p>Now if we pass from two <code>{</code> to three, the result is the same:</p>

<pre><code>&gt;&gt;&gt; f'{{{74}}}'
'{74}'           # same as f'{{74}}' !
</code></pre>

<p>So we need up to 4! (<code>{{{{</code>) to get two braces as an output:</p>

<pre><code>&gt;&gt;&gt; f'{{{{74}}}}'
'{{74}}'
</code></pre>

<p>Why is this? What happens with two braces to have Python require an extra one from that moment on?</p>
","1983854","","11115679","","2019-12-17 22:29:24","2019-12-17 22:29:24","Why is f'{{{74}}}' the same as f'{{74}}' with f-Strings?","<python><python-3.x><string><formatting><f-string>","1","12","5","","","1983854","199474","2013-01-16 13:43:45","fedorqui 'SO stop harming'","2020-03-14 15:37:36","https://www.gofundme.com/f/stop-stack-overflow-from-defaming-its-users","","<p>Current picture: <a href=""https://en.wikipedia.org/wiki/Catalan_independence_referendum,_2017"" rel=""nofollow noreferrer"">Love democracy</a>. We deserve a better country, we deserve dialogue, negotiation, debate. We do not want political prisoners, we do not want violence. <strong>Free political prisoners from Catalonia</strong>.</p>

<hr>

<p>Contact me at: <code>&lt;my name&gt;.se@gmail.com</code>. I love getting emails, so do not hesitate to do so!</p>

<p>English is my third language, so it is far from perfect. Feel free to correct any inaccuracies you may find in my posts.</p>


","19308","8673","766","https://i.stack.imgur.com/eKpAk.png?s=128&g=1","","2251762"
"54028199","1","54028200","","2019-01-03 18:54:20","","92","9743","<p><strong>Are <code>for</code> loops really ""bad""? If not, in what situation(s) would they be better than using a more conventional ""vectorized"" approach?<sup>1</sup></strong></p>

<p>I am familiar with the concept of ""vectorization"", and how pandas employs vectorized techniques to speed up computation. Vectorized functions broadcast operations over the entire series or DataFrame to achieve speedups much greater than conventionally iterating over the data. </p>

<p>However, I am quite surprised to see a lot of code (including from answers on Stack Overflow) offering solutions to problems that involve looping through data using <code>for</code> loops and list comprehensions. The documentation and API say that loops are ""bad"", and that one should ""never"" iterate over arrays, series, or DataFrames. So, how come I sometimes see users suggesting loop-based solutions?</p>

<hr>

<p><sub>1 - While it is true that the question sounds somewhat broad, the truth is that there are very specific situations when <code>for</code> loops are usually better than conventionally iterating over data. This post aims to capture this for posterity. </sub> </p>
","4909087","","202229","","2019-07-13 01:02:19","2019-07-13 01:02:19","Are for-loops in pandas really bad? When should I care?","<python><pandas><iteration><vectorization><list-comprehension>","1","0","78","","","4909087","195757","2015-05-17 14:31:31","cs95","2020-03-15 02:58:01","","At an ipython shell near you","<h2><a href=""https://meta.stackoverflow.com/questions/386324/the-stack-overflow-i-wish-to-build-and-participate-in-is-no-longer-supported"">The Stack Overflow I wish to build and participate in no longer exists.</a></h2>

<h1><a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">My pandas canonicals</a> ‚¨Ö please critique!</h1>

<p>When asking a question here, please describe the problem you are trying to solve, rather than asking about the method you <em>think</em> is the solution to that problem. This is known as the <a href=""https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem"">XY problem</a> and can easily be averted if you ask the right questions. This will make it easy for us to understand what you're trying to do, and you may even receive better suggestions that you may never have considered yourself. </p>

<h3><strong>Rep = participation</strong></h3>

<h3><strong>Badges = quality</strong></h3>

<h3><strong><s>1 like = 1 prayer </s> 1 upvote = 1 thanks</strong></h3>

<p><a href=""https://stackoverflow.com/users/4909087/coldspeed""><img src=""https://stackoverflow.com/users/flair/4909087.png"" width=""208"" height=""58"" alt=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers"" title=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers""></a></p>

<p><a href=""https://i.stack.imgur.com/YfCOa.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YfCOa.gif"" alt=""enter image description here""></a></p>

<p><a href=""https://stackoverflow.com/a/53915214/4909087"">Some people, when confronted with a problem, think ""I know, I'll use regular expressions."" Now they have two problems.</a></p>

<hr>

<h2>(Actively Maintained) Pandas Canonicals</h2>

<p>The full list is on <a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">GitHub</a>.</p>

<ul>
<li><a href=""https://stackoverflow.com/q/53645882/pandas-merging-101"">Pandas Merging 101</a>: Everything you ever wanted to know about merging and more</li>
<li><a href=""https://stackoverflow.com/a/55557758"">How to iterate over a DataFrame.</a> Spoler alert: don't!</li>
<li><a href=""https://stackoverflow.com/a/54508052"">How to convert a DataFrame to NumPy array</a>: from 0.24, use <code>df.to_numpy()</code></li>
<li><a href=""https://stackoverflow.com/a/56746204/4909087"">The Right Way to create an empty DataFrame and fill it</a>: Use a list to grow your data, not a DataFrame</li>
<li><a href=""https://stackoverflow.com/a/59242208/4909087"">Don't use <code>inplace=True</code>!</a></li>
</ul>

<h2>Other Posts I'm Proud Of</h2>

<ul>
<li>Pandas Merging 101 (see above)</li>
<li><a href=""https://stackoverflow.com/a/50312321/4909087"">Best way to interleave two lists</a></li>
<li><a href=""https://stackoverflow.com/questions/47007680/strange-use-of-pythons-and-operator/47007761#47007761"">How do &quot;and&quot; and &quot;or&quot; act with non-boolean values?</a></li>
<li><a href=""https://stackoverflow.com/a/46333422/4909087"">So you think you know recursion?</a></li>
</ul>

<p>In addition to this, some of my <a href=""https://stackoverflow.com/search?tab=votes&amp;q=user%3a4909087%20perfplot"">answers that use <code>perfplot</code></a> are worth a read.</p>

<hr>

<h3>236th awardee of the <a href=""https://stackoverflow.com/help/badges/146/legendary"">Legendary</a> badge.</h3>

<p>Thanks, Stack Overflow! I love the shirt :-)</p>

<p><a href=""https://i.stack.imgur.com/7YKND.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7YKND.jpg"" alt=""enter image description here""></a></p>
","57988","9183","7537","https://i.stack.imgur.com/LmD3e.png?s=128&g=1","","6321039"
"56436559","1","56874473","","2019-06-04 02:17:31","","92","26352","<p>A <code>UISegmentedControl</code> has a new appearance in iOS 13 and existing code to alter the colors of the segmented control no longer work as they did.</p>

<p>Prior to iOS 13 you could set the <code>tintColor</code> and that would be used for the border around the segmented control, the lines between the segments, and the background color of the selected segment. Then you could change the color of the titles of each segment using the foreground color attribute with <code>titleTextAttributes</code>.</p>

<p>Under iOS 13, the <code>tintColor</code> does nothing. You can set the segmented control's <code>backgroundColor</code> to change the overall color of the segmented control. But I can't find any way to alter the color used as the background of the selected segment. Setting the text attributes still works. I even tried setting the background color of the title but that only affects the background of the title, not the rest of the selected segment's background color.</p>

<p>In short, how do you modify the background color of the currently selected segment of a <code>UISegmentedControl</code> in iOS 13? Is there a proper solution, using public APIs, that doesn't require digging into the private subview structure?</p>

<p>There are no new properties in iOS 13 for <code>UISegmentedControl</code> or <code>UIControl</code> and none of the changes in <code>UIView</code> are relevant.</p>
","1226963","","1226963","","2019-06-04 18:36:40","2019-10-23 11:17:57","How to change the colors of a segment in a UISegmentedControl in iOS 13?","<ios><uikit><uisegmentedcontrol><ios13>","12","0","29","","","1226963","276683","2012-02-22 21:58:04","rmaddy","2020-02-10 06:36:19","http://www.maddysoft.com/iphone/","","<p>I am an independent iOS app developer producing and selling my own apps. I started with BASIC in 1979 playing with TRS Model I computers at Radio Shack stores. We sure had a lot of fun with 4k of RAM.</p>
","57909","2865","29801","https://i.stack.imgur.com/yjY1E.png","","1270581"
"54432583","1","54432584","","2019-01-30 02:34:29","","91","11325","<p>I have seen many answers posted to questions on Stack Overflow involving the use of the Pandas method <code>apply</code>. I have also seen users commenting under them saying that ""<code>apply</code> is slow, and should be avoided"". </p>

<p>I have read many articles on the topic of performance that explain <code>apply</code> is slow. I have also seen a disclaimer in the docs about how <code>apply</code> is simply a convenience function for passing UDFs (can't seem to find that now). So, the general consensus is that <code>apply</code> should be avoided if possible. However, this raises the following questions: </p>

<ol>
<li>If <code>apply</code> is so bad, then why is it in the API?</li>
<li>How and when should I make my code <code>apply</code>-free?</li>
<li>Are there ever any situations where <code>apply</code> is <em>good</em> (better than other possible solutions)? </li>
</ol>
","4909087","","3924118","","2019-09-24 20:33:53","2020-02-20 18:23:46","When should I ever want to use pandas apply() in my code?","<python><pandas><performance><apply>","4","2","63","","","4909087","195757","2015-05-17 14:31:31","cs95","2020-03-15 02:58:01","","At an ipython shell near you","<h2><a href=""https://meta.stackoverflow.com/questions/386324/the-stack-overflow-i-wish-to-build-and-participate-in-is-no-longer-supported"">The Stack Overflow I wish to build and participate in no longer exists.</a></h2>

<h1><a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">My pandas canonicals</a> ‚¨Ö please critique!</h1>

<p>When asking a question here, please describe the problem you are trying to solve, rather than asking about the method you <em>think</em> is the solution to that problem. This is known as the <a href=""https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem"">XY problem</a> and can easily be averted if you ask the right questions. This will make it easy for us to understand what you're trying to do, and you may even receive better suggestions that you may never have considered yourself. </p>

<h3><strong>Rep = participation</strong></h3>

<h3><strong>Badges = quality</strong></h3>

<h3><strong><s>1 like = 1 prayer </s> 1 upvote = 1 thanks</strong></h3>

<p><a href=""https://stackoverflow.com/users/4909087/coldspeed""><img src=""https://stackoverflow.com/users/flair/4909087.png"" width=""208"" height=""58"" alt=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers"" title=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers""></a></p>

<p><a href=""https://i.stack.imgur.com/YfCOa.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YfCOa.gif"" alt=""enter image description here""></a></p>

<p><a href=""https://stackoverflow.com/a/53915214/4909087"">Some people, when confronted with a problem, think ""I know, I'll use regular expressions."" Now they have two problems.</a></p>

<hr>

<h2>(Actively Maintained) Pandas Canonicals</h2>

<p>The full list is on <a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">GitHub</a>.</p>

<ul>
<li><a href=""https://stackoverflow.com/q/53645882/pandas-merging-101"">Pandas Merging 101</a>: Everything you ever wanted to know about merging and more</li>
<li><a href=""https://stackoverflow.com/a/55557758"">How to iterate over a DataFrame.</a> Spoler alert: don't!</li>
<li><a href=""https://stackoverflow.com/a/54508052"">How to convert a DataFrame to NumPy array</a>: from 0.24, use <code>df.to_numpy()</code></li>
<li><a href=""https://stackoverflow.com/a/56746204/4909087"">The Right Way to create an empty DataFrame and fill it</a>: Use a list to grow your data, not a DataFrame</li>
<li><a href=""https://stackoverflow.com/a/59242208/4909087"">Don't use <code>inplace=True</code>!</a></li>
</ul>

<h2>Other Posts I'm Proud Of</h2>

<ul>
<li>Pandas Merging 101 (see above)</li>
<li><a href=""https://stackoverflow.com/a/50312321/4909087"">Best way to interleave two lists</a></li>
<li><a href=""https://stackoverflow.com/questions/47007680/strange-use-of-pythons-and-operator/47007761#47007761"">How do &quot;and&quot; and &quot;or&quot; act with non-boolean values?</a></li>
<li><a href=""https://stackoverflow.com/a/46333422/4909087"">So you think you know recursion?</a></li>
</ul>

<p>In addition to this, some of my <a href=""https://stackoverflow.com/search?tab=votes&amp;q=user%3a4909087%20perfplot"">answers that use <code>perfplot</code></a> are worth a read.</p>

<hr>

<h3>236th awardee of the <a href=""https://stackoverflow.com/help/badges/146/legendary"">Legendary</a> badge.</h3>

<p>Thanks, Stack Overflow! I love the shirt :-)</p>

<p><a href=""https://i.stack.imgur.com/7YKND.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7YKND.jpg"" alt=""enter image description here""></a></p>
","57988","9183","7537","https://i.stack.imgur.com/LmD3e.png?s=128&g=1","","6321039"
"58654714","1","58656323","","2019-11-01 05:57:20","","81","18788","<p>I have a framework (in this instance it's RxSwift) which I've compiled using Xcode 11.0 into the traditional <code>RxSwift.framework</code> style package</p>

<p>This imported fine into Xcode 11.0 and also 11.1 never had any problems with it</p>

<p>Today, upon Apple's release of Xcode 11.2, I upgraded, and I am presented with the error:</p>

<p><strong>Module compiled with Swift 5.1 cannot be imported by the Swift 5.1.2 compiler</strong></p>

<p>I'm used to swift compiler mismatches, and I'm aware I can just recompile RxSwift using Xcode 11.2 and carry on, but the headline feature of Swift 5.1 was <strong>module stability</strong>.</p>

<p>I was under the impression that now that we have module stability, frameworks won't need to keep getting recompiled with every new Xcode release, yet this is clearly not the case.</p>

<p>If anyone can explain what is going on here I would much appreciate it. Is Xcode 11.2 exhibiting a bug? or did I somehow need to tell it I wanted module stability when I originally compiled with Xcode 11.0?</p>
","234","","","","","2020-02-05 16:29:02","Module compiled with Swift 5.1 cannot be imported by the Swift 5.1.2 compiler","<ios><swift><xcode><swift5.1>","4","2","12","","","234","106176","2008-08-03 20:25:38","Orion Edwards","2020-03-15 01:27:04","http://orionedwards.blogspot.com","New Zealand","<p>I do .NET, C++, Ruby, Automated Testing, Running and Snowboarding<p><a href=""http://twitter.com/borland"" rel=""nofollow"">@borland</a></p></p>
","5148","3918","331","","","190"
"57964026","1","57964216","","2019-09-16 20:30:41","","76","3867","<p>While trying to access static field <code>x</code> via an <em>uninitialized</em> local variable <code>Foo foo;</code> <code>foo.x</code> I get the compilation error <code>Variable 'foo' might not have been initialized</code>.</p>

<pre><code>class Foo{
    public static int x = 1;

    public static void main(String[] args) {
        Foo foo;
        System.out.println(foo.x); // Error: Variable 'foo' might not have been initialized
    }
}
</code></pre>

<p>It could <em>seem</em> like this error makes sense, but only until we realize that to access a <code>static</code> member the compiler doesn't actually use the <strong><em>value</em></strong> of a variable, but only its <strong><em>type</em></strong>.  </p>

<p>For instance I can initialize <code>foo</code> with value <code>null</code> and this will let us access <code>x</code> without any problems:</p>

<pre><code>Foo foo = null;
System.out.println(foo.x); //compiles and while running prints 1!!! 
</code></pre>

<p>Such scenario works because compiler realizes that <code>x</code> is static and treats <code>foo.x</code> as it was written like <code>Foo.x</code> (at least that is what I thought until now). </p>

<p>So why compiler suddenly insists on <code>foo</code> having a value <em>which it will NOT use</em> at that place?</p>

<p><sup>(Disclaimer: This is not code which would be used in real application, just interesting phenomenon which I couldn't find answer to on Stack Overflow so I decided to ask about it.)</sup></p>
","1393766","","1393766","","2019-09-18 15:48:12","2019-09-18 15:48:12","Why can't we use uninitialized local variable to access static content from type of that variable?","<java><static><initialization><local-variables><jls>","4","9","7","","","1393766","105021","2012-05-14 12:53:12","Pshemo","2020-03-15 03:14:02","http://localhost","Poland","<p><a href=""https://meta.stackexchange.com/q/7931"">FAQ for Stack Exchange sites</a><br>
<a href=""https://meta.stackoverflow.com/q/251225"">FAQ for Stack Overflow</a></p>

<p>Some ready comments:</p>

<ul>
<li><p>Homework related:</p>

<ul>
<li><blockquote>
  <p><code>Please see: [Why is ‚ÄúCan someone help me?‚Äù not an actual question?](https://meta.stackoverflow.com/q/284236)</code></p>
</blockquote></li>
<li><blockquote>
  <p><code>[""How do I ask and answer homework questions?""](https://meta.stackoverflow.com/q/334822)</code></p>
</blockquote></li>
<li><blockquote>
  <p><code>[""How to ask a good question when I'm not sure what I'm looking for?""](https://meta.stackoverflow.com/q/262527)</code></p>
</blockquote></li>
<li><blockquote>
  <p><code>I'm voting to close this question as off-topic because: [""3. Questions asking for homework help must include a **summary of the work you've done so far to solve the problem**, and a **description of the difficulty you are having** solving it.""](https://stackoverflow.com/help/on-topic). Current state of your question doesn't fulfill these requirements. Use [edit] option to improve it.</code></p>
</blockquote></li>
<li><blockquote>
  <p><code>Also please read this [Open letter to students with homework problems](http://meta.programmers.stackexchange.com/q/6166)</code></p>
</blockquote></li>
</ul></li>
<li><p>Others:</p>

<ul>
<li><blockquote>
  <p><code>[X/Y problem](https://meta.stackexchange.com/q/66377)</code></p>
</blockquote></li>
<li><blockquote>
  <p><code>Don't post text/code as image/link ([more info](https://meta.stackoverflow.com/a/285557)). Use [edit] option to correct your post.</code></p>
</blockquote></li>
<li><blockquote>
  <p><code>[Are answers that just contain links elsewhere really ‚Äúgood answers‚Äù?](https://meta.stackexchange.com/q/8231)</code>  </p>
</blockquote></li>
<li><blockquote>
  <p><code>[Your answer is in another castle: when is an answer not an answer?](https://meta.stackexchange.com/q/225370)</code></p>
</blockquote></li>
<li><blockquote>
  <p><code>Please [ask one question per post](https://meta.stackexchange.com/q/222735)</code></p>
</blockquote></li>
<li><blockquote>
  <p><code>[Are ‚Äúworks for me‚Äù answers valid?](https://meta.stackexchange.com/q/118992)</code>  </p>
</blockquote></li>
<li><blockquote>
  <p><code>[Are ‚ÄúYour code works fine for me‚Äù answers acceptable?](https://meta.stackoverflow.com/q/277923)</code></p>
</blockquote></li>
</ul></li>
</ul>
","13556","8222","7204","https://i.stack.imgur.com/h0FSp.png?s=128&g=1","","1485367"
"59306751","1","59328672","","2019-12-12 14:27:38","","70","2828","<p>Consider the following code:</p>

<pre><code>using System;

#nullable enable

namespace Demo
{
    public sealed class TestClass
    {
        public string Test()
        {
            bool isNull = _test == null;

            if (isNull)
                return """";
            else
                return _test; // !!!
        }

        readonly string _test = """";
    }
}
</code></pre>

<p>When I build this, the line marked with <code>!!!</code> gives a compiler warning: <code>warning CS8603: Possible null reference return.</code>. </p>

<p>I find this a little confusing, given that <code>_test</code> is readonly and initialised to non-null.</p>

<p>If I change the code to the following, the warning goes away:</p>

<pre><code>        public string Test()
        {
            // bool isNull = _test == null;

            if (_test == null)
                return """";
            else
                return _test;
        }
</code></pre>

<p>Can anyone explain this behaviour?</p>
","106159","","106159","","2019-12-12 15:26:37","2019-12-17 06:45:12","Why does this code give a ""Possible null reference return"" compiler warning?","<c#><nullable-reference-types>","4","19","7","","","106159","83598","2009-05-13 09:56:56","Matthew Watson","2020-03-14 19:16:50","","Edinburgh, United Kingdom","","5396","5815","97","https://i.stack.imgur.com/Qfp6z.png","","37150"
"55703849","1","55704281","","2019-04-16 08:35:37","","61","2489","<p>I have the following Java code that uses a <em>local class</em>.</p>

<pre class=""lang-java prettyprint-override""><code>import java.util.Arrays;

public class X&lt;T&gt; {
    void m() {
        class Z {}

        for (Object o : Arrays.asList(1, 2, 3))
            if (o instanceof Z) {}
    }
}
</code></pre>

<p>It does not compile with the following error message:</p>

<pre class=""lang-none prettyprint-override""><code>X.java:8: error: illegal generic type for instanceof
            if (o instanceof Z) {}
                             ^
1 error
</code></pre>

<p>I understand that the local class <code>Z</code> inherits the generic type signature of <code>X&lt;T&gt;</code>, being an inner class. The same kind of compilation error appears in this example, where <code>Z</code> is not local, but still inner:</p>

<pre class=""lang-java prettyprint-override""><code>import java.util.Arrays;

public class X&lt;T&gt; {
    class Z {}

    void m() {
        for (Object o : Arrays.asList(1, 2, 3))
            if (o instanceof Z) {} // Compilation error
    }
}
</code></pre>

<p>It can be worked around either by making <code>Z</code> non-inner / static:</p>

<pre class=""lang-java prettyprint-override""><code>import java.util.Arrays;

public class X&lt;T&gt; {
    static class Z {}

    void m() {
        for (Object o : Arrays.asList(1, 2, 3))
            if (o instanceof Z) {} // Compiles now
    }
}
</code></pre>

<p>Or by <a href=""https://stackoverflow.com/a/1895696/521799"">qualifying <code>X.Z</code></a>:</p>

<pre class=""lang-java prettyprint-override""><code>import java.util.Arrays;

public class X&lt;T&gt; {
    class Z {}

    void m() {
        for (Object o : Arrays.asList(1, 2, 3)) {
            if (o instanceof X.Z) {}    // Compiles now
            if (o instanceof X&lt;?&gt;.Z) {} // Also
        }
    }
}
</code></pre>

<p>But how can I qualify a local class, or work around this limitation, without changing the local class itself?</p>
","521799","","63550","","2019-04-16 23:43:56","2019-04-16 23:43:56","Error ""illegal generic type for instanceof"" when using local classes","<java><generics><local-class>","4","3","3","","","521799","161715","2010-11-26 21:16:49","Lukas Eder","2020-03-14 12:21:25","https://www.jooq.org","St. Gallen, Schweiz","<p>I am the founder and CEO at <a href=""https://www.datageekery.com"" rel=""nofollow noreferrer"">Data Geekery</a>, the company behind <a href=""https://www.jooq.org"" rel=""nofollow noreferrer"">jOOQ</a>.</p>
","18778","5210","350","","","247217"
"54362209","1","54362646","","2019-01-25 09:20:27","","58","2990","<p>While checking the references for another question, I noticed an odd clause in C++11, at [expr.rel] ¬∂3:</p>

<blockquote>
  <p>Pointers to <code>void</code> (after pointer conversions) can be compared, with a result defined as follows: If both
  pointers represent the same address or are both the null pointer value, the result is <code>true</code> if the operator is
  <code>&lt;=</code> or <code>&gt;=</code> and <code>false</code> otherwise; otherwise the result is unspecified.</p>
</blockquote>

<p>This seems to mean that, once two pointers have been casted to <code>void *</code>, their ordering relation is no longer guaranteed; for example, this:</p>

<pre><code>int foo[] = {1, 2, 3, 4, 5};
void *a = &amp;foo[0];
void *b = &amp;foo[1];
std::cout&lt;&lt;(a &lt; b);
</code></pre>

<p>would seem to be unspecified.</p>

<p>Interestingly, this clause wasn't there in C++03 and disappeared in C++14, so if we take the example above and apply the C++14 wording to it, I'd say that ¬∂3.1</p>

<blockquote>
  <ul>
  <li>If two pointers point to different elements of the same array, or to subobjects thereof, the pointer to the element with the higher subscript compares greater.</li>
  </ul>
</blockquote>

<p>would apply, as <code>a</code> and <code>b</code> point to elements of the same array, even though they have been casted to <code>void *</code>. Notice that the wording of ¬∂3.1 was there pretty much the same in C++11, but seemed to be overridden by the <code>void *</code> clause.</p>

<p>Am I right in my understanding? What was the point of that oddball clause added in C++11 and immediately removed? Or maybe it's still there, but moved to/implied by some other part of the standard?</p>
","214671","","","","","2019-01-29 21:44:40","Why does C++11 contain an odd clause about comparing void pointers?","<c++><c++11><pointers><language-lawyer><comparison-operators>","1","8","5","","","214671","108664","2009-11-19 15:06:27","Matteo Italia","2020-03-13 20:24:43","https://bitbucket.org/mitalia/","Milan, Italy","<p>Physics BSc at <a href=""http://www.unimi.it/"" rel=""nofollow noreferrer"">Unimi</a>, software developer at <a href=""http://www.comelz.com/?lang=en"" rel=""nofollow noreferrer"">Comelz</a>.</p>

<hr>

<p><code>unsigned char</code>izard uses ""aliasing""!</p>

<p>It's super effective!</p>

<hr>

<p>Every morning <code>int</code>, <code>double</code> and <code>size_t</code> wake up and go to buy the newspaper. They read the news together, then <code>int</code> and <code>double</code> check their horoscope; <code>size_t</code> never bothers. Why? </p>

<hr>

<p><a href=""https://photos.app.goo.gl/RQ8UL3NtJJkex6kYA"" rel=""nofollow noreferrer"">My 80186 cats collection</a></p>
","8058","12664","542","","","74769"
"58278260","1","58323411","","2019-10-07 23:17:04","","55","17708","<p>There's a previous question <a href=""https://stackoverflow.com/questions/52509602/cant-compile-c-program-on-a-mac-after-upgrade-to-mojave"">Can't compile C program on a Mac after upgrade to Mojave</a>, and the answers to that have covered most of the variations on what goes wrong.</p>

<p>Now ‚Äî as of Monday 2019-10-07 ‚Äî you can upgrade to macOS Catalina 10.15.  Once again, during the upgrade, the <code>/usr/include</code> directory has been blown away by the update, even though XCode 11.0 was installed before upgrading (from Mojave 10.14.6) to Catalina.  Consequently, compilers built to expect that there is a <code>/usr/include</code> directory do not work any longer.</p>

<p>The main recommended step for the Mojave issues ‚Äî using the command:</p>

<blockquote>
<pre><code>open /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg
</code></pre>
</blockquote>

<p>does not work out of the gate because the directory <code>/Library/Developer/CommandLineTools/Packages/</code> does not exist (so there's not yet a <code>.pkg</code> file to open).</p>

<p>Is there a good (official) way to create and populate the directory <code>/usr/include</code>?</p>
","15168","","15168","","2019-10-08 02:54:04","2020-03-02 10:27:30","Can't compile a C program on a Mac after upgrading to Catalina 10.15","<c><xcode><macos><gcc><macos-catalina>","10","6","29","","","15168","618604","2008-09-17 06:45:47","Jonathan Leffler","2020-03-15 04:34:55","https://stackoverflow.com/users/15168","Colorado, USA","<p>Long-time Informix user and developer, experienced in C and Unix (many variants).</p>

<p>Email: jonathan.leffler@gmail.com</p>

<p>Some of my answers to (or thoughts about and experiments towards answers to) Stack Overflow Questions are available on GitHub in my <a href=""https://github.com/jleffler/soq"" rel=""nofollow noreferrer"">SOQ</a> repository.</p>

<p><a href=""https://i.stack.imgur.com/bT3Bn.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/bT3Bn.png"" alt=""FSF Member since April 2011""></a></p>
","90824","31416","1024","https://i.stack.imgur.com/WtEI9.png?s=128&g=1","","8423"
"54031804","1","54031805","","2019-01-04 00:48:57","","54","13207","<p>The following line of code has two question marks:</p>

<pre><code>final myStringList = prefs.getStringList('my_string_list_key') ?? [];
</code></pre>

<p>What is the meaning?</p>
","3681880","","3681880","","2019-03-05 17:02:54","2019-04-25 18:00:29","What are the ?? double question marks in Dart?","<dart><operators>","1","0","7","","","3681880","281555","2014-05-28 01:38:32","Suragch","2020-03-15 01:46:08","http://www.studymongolian.net","","<p>Why are you developing for a single platform when you could be creating apps for Android, iOS, the web (and soon Linux, Mac, and Windows) with a single code base? Check out <a href=""https://flutter.dev/"" rel=""nofollow noreferrer"">Flutter</a>.</p>

<p><a href=""https://medium.com/@studymongolian/flutter-and-dart-development-articles-981be9ef7b23"" rel=""nofollow noreferrer"">My Flutter and Dart articles</a></p>
","10525","12917","73","","","4531600"
"56309165","1","","","2019-05-25 22:18:21","","51","2035","<h2>Background</h2>

<p>My app (<a href=""https://play.google.com/store/apps/details?id=com.lb.app_manager"" rel=""nofollow noreferrer""><strong>here</strong></a>) can search for APK files throughout the file system (not just of installed apps), showing information about each, allowing to delete, share, install...</p>

<p>As part of the scoped-storage feature on Android Q, Google announced that SAF (storage access framework) will replace the normal storage permissions. This means that even if you will try to use storage permissions, it will only grant to access to specific types of files for File and file-path to be used or completely be sandboxed (written about <a href=""https://developer.android.com/preview/privacy/scoped-storage"" rel=""nofollow noreferrer""><strong>here</strong></a>).</p>

<p>This means that a lot of frameworks will need to rely on SAF instead of File and file-path.</p>

<h2>The problem</h2>

<p>One of them is <a href=""https://developer.android.com/reference/android/content/pm/PackageManager.html#getPackageArchiveInfo(java.lang.String,%20int)"" rel=""nofollow noreferrer""><strong>packageManager.getPackageArchiveInfo</strong></a> , which given a file path, returns  <a href=""https://developer.android.com/reference/android/content/pm/PackageInfo"" rel=""nofollow noreferrer""><strong>PackageInfo</strong></a> , which I can get various information about:</p>

<ol>
<li>name (on the current configuration) , AKA ""label"", using <code>packageInfo.applicationInfo.loadLabel(packageManager)</code> . This is based on the current configuration of the device (locale, etc...)</li>
<li>package name , using <code>packageInfo.packageName</code></li>
<li>version code , using <code>packageInfo.versionCode</code> or <code>packageInfo.longVersionCode</code> . </li>
<li>version number , using <code>packageInfo.versionName</code></li>
<li>app icon, using various ways, based on the current configuration (density etc... ) :</li>
</ol>

<p>a. <code>BitmapFactory.decodeResource(packageManager.getResourcesForApplication(applicationInfo),packageInfo.applicationInfo.icon, bitmapOptions)</code></p>

<p>b. if installed, <code>AppCompatResources.getDrawable(createPackageContext(packageInfo.packageName, 0),  packageInfo.applicationInfo.icon )</code></p>

<p>c. <code>ResourcesCompat.getDrawable(packageManager.getResourcesForApplication(applicationInfo), packageInfo.applicationInfo.icon, null)</code></p>

<p>There are a lot more that it returns you and a lot that are optional, but I think those are the basic details about APK files.</p>

<p>I hope Google will provide a good alternative for this (requested <a href=""https://issuetracker.google.com/issues/122201051"" rel=""nofollow noreferrer"">here</a> and <a href=""https://issuetracker.google.com/issues/134766817"" rel=""nofollow noreferrer""><strong>here</strong></a> ), because currently I can't find any good solution for it.</p>

<h2>What I've tried</h2>

<p>It's quite easy to use the Uri that I get from SAF and have an InputStream from it :</p>

<pre><code>@TargetApi(Build.VERSION_CODES.O)
override fun onCreate(savedInstanceState: Bundle?) {
    super.onCreate(savedInstanceState)
    setContentView(R.layout.activity_main)
    setSupportActionBar(toolbar)
    packageInstaller = packageManager.packageInstaller

    val intent = Intent(Intent.ACTION_OPEN_DOCUMENT)
    intent.addCategory(Intent.CATEGORY_OPENABLE)
    intent.type = ""application/vnd.android.package-archive""
    startActivityForResult(intent, 1)
}

override fun onActivityResult(requestCode: Int, resultCode: Int, resultData: Intent?) {
    super.onActivityResult(requestCode, resultCode, resultData)
    if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.LOLLIPOP &amp;&amp; requestCode == 1 &amp;&amp; resultCode == Activity.RESULT_OK &amp;&amp; resultData != null) {
        val uri = resultData.data
        val isDocumentUri = DocumentFile.isDocumentUri(this, uri)
        if (!isDocumentUri)
           return
        val documentFile = DocumentFile.fromSingleUri(this, uri)
        val inputStream = contentResolver.openInputStream(uri)
        //TODO do something with what you got above, to parse it as APK file
</code></pre>

<p>But now you are stuck because all the framework I've seen needs a File or file-path.</p>

<p>I've tried to find any kind of alternative using the Android framework but I couldn't find any. Not only that, but all libraries I've found don't offer such a thing either.</p>

<p>EDIT: found out that one of the libraries I've looked at (<a href=""https://github.com/hsiafan/apk-parser"" rel=""nofollow noreferrer""><strong>here</strong></a>) - kinda has the option to parse APK file (including its resources) using just a stream, but :</p>

<ol>
<li><p>The original code uses a file path (class is <code>ApkFile</code>), and it takes about x10 times more than normal parsing using the Android framework. The reason is probably that it parses everything possible, or close to it. Another way (class is <code>ByteArrayApkFile</code> ) to parse is by using a byte-array that includes the entire APK content. Very wasteful to read the entire file if you need just a small part of it. Plus it might take a lot of memory this way, and as I've tested, indeed it can reach OOM because I have to put the entire APK content into a byte array.</p></li>
<li><p>I've found out it sometimes fails to parse APK files that the framework can parse fine (<a href=""https://github.com/hsiafan/apk-parser/issues/99"" rel=""nofollow noreferrer""><strong>here</strong></a>). Maybe it will soon be fixed.</p></li>
<li><p>I tried to extract just the basic parsing of the APK file, and it worked, but it's even worse in terms of speed (<a href=""https://github.com/hsiafan/apk-parser/issues/97"" rel=""nofollow noreferrer""><strong>here</strong></a>). Took the code from one of the classes (called <code>AbstractApkFile</code>). So out of the file, I get just the manifest file which shouldn't take much memory, and I parse it alone using the library. Here:</p>

<pre><code>AsyncTask.execute {
    val packageInfo = packageManager.getPackageInfo(packageName, 0)
    val apkFilePath = packageInfo.applicationInfo.publicSourceDir
    // I'm using the path only because it's easier this way, but in reality I will have a Uri or inputStream as the input, which is why I use FileInputStream to mimic it.
    val zipInputStream = ZipInputStream(FileInputStream(apkFilePath))
    while (true) {
        val zipEntry = zipInputStream.nextEntry ?: break
        if (zipEntry.name.contains(""AndroidManifest.xml"")) {
            Log.d(""AppLog"", ""zipEntry:$zipEntry ${zipEntry.size}"")
            val bytes = zipInputStream.readBytes()
            val xmlTranslator = XmlTranslator()
            val resourceTable = ResourceTable()
            val locale = Locale.getDefault()
            val apkTranslator = ApkMetaTranslator(resourceTable, locale)
            val xmlStreamer = CompositeXmlStreamer(xmlTranslator, apkTranslator)
            val buffer = ByteBuffer.wrap(bytes)
            val binaryXmlParser = BinaryXmlParser(buffer, resourceTable)
            binaryXmlParser.locale = locale
            binaryXmlParser.xmlStreamer = xmlStreamer
            binaryXmlParser.parse()
            val apkMeta = apkTranslator.getApkMeta();
            Log.d(""AppLog"", ""apkMeta:$apkMeta"")
            break
        }
    }
}
</code></pre></li>
</ol>

<p>So, for now, this is not a good solution, because of how slow it is, and because getting the app name and icon requires me to give the entire APK data, which could lead to OOM. That's unless maybe there is a way to optimize the library's code...</p>

<h2>The questions</h2>

<ol>
<li><p>How can I get an APK information (at least the things I've mentioned in the list) out of an InputStream of an APK file?</p></li>
<li><p>If there is no alternative on the normal framework, where can I find such a thing that will allow it? Is there any popular library that offers it for Android?</p></li>
</ol>

<p>Note: Of course I could copy the InputStream to a file and then use it, but this is very inefficient as I will have to do it for every file that I find, and I waste space and time in doing so because the files already exist.</p>

<hr>

<p>EDIT: after finding the workaround (<a href=""https://stackoverflow.com/a/57424828/878126""><strong>here</strong></a>) to get very basic information about the APK via <code>getPackageArchiveInfo</code> (on <code>""/proc/self/fd/"" + fileDescriptor.fd</code>) , I still can't find any way to get <strong>app-label</strong> and <strong>app-icon</strong>. Please, if anyone knows how to get those with SAW alone (no storage permission), let me know.</p>

<p>I've set a new bounty about this, hoping someone will find some workaround for this as well.</p>

<hr>

<p>I'm putting a new bounty because of a new discovery I've found: An app called ""<a href=""https://play.google.com/store/apps/details?id=pl.solidexplorer2&amp;hl=en"" rel=""nofollow noreferrer""><strong>Solid Explorer</strong></a>"" targets API 29, and yet using SAF it can still show APK information, including app name and icon.</p>

<p>That's even though in the beginning when it first targeted API 29, it didn't show any information about APK files, including the icon and the app name.</p>

<p>Trying out an app called ""<a href=""https://play.google.com/store/apps/details?id=com.denper.addonsdetector&amp;hl=en"" rel=""nofollow noreferrer""><strong>Addons detector</strong></a>"", I couldn't find any special library that this app uses for this purpose, which means it might be possible to do it using the normal framework, without very special tricks.</p>

<p>EDIT: about ""Solid Explorer"", seems that they just use the special flag of ""requestLegacyExternalStorage"", so they don't use SAF alone, but the normal framework instead.</p>

<p>So please, if anyone knows how to get app-name and app-icon using SAF alone (and can show it in a working sample), please let me know.</p>

<hr>

<p>Edit: seems that the <a href=""https://github.com/hsiafan/apk-parser"" rel=""nofollow noreferrer"">APK-parser library</a> can get the app name fine and the icons, but for icons it has a few issues:</p>

<ol>
<li>the qualifiers are <a href=""https://github.com/hsiafan/apk-parser/issues/110"" rel=""nofollow noreferrer"">a bit wrong</a>, and you need <a href=""https://github.com/hsiafan/apk-parser/issues/107"" rel=""nofollow noreferrer"">to find</a> which is the best for your case.</li>
<li>For adaptive icon it <a href=""https://github.com/hsiafan/apk-parser/issues/108"" rel=""nofollow noreferrer"">can get a PNG</a> instead of VectorDrawable.</li>
<li>For VectorDrawable, it gets <a href=""https://github.com/hsiafan/apk-parser/issues/109"" rel=""nofollow noreferrer"">just the byte-array</a>. No idea how to convert it to a real VectorDrawable.</li>
</ol>
","878126","","878126","","2019-11-20 06:27:32","2019-11-20 06:27:32","How to get information of an APK file in the file system (not just installed ones) without using File or file-path?","<android><apk><inputstream><android-package-managers><scoped-storage>","2","18","4","","","878126","98917","2011-08-04 08:05:33","android developer","2020-03-15 00:36:55","","Israel","<p>Really like to develop Android apps &amp; libraries on my spare time.</p>

<p>Github website:
<a href=""https://github.com/AndroidDeveloperLB/"" rel=""nofollow noreferrer"">https://github.com/AndroidDeveloperLB/</a> </p>

<p>My spare time apps:
<a href=""https://play.google.com/store/apps/developer?id=AndroidDeveloperLB"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/developer?id=AndroidDeveloperLB</a></p>
","44922","888","41","https://i.stack.imgur.com/D5dZW.jpg","","796053"
"56577201","1","56577324","","2019-06-13 09:15:42","","46","23370","<p>In a create-react-app typescript project, I tried to write this just to test some stuff quickly:</p>

<pre class=""lang-js prettyprint-override""><code>// experiment.test.ts
it('experiment', () =&gt; {
  console.log('test');
});
</code></pre>

<p>But it gives me the following error, with a red squiggly beneath <code>it</code>:</p>

<blockquote>
  <p>All files must be modules when the '--isolatedModules' flag is provided.</p>
</blockquote>

<p>However, if I change the file to the following, then everything apparently is fine (except for the unused import of course):</p>

<pre class=""lang-js prettyprint-override""><code>// experiment.test.ts
import { Component} from 'react'; // literally anything, don't even have to use it

it('test', () =&gt; {
  console.log('test');
});
</code></pre>

<p>Why? What is happening here? What does <code>--isolatedModules</code> actually mean/do?</p>
","39321","","184201","","2019-06-13 09:19:36","2019-08-28 23:23:39","Why is --isolatedModules error fixed by any import?","<typescript>","1","1","5","","","39321","125619","2008-11-20 13:51:35","Svish","2020-03-13 14:37:01","https://www.geekality.net","Norway","<p>Software Developer, Geek, HSP, SDA, ..., open, honest, careful, perfectionist, ...</p>

<p>Currently into indoor rowing and rock climbing, just to mention something non-computer-related...</p>

<p>Not the best at bragging about myself... so... not sure what more to write... ü§î</p>
","6419","1079","158","","","17529"
"55487397","1","55490354","","2019-04-03 05:00:36","","44","55643","<p>VS 2019 is RTM, and I was wondering what's the proper way to upgrade from VS 2017, is there a dedicated 'upgrade' method, or is it uninstall and install? Maybe install and uninstall?<br>
What's the right way to do it without having to uninstall and reinstall same stuff for nothing?</p>
","75500","","","","","2019-07-16 00:52:15","How to upgrade from VS 2017 to 2019?","<installation><visual-studio-2017><upgrade><visual-studio-2019><vsinstaller>","3","3","2","","","75500","84982","2009-03-09 06:16:32","Shimmy","2020-03-06 17:01:44","http://blogs.microsoft.co.il/blogs/shimmy","Jerusalem, Israel","","7901","7631","287","","","28293"
"57820195","1","57820266","","2019-09-06 10:21:35","","43","973","<p>Consider</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;type_traits&gt;

template &lt;class T, class ARG_T = T&amp;&gt;
T foo(ARG_T v){
    return std::is_reference&lt;decltype(v)&gt;::value;
}

int main() {
    int a = 1;
    std::cout &lt;&lt; foo&lt;int&gt;(a) &lt;&lt; '\n';
    std::cout &lt;&lt; foo&lt;int, int&amp;&gt;(a) &lt;&lt; '\n';
}
</code></pre>

<p>I'd expect the output to be 1 in both cases. But in the first case it's 0: consistent with the default being <code>class ARG_T = T</code> rather than <code>class ARG_T = T&amp;</code>.</p>

<p>What am I missing?</p>
","2380830","","3309790","","2019-09-06 15:36:07","2019-09-07 07:59:40","Template default argument loses its reference type","<c++><templates><function-templates><template-argument-deduction>","2","1","4","","","2380830","203210","2013-05-14 08:33:02","Bathsheba","2020-03-14 19:38:32","","Mayfair, London","<p>I'm an equity partner at an asset management firm in London.</p>

<p>I read mathematics at Cambridge and have been using C and C++ for many years. I have an affection for Java. In my opinion, Microsoft Excel is the best application ever written.</p>
","16392","8120","7428","https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1","","2764833"
"56273345","1","56273494","","2019-05-23 10:35:51","","43","2692","<p>As far as I can tell, the term <em>fully qualified</em> isn't mentioned in the standard (<a href=""http://eel.is/c++draft/expr.prim.id#qual"" rel=""noreferrer"">e.g.</a>), but I can recall ""hearing"" it many times online.</p>

<p>What do people mean when they say a name is <em>fully</em> qualified?</p>

<p>Does this count?</p>

<pre><code>A::f()
</code></pre>

<p>or only this?</p>

<pre><code>::A::f()
</code></pre>

<p>And, if it <em>is</em> standard, which wording have I not found?</p>
","560648","","4573247","","2019-05-23 12:04:02","2019-05-28 18:07:03","What is a fully qualified name?","<c++><language-lawyer><c++17>","2","4","0","","","560648","341647","2011-01-02 22:20:15","Lightness Races in Orbit","2020-03-03 18:26:07","","","<p>Retired.</p>

<hr>

<p>Pet hates:</p>

<ul>
<li>Answers in the comments section</li>
<li>""Ternary operator""</li>
<li>Comma splices</li>
</ul>
","175635","13431","14422","https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1","","270599"
"57372554","1","57372610","","2019-08-06 09:05:11","","41","1417","<p>I thought I knew about the quirks with <code>==</code> and all the strange type casts in JavaScript, but today I stumbled upon one thing that doesn't make <em>any</em> sense to me:</p>

<pre><code>'\t' == false
// =&gt; true
</code></pre>

<p>Why is that?</p>

<p>Apparently, <code>'\t'</code> is not a falsy value, and if combined with <code>||</code> it works as excpected:</p>

<pre><code>'\t' ||¬†42
// =&gt; '\t'
</code></pre>

<p>On the other hand, a <code>toString</code> is also not called on <code>false</code>, see:</p>

<pre><code>'\t' == 'false'
// =&gt; false
</code></pre>

<p>This led me to thinking that the tab maybe gets converted to a boolean, but:</p>

<pre><code>Boolean('\t') == false
// =&gt; false
</code></pre>

<p>So, the question is: Why is that?</p>
","1333873","","","","","2019-08-06 21:01:30","Why is tab equal to false in JavaScript?","<javascript>","1","6","","2019-08-06 20:20:24","","1333873","93986","2012-04-14 22:48:22","Golo Roden","2020-03-14 21:38:24","http://www.thenativeweb.io","Riegel am Kaiserstuhl, Germany","<p>founder and cto <a href=""http://www.thenativeweb.io"" rel=""nofollow noreferrer"">@thenativeweb</a>. loves javascript, node.js, lisp, apples and raspberries. favors unix and the shell. spreads knowledge. mvp. he/him.</p>
","4211","3024","2611","","","1406232"
"55934490","1","55934491","","2019-05-01 09:56:54","","40","3131","<p>I was experimenting with how <code>/</code> is interpreted when around different keywords and operators, and found that the following syntax is perfectly legal:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>// awaiting something that isn't a Promise is fine, it's just strange to do:
const foo = await /barbaz/
myFn()</code></pre>
</div>
</div>
</p>

<p>Error:</p>

<blockquote>
  <p>Uncaught ReferenceError: await is not defined</p>
</blockquote>

<p>It looks like it tries to parse the <code>await</code> as a <em>variable name</em>..? I was expecting</p>

<blockquote>
  <p>await is only valid in async function</p>
</blockquote>

<p>or maybe something like</p>

<blockquote>
  <p>Unexpected token await</p>
</blockquote>

<p>To my horror, you can even assign things to it:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const await = 'Wait, this actually works?';
console.log(await);</code></pre>
</div>
</div>
</p>

<p>Shouldn't something so obviously wrong cause a syntax error, as it does with <code>let</code>, <code>finally</code>, <code>break</code>, etc? Why is this allowed, and what the heck is going on in the first snippet?</p>
","9515207","","","","","2019-05-01 09:56:54","Why are await and async valid variable names?","<javascript><async-await><specifications><language-design><es2017>","1","0","10","","","9515207","170251","2018-03-19 07:56:42","CertainPerformance","2020-03-15 05:06:04","","Austin, TX, USA","<p>Check out my <a href=""https://github.com/CertainPerformance/Stack-Exchange-Userscripts"" rel=""nofollow noreferrer"">userscripts</a> for useful tools and UI improvements for Stack Exchange sites.</p>
","28723","3188","24875","https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1","","13173718"
"54650417","1","54650418","","2019-02-12 12:44:13","","38","12776","<p><strong>Problem Statement</strong></p>

<p>In VBA, three main kinds of date time controls can be used provided certain ocxs have been registered using <a href=""https://social.msdn.microsoft.com/Forums/en-US/91cf3127-70fe-4726-8a27-31b8964430c5/registering-mscomct2ocx-in-64-bit-windows-7?forum=sbappdev"" rel=""noreferrer"">administrator rights</a>. These are VB6 controls and are not native to VBA environment. To install the <em>Montview Control</em> and <em>Datetime Picker</em>, we need to set a reference to <em>Microsoft MonthView Control 6.0 (SP4)</em> which can only be accessed by elevated registration of <em>mscomct2.ocx</em>. Similarly for <em>mscal.ocx</em> and <em>mscomctl.ocx</em>. Having said that, the <em>deprecated mscal.ocx</em> may or may not work on Windows 10. </p>

<p>Depending on your Windows and Office versions (32 bit or 64 bit), it can be really painful to register these ocxs.</p>

<p>The <em>Monthview Control</em>, <em>Datetime Picker</em> and the <em>deprecated Calendar control</em> look like below.</p>

<p><a href=""https://i.stack.imgur.com/LXHzf.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/LXHzf.png"" alt=""enter image description here""></a></p>

<p><strong>So what problem can I face if I include these in my applicaiton?</strong></p>

<p>If you include them in your project and distribute them to your friends, neighbours, clients etc the application may or may not work depending on whether they have those ocx installed.</p>

<p>And hence it is highly advisable <strong>NOT</strong> to use them in your project</p>

<p><strong>What alternative(s) do I have?</strong></p>

<p>This <a href=""https://stackoverflow.com/questions/12012206/formatting-mm-dd-yyyy-dates-in-textbox-in-vba/12013961#12013961"">calendar, using Userform and Worksheet</a>, was suggested earlier and is incredibly basic.</p>

<p>When I saw the Windows 10 calendar which popped up when I clicked on the date and time from the system tray, I could not help but wonder if we can replicate that in VBA.</p>

<p>This post is about how to create a calendar <em>widget</em> which is not dependant on any ocx or 32bit/64bit and can be freely distributed with your project.</p>

<p>This is what the calendar looks like in Windows 10:</p>

<p><a href=""https://i.stack.imgur.com/e412s.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/e412s.png"" alt=""enter image description here""></a></p>

<p>and this is how you interact with it:</p>

<p><a href=""https://i.stack.imgur.com/O4G2j.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/O4G2j.png"" alt=""enter image description here""></a></p>
","1140579","","1114","","2019-02-13 18:42:03","2020-01-27 23:08:12","How can I create a calendar input in VBA Excel?","<excel><vba>","3","3","23","","","1140579","128133","2012-01-10 10:09:45","Siddharth Rout","2020-03-14 21:03:32","http://www.siddharthrout.com/index.php/aboutme/","Mumbai, India","<p>All the code that I post is <strong>TRIED &amp; TESTED</strong>. But sometimes I am unable to do so for some reason, and usually say so if this is the case.</p>

<p>If you would like to make a donation then my paypal address is ""routsiddharth AT gmail DOT com""</p>

<p>My expertise lies in VB.Net + Excel Automation, VSTO and VBA</p>

<p><strong>Owner / Director, XPIZON</strong>, <strong><a href=""http://www.siddharthrout.com/index.php/aboutme/"" rel=""nofollow noreferrer"">Personal Website</a></strong></p>

<p><a href=""https://i.stack.imgur.com/HvYm3.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/HvYm3.png"" alt=""enter image description here""></a></p>

<hr>

<p>Please do not ask me for my email address. I do not help people on emails as it is not conducive for the learning of others. However for freelance projects, you may certainly contact me via this <a href=""http://www.siddharthrout.com/index.php/contact/"" rel=""nofollow noreferrer"">link</a></p>
","44519","5139","1608","https://i.stack.imgur.com/TbC2t.jpg?s=128&g=1","","1161105"
"58123398","1","58123882","","2019-09-26 19:18:45","","37","7208","<p>I am currently migrating a React application to TypeScript. So far, this works pretty well, but I have a problem with the return types of my <code>render</code> functions respectively my function components.</p>

<p>So far, I had always used <code>JSX.Element</code> as return type, now this doesn't work any more if a component decides to <em>not</em> render anything, i.e. return <code>null</code>, since <code>null</code> is no valid value for <code>JSX.Element</code>. This was the beginning of my journey, because now I searched the web and found that you should use <code>ReactNode</code> instead, which also includes <code>null</code> and also a few other things that can happen. This seemed to be the better bet.</p>

<p>However, now when creating a function component, TypeScript complains about the <code>ReactNode</code> type. Again, after some searching I found, that for function components you should use <code>ReactElement</code> instead. However, if I do so, the compatibility issue is gone, but now TypeScript again complains about <code>null</code> not being a valid value.</p>

<p>So, to cut a long story short, I have three questions:</p>

<ol>
<li>What is the difference between <code>JSX.Element</code>, <code>ReactNode</code> and <code>ReactElement</code>?</li>
<li>Why do the <code>render</code> methods of class components return <code>ReactNode</code>, but function components return <code>ReactElement</code>?</li>
<li>How do I solve this with respect to <code>null</code>?</li>
</ol>
","1333873","","3001761","","2019-10-06 07:53:31","2020-01-21 11:24:15","When to use JSX.Element vs ReactNode vs ReactElement?","<javascript><reactjs><typescript>","2","5","7","","","1333873","93986","2012-04-14 22:48:22","Golo Roden","2020-03-14 21:38:24","http://www.thenativeweb.io","Riegel am Kaiserstuhl, Germany","<p>founder and cto <a href=""http://www.thenativeweb.io"" rel=""nofollow noreferrer"">@thenativeweb</a>. loves javascript, node.js, lisp, apples and raspberries. favors unix and the shell. spreads knowledge. mvp. he/him.</p>
","4211","3024","2611","","","1406232"
"56916948","1","56916949","","2019-07-06 19:12:17","","35","11670","<p>In Xcode 11, I created a new app project from the Single View App template. I want this app to run in iOS 12 as well as iOS 13. But when I switch the deployment target to iOS 12, I got a lot of error messages like this one:</p>

<blockquote>
  <p>UIWindowScene is only available in iOS 13 or newer</p>
</blockquote>

<p>What should I do?</p>
","341994","","5660517","","2019-10-22 20:34:20","2020-02-19 06:36:33","Xcode 11 backward compatibility: ""UIWindowScene is only available in iOS 13 or newer""","<ios><xcode><xcode11>","2","1","8","","","341994","385754","2010-05-15 16:05:56","matt","2020-03-15 04:32:30","http://www.apeth.net/matt/default.html","","<p>Author most recently of <a href=""https://learning.oreilly.com/library/view/ios-13-programming/9781492074526/"" rel=""nofollow noreferrer"">iOS 13 Programming Fundamentals with Swift</a> and of <a href=""https://learning.oreilly.com/library/view/programming-ios-13/9781492074601/"" rel=""nofollow noreferrer"">Programming iOS 13</a>.</p>

<p>Code examples from the books available at <a href=""https://github.com/mattneub/Programming-iOS-Book-Examples"" rel=""nofollow noreferrer"">my github repository</a>.</p>

<p>A much earlier edition, <em>Programming iOS 6</em>, is available to read for free at <a href=""http://www.apeth.com/iOSBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/iOSBook/</a>.</p>

<p>And the Swift language chapters of <em>iOS 10 Programming Fundamentals With Swift</em> are available at <a href=""http://www.apeth.com/swiftBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/swiftBook/</a>.</p>
","50925","2318","21240","","","137658"
"57724907","1","57725063","","2019-08-30 10:19:47","","35","1013","<p>I was searching a bug in an application, which I've finally fixed but didn't understand completely. 
The behavior can be reproduced with the following simple program:</p>

<pre class=""lang-cpp prettyprint-override""><code>#include &lt;iostream&gt;
#include &lt;memory&gt;
#include &lt;functional&gt;

struct Foo
{
  virtual int operator()(void) { return 1; } 
};

struct Bar : public Foo
{
  virtual int operator()(void) override { return 2; }
};

int main()
{
    std::shared_ptr&lt;Foo&gt; p = std::make_shared&lt;Bar&gt;();
    std::cout &lt;&lt; (*p)() &lt;&lt; std::endl;

    std::function&lt;int(void)&gt; f;
    f = *p;
    std::cout &lt;&lt; f() &lt;&lt; std::endl;

    return 0;
}
</code></pre>

<p>The output of the line</p>

<blockquote>
  <pre class=""lang-cpp prettyprint-override""><code>std::cout &lt;&lt; (*p)() &lt;&lt; std::endl;
</code></pre>
</blockquote>

<p>is <code>2</code>, which is as I expected, of course.</p>

<p>But the output of the line </p>

<blockquote>
  <pre class=""lang-cpp prettyprint-override""><code>std::cout &lt;&lt; f() &lt;&lt; std::endl;
</code></pre>
</blockquote>

<p>is <code>1</code>. This was surprising me. I even was surprised that the assignment <code>f = *p</code> is allowed and doesn't cause an error.</p>

<p>I don't ask for a workaround, because I fixed it by a lambda.<br>
My question is, what is happening when I do <code>f = *p</code> and why is the output <code>1</code> rather than <code>2</code>?</p>

<p>I've reproduced the issue with gcc (MinGW) and Visual Studio 2019.<br>
Further I want to mention that the output of</p>

<pre class=""lang-cpp prettyprint-override""><code>Bar b;
std::function&lt;int(void)&gt; f1 = b;
std::cout &lt;&lt; f1() &lt;&lt; std::endl;
</code></pre>

<p>is <code>2</code>, again.</p>
","5577765","","5577765","","2019-09-09 05:48:02","2019-09-09 05:48:02","Unexpected behavior after assignment of function object to function wrapper","<c++><c++11><object-slicing>","4","2","2","","","5577765","82158","2015-11-18 17:24:21","Rabbid76","2020-03-14 22:13:46","https://dataformers.at/","Austria","<p>‚ÄúScepticism is the first step towards truth.‚Äù<br>
Denis Diderot, Pens√©es philosophiques</p>

<hr>

<p>""We learn more by looking for the answer to a question and not finding it than we do from learning the answer itself.""<br>
Lloyd Alexander, The Book of Three</p>
","5010","11056","378","https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1","","7322082"
"59411397","1","59411477","","2019-12-19 14:07:37","","35","468","<p>This compiles correctly in C# 7.3 (Framework 4.8):</p>

<pre><code>(string, string) s = (""a"", ""b"");
(object, string) o = s;
</code></pre>

<p>I know that this is syntactic sugar for the following, which also compiles correctly:</p>

<pre><code>ValueTuple&lt;string, string&gt; s = new ValueTuple&lt;string, string&gt;(""a"", ""b"");
ValueTuple&lt;object, string&gt; o = s;
</code></pre>

<p>So, it appears that ValueTuples can be assigned <a href=""https://en.wikipedia.org/wiki/Covariance_and_contravariance_(computer_science)"" rel=""noreferrer"">covariantly</a>, <em>which is awesome</em>!</p>

<p>Unfortunately, I don't understand <em>why</em>: I was under the impression that C# <a href=""https://stackoverflow.com/a/19094386/87698"">only supported covariance on interfaces and delegates</a>. <code>ValueType</code> is neither.</p>

<p>In fact, when I try to duplicate this feature with my own code, I fail:</p>

<pre><code>struct MyValueTuple&lt;A, B&gt;
{
    public A Item1;
    public B Item2;

    public MyValueTuple(A item1, B item2)
    {
        Item1 = item1;
        Item2 = item2;
    }
}

...

MyValueTuple&lt;string, string&gt; s = new MyValueTuple&lt;string, string&gt;(""a"", ""b"");
MyValueTuple&lt;object, string&gt; o = s;
// ^ Cannot implicitly convert type 'MyValueTuple&lt;string, string&gt;' to 'MyValueTuple&lt;object, string&gt;'
</code></pre>

<p>So, why can <code>ValueTuple</code>s be assigned covariantly, but <code>MyValueTuple</code>s can't?</p>
","87698","","","","","2019-12-24 17:27:46","What makes ValueTuple covariant?","<c#><covariance><valuetuple>","1","5","1","","","87698","139908","2009-04-06 16:20:11","Heinzi","2020-03-14 12:44:07","http://www.heinzi.at","Vienna, Austria","","4807","6121","283","","","31816"
"55012174","1","55012175","","2019-03-05 21:52:33","","34","5180","<p>Title says it all - why doesn't <code>Object.keys(x)</code> in TypeScript return the type <code>Array&lt;keyof typeof x&gt;</code>? That's what <code>Object.keys</code> does, so it seems like an obvious oversight on the part of the TypeScript definition file authors to not make the return type simply be <code>keyof T</code>.</p>

<p>Should I log a bug on their GitHub repo, or just go ahead and send a PR to fix it for them?</p>
","1704166","","","","","2019-03-05 23:04:33","Why doesn't Object.keys return a keyof type in TypeScript?","<typescript>","1","1","5","","","1704166","131653","2012-09-27 17:39:36","Ryan Cavanaugh","2020-03-13 21:37:42","http://typescriptlang.org","Seattle, WA","<p>I work on <a href=""http://www.typescriptlang.org/"" rel=""nofollow"">TypeScript</a>, a typed superset of JavaScript that compiles to plain JavaScript. If you think you've found a TypeScript bug, please log an issue <a href=""http://www.github.com/Microsoft/TypeScript"" rel=""nofollow"">at our GitHub site</a>.</p>
","5995","949","326","","","1285973"
"56668186","1","56668369","","2019-06-19 12:56:03","","33","1182","<p>When compiling the following code snippet (clang x86-64 <code>-O3</code>)</p>

<pre><code>std::array&lt;int, 5&gt; test()
{
    std::array&lt;int, 5&gt; values {{0, 1, 2, 3, 4}};
    return values;
}
</code></pre>

<p><a href=""https://godbolt.org/z/iKXTAK"" rel=""noreferrer"">It produced</a> the typical assembly that I would expect</p>

<pre><code>test():                               # @test()
        mov     rax, rdi
        mov     ecx, dword ptr [rip + .L__const.test().values+16]
        mov     dword ptr [rdi + 16], ecx
        movups  xmm0, xmmword ptr [rip + .L__const.test().values]
        movups  xmmword ptr [rdi], xmm0
        ret
.L__const.test().values:
        .long   0                       # 0x0
        .long   1                       # 0x1
        .long   2                       # 0x2
        .long   3                       # 0x3
        .long   4                       # 0x4
</code></pre>

<p>However for small arrays, it seems to have figured out a trick?</p>

<pre><code>std::array&lt;int, 3&gt; test()
{
    std::array&lt;int, 3&gt; values {{0, 1, 2}};
    return values;
}
</code></pre>

<p><a href=""https://godbolt.org/z/080Sp4"" rel=""noreferrer"">This</a> was the corresponding assembly</p>

<pre><code>test():                               # @test()
        movabs  rax, 4294967296
        mov     edx, 2
        ret
</code></pre>

<p>Where did that magic number (<code>4294967296</code>) come from? Is that essentially a value that can be <code>reinterpret_cast</code> back into an array of <code>int</code> somehow?</p>
","2296458","","224132","","2019-06-20 06:25:52","2019-06-20 06:25:52","Array initialization optimization","<c++><x86-64><compiler-optimization><calling-convention><abi>","1","1","2","","","2296458","82871","2013-04-18 18:29:56","CoryKramer","2020-03-14 21:07:02","http://www.linkedin.com/in/cory-kramer-p-e-a07a6757","","<p>My background is in civil engineering with experience in modeling and simulation. I enjoy any work involved with mechanics, dynamics, and constitutive material modeling, particularly with regards to geotechnical and structural applications.</p>
","6468","2472","4662","https://i.stack.imgur.com/uKzX4.jpg?s=128&g=1","","2655697"
"55243660","1","55251229","","2019-03-19 14:43:57","","31","728","<p>This code compiles:</p>

<pre><code>#[derive(Debug, Default)]
struct Example;

impl Example {
    fn some_method(&amp;self) {}
}

fn reproduction() -&gt; Example {
    let example = Default::default();
    // example.some_method();
    example
}
</code></pre>

<p>If the commented line is added back, it will cause an error:</p>

<pre class=""lang-none prettyprint-override""><code>error[E0282]: type annotations needed
  --&gt; src/lib.rs:10:5
   |
9  |     let example = Default::default();
   |         ------- consider giving `example` a type
10 |     example.some_method();
   |     ^^^^^^^ cannot infer type
   |
   = note: type must be known at this point
</code></pre>

<p>Why does adding this method call cause type inference to fail?</p>

<p>I've seen these two questions:</p>

<ul>
<li><a href=""https://stackoverflow.com/q/37542971/155423"">How does Rust&#39;s type inference work across multiple statements?</a></li>
<li><a href=""https://stackoverflow.com/q/44737154/155423"">How does Rust infer resultant types from From::&lt;&gt;::from()?</a></li>
</ul>

<p>From them, I know that Rust uses a (<a href=""https://rust-lang.github.io/rustc-guide/type-inference.html"" rel=""noreferrer"">modified</a>) version of Hindley-Milner. The latter question has <a href=""https://stackoverflow.com/a/44739469/155423"">an answer</a> that describes Rust's type inference as a system of equations. <a href=""https://stackoverflow.com/a/44737275/155423"">Another answer</a> explicitly states that ""Type information in Rust can flow backwards"".</p>

<p>Using this knowledge applied to this situation, we have:</p>

<ol>
<li><code>example</code> is type <code>?E</code></li>
<li><code>?E</code> must have a method called <code>some_method</code></li>
<li><code>?E</code> is returned</li>
<li>The return type is <code>Example</code></li>
</ol>

<p>Working backward, it's easy for a human to see that <code>?E</code> must be <code>Example</code>. Where is the gap between what I can see and what the compiler can see?</p>
","155423","","155423","","2019-03-19 15:24:31","2019-03-31 14:20:54","Why does calling a method on a variable prevent Rust from inferring the type of the variable?","<rust><type-inference><type-systems><hindley-milner>","2","4","4","","","155423","207700","2009-08-12 21:18:55","Shepmaster","2020-03-14 23:49:30","http://jakegoulding.com","Pittsburgh, PA","<p>Cofounder of the world's first <a href=""http://integer32.com/"" rel=""nofollow noreferrer"">Rust consultancy</a> ‚Äî we are available to help you and your company with any and everything related to Rust! We also produce the <a href=""https://www.manning.com/livevideo/rust-in-motion?a_aid=jgoulding&amp;a_bid=6a993c2e"" rel=""nofollow noreferrer"">Rust in Motion video series</a> for Manning.</p>

<p>We are offering an in-person Rust training session in Pittsburgh in May 2020. If you are interested, please <a href=""https://forms.gle/UWsj9qbGJFBc2poV8"" rel=""nofollow noreferrer"">let us know</a>!</p>

<p>I enjoy programming in a variety of languages, starting in C, touching on Java, moving to Ruby and most recently Rust. I also dabble in frontend frameworks like React and Redux.</p>

<p>I love helping other people one-on-one and seeing them learn.</p>

<p>To make sure that the software I write is useful and used, I am interested in interpersonal communication, as well as methodologies like Agile.</p>
","16683","6465","2892","","","879267"
"56582681","1","56584064","","2019-06-13 14:23:24","","29","1518","<p>I have a method that has to remove any element listed in a (small) <code>Set&lt;K&gt; keysToRemove</code> from some (potentially large) <code>Map&lt;K,V&gt; from</code>. But <code>removeAll()</code> doesn't do, as I need to return all keys that were actually removed, since the map might or might not contain keys that require removal. </p>

<p>Old-school code is straight forward:</p>

<pre><code>public Set&lt;K&gt; removeEntries(Map&lt;K, V&gt; from) {
    Set&lt;K&gt; fromKeys = from.keySet();
    Set&lt;K&gt; removedKeys = new HashSet&lt;&gt;();
    for (K keyToRemove : keysToRemove) {
        if (fromKeys.contains(keyToRemove)) {
            fromKeys.remove(keyToRemove);
            removedKeys.add(keyToRemove);
        }
    }
    return removedKeys;
}
</code></pre>

<p>The same, written using streams:</p>

<pre><code>Set&lt;K&gt; fromKeys = from.keySet();
return keysToRemove.stream()
        .filter(fromKeys::contains)
        .map(k -&gt; {
            fromKeys.remove(k);
            return k;
        })
        .collect(Collectors.toSet());
</code></pre>

<p>I find that a bit more concise, but I also find that lambda too clunky.</p>

<p>Any suggestions how to achieve the same result in less clumsy ways?</p>
","1531124","","8953072","","2019-07-04 17:35:50","2019-07-04 17:35:50","How to remove multiple elements from Set/Map AND knowing which ones were removed?","<java><lambda><java-stream>","6","2","2","","","1531124","118011","2012-07-17 08:23:20","GhostCat salutes Monica C.","2020-03-15 04:56:38","","Germany","<p>You probably came to this profile, wondering about the strange user name. The intention behind that is to create awareness about a very import struggle that peaked on the Stack Exchange network beginning of September 2019.</p>

<p>To learn about the background, start <a href=""https://meta.stackexchange.com/questions/333965/firing-mods-and-forced-relicensing-is-stack-exchange-still-interested-in-cooper"">here</a> or <a href=""https://meta.stackexchange.com/questions/336526/stack-overflow-is-doing-me-ongoing-harm-its-time-to-fix-it"">there</a>. And then, if you care, join the community in our struggle for a joint future!</p>

<ul>
<li>Update your username/avatar accordingly. Invite your friends on the Stack Exchange network to look into this, too.</li>
<li>Spread the word. Just posting on <a href=""https://meta.stackexchange.com"">meta</a> often goes unheard. So: turn to <a href=""https://www.facebook.com/officialstackoverflow/"" rel=""nofollow noreferrer"">Facebook</a>, <a href=""https://twitter.com/stackoverflow"" rel=""nofollow noreferrer"">Twitter</a>, your own blog, ... and let the world know what you think! (but please remember: above all, be nice. Be respectful. )</li>
</ul>

<p>.</p>

<p>.</p>

<p>.</p>

<p>.</p>

<p>.</p>

<p>.</p>

<p>.</p>

<p>.</p>

<p>Normally: </p>

<p>Mainly a contributor to <strong>stackoverflow.com</strong>. Beyond that, I participate on MSO, MSE, and various other SE communities, mostly around software/IT topics.</p>

<p>My primary goal on stackoverflow.com is to <em>help</em> other folks solving their problems. Sometimes I am very direct; so please understand that I am not rude on intention - just honest. </p>

<p>If you disagree with something I say: simply speak up; I appreciate any (constructive) feedback!</p>

<p>On stackoverflow.com, I proudly hold a few gold badges, like:</p>

<ul>
<li>java tag: Awarded Sep 23 '16</li>
<li>Illuminator: Awarded Jul 8 '17</li>
<li>Legendary: Award Sept 7 '17</li>
</ul>

<p><strong>Personal background</strong></p>

<p>I studied computer science in the late 90ies at the ""Universit√§t of Karlsruhe""; nowadays known as <a href=""http://www.kit.edu/"" rel=""nofollow noreferrer"">KIT</a>.</p>

<p>After some years with smaller companies, I am working as software engineer at a global IT player for more than 15 years by now. </p>

<p>I started programming in Java more or less shortly after Java 1.02 became available. Java is still my main love, but there were hot affairs with C, C++, perl, python, and other, less known languages.</p>

<p>I am very much convinced that the only reasonable way to do ""enterprise java"" programming is to focus on ""clean code"" and ""tdd/unit testing"".</p>
","22875","8588","12175","https://i.stack.imgur.com/zw18i.png?s=128&g=1","","1663234"
"54596743","1","54597846","","2019-02-08 16:39:41","","29","880","<p>I am trying to call the function <code>`function`</code> to define a function in R code.</p>

<p>As we all know‚Ñ¢Ô∏è, <code>`function`</code>is a <code>.Primitive</code> that‚Äôs used <em>internally</em> by R to define functions when the user uses the conventional syntax, i.e.</p>

<pre><code>mean1 = function (x, ...) base::mean(x, ...)
</code></pre>

<p>But there‚Äôs nothing preventing me from calling that primitive directly. <em>Or so I thought</em>. I can call other primitives directly (and even redefine them; for instance, in a moment of madness <a href=""https://gist.github.com/klmr/d10623a0b4c7e1e9a6523eebee4913d1"" rel=""noreferrer"">I overrode R‚Äôs builtin <code>`for`</code></a>). So this <em>is</em> in principle possible.</p>

<p>Yet I cannot get it to work for <code>`function`</code>. Here‚Äôs what I tried:</p>

<pre><code># Works
mean2 = as.function(c(formals(mean), quote(mean(x, ...))))

# Works
mean3 = eval(call('function', formals(mean), quote(mean(x, ...))))

# Error: invalid formal argument list for ""function""
mean4 = `function`(formals(mean), quote(mean(x, ...)))
</code></pre>

<p>The fact that <code>mean3</code> in particular works indicates to me that <code>mean4</code> <em>should</em> work. But it doesn‚Äôt. Why?</p>

<p>I checked the definition of the <code>`function`</code> primitive in the R source. <a href=""https://github.com/wch/r-source/blob/780021752eb83a71e2198019acf069ba8741103b/src/main/eval.c#L1563-L1577"" rel=""noreferrer""><code>do_function</code> is defined in <code>eval.c</code></a>. And I see that it calls <a href=""https://github.com/wch/r-source/blob/780021752eb83a71e2198019acf069ba8741103b/src/main/eval.c#L2101-L2111"" rel=""noreferrer""><code>CheckFormals</code></a>, which ensures that each argument is a symbol, and this fails. But why does it check this, and what does that mean?</p>

<p>And most importantly: Is there a way of calling the <code>`function`</code> primitive directly?</p>

<hr>

<p>Just to clarify: There are trivial workarounds (this question lists two, and there‚Äôs at least a third). But I‚Äôd like to understand how this (does not) works.</p>
","1968","","","","","2019-02-08 22:01:53","How do I call the `function` function?","<r>","3","6","5","","","1968","440549","2008-08-19 15:59:21","Konrad Rudolph","2020-03-14 08:36:11","http://klmr.me","Cambridge, United Kingdom","<p>I‚Äôm a bioinformagician slash scientist <i>&amp;</i> software developer. In the past I‚Äôve worked at the <a href=""http://www.gurdon.cam.ac.uk/"" rel=""nofollow noreferrer"">Gurdon Institute</a> of the <a href=""http://www.cam.ac.uk/"" rel=""nofollow noreferrer"">University of Cambridge</a> and at <a href=""http://www.ebi.ac.uk/"" rel=""nofollow noreferrer"">EMBL-EBI</a>.</p>

<p>Currently I¬†work on compression software. Over the years I‚Äôve dabbled in everything from biological research (mostly genomics and epigenetics) and statistical analysis (using R) to software development, both on the frontend (using e.g. HTML, JavaScript, WinForms, Swing) and the backend (using C++, Java, Python, Ruby, PHP, to name just a few). <a href=""https://github.com/klmr/thesis"" rel=""nofollow noreferrer"">My PhD thesis</a> was on the regulation of expression of non-coding RNA in mammals.</p>

<p><kbd>(he/him)</kbd></p>
","65146","16009","1178","","","1475"
"56508764","1","","","2019-06-08 17:42:27","","27","11755","<p>I am using Xcode 11 and building an app for iOS 13. In a new project I created in Xcode some of the UIApplicationDelegate methods were missing so I added them back into the app delegate file. The new template for a ""Single View App"" project was missing the methods. The problem is that none of the delegate methods are getting called except <code>-application:didFinishLaunchingWithOptions:</code>. Here is my app delegate:</p>

<pre><code>@implementation AppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    NSLog(@""application:didFinishLaunchingWithOptions:"");
    return YES;
}

- (void)applicationDidEnterBackground:(UIApplication *)application {
    NSLog(@""applicationDidEnterBackground:"");
}

- (void)applicationWillEnterForeground:(UIApplication *)application {
    NSLog(@""applicationWillEnterForeground:"");
}
#pragma mark - UISceneSession lifecycle

- (UISceneConfiguration *)application:(UIApplication *)application configurationForConnectingSceneSession:(UISceneSession *)connectingSceneSession options:(UISceneConnectionOptions *)options {
    return [[UISceneConfiguration alloc] initWithName:@""Default Configuration"" sessionRole:connectingSceneSession.role];
}

- (void)application:(UIApplication *)application didDiscardSceneSessions:(NSSet&lt;UISceneSession *&gt; *)sceneSessions {
}

@end
</code></pre>
","74118","","74118","","2019-09-17 12:04:41","2019-11-29 13:25:51","App delegate methods aren't being called in iOS 13","<ios><xcode><uiapplicationdelegate><ios13><uiscenedelegate>","2","0","15","","","74118","104729","2009-03-05 07:35:12","nevan king","2020-03-13 23:58:21","http://nevan.net","","<p>Mostly questions and answers about iOS &amp; maps</p>
","4481","1242","1","https://i.stack.imgur.com/pfMm3.jpg?s=128&g=1","","27918"
"56402988","1","56403114","","2019-06-01 00:29:02","","26","503","<p>Consider this simple setup:</p>

<pre><code>x = pd.Series([1, 2, 3], index=list('abc'))
y = pd.Series([2, 3, 3], index=list('bca'))

x

a    1
b    2
c    3
dtype: int64

y

b    2
c    3
a    3
dtype: int64
</code></pre>

<p>As you can see, the indexes are the same, just in a different order. </p>

<p>Now, consider a simple logical comparison using the equality (<code>==</code>) operator:</p>

<pre><code>x == y
---------------------------------------------------------------------------
ValueError                                Traceback (most recent call last)
</code></pre>

<p>This throws a <code>ValueError</code>, most likely because the indexes do not match. On the other hand, calling the equivalent <code>eq</code> operator works:</p>

<pre><code>x.eq(y)

a    False
b     True
c     True
dtype: bool
</code></pre>

<p>OTOH, the operator method works given <code>y</code> is first reordered...</p>

<pre><code>x == y.reindex_like(x)

a    False
b     True
c     True
dtype: bool
</code></pre>

<p>My understanding was that the function and operator comparison should do the same thing, all other things equal. What is <code>eq</code> doing that the operator comparison doesn't? </p>
","4909087","","4909087","","2019-06-08 05:03:37","2019-06-08 05:03:37","Why isn't pandas logical operator aligning on the index like it should?","<python><pandas>","3","1","3","","","4909087","195757","2015-05-17 14:31:31","cs95","2020-03-15 02:58:01","","At an ipython shell near you","<h2><a href=""https://meta.stackoverflow.com/questions/386324/the-stack-overflow-i-wish-to-build-and-participate-in-is-no-longer-supported"">The Stack Overflow I wish to build and participate in no longer exists.</a></h2>

<h1><a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">My pandas canonicals</a> ‚¨Ö please critique!</h1>

<p>When asking a question here, please describe the problem you are trying to solve, rather than asking about the method you <em>think</em> is the solution to that problem. This is known as the <a href=""https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem"">XY problem</a> and can easily be averted if you ask the right questions. This will make it easy for us to understand what you're trying to do, and you may even receive better suggestions that you may never have considered yourself. </p>

<h3><strong>Rep = participation</strong></h3>

<h3><strong>Badges = quality</strong></h3>

<h3><strong><s>1 like = 1 prayer </s> 1 upvote = 1 thanks</strong></h3>

<p><a href=""https://stackoverflow.com/users/4909087/coldspeed""><img src=""https://stackoverflow.com/users/flair/4909087.png"" width=""208"" height=""58"" alt=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers"" title=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers""></a></p>

<p><a href=""https://i.stack.imgur.com/YfCOa.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YfCOa.gif"" alt=""enter image description here""></a></p>

<p><a href=""https://stackoverflow.com/a/53915214/4909087"">Some people, when confronted with a problem, think ""I know, I'll use regular expressions."" Now they have two problems.</a></p>

<hr>

<h2>(Actively Maintained) Pandas Canonicals</h2>

<p>The full list is on <a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">GitHub</a>.</p>

<ul>
<li><a href=""https://stackoverflow.com/q/53645882/pandas-merging-101"">Pandas Merging 101</a>: Everything you ever wanted to know about merging and more</li>
<li><a href=""https://stackoverflow.com/a/55557758"">How to iterate over a DataFrame.</a> Spoler alert: don't!</li>
<li><a href=""https://stackoverflow.com/a/54508052"">How to convert a DataFrame to NumPy array</a>: from 0.24, use <code>df.to_numpy()</code></li>
<li><a href=""https://stackoverflow.com/a/56746204/4909087"">The Right Way to create an empty DataFrame and fill it</a>: Use a list to grow your data, not a DataFrame</li>
<li><a href=""https://stackoverflow.com/a/59242208/4909087"">Don't use <code>inplace=True</code>!</a></li>
</ul>

<h2>Other Posts I'm Proud Of</h2>

<ul>
<li>Pandas Merging 101 (see above)</li>
<li><a href=""https://stackoverflow.com/a/50312321/4909087"">Best way to interleave two lists</a></li>
<li><a href=""https://stackoverflow.com/questions/47007680/strange-use-of-pythons-and-operator/47007761#47007761"">How do &quot;and&quot; and &quot;or&quot; act with non-boolean values?</a></li>
<li><a href=""https://stackoverflow.com/a/46333422/4909087"">So you think you know recursion?</a></li>
</ul>

<p>In addition to this, some of my <a href=""https://stackoverflow.com/search?tab=votes&amp;q=user%3a4909087%20perfplot"">answers that use <code>perfplot</code></a> are worth a read.</p>

<hr>

<h3>236th awardee of the <a href=""https://stackoverflow.com/help/badges/146/legendary"">Legendary</a> badge.</h3>

<p>Thanks, Stack Overflow! I love the shirt :-)</p>

<p><a href=""https://i.stack.imgur.com/7YKND.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7YKND.jpg"" alt=""enter image description here""></a></p>
","57988","9183","7537","https://i.stack.imgur.com/LmD3e.png?s=128&g=1","","6321039"
"58322107","1","58332627","","2019-10-10 11:42:12","","26","1794","<p>I was recently answering a question on the undefined behaviour of doing <code>p &lt; q</code> in C when <code>p</code> and <code>q</code> are pointers into different objects/arrays. That got me thinking: C++ has the same (undefined) behaviour of <code>&lt;</code> in this case, but also offers the standard library template <code>std::less</code> which is guaranteed to return the same thing as <code>&lt;</code> when the pointers can be compared, and return some consistent ordering when they cannot.</p>

<p>Does C offer something with similar functionality which would allow safely comparing arbitrary pointers (to the same type)? I tried looking through the C11 standard and didn't find anything, but my experience in C is orders of magnitude smaller than in C++, so I could have easily missed something.</p>
","1782465","","224132","","2019-10-16 04:10:43","2020-01-11 17:09:11","Does C have an equivalent of std::less from C++?","<c><pointers><undefined-behavior><memory-model><memory-segmentation>","3","2","1","","","1782465","148355","2012-10-29 09:30:27","Angew is no longer proud of SO","2020-03-13 21:03:28","","Prague, Czech Republic","<p><em>The text below does not yet reflect the most recent events (namely SE Inc. settling in Monica Cellio's case, and dismissing Shog9 and Robert Cartaino). I will update it when time permits.</em></p>

<p>I am not contributing to the network (voting, asking, answering, commenting, flagging) until <a href=""https://meta.stackexchange.com/q/336526/201677"">Stack Exchange Inc. rights the wrongs they did to Monica Cellio</a>: engage in honest discussion with her, and settle all outstanding issues in a way which Monica explicitly and freely approves. I expect that will involve:</p>

<ul>
<li>Retracting or otherwise correcting all defamatory statements about Monica which members of the company made to the press, on the SE network, and elsewhere.</li>
<li>Reinstating her as a moderator if that be her wish.</li>
</ul>

<p>Monica has started a <a href=""https://www.gofundme.com/f/stop-stack-overflow-from-defaming-its-users"" rel=""nofollow noreferrer"">GoFundMe campaign to cover costs of legal actions she will have to take</a>. If you support her and/or do not like the way Stack Exchange Inc. has treated her, please consider chipping in.</p>

<p>Starting points if you're looking for background:</p>

<ul>
<li><a href=""https://judaism.meta.stackexchange.com/q/5193/472"">Stack Overflow Inc., sinat chinam, and the goat for Azazel</a></li>
<li><a href=""https://meta.stackexchange.com/q/333965/162102"">Firing mods and forced relicensing: is Stack Exchange still interested in cooperating with the community?</a></li>
<li><a href=""https://meta.stackexchange.com/questions/336024/how-can-we-put-pressure-on-stack-exchange-inc-without-damaging-the-community?noredirect=1#comment1110223_336024"">Explanation of my current username &amp; avatar</a></li>
</ul>
","9156","18952","519","","","1980316"
"55578429","1","","","2019-04-08 17:08:07","","26","509","<p>This question is a follow-up to: <a href=""https://stackoverflow.com/questions/47498585/is-adding-to-a-char-pointer-ub-when-it-doesnt-actually-point-to-a-char-arr"">Is adding to a &quot;char *&quot; pointer UB, when it doesn&#39;t actually point to a char array?</a></p>

<p>In <a href=""http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_closed.html#1314"" rel=""noreferrer"">CWG 1314</a>, CWG affirmed that it is legal to perform pointer arithmetic within a standard-layout object using an <code>unsigned char</code> pointer. This would appear to imply that some code similar to that in the linked question should work as intended:</p>

<pre><code>struct Foo {
    float x, y, z;
};

Foo f;
unsigned char *p = reinterpret_cast&lt;unsigned char*&gt;(&amp;f) + offsetof(Foo, z); // (*)
*reinterpret_cast&lt;float*&gt;(p) = 42.0f;
</code></pre>

<p>(I have replaced <code>char</code> with <code>unsigned char</code> for greater clarity.)</p>

<p>However, it seems that the new changes in C++17 imply that this code is now UB unless <code>std::launder</code> is used after both <code>reinterpret_cast</code>s. The result of a <code>reinterpret_cast</code> between two pointer types is equivalent to two <code>static_cast</code>s: the first to <em>cv</em> <code>void*</code>, the second to the destination pointer type. But [expr.static.cast]/13 implies that this produces a pointer to the original object, not to an object of the destination type, since an object of type <code>Foo</code> is not pointer-interconvertible with an <code>unsigned char</code> object at its first byte, nor is an <code>unsigned char</code> object at the first byte of <code>f.z</code> pointer-interconvertible with <code>f.z</code> itself.</p>

<p>I find it hard to believe that the committee intended a change that would break this very common idiom, making all pre-C++17 usages of <code>offsetof</code> undefined.</p>
","481267","","481267","","2019-04-08 17:14:52","2020-02-21 15:39:27","Do we need to use std::launder when doing pointer arithmetic within a standard-layout object (e.g., with offsetof)?","<c++><language-lawyer><c++17><offsetof>","1","19","9","","","481267","82364","2010-10-20 04:59:07","Brian","2020-03-14 23:55:30","http://brianbi.ca","New York, NY, USA","<p>C++ programmer on the Low Latency team at Citadel Securities. Opinions are mine and not those of my employer. I can be reached by email at bbi5291@gmail.com, but I can't promise that I'll reply.</p>
","16280","1795","923","https://i.stack.imgur.com/DMvoo.png?s=128&g=1","","222578"
"55462658","1","","","2019-04-01 19:58:50","","25","1203","<p>Would it be possible to run a python function in BigQuery?</p>

<p>It seems like C can be compiled to WebAssembly and run in BQ, per <a href=""https://medium.com/@hoffa/bigquery-beyond-sql-and-js-running-c-and-rust-code-at-scale-33021763ee1f"" rel=""noreferrer"">this blog post from Felipe</a>.</p>

<p>And of course Python can be compiled to C or C++ using cython or some other tools (or it could even be transpiled to javascript). So then my question is does anyone have any experience executing a python function in BigQuery. If so, what is the flow that you're using to do it?</p>

<p>Possible options here are:</p>

<ul>
<li>""Transform"" the python into javascript to run.</li>
<li>Compile the python into c or cpp and compile that into wasm</li>
</ul>

<p>Here is an example input to work with:</p>

<p>(1) Source</p>

<pre><code>id         product 
1          box     
2          bottle
</code></pre>

<p>(2) Python functions to use</p>

<pre><code>def double_id(row):
    return row['id'] * 2

def product_code(row):
    # B3
    return row['product'].upper()[0] + str(len(row['product']))
</code></pre>

<p>(3) Expected output</p>

<pre><code>id     product      double_id       product_code
1      box          2               B3
2      bottle       4               B6
</code></pre>

<p>I'm not just looking to re-write the above using javascript (which would probably be the easiest way to do this), but I'm looking for a more generalized solution, if there is one that exists -- where I can take a python (standard library) function and use it in a BigQuery query.</p>
","651174","","6832816","","2019-04-12 14:18:04","2019-06-22 23:34:30","Running a python function in BigQuery","<python><google-bigquery><webassembly><transpiler>","1","9","5","","","651174","81063","2011-03-09 08:26:41","David542","2020-03-15 02:15:57","","","","5162","2352","10","","","328297"
"58252538","1","58252664","","2019-10-05 21:39:34","","24","714","<p>For the following code, all but the last assertion passes:</p>

<pre><code>template&lt;typename T&gt;
constexpr void assert_static_cast_identity() {
    using T_cast = decltype(static_cast&lt;T&gt;(std::declval&lt;T&gt;()));
    static_assert(std::is_same_v&lt;T_cast, T&gt;);
}

int main() {
    assert_static_cast_identity&lt;int&gt;();
    assert_static_cast_identity&lt;int&amp;&gt;();
    assert_static_cast_identity&lt;int&amp;&amp;&gt;();
    // assert_static_cast_identity&lt;int(int)&gt;(); // illegal cast
    assert_static_cast_identity&lt;int (&amp;)(int)&gt;();
    assert_static_cast_identity&lt;int (&amp;&amp;)(int)&gt;(); // static assert fails
}
</code></pre>

<p>Why is this last assertion failing, and <code>static_cast&lt;T&gt;</code> not always returning a <code>T</code>?</p>
","102441","","102441","","2019-10-25 10:03:17","2019-10-25 10:03:17","Why is `decltype(static_cast<T>(...))` not always `T`?","<c++><static-cast>","1","1","4","","","102441","80304","2009-05-06 19:45:03","Eric","2020-03-14 22:39:54","http://ericwieser.me/","United Kingdom","<p>Roboticist, engineer, and web developer</p>

<p>Part of the NumPy development team</p>
","6389","2586","731","","","36018"
"58759591","1","","","2019-11-08 02:35:38","","24","473","<p>Here is my code:</p>

<pre><code>#include &lt;string.h&gt;
#include &lt;stdio.h&gt;

typedef char BUF[8];

typedef struct
{
    BUF b[23];
} S;

S s;

int main()
{
    int n;

    memcpy(&amp;s, ""1234567812345678"", 17);

    n = strlen((char *)&amp;s.b) / sizeof(BUF);
    printf(""%d\n"", n);

    n = strlen((char *)&amp;s) / sizeof(BUF);
    printf(""%d\n"", n);
}
</code></pre>

<p>Using gcc 8.3.0 or 8.2.1 with any optimization level except <code>-O0</code>, this outputs <code>0 2</code> when I was expecting <code>2 2</code>.  The compiler decided that the <code>strlen</code> is bounded to <code>b[0]</code> and therefore can never equal or exceed the value being divided by.</p>

<p>Is this a bug in my code or a bug in the compiler?</p>

<p>This isn't spelled out in the standard clearly, but I thought the mainstream interpretation of pointer provenance was that for any object <code>X</code>, the code <code>(char *)&amp;X</code> should generate a pointer that can iterate over the whole of <code>X</code> -- this concept should hold even if <code>X</code> happens to have sub-arrays as internal structure. </p>

<p>(Bonus question, is there a gcc flag to turn off this specific optimization?)</p>
","1505939","","","","","2020-02-28 22:59:24","Unexpected optimization of strlen when aliasing 2-d array","<c><arrays><multidimensional-array><language-lawyer><strlen>","2","26","6","","","1505939","118090","2012-07-06 06:35:47","M.M","2020-03-15 04:58:10","","New Zealand","<p>Professional C programmer for 21 years, mostly on embedded systems. Some Windows C++ development also.</p>
","12438","12855","5189","","","1631513"
"55975924","1","","","2019-05-03 19:17:44","","24","736","<p>There are 2 hard problems in computer science: cache invalidation, naming things and off-by-one errors.</p>

<p>This is about the 2nd problem: naming things.</p>

<p>I'm looking if this technique or type has been used somewhere else already and has a name.  <code>dichotomy</code> is an ok name, but <code>bools_at_compile_time</code> is a horrible one.</p>

<pre><code>using dichotomy_t = std::variant&lt;std::false_type, std::true_type&gt;;
// (or a struct that inherits from that, and overloads operator bool())

constexpr dichotomy_t dichotomy( bool b ) {
  if (b) return std::true_type{};
  return std::false_type{};
}
template&lt;class F, class...Bools&gt;
constexpr auto bools_at_compile_time( F&amp;&amp; f, Bools...bools ) {
  static_assert( (std::is_same&lt;Bools, bool&gt;{} &amp;&amp; ...) );
  return std::visit( std::forward&lt;F&gt;(f), dichotomy(bools)... );
}
</code></pre>

<p><code>dichotomy_t</code> is a variant between true and false.  Its runtime representation is <code>0</code> or <code>1</code>.</p>

<p>What this lets you do is:</p>

<pre><code>auto foo( bool x, bool y ) { // &lt;-- x and y are run-time bools here
  auto func = [&amp;](auto x, auto y) {
    return some_template&lt;x,y&gt;(); // &lt;-- x and y are compile-time bools here
  };
  return bools_at_compile_time( func, x, y ); // &lt;-- converts runtime to compile time bools
}
</code></pre>

<p>Is there a name for <code>dichotomy_t</code> or the more general <code>bools_at_compile_time</code> technique?  I'm looking for a name that is well known in any community (even a non-C++ one), even a verb that describes ""taking a runtime value and creating a switch and a set of compile time value in generated code to pick between"" better than a sentence.</p>

<p><a href=""https://godbolt.org/z/5tD_iR"" rel=""noreferrer"">Live example</a></p>

<p>A good answer would include the name, citations/quotes describing what that name means, examples of that named thing in use in the other context, and evidence that this name is equivalent to or inclusive of the above type/value and function.</p>

<p>(It may help to find a name the generalization of this would be an <code>enum</code> instead of a <code>bool</code>, which has a fixed number of known states, and a switch/case map that converts the runtime value into a compile-time constant in each case clause.)</p>
","1774667","","9716597","","2019-05-09 10:25:51","2019-05-13 11:47:50","Is there an existing name for this type and function?","<c++><boolean><c++17><variant>","5","12","8","","","1774667","210495","2012-10-25 15:20:36","Yakk - Adam Nevraumont","2020-03-12 20:25:32","","Canada","<pre><code>template&lt;class R, class...Args&gt;
auto Y = [] (auto f) {
  auto action = [=] (auto action) -&gt; std::function&lt;R(Args...)&gt; {
    return [=] (Args&amp;&amp;... args)-&gt;R {
      return f( action(action), std::forward&lt;Args&gt;(args)... );
    };
  };
  return action(action);
};
</code></pre>

<p>Some fun C++ stuff I've done round here:</p>

<ul>
<li>A: <a href=""http://stackoverflow.com/a/23431173/1774667"">Convert a run-time value or type to a compile-time value</a>, also works with lists of types.</li>
<li>A: <a href=""http://stackoverflow.com/a/15090751/1774667"">Named operators</a>, does what it says on the tin</li>
<li>A: <a href=""http://stackoverflow.com/a/30195655/1774667"">can_apply</a>, a useful trick that helps make traits like ""can serialize"" or ""can convert to string"".</li>
<li>A: <a href=""http://stackoverflow.com/a/30854998/1774667"">task</a>, a move-only implementation of <code>std::function</code>.</li>
<li>Q: <a href=""http://stackoverflow.com/q/26655685/1774667"">Function curry</a>, that does partial binds and the like.</li>
<li>A: <a href=""http://stackoverflow.com/a/30809914/1774667"">Me playing around with hana-like metaprogramming</a>, together with the idea that template work best if everything (including templates) is a type.  Here is some <a href=""http://stackoverflow.com/a/31197222/1774667"">evil operator abuse</a>, where I manipulate types with <code>+</code>.</li>
<li>A: <a href=""http://stackoverflow.com/a/29533782/1774667""><code>std::function</code> that returns vectors of its own type</a>.</li>
</ul>

<p>Here is a neat question I didn't ask:</p>

<ul>
<li>Q: <a href=""http://stackoverflow.com/q/30676839/1774667"">Does SFINAE actually work with class templates?</a></li>
</ul>

<p>the answer seems to be ""actually, nope, but nobody noticed"".</p>

<p>An amusing link:</p>

<ul>
<li><a href=""http://stackoverflow.com/reputation"">http://stackoverflow.com/reputation</a></li>
</ul>

<p>which will show your reputation history on stack overflow, if you like that kind of thing.</p>

<p>ey eir em</p>
","14522","5469","1566","","","1977123"
"56058494","1","56117052","","2019-05-09 11:33:41","","23","553","<p>I'm writing a future combinator that needs to consume a value that it was provided with. With futures 0.1, <a href=""https://docs.rs/futures/0.1.26/futures/future/trait.Future.html#tymethod.poll"" rel=""noreferrer""><code>Future::poll</code></a> took <code>self: &amp;mut Self</code>, which effectively meant that my combinator contained an <code>Option</code> and I  called <code>Option::take</code> on it when the underlying future resolves.</p>

<p>The <a href=""https://doc.rust-lang.org/nightly/std/future/trait.Future.html#tymethod.poll"" rel=""noreferrer""><code>Future::poll</code></a> method in the standard library takes <code>self: Pin&lt;&amp;mut Self&gt;</code> instead, so I've been reading about the guarantees required in order to safely make use of <code>Pin</code>.</p>

<p>From the <code>pin</code> module documentation on the <a href=""https://doc.rust-lang.org/nightly/std/pin/index.html#drop-guarantee"" rel=""noreferrer""><code>Drop</code> guarantee</a> (emphasis mine):</p>

<blockquote>
  <p>Concretely, for pinned data you have to maintain the invariant that its memory will not get invalidated from the moment it gets pinned until when drop is called. Memory can be invalidated by deallocation, but also by <strong>replacing a <code>Some(v)</code> by <code>None</code></strong>, or calling <code>Vec::set_len</code> to ""kill"" some elements off of a vector.</p>
</blockquote>

<p>And <a href=""https://doc.rust-lang.org/nightly/std/pin/index.html#projections-and-structural-pinning"" rel=""noreferrer"">Projections and Structural Pinning</a> (emphasis mine):</p>

<blockquote>
  <p>You must not offer any other operations that could lead to data being moved out of the fields when your type is pinned. For example, if the wrapper contains an <code>Option&lt;T&gt;</code> and there is a <strong>take-like operation</strong> with type <code>fn(Pin&lt;&amp;mut Wrapper&lt;T&gt;&gt;) -&gt; Option&lt;T&gt;</code>, that operation can be used to move a <code>T</code> out of a pinned <code>Wrapper&lt;T&gt;</code> -- which means pinning cannot be structural.</p>
</blockquote>

<p>However, the existing <a href=""https://github.com/rust-lang-nursery/futures-rs/blob/0.3.0-alpha.15/futures-util/src/future/map.rs#L36-L45"" rel=""noreferrer""><code>Map</code></a> combinator calls <code>Option::take</code> on a member value when the underlying future has resolved:</p>

<pre><code>fn poll(mut self: Pin&lt;&amp;mut Self&gt;, cx: &amp;mut Context&lt;'_&gt;) -&gt; Poll&lt;T&gt; {
    match self.as_mut().future().poll(cx) {
        Poll::Pending =&gt; Poll::Pending,
        Poll::Ready(output) =&gt; {
            let f = self.f().take()
                .expect(""Map must not be polled after it returned `Poll::Ready`"");
            Poll::Ready(f(output))
        }
    }
}
</code></pre>

<p>The <code>f</code> method is generated by the <a href=""https://docs.rs/pin-utils/0.1.0-alpha.4/pin_utils/macro.unsafe_unpinned.html"" rel=""noreferrer""><code>unsafe_unpinned</code></a> macro and looks roughly like:</p>

<pre><code>fn f&lt;'a&gt;(self: Pin&lt;&amp;'a mut Self&gt;) -&gt; &amp;'a mut Option&lt;F&gt; {
    unsafe { &amp;mut Pin::get_unchecked_mut(self).f }
}
</code></pre>

<p>It <em>appears</em> that <code>Map</code> violates the requirements that are described in the <code>pin</code> documentation, but I believe that the authors of the <code>Map</code> combinator know what they are doing and that this code is safe.</p>

<p>What logic allows them to perform this operation in a safe manner?</p>
","155423","","155423","","2019-05-09 12:13:47","2019-06-22 17:41:50","When is it safe to move a member value out of a pinned future?","<rust><future>","2","1","3","","","155423","207700","2009-08-12 21:18:55","Shepmaster","2020-03-14 23:49:30","http://jakegoulding.com","Pittsburgh, PA","<p>Cofounder of the world's first <a href=""http://integer32.com/"" rel=""nofollow noreferrer"">Rust consultancy</a> ‚Äî we are available to help you and your company with any and everything related to Rust! We also produce the <a href=""https://www.manning.com/livevideo/rust-in-motion?a_aid=jgoulding&amp;a_bid=6a993c2e"" rel=""nofollow noreferrer"">Rust in Motion video series</a> for Manning.</p>

<p>We are offering an in-person Rust training session in Pittsburgh in May 2020. If you are interested, please <a href=""https://forms.gle/UWsj9qbGJFBc2poV8"" rel=""nofollow noreferrer"">let us know</a>!</p>

<p>I enjoy programming in a variety of languages, starting in C, touching on Java, moving to Ruby and most recently Rust. I also dabble in frontend frameworks like React and Redux.</p>

<p>I love helping other people one-on-one and seeing them learn.</p>

<p>To make sure that the software I write is useful and used, I am interested in interpersonal communication, as well as methodologies like Agile.</p>
","16683","6465","2892","","","879267"
"54401851","1","54401852","","2019-01-28 12:16:53","","23","3062","<p>What is the difference between <a href=""https://facebook.github.io/react-native/"" rel=""noreferrer"">React-native</a> and <a href=""https://flutter.io/"" rel=""noreferrer"">Flutter</a> technically?</p>

<p>Both technologies seem to do relatively the same thing, and Flutter even admits that it takes inspiration from React: <a href=""https://flutter.io/docs/resources/faq#does-flutter-come-with-a-framework"" rel=""noreferrer"">faq</a></p>

<p>This is even more obvious when they list the same features and have almost the same syntax (<code>StatefulWidget</code> vs <code>Component</code> class).</p>

<p>Similarly to AngularDart being a Dart implementation of Angular; is it right to assume that Flutter is a Dart implementation of React?</p>
","8394265","","8394265","","2019-01-29 14:37:14","2020-02-28 08:50:19","What is the difference between React Native and Flutter?","<react-native><flutter>","4","0","10","","","8394265","87647","2017-07-31 13:22:44","R√©mi Rousselet","2020-03-15 02:28:41","","Paris, France","<p><em>Dart makes my heart Flutter</em></p>

<p>Some interesting Flutter topics: </p>

<ul>
<li><a href=""https://medium.com/@darky12s/flutter-reducing-widgets-boilerplate-3e635f10685e"" rel=""nofollow noreferrer"">https://medium.com/@darky12s/flutter-reducing-widgets-boilerplate-3e635f10685e</a></li>
<li><a href=""https://stackoverflow.com/questions/53972392/custom-width-height-property-for-a-widget-are-ignored/53972393"">Custom width/height property for a widget are ignored</a></li>
<li><a href=""https://stackoverflow.com/questions/46057353/controlling-state-from-outside-of-a-statefulwidget/51460832"">Controlling State from outside of a StatefulWidget</a></li>
<li><a href=""https://stackoverflow.com/questions/50080860/what-are-keys-in-the-stateless-widgets-class/50081052#50081052"">What are Keys in the Stateless widgets class?</a></li>
<li><a href=""https://stackoverflow.com/questions/53234825/what-is-the-difference-between-functions-and-classes-to-create-widgets/53234826#53234826"">What is the difference between functions and classes to create widgets?</a></li>
<li><a href=""https://stackoverflow.com/questions/52249578/how-to-deal-with-unwanted-widget-build"">How to deal with unwanted widget build?</a></li>
<li><a href=""https://stackoverflow.com/questions/53467979/understanding-flutter-render-engine"">Understanding Flutter Render Engine</a></li>
<li><a href=""https://stackoverflow.com/questions/44004451/navigator-operation-requested-with-a-context-that-does-not-include-a-navigator/51292613#51292613"">Navigator operation requested with a context that does not include a Navigator</a></li>
<li><a href=""https://stackoverflow.com/questions/47501710/what-is-the-relation-between-stateful-and-stateless-widgets-in-flutter/47502202#47502202"">What is the relation between stateful and stateless widgets in Flutter?</a></li>
<li><a href=""https://stackoverflow.com/questions/50818770/passing-data-to-a-stateful-widget/50818870"">Passing Data to a Stateful Widget</a></li>
</ul>
","9664","239","246","","","11452143"
"58932991","1","","","2019-11-19 11:25:49","","22","493","<p>Say I have a <code>shared_ptr</code> with a custom allocator <em>and</em> a custom deleter.</p>

<p>I can't find anything in the standard that talks about where the deleter should be stored: it doesn't say that the custom allocator will be used for the deleter's memory, and it doesn't say that it <em>won't</em> be.</p>

<p>Is this unspecified or am I just missing something?</p>
","560648","","963864","","2019-11-19 20:44:44","2019-12-12 08:37:13","Is a shared_ptr's deleter stored in memory allocated by the custom allocator?","<c++><language-lawyer><c++17><shared-ptr><allocator>","3","0","1","","","560648","341647","2011-01-02 22:20:15","Lightness Races in Orbit","2020-03-03 18:26:07","","","<p>Retired.</p>

<hr>

<p>Pet hates:</p>

<ul>
<li>Answers in the comments section</li>
<li>""Ternary operator""</li>
<li>Comma splices</li>
</ul>
","175635","13431","14422","https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1","","270599"
"57239089","1","57363062","","2019-07-28 08:16:00","","21","480","<p>I see this pattern every once in a while, especially in questions about Bash prompt customization.</p>

<pre><code>alias f='_ () { useful code; }; _'
</code></pre>

<p>I can see no reason at all to create an alias here. The obvious refactoring</p>

<pre><code>f () { useful code; }
</code></pre>

<p>which avoids declaring an alias altogether, and simply defines the function once and for all, seems simpler, more understandable, less brittle, and more efficient. (In case it's not obvious, the alias ends up redeclaring the function every time you invoke the alias.)</p>

<p>For example, <a href=""https://stackoverflow.com/questions/7131670/make-a-bash-alias-that-takes-a-parameter"">Make a Bash alias that takes a parameter?</a> has several answers which exhibit this technique. <a href=""https://stackoverflow.com/q/35771955/874188"">bash script to run lftp with ftp path</a> is a question which has code like this in a question about the actual functionality inside the function, and the OP doesn't explain why even though I prodded gently.</p>

<p>Is this just plainly an antipattern, or is there an actual reason to do this? Under what circumstances would this design make sense?</p>

<p>This is <strong>not</strong> about aliases with a space after them, or about code obfuscation (the examples I have found are generally entirely readable, apart from this mystifying technique).</p>
","874188","","874188","","2019-10-03 03:52:22","2020-01-20 13:58:58","Why would I create an alias which creates a function?","<bash><shell><sh><alias>","5","13","2","","","874188","114844","2011-08-02 08:42:16","tripleee","2020-03-14 08:14:40","http://triple.ee","","<p>I prefer to be referred to as <a href=""http://my.pronoun.is/they"" rel=""nofollow noreferrer"">""they"".</a></p>

<p>If you are looking for something to vote on, I'm looking for <strong>votes (ideally upvotes, natch) on <a href=""//stackoverflow.com/users/874188/tripleee?tab=answers&amp;sort=votes&amp;page=156"">the tail end</strong> of my answers on Stack Overflow</a>.  Look at the lowest-scoring answers; downvotes as well as upvotes appreciated to help me decide what to keep, and what to kill.</p>

<p>The following isn't mine, unfortunately.  The image is a clickable link to <em>an archived gist of</em> <a href=""https://twitter.com/idiot/status/580452127769800705"" rel=""nofollow noreferrer"">the original tweet</a> which is now deleted.</p>

<p><a href=""https://gist.github.com/zmwangx/49db69807f36eae2b573"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/XJPVEm.png"" alt=""What every SO question looks like""></a>
</p>
","24913","8561","31167","","","468289"
"58772267","1","","","2019-11-08 18:51:15","","21","256","<p>In C++20, the concept of POD is deprecated, supposedly because it is a meaningless composite trait of being trivial and standard-layout. However, <a href=""http://eel.is/c++draft/depr.meta.types"" rel=""noreferrer"">the definition of POD</a> in the C++20 draft is not exactly ""both trivial and standard-layout""; it is actually:</p>

<blockquote>
  <p>A POD class is a class that is both a trivial class and a standard-layout class, and has no non-static data members of type non-POD class (or array thereof). A POD type is a scalar type, a POD class, an array of such a type, or a cv-qualified version of one of these types.</p>
</blockquote>

<p>In other words, not only is a POD type both trivial and standard-layout, but it is also recursively so.</p>

<p>Is this recursive requirement redundant? In other words, if a type is both trivial and standard-layout, is it automatically recursively trivial and standard-layout as well? If the answer is ""no"", then what is an example of a standard-layout, trivial type that fails to be POD?</p>
","481267","","963864","","2019-11-10 04:49:54","2019-11-10 04:49:54","Is being a POD type exactly equivalent to being a trivial, standard-layout type?","<c++><language-lawyer><c++20><standard-layout>","2","0","6","","","481267","82364","2010-10-20 04:59:07","Brian","2020-03-14 23:55:30","http://brianbi.ca","New York, NY, USA","<p>C++ programmer on the Low Latency team at Citadel Securities. Opinions are mine and not those of my employer. I can be reached by email at bbi5291@gmail.com, but I can't promise that I'll reply.</p>
","16280","1795","923","https://i.stack.imgur.com/DMvoo.png?s=128&g=1","","222578"
"55212788","1","55672367","","2019-03-17 22:59:24","","20","9858","<h2>Background</h2>

<p>In the past, I've asked about sharing or backup of app-bundle / split apk files, <a href=""https://stackoverflow.com/questions/42494382/how-to-share-split-apks-created-while-using-instant-run-within-android-itself""><strong>here</strong></a> .</p>

<p>This seems like an almost impossible task, which I could only figure out how to install the split APK files, and even then it's only via adb:</p>

<pre><code>adb install-multiple apk1 apk2 ...
</code></pre>

<h2>The problem</h2>

<p>I was told that it should be actually possible to merge multiple split APK files into one that I could install (<a href=""https://stackoverflow.com/a/43383316/878126""><strong>here</strong></a>), but wasn't given of how to do it.</p>

<p>This could be useful for saving it for later (backup), and because currently there is no way to install split-apk files within the device.</p>

<p>In fact, this is such a major issue, that I don't know of any backup app that can handle split APK files (app bundle), and this include Titanium app.</p>

<h2>What I've found</h2>

<p>I took a sample app that uses app-bundles, called ""AirBnb"". </p>

<p>Looking at the files it has, those are what the Play Store decided to download:</p>

<p><a href=""https://i.stack.imgur.com/b8wF3.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/b8wF3.png"" alt=""enter image description here""></a></p>

<p>So I tried to enter each. The ""base"" is the main one, so I skipped it to look at the others.
To me it seems that all have these files within:</p>

<ul>
<li>""META-INF""</li>
<li>""resources.arsc""</li>
<li>""AndroidManifest.xml""</li>
<li>in the case of the one with the ""xxxhdpi"", I also get ""res"" folder.</li>
</ul>

<p>Thing is, since those all exist in multiple places, I don't get how could I merge them.</p>

<h2>The questions</h2>

<ol>
<li><p>What is the way to merge those all into one APK file?</p></li>
<li><p>Is it possible to install split APK files without root and without PC ? This was possible in the past on backup apps such as Titanium, but only on normal APK files, and not app bundle (split apk).</p></li>
</ol>

<hr>

<p>EDIT: I've set a bounty. Please, if you know of a solution, show it. Show something that you've tested to work. Either of merging split APK files, or installing them , all without root and right on the device.</p>

<hr>

<p>EDIT: Sadly all solutions here didn't work, with or without root, and that's even though I've found an app that succeeded doing it (with and without root), called ""SAI (Split APKs Installer)"" (I think its repository is <a href=""https://github.com/Aefyr/SAI"" rel=""noreferrer""><strong>here</strong></a>, found after I've put a bounty). </p>

<p>I'm putting a new bounty. Please, whoever publishes a new answer, show that it works with and without root. Show on Github if needed (and here just the important stuff). I know this app is open sourced anyway, but it's important for me how to do it here, and share with others, as currently what's shown here isn't working, and requires root, even though it's not really needed.</p>

<p>This time I won't grant the bounty till I see something that indeed works (previously I was short on time and granted it to the answer I thought should work).</p>
","878126","","878126","","2019-04-14 06:46:01","2019-10-01 03:13:21","Is it possible to merge/install split APK files (AKA ""app bundle""), on Android device itself, without root?","<android><apk>","5","6","6","","","878126","98917","2011-08-04 08:05:33","android developer","2020-03-15 00:36:55","","Israel","<p>Really like to develop Android apps &amp; libraries on my spare time.</p>

<p>Github website:
<a href=""https://github.com/AndroidDeveloperLB/"" rel=""nofollow noreferrer"">https://github.com/AndroidDeveloperLB/</a> </p>

<p>My spare time apps:
<a href=""https://play.google.com/store/apps/developer?id=AndroidDeveloperLB"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/developer?id=AndroidDeveloperLB</a></p>
","44922","888","41","https://i.stack.imgur.com/D5dZW.jpg","","796053"
"54329200","1","54330388","","2019-01-23 14:14:18","","20","1059","<p>Consider the following toy example:</p>

<pre><code>use std::cmp::Ordering;

pub trait SimpleOrder {
    fn key(&amp;self) -&gt; u32;
}

impl PartialOrd for dyn SimpleOrder {
    fn partial_cmp(&amp;self, other: &amp;dyn SimpleOrder) -&gt; Option&lt;Ordering&gt; {
        Some(self.cmp(other))
    }
}

impl Ord for dyn SimpleOrder {
    fn cmp(&amp;self, other: &amp;dyn SimpleOrder) -&gt; Ordering {
        self.key().cmp(&amp;other.key())
    }
}

impl PartialEq for dyn SimpleOrder {
    fn eq(&amp;self, other: &amp;dyn SimpleOrder) -&gt; bool {
        self.key() == other.key()
    }
}

impl Eq for SimpleOrder {}
</code></pre>

<p>This doesn't compile. It claims there is a lifetime issue in the implementation for <code>partial_cmp</code>:</p>

<pre class=""lang-none prettyprint-override""><code>error[E0495]: cannot infer an appropriate lifetime due to conflicting requirements
 --&gt; src/main.rs:9:23
  |
9 |         Some(self.cmp(other))
  |                       ^^^^^
  |
note: first, the lifetime cannot outlive the anonymous lifetime #2 defined on the method body at 8:5...
 --&gt; src/main.rs:8:5
  |
8 | /     fn partial_cmp(&amp;self, other: &amp;dyn SimpleOrder) -&gt; Option&lt;Ordering&gt; {
9 | |         Some(self.cmp(other))
10| |     }
  | |_____^
note: ...so that the declared lifetime parameter bounds are satisfied
 --&gt; src/main.rs:9:23
  |
9 |         Some(self.cmp(other))
  |                       ^^^^^
  = note: but, the lifetime must be valid for the static lifetime...
  = note: ...so that the types are compatible:
          expected std::cmp::Eq
             found std::cmp::Eq
</code></pre>

<p>I really don't understand this error. In particular <em>""expected <code>std::cmp::Eq</code> found <code>std::cmp::Eq</code>""</em> is puzzling.</p>

<p>If I inline the call manually it compiles fine:</p>

<pre><code>fn partial_cmp(&amp;self, other: &amp;dyn SimpleOrder) -&gt; Option&lt;Ordering&gt; {
    Some(self.key().cmp(&amp;other.key()))
}
</code></pre>

<p>What's going on here?</p>
","565635","","493729","","2019-01-23 14:24:41","2019-01-24 21:46:55","Mysterious lifetime issue while implementing trait for dyn object","<rust><traits><lifetime>","1","11","3","","","565635","82306","2011-01-06 15:21:05","orlp","2020-03-13 15:53:29","https://github.com/orlp","Leiden, Netherlands","<p>Computer Science graduate student. Cryptography, information theory, compression, computer graphics, low-level optimization, discrete mathematics, algorithms &amp; data structures - it all interests me! Currently looking for part time remote opportunities during my study. You can contact me at orsonpeters@gmail.com.</p>

<p>Favourite languages: C++, Python, Rust, C.</p>

<p>Achievements:</p>

<ul>
<li><a href=""http://stackoverflow.com/help/badges/49/c"">Gold C++ badge #238</a></li>
<li><a href=""http://stackoverflow.com/help/badges/51/python"">Gold Python badge #236</a></li>
<li><a href=""https://github.com/orlp/pdqsort"" rel=""nofollow noreferrer"">Pattern-defeating quicksort</a></li>
</ul>
","5395","776","224","","","273792"
"54381791","1","","","2019-01-26 19:07:10","","20","526","<p>This is a followup to my <a href=""https://stackoverflow.com/questions/42989034/cv-qualifications-of-prvalues-in-c14"">previous question</a>, where the apparent consensus was that the change in treatment of cv-qualifications of prvalues was just a fairly minor and inconsequential change intended to solve some inconsistencies (e.g. functions returning prvalues and declared with cv-qualified return types).</p>

<p>However, I see another place in the standard that appears to rely on prvalues having cv-qualified types: initialization of <code>const</code> references with prvalues through <em>temporary materialization conversion</em>. The relevant wording can be found in multiple spots in <a href=""http://eel.is/c++draft/dcl.init.ref#5.3.2"" rel=""noreferrer"">9.3.3/5</a> </p>

<blockquote>
  <p>[...] If the converted initializer is a prvalue, its type T4 is adjusted to type ‚Äúcv1 T4‚Äù ([conv.qual]) and the temporary materialization conversion ([conv.rval]) is applied [...]</p>
  
  <p>[...] Otherwise, the initializer expression is implicitly converted to a prvalue of type ‚Äúcv1 T1‚Äù. The temporary materialization conversion is applied and the reference is bound to the result.</p>
</blockquote>

<p>The intent is obviously to make sure that when we get to the actual <a href=""http://eel.is/c++draft/conv.rval#1"" rel=""noreferrer"">temporary materialization conversion</a></p>

<blockquote>
  <p><strong>7.3.4 Temporary materialization conversion</strong><br>
  <strong>1</strong> A prvalue of type T can be converted to an xvalue of type T. This conversion initializes a temporary object ([class.temporary]) of type T from the prvalue by evaluating the prvalue with the temporary object as its result object, and produces an xvalue denoting the temporary object. [...]</p>
</blockquote>

<p>the type <code>T</code> that it receives as input includes the required cv-qualifications.</p>

<p>But how does that cv-qualification survive the <a href=""http://eel.is/c++draft/expr#type-2"" rel=""noreferrer"">7.2.2/2</a> in case of non-class non-array prvalue? </p>

<blockquote>
  <p><strong>7.2.2 Type</strong><br>
  <strong>2</strong> If a prvalue initially has the type ‚Äúcv T‚Äù, where T is a cv-unqualified non-class, non-array type, the type of the expression is adjusted to T prior to any further analysis.</p>
</blockquote>

<p>Or does it? </p>

<p>E.g. what kind of temporary do we get in this example</p>

<pre><code>const int &amp;r = 42;
</code></pre>

<p>Is the temporary <code>const</code> or not? Can we do</p>

<pre><code>const_cast&lt;int &amp;&gt;(r) = 101; // Undefined or not?
</code></pre>

<p>without triggering undefined behavior? If I'm not mistaken, the original intent was to obtain a <code>const int</code> temporary in such cases. Is it still true? (For class types the answer is clear - we get a <code>const</code> temporary.)</p>
","187690","","187690","","2019-01-26 19:08:43","2019-11-14 13:27:06","Cv-qualifications of prvalues (revisited)","<c++><language-lawyer><c++17><temporary-objects><prvalue>","1","3","4","","","187690","275607","2009-10-10 15:37:54","AnT","2020-03-06 20:21:05","","Silicon Valley, CA, United States","","16515","564","489","","","63402"
"57169862","1","","","2019-07-23 18:03:09","","19","384","<p>I am trying to compile <code>numpy</code> v1.12 in order to get support for ATLAS/LAPACK routines. </p>

<p><strong>The problem</strong></p>

<p>The settings I am using for compilation do not appear to work in bringing ATLAS/LAPACK libraries into <code>numpy</code>.</p>

<p><strong>The setup</strong></p>

<p>I do not have admin privileges on the host(s) I am working on (a computational cluster). </p>

<p>However, the nodes offer access to <code>gcc</code> 4.7.2 and 5.3.0, <code>glibc</code> 2.17 and 2.22, and ATLAS/LAPACK libraries and headers v3.10.2 via GNU modules.</p>

<p>For compatibility reasons, I am working with a virtual environment that contains Python 2.7.16. Likewise, I am installing an older version of <code>numpy</code> for the same reason. If things work, I may explore newer versions of <code>numpy</code> but at this time, that is what I am working with. </p>

<p>My source directory for <code>numpy</code> has a configuration file called <code>site.cfg</code>, which includes these directives:</p>

<pre><code>[ALL]
library_dirs = /usr/local/lib:/net/module/sw/glibc/2.22/lib64:/net/module/sw/atlas-lapack/3.10.2/lib
include_dirs = /usr/local/include:/net/module/sw/glibc/2.22/include:/net/module/sw/atlas-lapack/3.10.2/include

[atlas]
libraries = lapack,f77blas,cblas,atlas
library_dirs = /net/module/sw/atlas-lapack/3.10.2/lib
include_dirs = /net/module/sw/atlas-lapack/3.10.2/include
</code></pre>

<p>I am compiling <code>numpy</code> via the following command:</p>

<pre><code>$ CFLAGS=""${CFLAGS} -std=c99 -fPIC"" LDFLAGS=""-L/home/areynolds/.conda/envs/genotyping_environment/lib -Wl,-rpath=/home/areynolds/.conda/envs/genotyping_environment/lib -Wl,--no-as-needed -Wl,--sysroot=/,-L/net/module/sw/glibc/2.22/lib64"" python setup.py build --fcompiler=gnu95
</code></pre>

<p>I am using <code>--fcompiler=gnu95</code> as the ATLAS/LAPACK libraries were compiled with GNU Fortran. I am overriding <code>CFLAGS</code> and <code>LDFLAGS</code> variables in order for the GCC toolkit to be able to compile and link properly.</p>

<p><strong>The question</strong></p>

<p>After compilation, I test the <code>numpy</code> library to see what is installed via one method:</p>

<pre><code>$ python
...
&gt;&gt;&gt; import numpy.distutils.system_info as sysinfo
&gt;&gt;&gt; sysinfo.get_info('atlas')
ATLAS version 3.10.2 built by root on Wed Jun  1 15:39:08 PDT 2016:
    UNAME    : Linux module0.altiusinstitute.org 3.10.0-327.10.1.el7.x86_64 #1 SMP Tue Feb 16 17:03:50 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux
    INSTFLG  : -1 0 -a 1 -l 1
    ARCHDEFS : -DATL_OS_Linux -DATL_ARCH_UNKNOWNx86 -DATL_CPUMHZ=2876 -DATL_AVXMAC -DATL_AVX -DATL_SSE3 -DATL_SSE2 -DATL_SSE1 -DATL_USE64BITS -DATL_GAS_x8664
    F2CDEFS  : -DAdd_ -DF77_INTEGER=int -DStringSunStyle
    CACHEEDGE: 229376
    F77      : /net/module/sw/gcc/5.3.0/bin/gfortran, version GNU Fortran (GCC) 5.3.0
    F77FLAGS : -O -mavx2 -mfma -m64 -fPIC
    SMC      : /usr/bin/x86_64-redhat-linux-gcc, version x86_64-redhat-linux-gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-4)
    SMCFLAGS : -O -fomit-frame-pointer -mavx2 -mfma -m64 -fPIC
    SKC      : /usr/bin/x86_64-redhat-linux-gcc, version x86_64-redhat-linux-gcc (GCC) 4.8.5 20150623 (Red Hat 4.8.5-4)
    SKCFLAGS : -O -fomit-frame-pointer -mavx2 -mfma -m64 -fPIC                                                                                                                                                    
    {'libraries': ['lapack', 'f77blas', 'cblas', 'atlas', 'f77blas', 'cblas'], 'library_dirs': ['/net/module/sw/atlas-lapack/3.10.2/lib'], 'define_macros': [('ATLAS_INFO', '""\\""3.10.2\\""""')], 'language': 'f77', 'include_dirs': ['/net/module/sw/atlas-lapack/3.10.2/include']}
</code></pre>

<p>This looks okay, maybe?</p>

<p>But when I check via another method, I get a different answer:</p>

<pre><code>&gt;&gt;&gt; np.show_config()
lapack_opt_info:
    libraries = ['openblas', 'openblas']
    library_dirs = ['/usr/local/lib']
    define_macros = [('HAVE_CBLAS', None)]
    language = c
blas_opt_info:
    libraries = ['openblas', 'openblas']
    library_dirs = ['/usr/local/lib']
    define_macros = [('HAVE_CBLAS', None)]
    language = c
openblas_info:
    libraries = ['openblas', 'openblas']
    library_dirs = ['/usr/local/lib']
    define_macros = [('HAVE_CBLAS', None)]
    language = c
blis_info:
  NOT AVAILABLE
openblas_lapack_info:
    libraries = ['openblas', 'openblas']
    library_dirs = ['/usr/local/lib']
    define_macros = [('HAVE_CBLAS', None)]
    language = c
lapack_mkl_info:
  NOT AVAILABLE
blas_mkl_info:
  NOT AVAILABLE
</code></pre>

<p>Despite the manual setup described in <code>site.cfg</code>, there are no mentions of ATLAS, nor is LAPACK apparently pointed to the correct module directory (<code>/net/module/sw/atlas-lapack/3.10.2</code>).</p>

<p>How do I correctly compile support for ATLAS/LAPACK into <code>numpy</code>, or truly test that I have a working ATLAS/LAPACK setup integrated into <code>numpy</code>, which gives me a consistent (and reliable) answer?</p>
","19410","","","","","2019-12-17 19:58:48","Building numpy with ATLAS/LAPACK support","<python><python-2.7><numpy><lapack><atlas>","4","5","","","","19410","87817","2008-09-20 00:07:45","Alex Reynolds","2020-03-15 04:21:23","http://bitsumma.com","Seattle, WA","<p>Bioinformaticist, hobbyist iPhone developer, pug caregiver</p>
","7068","3082","1264","","","10311"
"54216273","1","54278884","","2019-01-16 11:37:38","","19","1405","<h2>Background</h2>

<p>We record a video of the user's face, and usually the face is located at the upper half of the video.</p>

<p>Later we wish to view the video, but the aspect ratio of the <code>PlayerView</code> might be different than the one of the video, so there needs to be some scaling and cropping.</p>

<h2>The problem</h2>

<p>The only way I've found to scale the <code>PlayerView</code> so that it will be shown in the entire space it has but keeping the aspect ratio (which will result in cropping when needed, of course) , is by using <code>app:resize_mode=""zoom""</code> . Here's a sample of how it works with center-crop: <a href=""http://s000.tinyupload.com/?file_id=00574047057406286563"" rel=""nofollow noreferrer"">http://s000.tinyupload.com/?file_id=00574047057406286563</a> . The more the Views that show the content have a similar aspect ratio, the less cropping is needed. </p>

<p>But this is only for the center, meaning it takes a point of 0.5x0.5 of the video, and scale-crops from that point. This causes many cases of losing the important content of the video.</p>

<p>For example, if we have a video that was taken in portrait, and we have a square PlayerView and want to show the top area, this is the part that will be visible:</p>

<p><a href=""https://i.stack.imgur.com/0sztC.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/0sztC.png"" alt=""PlayerView""></a> </p>

<p>Of course, if the content itself is square, and the views are also square, it should show the entire content, without cropping.</p>

<h2>What I've tried</h2>

<p>I've tried searching over the Internet, StackOverflow (here) and on <a href=""https://github.com/google/ExoPlayer/"" rel=""nofollow noreferrer"">Github</a>, but I couldn't find how to do it. The only clue I've found is about AspectRatioFrameLayout and AspectRatioTextureView, but I didn't find how to use them for this task, if it's even possible.</p>

<p>I was told (<a href=""https://github.com/google/ExoPlayer/issues/5394"" rel=""nofollow noreferrer""><strong>here</strong></a>) that I should use a normal <code>TextureView</code> , and provide it directly to <code>SimpleExoPlayer</code> using <code>SimpleExoPlayer.setVideoTextureView</code>. And to set a special transformation to it using <code>TextureView.setTransform</code>. </p>

<p>After a lot of trying what is best to use (and looking at <a href=""https://github.com/dmytrodanylyk/video-crop"" rel=""nofollow noreferrer""><strong>video-crop repository</strong></a> , <a href=""https://github.com/cesards/SuperImageView"" rel=""nofollow noreferrer""><strong>SuperImageView repository</strong></a> , and <a href=""https://github.com/omgnuts/JCropImageView"" rel=""nofollow noreferrer""><strong>JCropImageView repository</strong></a> which have examples of scale/crop of ImageView and video), I've published a working sample that seems to show the video correctly, but I'm still not sure about it, as I also use an ImageView that's shown on top of it before it starts playing (to have a nicer transition instead of black content).</p>

<p>Here's the current code:</p>

<pre><code>class MainActivity : AppCompatActivity() {
    private val imageResId = R.drawable.test
    private val videoResId = R.raw.test
    private val percentageY = 0.2f
    private var player: SimpleExoPlayer? = null


    override fun onCreate(savedInstanceState: Bundle?) {
        window.setBackgroundDrawable(ColorDrawable(0xff000000.toInt()))
        super.onCreate(savedInstanceState)
        if (cache == null) {
            cache = SimpleCache(File(cacheDir, ""media""), LeastRecentlyUsedCacheEvictor(MAX_PREVIEW_CACHE_SIZE_IN_BYTES))
        }
        setContentView(R.layout.activity_main)
//        imageView.visibility = View.INVISIBLE
        imageView.setImageResource(imageResId)
        imageView.doOnPreDraw {
            imageView.imageMatrix = prepareMatrixForImageView(imageView, imageView.drawable.intrinsicWidth.toFloat(), imageView.drawable.intrinsicHeight.toFloat())
//            imageView.imageMatrix = prepareMatrix(imageView, imageView.drawable.intrinsicWidth.toFloat(), imageView.drawable.intrinsicHeight.toFloat())
//            imageView.visibility = View.VISIBLE
        }
    }

    override fun onStart() {
        super.onStart()
        playVideo()
    }

    private fun prepareMatrix(view: View, contentWidth: Float, contentHeight: Float): Matrix {
        var scaleX = 1.0f
        var scaleY = 1.0f
        val viewWidth = view.measuredWidth.toFloat()
        val viewHeight = view.measuredHeight.toFloat()
        Log.d(""AppLog"", ""viewWidth $viewWidth viewHeight $viewHeight contentWidth:$contentWidth contentHeight:$contentHeight"")
        if (contentWidth &gt; viewWidth &amp;&amp; contentHeight &gt; viewHeight) {
            scaleX = contentWidth / viewWidth
            scaleY = contentHeight / viewHeight
        } else if (contentWidth &lt; viewWidth &amp;&amp; contentHeight &lt; viewHeight) {
            scaleY = viewWidth / contentWidth
            scaleX = viewHeight / contentHeight
        } else if (viewWidth &gt; contentWidth)
            scaleY = viewWidth / contentWidth / (viewHeight / contentHeight)
        else if (viewHeight &gt; contentHeight)
            scaleX = viewHeight / contentHeight / (viewWidth / contentWidth)
        val matrix = Matrix()
        val pivotPercentageX = 0.5f
        val pivotPercentageY = percentageY

        matrix.setScale(scaleX, scaleY, viewWidth * pivotPercentageX, viewHeight * pivotPercentageY)
        return matrix
    }

    private fun prepareMatrixForVideo(view: View, contentWidth: Float, contentHeight: Float): Matrix {
        val msWidth = view.measuredWidth
        val msHeight = view.measuredHeight
        val matrix = Matrix()
        matrix.setScale(1f, (contentHeight / contentWidth) * (msWidth.toFloat() / msHeight), msWidth / 2f, percentageY * msHeight) /*,msWidth/2f,msHeight/2f*/
        return matrix
    }

    private fun prepareMatrixForImageView(view: View, contentWidth: Float, contentHeight: Float): Matrix {
        val dw = contentWidth
        val dh = contentHeight
        val msWidth = view.measuredWidth
        val msHeight = view.measuredHeight
//        Log.d(""AppLog"", ""viewWidth $msWidth viewHeight $msHeight contentWidth:$contentWidth contentHeight:$contentHeight"")
        val scalew = msWidth.toFloat() / dw
        val theoryh = (dh * scalew).toInt()
        val scaleh = msHeight.toFloat() / dh
        val theoryw = (dw * scaleh).toInt()
        val scale: Float
        var dx = 0
        var dy = 0
        if (scalew &gt; scaleh) { // fit width
            scale = scalew
//            dy = ((msHeight - theoryh) * 0.0f + 0.5f).toInt() // + 0.5f for rounding
        } else {
            scale = scaleh
            dx = ((msWidth - theoryw) * 0.5f + 0.5f).toInt() // + 0.5f for rounding
        }
        dy = ((msHeight - theoryh) * percentageY + 0.5f).toInt() // + 0.5f for rounding
        val matrix = Matrix()
//        Log.d(""AppLog"", ""scale:$scale dx:$dx dy:$dy"")
        matrix.setScale(scale, scale)
        matrix.postTranslate(dx.toFloat(), dy.toFloat())
        return matrix
    }

    private fun playVideo() {
        player = ExoPlayerFactory.newSimpleInstance(this@MainActivity, DefaultTrackSelector())
        player!!.setVideoTextureView(textureView)
        player!!.addVideoListener(object : VideoListener {
            override fun onVideoSizeChanged(width: Int, height: Int, unappliedRotationDegrees: Int, pixelWidthHeightRatio: Float) {
                super.onVideoSizeChanged(width, height, unappliedRotationDegrees, pixelWidthHeightRatio)
                Log.d(""AppLog"", ""onVideoSizeChanged: $width $height"")
                val videoWidth = if (unappliedRotationDegrees % 180 == 0) width else height
                val videoHeight = if (unappliedRotationDegrees % 180 == 0) height else width
                val matrix = prepareMatrixForVideo(textureView, videoWidth.toFloat(), videoHeight.toFloat())
                textureView.setTransform(matrix)
            }

            override fun onRenderedFirstFrame() {
                Log.d(""AppLog"", ""onRenderedFirstFrame"")
                player!!.removeVideoListener(this)
//                imageView.animate().alpha(0f).setDuration(5000).start()
                imageView.visibility = View.INVISIBLE
            }
        })
        player!!.volume = 0f
        player!!.repeatMode = Player.REPEAT_MODE_ALL
        player!!.playRawVideo(this, videoResId)
        player!!.playWhenReady = true
        //        player!!.playVideoFromUrl(this, ""https://sample-videos.com/video123/mkv/240/big_buck_bunny_240p_20mb.mkv"", cache!!)
        //        player!!.playVideoFromUrl(this, ""https://sample-videos.com/video123/mkv/720/big_buck_bunny_720p_1mb.mkv"", cache!!)
        //        player!!.playVideoFromUrl(this@MainActivity, ""https://sample-videos.com/video123/mkv/720/big_buck_bunny_720p_1mb.mkv"")
    }

    override fun onStop() {
        super.onStop()
        player!!.setVideoTextureView(null)
        //        playerView.player = null
        player!!.release()
        player = null
    }

    companion object {
        const val MAX_PREVIEW_CACHE_SIZE_IN_BYTES = 20L * 1024L * 1024L
        var cache: com.google.android.exoplayer2.upstream.cache.Cache? = null

        @JvmStatic
        fun getUserAgent(context: Context): String {
            val packageManager = context.packageManager
            val info = packageManager.getPackageInfo(context.packageName, 0)
            val appName = info.applicationInfo.loadLabel(packageManager).toString()
            return Util.getUserAgent(context, appName)
        }
    }

    fun SimpleExoPlayer.playRawVideo(context: Context, @RawRes rawVideoRes: Int) {
        val dataSpec = DataSpec(RawResourceDataSource.buildRawResourceUri(rawVideoRes))
        val rawResourceDataSource = RawResourceDataSource(context)
        rawResourceDataSource.open(dataSpec)
        val factory: DataSource.Factory = DataSource.Factory { rawResourceDataSource }
        prepare(LoopingMediaSource(ExtractorMediaSource.Factory(factory).createMediaSource(rawResourceDataSource.uri)))
    }

    fun SimpleExoPlayer.playVideoFromUrl(context: Context, url: String, cache: Cache? = null) = playVideoFromUri(context, Uri.parse(url), cache)

    fun SimpleExoPlayer.playVideoFile(context: Context, file: File) = playVideoFromUri(context, Uri.fromFile(file))

    fun SimpleExoPlayer.playVideoFromUri(context: Context, uri: Uri, cache: Cache? = null) {
        val factory = if (cache != null)
            CacheDataSourceFactory(cache, DefaultHttpDataSourceFactory(getUserAgent(context)))
        else
            DefaultDataSourceFactory(context, MainActivity.getUserAgent(context))
        val mediaSource = ExtractorMediaSource.Factory(factory).createMediaSource(uri)
        prepare(mediaSource)
    }
}
</code></pre>

<p>I had various issues on trying this till I got to the current situation, and I've updated this question multiple times accordingly. Now it even works with the percentageY I talked about, so I could set it to be from 20% of the top of the video, if I wish. However, I still think that it has a big chance that something is wrong, because when I tried to set it to 50% , I've noticed that the content might not fit the entire View.</p>

<p>I even looked at the source code of ImageView (<a href=""https://android.googlesource.com/platform/frameworks/base/+/master/core/java/android/widget/ImageView.java"" rel=""nofollow noreferrer""><strong>here</strong></a>), to see how center-crop is used. When applied to the ImageView, it still worked as center-crop, but when I used the same technique on the video, it gave me a very wrong result.</p>

<h2>The questions</h2>

<p>My goal here was to show both ImageView and the video so that it will smoothly transition from a static image to a video. All that while having both have the top-scale-crop of 20% from the top (for example). I've published a sample project <a href=""https://github.com/AndroidDeveloperLB/ExoPlayerScaleCrop"" rel=""nofollow noreferrer""><strong>here</strong></a> to try it out and share people of what I've found.</p>

<p>So now my questions are around why this doesn't seem to work well for the imageView and/or video :</p>

<ol>
<li><p>As it turns out, none of the matrix creations that I've tried work well for either ImageView or the video. What's wrong with it exactly? How can I change it for them to look the same? To scale-crop from the top 20%, for example?</p></li>
<li><p>I tried to use the exact matrix for both, but it seems each need it differently, even though both have the exact same size and content size. Why would I need a different matrix for each? </p></li>
</ol>

<hr>

<p>EDIT: after this question was answered, I've decided to make a small sample of how to use it (Github repository available <a href=""https://github.com/AndroidDeveloperLB/ExoPlayerScaleCrop"" rel=""nofollow noreferrer""><strong>here</strong></a>) :</p>

<pre><code>import android.content.Context
import android.graphics.Matrix
import android.graphics.PointF
import android.net.Uri
import android.os.Bundle
import android.view.TextureView
import android.view.View
import androidx.annotation.RawRes
import androidx.appcompat.app.AppCompatActivity
import androidx.core.view.doOnPreDraw
import com.google.android.exoplayer2.ExoPlayerFactory
import com.google.android.exoplayer2.Player
import com.google.android.exoplayer2.SimpleExoPlayer
import com.google.android.exoplayer2.source.ExtractorMediaSource
import com.google.android.exoplayer2.source.LoopingMediaSource
import com.google.android.exoplayer2.trackselection.DefaultTrackSelector
import com.google.android.exoplayer2.upstream.*
import com.google.android.exoplayer2.upstream.cache.Cache
import com.google.android.exoplayer2.upstream.cache.CacheDataSourceFactory
import com.google.android.exoplayer2.upstream.cache.LeastRecentlyUsedCacheEvictor
import com.google.android.exoplayer2.upstream.cache.SimpleCache
import com.google.android.exoplayer2.util.Util
import com.google.android.exoplayer2.video.VideoListener
import kotlinx.android.synthetic.main.activity_main.*
import java.io.File

// https://stackoverflow.com/questions/54216273/how-to-have-similar-mechanism-of-center-crop-on-exoplayers-playerview-but-not
class MainActivity : AppCompatActivity() {
    companion object {
        private val FOCAL_POINT = PointF(0.5f, 0.2f)
        private const val IMAGE_RES_ID = R.drawable.test
        private const val VIDEO_RES_ID = R.raw.test
        private var cache: Cache? = null
        private const val MAX_PREVIEW_CACHE_SIZE_IN_BYTES = 20L * 1024L * 1024L

        @JvmStatic
        fun getUserAgent(context: Context): String {
            val packageManager = context.packageManager
            val info = packageManager.getPackageInfo(context.packageName, 0)
            val appName = info.applicationInfo.loadLabel(packageManager).toString()
            return Util.getUserAgent(context, appName)
        }
    }

    private var player: SimpleExoPlayer? = null

    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContentView(R.layout.activity_main)
        if (cache == null)
            cache = SimpleCache(File(cacheDir, ""media""), LeastRecentlyUsedCacheEvictor(MAX_PREVIEW_CACHE_SIZE_IN_BYTES))
        //        imageView.visibility = View.INVISIBLE
        imageView.setImageResource(IMAGE_RES_ID)
    }

    private fun prepareMatrix(view: View, mediaWidth: Float, mediaHeight: Float, focalPoint: PointF): Matrix? {
        if (view.visibility == View.GONE)
            return null
        val viewHeight = (view.height - view.paddingTop - view.paddingBottom).toFloat()
        val viewWidth = (view.width - view.paddingStart - view.paddingEnd).toFloat()
        if (viewWidth &lt;= 0 || viewHeight &lt;= 0)
            return null
        val matrix = Matrix()
        if (view is TextureView)
        // Restore true media size for further manipulation.
            matrix.setScale(mediaWidth / viewWidth, mediaHeight / viewHeight)
        val scaleFactorY = viewHeight / mediaHeight
        val scaleFactor: Float
        var px = 0f
        var py = 0f
        if (mediaWidth * scaleFactorY &gt;= viewWidth) {
            // Fit height
            scaleFactor = scaleFactorY
            px = -(mediaWidth * scaleFactor - viewWidth) * focalPoint.x / (1 - scaleFactor)
        } else {
            // Fit width
            scaleFactor = viewWidth / mediaWidth
            py = -(mediaHeight * scaleFactor - viewHeight) * focalPoint.y / (1 - scaleFactor)
        }
        matrix.postScale(scaleFactor, scaleFactor, px, py)
        return matrix
    }

    private fun playVideo() {
        player = ExoPlayerFactory.newSimpleInstance(this@MainActivity, DefaultTrackSelector())
        player!!.setVideoTextureView(textureView)
        player!!.addVideoListener(object : VideoListener {
            override fun onVideoSizeChanged(videoWidth: Int, videoHeight: Int, unappliedRotationDegrees: Int, pixelWidthHeightRatio: Float) {
                super.onVideoSizeChanged(videoWidth, videoHeight, unappliedRotationDegrees, pixelWidthHeightRatio)
                textureView.setTransform(prepareMatrix(textureView, videoWidth.toFloat(), videoHeight.toFloat(), FOCAL_POINT))
            }

            override fun onRenderedFirstFrame() {
                //                Log.d(""AppLog"", ""onRenderedFirstFrame"")
                player!!.removeVideoListener(this)
                imageView.animate().alpha(0f).setDuration(2000).start()
                //                imageView.visibility = View.INVISIBLE
            }
        })
        player!!.volume = 0f
        player!!.repeatMode = Player.REPEAT_MODE_ALL
        player!!.playRawVideo(this, VIDEO_RES_ID)
        player!!.playWhenReady = true
        //        player!!.playVideoFromUrl(this, ""https://sample-videos.com/video123/mkv/240/big_buck_bunny_240p_20mb.mkv"", cache!!)
        //        player!!.playVideoFromUrl(this, ""https://sample-videos.com/video123/mkv/720/big_buck_bunny_720p_1mb.mkv"", cache!!)
        //        player!!.playVideoFromUrl(this@MainActivity, ""https://sample-videos.com/video123/mkv/720/big_buck_bunny_720p_1mb.mkv"")
    }

    override fun onStart() {
        super.onStart()
        imageView.doOnPreDraw {
            val imageWidth: Float = imageView.drawable.intrinsicWidth.toFloat()
            val imageHeight: Float = imageView.drawable.intrinsicHeight.toFloat()
            imageView.imageMatrix = prepareMatrix(imageView, imageWidth, imageHeight, FOCAL_POINT)
        }
        playVideo()
    }

    override fun onStop() {
        super.onStop()
        if (player != null) {
            player!!.setVideoTextureView(null)
            //        playerView.player = null
            player!!.release()
            player = null
        }
    }

    override fun onDestroy() {
        super.onDestroy()
        if (!isChangingConfigurations)
            cache?.release()
    }

    fun SimpleExoPlayer.playRawVideo(context: Context, @RawRes rawVideoRes: Int) {
        val dataSpec = DataSpec(RawResourceDataSource.buildRawResourceUri(rawVideoRes))
        val rawResourceDataSource = RawResourceDataSource(context)
        rawResourceDataSource.open(dataSpec)
        val factory: DataSource.Factory = DataSource.Factory { rawResourceDataSource }
        prepare(LoopingMediaSource(ExtractorMediaSource.Factory(factory).createMediaSource(rawResourceDataSource.uri)))
    }

    fun SimpleExoPlayer.playVideoFromUrl(context: Context, url: String, cache: Cache? = null) = playVideoFromUri(context, Uri.parse(url), cache)

    fun SimpleExoPlayer.playVideoFile(context: Context, file: File) = playVideoFromUri(context, Uri.fromFile(file))

    fun SimpleExoPlayer.playVideoFromUri(context: Context, uri: Uri, cache: Cache? = null) {
        val factory = if (cache != null)
            CacheDataSourceFactory(cache, DefaultHttpDataSourceFactory(getUserAgent(context)))
        else
            DefaultDataSourceFactory(context, MainActivity.getUserAgent(context))
        val mediaSource = ExtractorMediaSource.Factory(factory).createMediaSource(uri)
        prepare(mediaSource)
    }
}
</code></pre>

<p>Here's a solution for ImageView alone, if needed:</p>

<pre><code>class ScaleCropImageView(context: Context, attrs: AttributeSet?) : AppCompatImageView(context, attrs) {
    var focalPoint = PointF(0.5f, 0.5f)
        set(value) {
            field = value
            updateMatrix()
        }
    private val viewWidth: Float
        get() = (width - paddingLeft - paddingRight).toFloat()

    private val viewHeight: Float
        get() = (height - paddingTop - paddingBottom).toFloat()

    init {
        scaleType = ScaleType.MATRIX
    }

    override fun onSizeChanged(w: Int, h: Int, oldw: Int, oldh: Int) {
        super.onSizeChanged(w, h, oldw, oldh)
        updateMatrix()
    }

    override fun setImageDrawable(drawable: Drawable?) {
        super.setImageDrawable(drawable)
        updateMatrix()
    }

    @Suppress(""MemberVisibilityCanBePrivate"")
    fun updateMatrix() {
        if (scaleType != ImageView.ScaleType.MATRIX)
            return
        val dr = drawable ?: return
        imageMatrix = prepareMatrix(
                viewWidth, viewHeight,
                dr.intrinsicWidth.toFloat(), dr.intrinsicHeight.toFloat(), focalPoint, Matrix()
        )
    }

    private fun prepareMatrix(
            viewWidth: Float, viewHeight: Float, mediaWidth: Float, mediaHeight: Float,
            focalPoint: PointF, matrix: Matrix
    ): Matrix? {
        if (viewWidth &lt;= 0 || viewHeight &lt;= 0)
            return null
        var scaleFactor = viewHeight / mediaHeight
        if (mediaWidth * scaleFactor &gt;= viewWidth) {
            // Fit height
            matrix.postScale(scaleFactor, scaleFactor, -(mediaWidth * scaleFactor - viewWidth) * focalPoint.x / (1 - scaleFactor), 0f)
        } else {
            // Fit width
            scaleFactor = viewWidth / mediaWidth
            matrix.postScale(scaleFactor, scaleFactor, 0f, -(mediaHeight * scaleFactor - viewHeight) * focalPoint.y / (1 - scaleFactor))
        }
        return matrix
    }
}
</code></pre>
","878126","","878126","","2019-02-06 12:31:10","2019-08-29 15:00:34","How to have similar mechanism of center-crop on ExoPlayer's PlayerView , but not on the center?","<android><scale><crop><exoplayer>","1","5","6","","","878126","98917","2011-08-04 08:05:33","android developer","2020-03-15 00:36:55","","Israel","<p>Really like to develop Android apps &amp; libraries on my spare time.</p>

<p>Github website:
<a href=""https://github.com/AndroidDeveloperLB/"" rel=""nofollow noreferrer"">https://github.com/AndroidDeveloperLB/</a> </p>

<p>My spare time apps:
<a href=""https://play.google.com/store/apps/developer?id=AndroidDeveloperLB"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/developer?id=AndroidDeveloperLB</a></p>
","44922","888","41","https://i.stack.imgur.com/D5dZW.jpg","","796053"
"54366277","1","","","2019-01-25 13:29:37","","19","568","<p>I have a bunch of unit tests which contain code like:</p>

<pre><code>File file = new File(""src/main/java/com/pany/Foo.java"");
assertTrue(""Missing file: "" + file.getAbsolutePath(), file.exists());
</code></pre>

<p>This test is suddenly failing when running it with Maven Surefire and <code>-DforkCount=0</code>. With <code>-DforkCount=1</code>, it works.</p>

<p>Things I tried so far:</p>

<ul>
<li>The file does exist. Windows Explorer, command line (copy &amp; paste), text editors, Cygwin can all find it and show the contents. That's why I think it's not a permission problem.</li>
<li>It's not modified by the unit tests or anything else. Git shows no modifications for the last two months.</li>
<li>I've checked the file system, it's clean. </li>
<li>I've tried other versions of Java 8, namely 8u171 and 8u181. Same problem.</li>
<li>I've run Maven from within Cygwin and the command prompt. Same result.</li>
<li>Reboot :-) No effect :-(</li>
</ul>

<p>More details:</p>

<ul>
<li>When I see this problem, I start to see the ""The forked VM terminated without properly saying goodbye. VM crash or System.exit called?"" in other projects. That's why I tried <code>forkCount=0</code> which often helps in this case to find out why the forked VM crashed.</li>
<li>This has started recently, maybe around the October 2018 update of Windows 10. Before that, the builds were rock solid for about three years. My machine was switched to Windows 10 late 2017, I think.</li>
<li>I'm using Maven 3.6 and can't easily try an older version because of an important bug that was fixed with it. I did see the VM crash above with Maven 3.5.2 as well.</li>
<li>It's always the same files which fail (so it's stable).</li>
</ul>

<p><code>ulimit</code> (from Cygwin) says:</p>

<pre><code>$ ulimit -a
core file size          (blocks, -c) unlimited
data seg size           (kbytes, -d) unlimited
file size               (blocks, -f) unlimited
open files                      (-n) 256
pipe size            (512 bytes, -p) 8
stack size              (kbytes, -s) 2032
cpu time               (seconds, -t) unlimited
max user processes              (-u) 256
virtual memory          (kbytes, -v) unlimited
</code></pre>

<p>I'm wondering if the ""open files"" limit of 256 only applied to Cygwin processes or whether that's something which Cygwin reads from Windows.</p>

<p>Let me know if you need anything else. I'm running out of ideas what I could try.</p>

<h2>Update 1</h2>

<p><a href=""https://stackoverflow.com/users/1366169/bernhard"">Bernhard</a> asked me to print absolute names. My answer was that I was already using absolute names but I was wrong. The actual code was:</p>

<pre><code>File file = new File(""src/main/java/com/pany/Foo.java"");
if (!file.exists()) {
    log.debug(""Missing file {}"", file.getAbsolutePath());
    ... fail ...
}

... do something with file...
</code></pre>

<p>I have now changed this to:</p>

<pre><code>File file = new File(""src/main/java/com/pany/Foo.java"").getAbsoluteFile();
if (!file.exists()) {
    log.debug(""Missing file {}"", file);
}
</code></pre>

<p>and that fixed the problem. I just can't understand <em>why</em>.</p>

<p>When Maven creates a forked VM to run the tests with Surefire, then it can change the current directory. So in this case, it would make sense that the tests work when forked but fail when running in the same VM (since the VM was created in the root folder of the multi-module build). But why is making the path absolute before the call to <code>exists()</code> fixing the issue?</p>
","34088","","34088","","2019-01-28 16:04:26","2019-02-03 20:06:37","File.exists() sometimes wrong on Windows 10 with Java 8.191","<java-8><windows-10>","3","18","3","","","34088","278915","2008-11-04 11:46:49","Aaron Digulla","2020-03-12 13:15:07","http://blog.pdark.de/","Switzerland","I'm a software developer living in Switzerland. You can reach me at digulla at hepe dot com.","34654","8304","216","","","15903"
"55044324","1","55044981","","2019-03-07 12:55:26","","19","1527","<p>C17 6.2.6.2/4 says:</p>

<blockquote>
  <p>If the implementation does not support negative zeros, the behavior of the &amp;, |, ^, ~, &lt;&lt;,
  and >> operators with operands that would produce such a value is undefined.</p>
</blockquote>

<p>If I have a 2's complement system, it does not support negative zeroes. And it always utilizes all possible combinations of a binary number to express a value. Therefore it is impossible to ever produce a negative zero, no matter which bitwise operation that is used. So what is the meaning of this text?</p>

<p>My take is that this part refers to systems with 1's complement or signed magnitude that does not support negative zeroes, but instead use a padding bit or trap representation. Is this correct?</p>
","584518","","","","","2019-03-07 14:27:08","What is the meaning of ""producing negative zeroes"" in a system that doesn't support it?","<c><language-lawyer><bitwise-operators><signed><twos-complement>","2","7","1","","","584518","131235","2011-01-21 13:46:43","Lundin","2020-03-14 18:28:09","","","","16106","1887","6326","https://i.stack.imgur.com/RZLo7.png?s=128&g=1","","285695"
"59418514","1","","","2019-12-20 00:26:27","","19","987","<p><a href=""https://www.timeanddate.com/date/weekday.html"" rel=""nofollow noreferrer"">https://www.timeanddate.com/date/weekday.html</a> computes various facts about a day of the year, for example:</p>

<p><a href=""https://i.stack.imgur.com/WPWuO.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/WPWuO.png"" alt=""https://i.stack.imgur.com/WPWuO.png""></a></p>

<p>Given an arbitrary date, how can these numbers be computed with the <a href=""http://eel.is/c++draft/#time"" rel=""nofollow noreferrer"">C++20 chrono specification</a>?</p>
","576911","","576911","","2020-02-15 15:21:25","2020-02-15 15:22:37","Using C++20 chrono, how to compute various facts about a date","<c++><chrono><c++20>","1","3","6","","","576911","159670","2011-01-15 17:43:37","Howard Hinnant","2020-03-15 03:48:38","http://howardhinnant.github.io","Waterbury, Vermont, United States","<p><a href=""http://howardhinnant.github.io"" rel=""nofollow noreferrer"">http://howardhinnant.github.io</a></p>

<p><a href=""https://github.com/HowardHinnant"" rel=""nofollow noreferrer"">https://github.com/HowardHinnant</a></p>
","26062","1786","5","","","280919"
"55730971","1","55733335","","2019-04-17 15:16:51","","18","708","<p><a href=""https://stackoverflow.com/q/46746878/2069064"">Is it safe to link C++17, C++14, and C++11 objects</a> asks about linking objects compiled with different language standards, and Jonathan Wakely's excellent answer on that question explains the ABI stability promises that gcc/libstdc++ make to enusure that this works.</p>

<p>There's one more thing that can change between gcc versions though - the language ABI via <a href=""https://gcc.gnu.org/onlinedocs/gcc/C_002b_002b-Dialect-Options.html"" rel=""noreferrer""><code>-fabi-version</code></a>. Let's say, for simplicity, I have three object files:</p>

<ul>
<li><code>foo.o</code>, compiled with gcc 6.5 c++14</li>
<li><code>bar.o</code>, compiled with gcc 7.4 c++14</li>
<li><code>quux.o</code>, compiled with gcc 8.3 c++17</li>
</ul>

<p>All with the respective default language ABIs (i.e. 10, 11, and 13). Linking these objects together is safe from the library perspective per the linked answer. But are there things that could go wrong from a language ABI perspective? Is there anything I should be watching out for? Most of the language ABI changes seem like they wouldn't cause issues, but the calling convention change for empty class types in 12 might?</p>
","2069064","","","","","2019-04-17 22:12:38","Is it safe to link gcc 6, gcc 7, and gcc 8 objects?","<c++><gcc><c++17>","2","0","9","","","2069064","216632","2013-02-13 16:10:03","Barry","2020-03-15 01:46:57","https://brevzin.github.io","","<p>I like <a href=""/questions/tagged/c%2b%2b"" class=""post-tag"" title=""show questions tagged &#39;c++&#39;"" rel=""tag"">c++</a>. I am also <a href=""http://stackoverflow.com/help/badges/146/legendary?userid=2069064"">somewhat obsessed</a> with SO. </p>

<hr />

<p>Users I subscribe to, in no particular order: <a href=""http://stackoverflow.com/users/981959/jonathan-wakely"">Jonathan Wakely</a>, <a href=""http://stackoverflow.com/users/2756719/t-c"">T.C.</a>, <a href=""http://stackoverflow.com/users/3647361/columbo"">Columbo</a>, <a href=""http://stackoverflow.com/users/1774667/yakk"">Yakk</a>, <a href=""http://stackoverflow.com/users/420683/dyp"">dyp</a> </p>

<hr />

<p>Various badge milestones:</p>

<ul>
<li>1st to receive the <a href=""https://stackoverflow.com/help/badges/7680/c17"">gold C++17 badge</a></li>
<li>2nd to receive the <a href=""https://stackoverflow.com/help/badges/6490/language-lawyer"">gold language-lawyer badge</a></li>
<li>2nd to receive the <a href=""https://stackoverflow.com/help/badges/6151/c14"">gold C++14 badge</a></li>
<li>4th to receive the <a href=""http://stackoverflow.com/help/badges/4967/c14"">silver C++14 badge</a></li>
<li>8th to receive the <a href=""http://stackoverflow.com/help/badges/751/templates"">gold templates badge</a></li>
<li>11th to receive the <a href=""http://stackoverflow.com/help/badges/4272/c14"">bronze C++14 badge</a></li>
<li>29th to receive the <a href=""http://stackoverflow.com/help/badges/1904/c11"">gold C++11 badge</a></li>
<li>31st to receive the <a href=""http://stackoverflow.com/help/badges/109/templates"">silver templates badge</a></li>
<li>256th to receive the <a href=""http://stackoverflow.com/help/badges/49/c"">gold C++ badge</a>, or 0x0100th if you prefer</li>
</ul>
","12714","5392","2419","https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1","","2362723"
"54617101","1","54618056","","2019-02-10 13:55:55","","18","698","<p>I have (re?)invented this approach to zero-cost properties with data member syntax. By this I mean that the user can write:</p>

<pre><code>some_struct.some_member = var;
var = some_struct.some_member;
</code></pre>

<p>and these member accesses redirect to member functions with zero overhead.</p>

<p>While initial tests show that the approach does work in practice, I'm far from sure that it is free from undefined behaviour. Here's the simplified code that illustrates the approach:</p>

<pre><code>template &lt;class Owner, class Type, Type&amp; (Owner::*accessor)()&gt;
struct property {
    operator Type&amp;() {
        Owner* optr = reinterpret_cast&lt;Owner*&gt;(this);
        return (optr-&gt;*accessor)();
    }
    Type&amp; operator= (const Type&amp; t) {
        Owner* optr = reinterpret_cast&lt;Owner*&gt;(this);
        return (optr-&gt;*accessor)() = t;
    }
};

union Point
{
    int&amp; get_x() { return xy[0]; }
    int&amp; get_y() { return xy[1]; }
    std::array&lt;int, 2&gt; xy;
    property&lt;Point, int, &amp;Point::get_x&gt; x;
    property&lt;Point, int, &amp;Point::get_y&gt; y;
};
</code></pre>

<p>The test driver demonstrates that the approach works and it is indeed zero-cost (properties occupy no additional memory):</p>

<pre><code>int main()
{
    Point m;
    m.x = 42;
    m.y = -1;

    std::cout &lt;&lt; m.xy[0] &lt;&lt; "" "" &lt;&lt; m.xy[1] &lt;&lt; ""\n"";
    std::cout &lt;&lt; sizeof(m) &lt;&lt; "" "" &lt;&lt; sizeof(m.x) &lt;&lt; ""\n"";
}
</code></pre>

<p>Real code is a bit more complicated but the gist of the approach is here. It is based on using a union of real data (<code>xy</code> in this example) and empty property objects. (Real data must be a standard layout class for this to work).</p>

<p>The union is needed because otherwise properties needlessly occupy memory, despite being empty.</p>

<p>Why do I think there's no UB here? The standard permits accessing the common initial sequence of standard-layout union members. Here, the common initial sequence is empty. Data members of <code>x</code> and <code>y</code> are not accessed at all, as there are no data members. My reading of the standard indicate that this is allowed. <code>reinterpret_cast</code> should be OK because we are casting a union member to its containing union, and these are pointer-interconvertible.</p>

<p>Is this indeed allowed by the standard, or I'm missing some UB here?</p>
","775806","","","","","2019-02-10 16:07:18","Zero-cost properties with data member syntax","<c++><language-lawyer><union><undefined-behavior>","2","12","3","","","775806","86062","2011-05-30 06:13:44","n. 'pronouns' m.","2020-03-14 21:43:06","","","","12593","3968","432","https://i.stack.imgur.com/XNd2C.png?s=128&g=1","","406349"
"56615513","1","56994211","","2019-06-16 01:56:09","","18","3317","<p>Under iOS 13, if you setup a scrollable root view controller (such as a UITableViewController) in a navigation controller and then put that navigation controller in the detail pane of a UISplitViewController, then the nav bar's background isn't visible when the scrollable content is at the top.</p>

<p>You can see this by creating a new iOS project based on the Master/Detail template. Then modify the storyboard to use a UITableViewController inside the detail pane's nav controller. Put the device/simulator in Light Appearance mode (it shows the problem better than Dark mode). Run the app and notice the nav bar area is the same color as the table view background. Now scroll the table view up and the nav bar color changes to the standard light gray. Let the table view return to the top and the nav bar color disappears again.</p>

<p>I've only seen this in the detail pane of a split view controller.</p>

<p>How do you turn off this ""feature"" so that the nav bar looks normal just like every other nav bar used anywhere else other than the detail pane of a split view controller?</p>

<p>There are no relevant API changes for <code>UISplitViewController</code> or <code>UISplitViewControllerDelegate</code>. There's nothing in <code>UINavigationController</code> either.</p>

<p>After some digging I found one workaround but I'd love to find a way to avoid having to do this.</p>

<p>The <code>UINavigationBar</code> class now has some new properties for setting its appearance. Oddly, none of these are mentioned under the ""Customizing the Appearance of a Navigation Bar"" in the documentation for <code>UINavigationBar</code>.</p>

<p>There are three new properties in iOS 13:</p>

<ul>
<li><code>standardAppearance</code></li>
<li><code>compactAppearance</code></li>
<li><code>scrollEdgeAppearance</code></li>
</ul>

<p>All three are of type <code>UINavigationBarAppearance</code>.</p>

<p>Only the first one is set by default.</p>

<p>Even though <code>scrollEdgeAppearance</code> is <code>nil</code>, the detail pane of a split controller acts as if this has been set with the <code>backgroundColor</code> set to the <code>clear</code> color.</p>

<p>So the workaround is to add the following line to the <code>viewDidLoad</code> method of the navigation controller's root view controller:</p>

<pre><code>navigationController?.navigationBar.scrollEdgeAppearance = navigationController?.navigationBar.standardAppearance
</code></pre>

<p>Why is this needed only in this one case? Is there a more correct solution other than adding this code?</p>

<p>I noticed that none of Apple's apps (Mail, Notes, and Files at least) seem to use this ""feature"".</p>
","1226963","","","","","2019-08-10 02:23:50","New UINavigationBar appearance in detail pane of UISplitViewController in iOS 13","<ios><uinavigationbar><uisplitviewcontroller><ios13>","1","3","4","","","1226963","276683","2012-02-22 21:58:04","rmaddy","2020-02-10 06:36:19","http://www.maddysoft.com/iphone/","","<p>I am an independent iOS app developer producing and selling my own apps. I started with BASIC in 1979 playing with TRS Model I computers at Radio Shack stores. We sure had a lot of fun with 4k of RAM.</p>
","57909","2865","29801","https://i.stack.imgur.com/yjY1E.png","","1270581"
"54602662","1","54607078","","2019-02-09 02:42:24","","17","1316","<p>In my mind, these situations are all parallel:</p>

<ul>
<li><p>My view controller presented another view controller fullscreen, which has now been dismissed</p></li>
<li><p>My view controller presented another view controller not fullscreen, which has now been dismissed</p></li>
<li><p>My view controller presented a popover, which has now been dismissed</p></li>
<li><p>My view controller pushed another view controller, which has now been popped</p></li>
</ul>

<p>In every case, my view controller ceased to be the ""frontmost"" view controller, and then became ""frontmost"" again. I find it curious that iOS has no single blanket ""became frontmost"" event sent to my view controller that covers all these situations. </p>

<p>I think I can cover each of those cases <em>individually</em>, and I think those are all the cases I need to cover, but the resulting code is confusing and scattered:</p>

<ul>
<li><p><code>viewDidAppear</code> detects popping of a pushed view controller and dismissal of a fullscreen presented view controller</p></li>
<li><p>popover delegate message detect dismissal of a popover</p></li>
<li><p>not sure what detects dismissal of a nonfullscreen presented view controller</p></li>
</ul>

<p>How do people handle this coherently and elegantly?</p>
","341994","","341994","","2019-02-10 21:48:34","2019-10-09 12:31:15","Unified UIViewController ""became frontmost"" detection?","<ios><cocoa-touch><uiviewcontroller>","1","0","2","","","341994","385754","2010-05-15 16:05:56","matt","2020-03-15 04:32:30","http://www.apeth.net/matt/default.html","","<p>Author most recently of <a href=""https://learning.oreilly.com/library/view/ios-13-programming/9781492074526/"" rel=""nofollow noreferrer"">iOS 13 Programming Fundamentals with Swift</a> and of <a href=""https://learning.oreilly.com/library/view/programming-ios-13/9781492074601/"" rel=""nofollow noreferrer"">Programming iOS 13</a>.</p>

<p>Code examples from the books available at <a href=""https://github.com/mattneub/Programming-iOS-Book-Examples"" rel=""nofollow noreferrer"">my github repository</a>.</p>

<p>A much earlier edition, <em>Programming iOS 6</em>, is available to read for free at <a href=""http://www.apeth.com/iOSBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/iOSBook/</a>.</p>

<p>And the Swift language chapters of <em>iOS 10 Programming Fundamentals With Swift</em> are available at <a href=""http://www.apeth.com/swiftBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/swiftBook/</a>.</p>
","50925","2318","21240","","","137658"
"57530882","1","","","2019-08-16 20:43:13","","17","1714","<p>A leap year bug is a code defect that creates a problematic, unintended outcome when executed within the context of a <a href=""https://en.wikipedia.org/wiki/Leap_year"" rel=""noreferrer"">leap year</a>, typically within the proleptic Gregorian calendar system.</p>

<p>The last leap year was 2016.  The next leap years are 2020 and 2024.</p>

<p>There are two attributes that are unique to leap years:</p>

<ul>
<li>Leap years have a February 29th, while common years do not.</li>
<li>Leap years have 366 days in total, while common years have only 365.</li>
</ul>

<p>This post is intended to help others understand the nature of leap year bugs, what they look like in various languages, and how to correct them.</p>

<p>Leap year bugs typically fall into two impact categories:</p>

<ul>
<li><strong>Category 1</strong>: Those that lead to error conditions, such as exceptions, error return codes, uninitialized variables, or endless loops</li>
<li><strong>Category 2</strong>: Those that lead to incorrect data, such as off-by-one problems in range queries or aggregation</li>
</ul>

<p>With each answer, please indicate the programming language and/or platform, as well as the impact category as defined above.  (Follow the template used by existing answers please.)</p>

<p>Please create one separate answer per language and type of defect, and vote for your favorite, especially those you have personally encountered (leaving comments with anecdotes where possible).</p>

<p><em>I will seed a few answers to get started, and update with additional examples over time.</em></p>
","634824","","634824","","2019-08-16 20:57:27","2020-03-02 15:18:30","What are some examples of leap year bugs?","<date><datetime><anti-patterns><leap-year>","6","0","6","","","634824","169343","2011-02-25 20:27:48","Matt Johnson-Pint","2020-03-14 19:46:06","http://codeofmatt.com/","Redmond, WA","<p>(n√© Matt Johnson.  He/him, <em>not dude/bro</em>.)</p>

<p>Hi!  I am primarily a .NET C# developer, and I also do a lot of work in JavaScript.  I specialize in date and time issues, especially the tricky ones involving time zones.</p>

<p>I work for Microsoft in Redmond, Washington, USA.  All questions, answers, comments and code are from me personally, and in no way represent the opinions of my employer.</p>
","12586","6456","1246","https://i.stack.imgur.com/WOyz5.jpg?s=128&g=1","","317896"
"58427394","1","58429103","","2019-10-17 07:42:12","","17","339","<p>In newly released Python 3.8 there is a new type annotation <a href=""https://docs.python.org/3.8/library/typing.html#typing.TypedDict"" rel=""noreferrer""><code>typing.TypedDict</code></a>. Its documentation mentions that</p>

<blockquote>
  <p>The type info for introspection can be accessed via <code>Point2D.__annotations__</code> and <code>Point2D.__total__</code>. [....]</p>
</blockquote>

<p>While <code>__annotations__</code> is well-known, having been introduced in <a href=""https://www.python.org/dev/peps/pep-3107/"" rel=""noreferrer"">PEP 3107</a>, I cannot find any information on <code>__total__</code>. Could anyone explain its meaning and if possible linking to authoritative sources?</p>
","918959","","","","","2019-10-29 19:42:07","What is the meaning of __total__ dunder attribute in Python 3?","<python><python-3.x><python-typing>","2","1","","","","918959","101148","2011-08-30 04:12:50","Antti Haapala","2020-03-14 09:37:49","http://www.anttipatterns.com","Oulu, Finland","<p>Preferred pronouns <a href=""http://www.montypython.net/scripts/petshop.php"" rel=""nofollow noreferrer"">'e/'im/'is/'imself</a>, but you can use whatever you want.</p>

<p>Master of Science in Industrial Engineering and Management who has worked in various software projects over a decade. Has worked as a software engineer for both multinational corporations and small private companies. A self-proclaimed guru, has gained a good understanding of various aspects and levels of software engineering, project management, SW product development and leadership tasks.</p>

<p>Special expertise in operating system kernels and system-level simulations, social networking sites, MS-DOS games, multi-user games, GUIs, 3D sound, Cloud Computing.</p>

<p>Project skills: CSPO, CSM. And I truly claim to know what it is all about.</p>

<p>Specialties: Programming languages. Expert in C, C++, Java, Pascal, Basic, Perl5, Python, PHP, LPC, JS/ES+AS, CoffeeScript, x86, ARMv6 and 6502 asm. Basic knowledge attained in Scheme, CL, Ruby, Forth, Prolog, C#, Perl6, Erlang, Haskell, Objective-C. That is to say, I played with them but I never did anything useful in these languages.</p>

<p>Tech: Linux, Posix, Win32/64+DX, DOS+DPMI, Nucleus RTOS, OpenGL, SDL, Qt, MFC, SWT, XVT, Swing, Eclipse plugins + OSGI, Apache, Tomcat, Nginx, Varnish, OpenLDAP, PgSQL, MySQL, MongoDB, WSGI, Turbogears, Pylons, Pyramid, Django, Spring, J2ME, J2SE, J2EE, Red5, OpenLaszlo, Flash, XML+XPath+XSLT, OpenID, OAuth + Social Media Integrations, Symbian, PayPal, AWS: EC2, S3, ELB, CF, R53 to name some.</p>
","19428","5337","13522","","","556766"
"56936336","1","","","2019-07-08 13:47:19","","17","460","<p>I want to build a server using Node.js, which acts as some kind of proxy. The clients that connect to my server use NTLMv2 for authentication (there is no chance to change this), but the upstream server my server shall connect to requires a Kerberos token.</p>

<p>So, my question is pretty simple: How do I, using Node.js, transform the information provided by NTLMv2 into a Kerberos token? On npm, so far I have found modules for NTLMv2 authentication, but I somehow would probably need to talk to Windows to translate NTLMv2 data of a user into a token for this user.</p>

<p>Any hints on this, how to approach this problem?</p>
","1333873","","","","","2019-07-19 12:45:12","How to transform NTLM credentials to Kerberos token in Node.js","<node.js><kerberos><ntlm><ntlm-authentication><ntlmv2>","2","2","","","","1333873","93986","2012-04-14 22:48:22","Golo Roden","2020-03-14 21:38:24","http://www.thenativeweb.io","Riegel am Kaiserstuhl, Germany","<p>founder and cto <a href=""http://www.thenativeweb.io"" rel=""nofollow noreferrer"">@thenativeweb</a>. loves javascript, node.js, lisp, apples and raspberries. favors unix and the shell. spreads knowledge. mvp. he/him.</p>
","4211","3024","2611","","","1406232"
"56555709","1","56555883","","2019-06-12 06:15:00","","17","1389","<p>I am trying to use <code>environmentObject</code> in a watchOS6 app to bind my data model to my view.</p>

<p>I have created a simple, stand-alone Watch app in Xcode 11.</p>

<p>I created a new <code>DataModel</code> class</p>

<pre><code>import Combine
import Foundation
import SwiftUI

final class DataModel: BindableObject {

    let didChange = PassthroughSubject&lt;DataModel,Never&gt;()

    var aString: String = """" {
        didSet {
            didChange.send(self)
        }
    }

}
</code></pre>

<p>In my <code>ContentView</code> struct I bind this class using <code>@EnvironmentObject</code> - </p>

<pre><code>struct ContentView : View {

    @EnvironmentObject private var dataModel: DataModel

    var body: some View {
        Text($dataModel.aString.value)
    }
}
</code></pre>

<p>Finally, I attempt to inject an instance of the <code>DataModel</code> into the environment in the <code>HostingController</code> class -</p>

<pre><code>class HostingController : WKHostingController&lt;ContentView&gt; {
    override var body: ContentView {
        return ContentView().environmentObject(DataModel())
    }
}
</code></pre>

<p>But, I get an error:</p>

<pre><code>Cannot convert return expression of type '_ModifiedContent&lt;ContentView, _EnvironmentKeyWritingModifier&lt;DataModel?&gt;&gt;' to return type 'ContentView'
</code></pre>

<p>The error is because the <code>WKHostingController</code> is a generic that needs a concrete type - <code>WKHostingController&lt;ContentView&gt;</code> in this case.  </p>

<p>A similar approach works perfectly with <code>UIHostingController</code> in an iOS app because <code>UIHostingController</code> isn't a generic class.</p>

<p>Is there some other way to inject the environment to a watchOS view?</p>
","3418066","","","","","2019-09-14 22:36:00","Using environmentObject in watchOS","<swift><apple-watch><watchos><swiftui><watchos-6>","2","0","4","","","3418066","80705","2014-03-14 01:25:07","Paulw11","2020-03-15 04:27:14","http://wilko.me","Australia","<p>Long-time programmer from Z-80 through to iOS.  Current day job is an IT consultant in enterprise mobility and activity-based-working.</p>
","11157","1340","2088","https://i.stack.imgur.com/De72L.jpg?s=128&g=1","","2441570"
"56663624","1","","","2019-06-19 08:47:39","","17","976","<h2>Background</h2>

<p>Google (sadly) <a href=""https://www.xda-developers.com/android-q-storage-access-framework-scoped-storage/"" rel=""noreferrer""><strong>plans to ruin storage permission</strong></a> so that apps won't be able to access the file system using the standard File API (and file-paths). Many are <a href=""https://issuetracker.google.com/issues/128591846"" rel=""noreferrer""><strong>against it</strong></a> as it changes the way apps can access the storage and in many ways it's a restricted and limited API.</p>

<p>As a result, we will need to use SAF (storage access framework) entirely on some future Android version (on Android Q we can, at least temporarily, <a href=""https://developer.android.com/preview/privacy/scoped-storage"" rel=""noreferrer""><strong>use a flag</strong></a> to use the normal storage permission), if we wish to deal with various storage volumes and reach all files there.</p>

<p>So, for example, suppose you want to make a file manager and show all the storage volumes of the device, and show for each of them how many total and free bytes there are. Such a thing seems very legitimate, but as I can't find a way to do such a thing.</p>

<h2>The problem</h2>

<p>Starting from API 24 (<a href=""https://developer.android.com/reference/android/os/storage/StorageManager#getStorageVolumes()"" rel=""noreferrer""><strong>here</strong></a>), we finally have the ability to list all of the storage volumes, as such:</p>

<pre><code>    val storageManager = getSystemService(Context.STORAGE_SERVICE) as StorageManager
    val storageVolumes = storageManager.storageVolumes
</code></pre>

<p>Thing is, there is no function for each of the items on this list to get its size and free space.</p>

<p>However, somehow, Google's <a href=""https://play.google.com/store/apps/details?id=com.google.android.apps.nbu.files&amp;hl=en"" rel=""noreferrer""><strong>""Files by Google""</strong></a> app manages to get this information without any kind of permission being granted :</p>

<p><a href=""https://i.stack.imgur.com/14Ar8.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/14Ar8.png"" alt=""enter image description here""></a></p>

<p>And this was tested on Galaxy Note 8 with Android 8. Not even the latest version of Android.</p>

<p>So this means there should be a way to get this information without any permission, even on Android 8.</p>

<h2>What I've found</h2>

<p>There is something similar to getting free-space, but I'm not sure if it's indeed that. It seems as such, though. Here's the code for it:</p>

<pre><code>    val storageManager = getSystemService(Context.STORAGE_SERVICE) as StorageManager
    val storageVolumes = storageManager.storageVolumes
    AsyncTask.execute {
        for (storageVolume in storageVolumes) {
            val uuid: UUID = storageVolume.uuid?.let { UUID.fromString(it) } ?: StorageManager.UUID_DEFAULT
            val allocatableBytes = storageManager.getAllocatableBytes(uuid)
            Log.d(""AppLog"", ""allocatableBytes:${android.text.format.Formatter.formatShortFileSize(this,allocatableBytes)}"")
        }
    }
</code></pre>

<p>However, I can't find something similar for getting the total space of each of the StorageVolume instances. Assuming I'm correct on this, I've requested it <a href=""https://issuetracker.google.com/issues/135546747"" rel=""noreferrer""><strong>here</strong></a>.</p>

<p>You can find more of what I've found in the answer I wrote to this question, but currently it's all a mix of workarounds and things that aren't workarounds but work in some cases.</p>

<h2>The questions</h2>

<ol>
<li>Is <code>getAllocatableBytes</code> indeed the way to get the free space?</li>
<li>How can I get the free and real total space (in some cases I got lower values for some reason) of each StorageVolume, without requesting any permission, just like on Google's app?</li>
</ol>
","878126","","878126","","2019-07-10 20:38:59","2019-07-22 14:54:40","How to get free and total size of each StorageVolume?","<android><storage-access-framework>","3","13","4","","","878126","98917","2011-08-04 08:05:33","android developer","2020-03-15 00:36:55","","Israel","<p>Really like to develop Android apps &amp; libraries on my spare time.</p>

<p>Github website:
<a href=""https://github.com/AndroidDeveloperLB/"" rel=""nofollow noreferrer"">https://github.com/AndroidDeveloperLB/</a> </p>

<p>My spare time apps:
<a href=""https://play.google.com/store/apps/developer?id=AndroidDeveloperLB"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/developer?id=AndroidDeveloperLB</a></p>
","44922","888","41","https://i.stack.imgur.com/D5dZW.jpg","","796053"
"55402733","1","","","2019-03-28 16:35:54","","16","355","<p>This was prompted by <a href=""https://stackoverflow.com/questions/55388119/resolving-the-type-of-f-f-pure/55388309?noredirect=1#comment97525285_55388309"">Resolving the type of `f = f (&lt;*&gt;) pure`</a>, which discusses a more complicated example, but this one works too.</p>

<p>The following definition compiles without problem:</p>

<pre><code>w :: Integral a =&gt; a
w = fromInteger w
</code></pre>

<p>...Of course it doesn't <em>work</em> runtime-wise, but that's beside the question. The point is that the definition of <code>w</code> itself uses <em>a specialised version</em> of <code>w :: Integer</code>. Clearly that <em>is</em> a suitable instantiation, and therefore typechecks.</p>

<p>However, if we remove the signature, then GHC infers not the above type, but only the concrete one:</p>

<pre><code>w' = fromInteger w'
</code></pre>

<pre><code>GHCi> :t w
w :: Integral a => a
GHCi> :t w'
w' :: Integer
</code></pre>

<p>Well, when I saw this, I was fairly sure this was the monomorphism restriction at work. It's well known that also e.g.</p>

<pre><code>i = 3
</code></pre>

<pre><code>GHCi> :t i
i :: Integer
</code></pre>

<p>although <code>i :: Num p =&gt; p</code> would be perfectly possible. And indeed, <code>i :: Num p =&gt; p</code> <em>is</em> inferred if <code>-XNoMonomorphismRestriction</code> is active, i.e. if the monomorphism restriction is disabled.</p>

<p>However, in case of <code>w'</code> only the type <code>Integer</code> is inferred even when the monomorphism restriction <em>is</em> disabled.</p>

<p>To count out that this has something to do with defaulting:</p>

<pre><code>fromFloat :: RealFrac a =&gt; Float -&gt; a
q :: RealFrac a =&gt; a
q = fromFloat q
q' = fromFloat q'
</code></pre>

<pre><code>GHCi> :t q
q :: RealFrac a => a
GHCi> :t q'
q' :: Float</code></pre>

<p>Why is the polymorphic type not inferred?</p>
","745903","","745903","","2019-03-28 19:26:44","2019-03-28 22:02:17","Why does GHC infer a monomorphic type here, even with MonomorphismRestriction disabled?","<haskell><recursion><type-inference><parametric-polymorphism>","1","4","2","","","745903","89543","2011-05-09 22:13:30","leftaroundabout","2020-03-14 23:45:15","","Bergen, Norway","<p>Currently a PhD research fellow in maths and CS at H√∏gskulen p√• Vestlanded. In the past I have worked as a musician, as a programmer on magnetohydrodynamics number-crunchers, and studied geophysics.</p>
","7090","6612","126","","","387513"
"59054707","1","","","2019-11-26 15:53:07","","16","518","<p>According to C++17 [basic.compound]/3:</p>

<blockquote>
  <p>Every value of pointer type is one of the following:</p>
  
  <ul>
  <li>a pointer to an object or function (the pointer is said to point to the object or function), or</li>
  <li>a pointer past the end of an object (8.7), or</li>
  <li>the null pointer value (7.11) for that type, or</li>
  <li>an invalid pointer value.</li>
  </ul>
</blockquote>

<p>The <code>malloc</code> function returns a pointer value. Let us assume the call succeeded, so that the return value is not null. The specification of <code>malloc</code> ([c.malloc]) does not state that it creates any objects in the returned storage, so it seems like ""invalid pointer value"" is the least nonsensical category.</p>
","481267","","963864","","2019-11-26 21:49:15","2019-11-26 21:49:15","Does malloc return an ""invalid pointer value"" in C++17?","<c++><pointers><language-lawyer><c++17><object-lifetime>","2","12","1","2019-11-27 15:16:23","","481267","82364","2010-10-20 04:59:07","Brian","2020-03-14 23:55:30","http://brianbi.ca","New York, NY, USA","<p>C++ programmer on the Low Latency team at Citadel Securities. Opinions are mine and not those of my employer. I can be reached by email at bbi5291@gmail.com, but I can't promise that I'll reply.</p>
","16280","1795","923","https://i.stack.imgur.com/DMvoo.png?s=128&g=1","","222578"
"58340585","1","","","2019-10-11 11:43:49","","16","183","<p>Ruby has a universal idea of ""<em>truthiness</em>"" and ""<em>falsiness</em>"".</p>

<p>Ruby <em>does</em> have two specific classes for Boolean objects, <a href=""https://ruby-doc.org/core/TrueClass.html"" rel=""noreferrer""><code>TrueClass</code></a> and <a href=""https://ruby-doc.org/core/FalseClass.html"" rel=""noreferrer""><code>FalseClass</code></a>, with singleton instances denoted by the special variables <code>true</code> and <code>false</code>, respectively.</p>

<p>However, <em>truthiness</em> and <em>falsiness</em> are not limited to instances of those two classes, the concept is <em>universal</em> and applies to every single object in Ruby. Every object is either <em>truthy</em> or <em>falsy</em>. The rules are very simple. In particular, <em>only two objects are falsy</em>:</p>

<ul>
<li><code>nil</code>, the singleton instance of <a href=""https://ruby-doc.org/core/NilClass.html"" rel=""noreferrer""><code>NilClass</code></a> and </li>
<li><code>false</code>, the singleton instance of <a href=""https://ruby-doc.org/core/FalseClass.html"" rel=""noreferrer""><code>FalseClass</code></a></li>
</ul>

<p><em>Every single other object</em> is <em>truthy</em>. This includes even objects that are considered <em>falsy</em> in other programming languages, such as </p>

<ul>
<li>the <a href=""https://ruby-doc.org/core/Integer.html"" rel=""noreferrer""><code>Integer</code></a> <code>0</code>, </li>
<li>the <a href=""https://ruby-doc.org/core/Float.html"" rel=""noreferrer""><code>Float</code></a> <code>0.0</code>, </li>
<li>the empty <a href=""https://ruby-doc.org/core/String.html"" rel=""noreferrer""><code>String</code></a> <code>''</code>, </li>
<li>the empty <a href=""https://ruby-doc.org/core/Array.html"" rel=""noreferrer""><code>Array</code></a> <code>[]</code>, </li>
<li>the empty <a href=""https://ruby-doc.org/core/Hash.html"" rel=""noreferrer""><code>Hash</code></a> <code>{}</code>, </li>
</ul>

<p>These rules are built into the language and are not user-definable. There is no <code>to_bool</code> implicit conversion or anything similar.</p>

<p>Here is a quote from the <a href=""https://iso.org/standard/59579.html"" rel=""noreferrer""><em>ISO Ruby Language Specification</em></a>:</p>

<blockquote>
  <h1>6.6 Boolean values</h1>
  
  <p>An object is classified into either a <strong><em>trueish object</em></strong> or a <strong><em>falseish object</em></strong>.</p>
  
  <p>Only <strong>false</strong> and <strong>nil</strong> are falseish objects. <strong>false</strong> is the only instance of the class <code>FalseClass</code> (see 15.2.6), to which a <em>false-expression</em> evaluates (see 11.5.4.8.3). <strong>nil</strong> is the only instance of the class <code>NilClass</code> (see 15.2.4), to which a <em>nil-expression evaluates</em> (see 11.5.4.8.2).</p>
  
  <p>Objects other than <strong>false</strong> and <strong>nil</strong> are classified into trueish objects. <strong>true</strong> is the only instance of the class <code>TrueClass</code> (see 15.2.5), to which a <em>true-expression</em> evaluates (see 11.5.4.8.3).</p>
</blockquote>

<p><a href=""https://github.com/ruby/spec/blob/master/language/if_spec.rb#L134-L140"" rel=""noreferrer"">The executable Ruby/Spec seems to agree</a>:</p>

<blockquote>
  <pre class=""lang-rb prettyprint-override""><code>it ""considers a non-nil and non-boolean object in expression result as true"" do
  if mock('x')
    123
  else
    456
  end.should == 123
end
</code></pre>
</blockquote>

<p>According to those two sources, I would assume that <a href=""https://ruby-doc.org/core/Regexp.html"" rel=""noreferrer""><code>Regexp</code></a>s are also <em>truthy</em>, but according to my tests, they aren't:</p>

<pre class=""lang-rb prettyprint-override""><code>if // then 'Regexps are truthy' else 'Regexps are falsy' end
#=&gt; 'Regexps are falsy'
</code></pre>

<p>I tested this on <a href=""http://atdot.net/yarv/"" rel=""noreferrer"">YARV 2.7.0-preview1</a>, <a href=""https://GitHub.Com/Oracle/TruffleRuby"" rel=""noreferrer"">TruffleRuby 19.2.0.1</a>, and <a href=""http://JRuby.Org/"" rel=""noreferrer"">JRuby 9.2.8.0</a>. All three implementations agree with each other and disagree with the ISO Ruby Language Specification and my interpretation of the Ruby/Spec.</p>

<p>More precisely, <code>Regexp</code> objects that are the result of evaluating <code>Regexp</code> <em>literals</em> are <em>falsy</em>, whereas <code>Regexp</code> objects that are the result of some other expression are <em>truthy</em>:</p>

<pre class=""lang-rb prettyprint-override""><code>r = //
if r then 'Regexps are truthy' else 'Regexps are falsy' end
#=&gt; 'Regexps are truthy'
</code></pre>

<p>Is this a bug, or desired behavior?</p>
","2988","","2988","","2019-10-11 11:50:12","2019-10-15 14:04:51","Why is a Regexp object considered to be ""falsy"" in Ruby?","<regex><ruby><boolean><jruby><yarv>","2","7","3","","","2988","312767","2008-08-26 10:27:55","J√∂rg W Mittag","2020-03-14 21:55:53","http://StackOverflow.Com/users/2988/","Karlsruhe, Germany","<p>Not a software developer in the sense that I write software as part of my job or otherwise get paid to do so. Also, not a developer in the sense that I write software for others.</p>

<p>I write software for myself, often for no other reason than that I want to. (What I call <a href=""http://Intertwingly.Net/blog/2006/03/11/Recreational-Programming/"" rel=""nofollow noreferrer"">recreational programming</a>.)</p>

<p>Actually, I‚Äôm currently forcibly confined to recreational programming, as I‚Äôm looking for a job.</p>

<p>My current go-to language is <a href=""http://Ruby-Lang.Org/"" rel=""nofollow noreferrer"">Ruby</a>, but I‚Äôm interested in all sorts of other languages as well: <a href=""http://NewspeakLanguage.Org/"" rel=""nofollow noreferrer"">Newspeak</a>, <a href=""http://Seph-Lang.Org/"" rel=""nofollow noreferrer"">Seph</a>, <a href=""http://Ioke.Org/"" rel=""nofollow noreferrer"">Ioke</a>, <a href=""http://SelfLanguage.Org/"" rel=""nofollow noreferrer"">Self</a>, <a href=""http://IoLanguage.Com/"" rel=""nofollow noreferrer"">Io</a>, <a href=""http://SlateLanguage.Org/"" rel=""nofollow noreferrer"">Slate</a>, <a href=""http://Reia-Lang.Org/"" rel=""nofollow noreferrer"">Reia</a>, <a href=""http://Cobra-Language.Com/"" rel=""nofollow noreferrer"">Cobra</a>, <a href=""http://ProjectFortress.Java.Net/"" rel=""nofollow noreferrer"">Fortress</a>, <a href=""http://SapphireSteel.Com/The-Sapphire-Programming-Language/"" rel=""nofollow noreferrer"">Sapphire</a>, <a href=""http://Haskell.Org/"" rel=""nofollow noreferrer"">Haskell</a>, <a href=""http://Scala-Lang.Org/"" rel=""nofollow noreferrer"">Scala</a>, <a href=""http://Clojure.Org/"" rel=""nofollow noreferrer"">Clojure</a>, <a href=""http://Racket-Lang.Org/"" rel=""nofollow noreferrer"">Racket</a>, <a href=""http://GoLang.Org/"" rel=""nofollow noreferrer"">Go</a>, <a href=""http://Fancy-Lang.Org/"" rel=""nofollow noreferrer"">Fancy</a>, <a href=""http://Po.isono.us/"" rel=""nofollow noreferrer"">Poison</a>, and many more.</p>
","30150","1157","14962","","","2172"
"56782788","1","56938333","","2019-06-27 01:30:02","","16","2347","<p>The <a href=""https://api.flutter.dev/flutter/dart-ui/TextDirection-class.html"" rel=""noreferrer"">TextDirection</a> docs say:</p>

<blockquote>
  <p>Flutter is designed to address the needs of applications written in
  any of the world's currently-used languages, whether they use a
  right-to-left or left-to-right writing direction. <strong>Flutter does not
  support other writing modes, such as vertical text</strong> or boustrophedon
  text, as these are rarely used in computer programs. <em>(emphasis added)</em></p>
</blockquote>

<p>Not only does Flutter not support vertical text, it won't be officially supported in the future. This was an early design decision (see <a href=""https://github.com/flutter/flutter/issues/15710#issuecomment-470418200"" rel=""noreferrer"">here</a> and <a href=""https://github.com/flutter/flutter/issues/14262"" rel=""noreferrer"">here</a>). </p>

<p>Even so, there is a real use for vertical script support today. In addition to certain <a href=""https://github.com/flutter/flutter/issues/15710#issuecomment-376071744"" rel=""noreferrer"">Chinese and Japanese</a> uses, the <a href=""https://en.wikipedia.org/wiki/Mongolian_script"" rel=""noreferrer"">traditional Mongolian script</a> requires it. This script is very commonly used in computer programs in Inner Mongolia (<a href=""http://mongol-bichig.top/"" rel=""noreferrer"">example</a>, <a href=""http://bainu.com/"" rel=""noreferrer"">example</a>, <a href=""http://www.menksoft.com/site/alias__menkcms/2824/Default.aspx"" rel=""noreferrer"">example</a>, <a href=""https://play.google.com/store/apps/details?id=net.studymongolian.chimee"" rel=""noreferrer"">example</a>, <a href=""http://www.delehi.com/mn/"" rel=""noreferrer"">example</a>, <a href=""http://mgl.olool.com/android.php?ac=soft"" rel=""noreferrer"">example</a>). </p>

<p>It is written top to bottom, and lines wrap left to right:</p>

<p><a href=""https://i.stack.imgur.com/vegbv.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/vegbv.png"" alt=""enter image description here""></a></p>

<p>Additionally, emoji and CJK characters retain the their orientation when displayed vertically (not absolutely necessary, but preferred). In the image below, the top paragraph shows the current implementation and the bottom paragraph shows the correct vertical rendering:</p>

<p><a href=""https://i.stack.imgur.com/QQUup.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/QQUup.png"" alt=""enter image description here""></a></p>

<pre><code>// sample text
·†®·†¢·†≠·†° ·†¨·†£·†∂·††·†∑ ·†≠·†£·†∑·†™·†† ·†≥·†•·†∑·†™·†° ·†≤·††·†™·†§ ·†µ·†¢·†∑·†≠·†§·†≠·†é·†† ·†≥·†£·†Ø·†£·†≠·†é·†† ·†®·††‚Äç·†¢·†Æ·†† ·†∂·†¢·†∞·†¶ ·††·†∑·†™·†† one two three four five six seven eight nine ten üòÉüêêÊ±âÂ≠ó ÌïúÍµ≠Ïñ¥ „É¢„É≥„Ç¥„É´Ë™û English? ·†Æ·†£·†©·†≠·†£·†ØÔ∏ñ
</code></pre>

<p>Since Flutter doesn't support vertical script, it must be implemented from scratch. All of the actual text layout and painting is done in the Flutter engine with <a href=""https://github.com/flutter/engine/tree/master/third_party/txt/src/txt"" rel=""noreferrer"">LibTxt</a>, so I can't change that. </p>

<p>What would it involve to create a top to bottom vertical Text widget?</p>

<h2>Update</h2>

<p>I'm still looking for an answer. R√©mi's answer is good for single line text but doesn't work for multi-line text.</p>

<p>I'm currently researching three different possible solutions:</p>

<ul>
<li>Create a RenderObject subclass (or perhaps a <a href=""https://api.flutter.dev/flutter/rendering/RenderParagraph-class.html"" rel=""noreferrer"">RenderParagraph</a> subclass) that backs a custom StatelessWidget similar to a RichText widget.</li>
<li>Use a CustomPaint widget</li>
<li>Make a composited widget of a ListView (one row per text line), Text widgets and WidgetSpans.</li>
</ul>

<p>All of those would involve measuring the text, laying it out, and getting an list of lines. </p>

<h2>Another update</h2>

<p>I'm currently leaning toward making a custom widget and render object that will mimic RichText and RenderParagraph. Under the hood RenderParagraph uses a TextPainter to layout and paint the text. My problem now is that TextPainter is tightly coupled to the underlying Skia LibTxt library. That is where all the actual layout and painting happens. Laying out the text in anything besides the default ltr and rtl is proving to be a big problem.</p>

<h2>Yet another update</h2>

<p>The accepted answer meets the criteria I put forth in this question. I think it will meet short term needs. I have some reservations for things like applying text style, but I will need to do more tests. Long term I may still try to do custom text layout and painting.</p>
","3681880","","3681880","","2019-07-09 00:49:59","2020-02-11 00:52:23","Vertical Text widget for Flutter","<flutter><dart><custom-widgets><mongolian-vertical-script>","5","1","6","","","3681880","281555","2014-05-28 01:38:32","Suragch","2020-03-15 01:46:08","http://www.studymongolian.net","","<p>Why are you developing for a single platform when you could be creating apps for Android, iOS, the web (and soon Linux, Mac, and Windows) with a single code base? Check out <a href=""https://flutter.dev/"" rel=""nofollow noreferrer"">Flutter</a>.</p>

<p><a href=""https://medium.com/@studymongolian/flutter-and-dart-development-articles-981be9ef7b23"" rel=""nofollow noreferrer"">My Flutter and Dart articles</a></p>
","10525","12917","73","","","4531600"
"54503331","1","","","2019-02-03 13:25:20","","16","734","<h2>Background</h2>

<p>We want to let the user choose a video from any app, and then trim a video to be of max of 5 seconds.</p>

<h2>The problem</h2>

<p>For getting a Uri to be selected, we got it working fine (solution available <a href=""https://stackoverflow.com/a/54502555/878126""><strong>here</strong></a>) . </p>

<p>As for the trimming itself, we couldn't find any good library that has permissive license, except for one called <a href=""https://github.com/titansgroup/k4l-video-trimmer"" rel=""noreferrer""><strong>""k4l-video-trimmer""</strong></a> . The library ""FFmpeg"", for example, is considered not permission as it uses GPLv3, which requires the app that uses it to also be open sourced. Besides, as I've read, it takes quite a lot (about 9MB).</p>

<p>Sadly, this library (k4l-video-trimmer) is very old and wasn't updated in years, so I had to fork it (<a href=""https://github.com/AndroidDeveloperLB/VideoTrimmer/"" rel=""noreferrer"">here</a>) in order to handle it nicely. It uses a open sourced library called <a href=""https://github.com/sannies/mp4parser"" rel=""noreferrer""><strong>""mp4parser""</strong></a> to do the trimming.</p>

<p>Problem is, this library seems to be able to handle files only, and not a <code>Uri</code> or <code>InputStream</code>, so even the sample can crash when selecting items that aren't reachable like a normal file, or even have paths that it can't handle. I know that in many cases it is possible to get a path of a file, but in many other cases, it's not, and I also know it's possible to just copy the file (<a href=""https://stackoverflow.com/a/40348871/878126""><strong>here</strong></a>), but this isn't a good solution, as the file could be large and take a lot of space even though it's already accessible.</p>

<h2>What I've tried</h2>

<p>There are 2 places that the library uses a file:</p>

<ol>
<li><p>In ""K4LVideoTrimmer"" file, in the ""setVideoURI"" function, which just gets the file size to be shown. Here the solution is quite easy, based on <a href=""https://developer.android.com/training/secure-file-sharing/retrieve-info#java"" rel=""noreferrer""><strong>Google's documentation</strong></a>:</p>

<pre><code>public void setVideoURI(final Uri videoURI) {
    mSrc = videoURI;
    if (mOriginSizeFile == 0) {
        final Cursor cursor = getContext().getContentResolver().query(videoURI, null, null, null, null);
        if (cursor != null) {
            int sizeIndex = cursor.getColumnIndex(OpenableColumns.SIZE);
            cursor.moveToFirst();
            mOriginSizeFile = cursor.getLong(sizeIndex);
            cursor.close();
            mTextSize.setText(Formatter.formatShortFileSize(getContext(), mOriginSizeFile));
        }
    }
 ...
</code></pre></li>
<li><p>In ""TrimVideoUtils"" file, in ""startTrim"" which calls ""genVideoUsingMp4Parser"" function. There, it calls the ""mp4parser"" library using :</p>

<pre><code>Movie movie = MovieCreator.build(new FileDataSourceViaHeapImpl(src.getAbsolutePath()));
</code></pre>

<p>It says that they use <code>FileDataSourceViaHeapImpl</code> (from ""mp4parser"" library) to avoid OOM on Android, so I decided to stay with it.</p>

<p>Thing is, there are 4 CTORS for it, all expect some variation of a file: File, filePath, FileChannel , FileChannel+fileName .</p></li>
</ol>

<h2>The questions</h2>

<ol>
<li>Is there a way to overcome this?</li>
</ol>

<p>Maybe implement <code>FileChannel</code> and simulate a real file, by using <code>ContentResolver</code> and <code>Uri</code> ? I guess it might be possible, even if it means re-opening the InputStream when needed...</p>

<p>In order to see what I got working, you can clone the project <a href=""https://github.com/AndroidDeveloperLB/VideoTrimmer/"" rel=""noreferrer"">here</a>. Just know that it doesn't do any trimming, as the code for it in ""K4LVideoTrimmer"" file is commented:</p>

<pre><code>//TODO handle trimming using Uri
//TrimVideoUtils.startTrim(file, getDestinationPath(), mStartPosition, mEndPosition, mOnTrimVideoListener);
</code></pre>

<ol start=""2"">
<li>Is there perhaps a better alternative to this trimming library, which is also permissive (meaning of Apache2/MIT licences , for example) ? One that don't have this issue? Or maybe even something of Android framework itself? I think <a href=""https://developer.android.com/reference/android/media/MediaMuxer"" rel=""noreferrer""><strong>MediaMuxer</strong></a> class could help (as written <a href=""https://stackoverflow.com/a/44653626/878126""><strong>here</strong></a>), but I think it might need API 26, while we need to handle API 21 and above...</li>
</ol>

<hr>

<p>EDIT:</p>

<p>I thought  I've found a solution by using a different solution for trimming itself, and wrote about it <a href=""https://stackoverflow.com/q/54573454/878126""><strong>here</strong></a>, but sadly it can't handle some input videos, while <code>mp4parser</code> library can handle them.</p>

<p>Please let me know if it's possible to modify <code>mp4parser</code> to handle such input videos even if it's from Uri and not a File (without a workaround of just copying to a video file).</p>
","878126","","878126","","2019-02-14 07:46:30","2019-02-18 07:34:35","Using mp4parser , how can I handle videos that are taken from Uri and ContentResolver?","<android><inputstream><android-contentresolver><filechannel><mp4parser>","1","2","1","","","878126","98917","2011-08-04 08:05:33","android developer","2020-03-15 00:36:55","","Israel","<p>Really like to develop Android apps &amp; libraries on my spare time.</p>

<p>Github website:
<a href=""https://github.com/AndroidDeveloperLB/"" rel=""nofollow noreferrer"">https://github.com/AndroidDeveloperLB/</a> </p>

<p>My spare time apps:
<a href=""https://play.google.com/store/apps/developer?id=AndroidDeveloperLB"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/developer?id=AndroidDeveloperLB</a></p>
","44922","888","41","https://i.stack.imgur.com/D5dZW.jpg","","796053"
"57129668","1","57131970","","2019-07-21 01:05:40","","16","10050","<p><em>This is a little long but it's not trivial and it takes a lot to demonstrate this issue.</em></p>

<p>I'm trying to figure out how to update a little sample app from iOS 12 to iOS 13. This sample app doesn't use any storyboards (other than the launch screen). It's a simple app that shows one view controller with a label that is updated by a timer. It uses state restoration so the counter starts from where it left off. I want to be able to support iOS 12 and iOS 13. In iOS 13 I want to update to the new scene architecture.</p>

<p>Under iOS 12 the app works just fine. On a fresh install the counter starts at 0 and goes up. Put the app in the background and then restart the app and the counter continues from where it left off. The state restoration all works.</p>

<p>Now I'm trying to get that working under iOS 13 using a scene. The problem I'm having is figuring out the correct way to initialize the scene's window and restore the navigation controller and the main view controller to the scene.</p>

<p>I've been through as much of the Apple documentation as I can find related to state restoration and scenes. I've watched WWDC videos related to windows and scenes (<a href=""https://developer.apple.com/videos/play/wwdc2019/258/"" rel=""noreferrer"">212 - Introducing Multiple Windows on iPad</a>, <a href=""https://developer.apple.com/videos/play/wwdc2019/258/"" rel=""noreferrer"">258 - Architecting Your App for Multiple Windows</a>). But I seem to be missing a piece that puts it all together.</p>

<p>When I run the app under iOS 13, all of the expected delegate methods (both AppDelegate and SceneDelegate) are being called. The state restoration is restoring the nav controller and the main view controller but I can't figure out how to set the <code>rootViewController</code> of the scene's window since all of the UI state restoration is in the AppDelegate.</p>

<p>There also seems to be something related to an <code>NSUserTask</code> that should be used but I can't connect the dots.</p>

<p><strong>The missing pieces seem to be in the <code>willConnectTo</code> method of <code>SceneDelegate</code>. I'm sure I also need some changes in <code>stateRestorationActivity</code> of <code>SceneDelegate</code>. There may also need to be changes in the <code>AppDelegate</code>. I doubt anything in <code>ViewController</code> needs to be changed.</strong></p>

<hr>

<p>To replicate what I'm doing, create a new iOS project with Xcode 11 (beta 4 at the moment) using the Single View App template. Set the Deployment Target to iOS 11 or 12.</p>

<p>Delete the main storyboard. Remove the two references in the Info.plist to Main (one at the top level and one deep inside the Application Scene Manifest. Update the 3 swift files as follows.</p>

<p>AppDelegate.swift:</p>

<pre class=""lang-swift prettyprint-override""><code>import UIKit

@UIApplicationMain
class AppDelegate: UIResponder, UIApplicationDelegate {
    var window: UIWindow?

    func application(_ application: UIApplication, willFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey : Any]? = nil) -&gt; Bool {
        print(""AppDelegate willFinishLaunchingWithOptions"")

        // This probably shouldn't be run under iOS 13?
        self.window = UIWindow(frame: UIScreen.main.bounds)

        return true
    }

    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool {
        print(""AppDelegate didFinishLaunchingWithOptions"")

        if #available(iOS 13.0, *) {
            // What needs to be here?
        } else {
            // If the root view controller wasn't restored, create a new one from scratch
            if (self.window?.rootViewController == nil) {
                let vc = ViewController()
                let nc = UINavigationController(rootViewController: vc)
                nc.restorationIdentifier = ""RootNC""

                self.window?.rootViewController = nc
            }

            self.window?.makeKeyAndVisible()
        }

        return true
    }

    func application(_ application: UIApplication, viewControllerWithRestorationIdentifierPath identifierComponents: [String], coder: NSCoder) -&gt; UIViewController? {
        print(""AppDelegate viewControllerWithRestorationIdentifierPath"")

        // If this is for the nav controller, restore it and set it as the window's root
        if identifierComponents.first == ""RootNC"" {
            let nc = UINavigationController()
            nc.restorationIdentifier = ""RootNC""
            self.window?.rootViewController = nc

            return nc
        }

        return nil
    }

    func application(_ application: UIApplication, willEncodeRestorableStateWith coder: NSCoder) {
        print(""AppDelegate willEncodeRestorableStateWith"")

        // Trigger saving of the root view controller
        coder.encode(self.window?.rootViewController, forKey: ""root"")
    }

    func application(_ application: UIApplication, didDecodeRestorableStateWith coder: NSCoder) {
        print(""AppDelegate didDecodeRestorableStateWith"")
    }

    func application(_ application: UIApplication, shouldSaveApplicationState coder: NSCoder) -&gt; Bool {
        print(""AppDelegate shouldSaveApplicationState"")

        return true
    }

    func application(_ application: UIApplication, shouldRestoreApplicationState coder: NSCoder) -&gt; Bool {
        print(""AppDelegate shouldRestoreApplicationState"")

        return true
    }

    // The following four are not called in iOS 13
    func applicationWillEnterForeground(_ application: UIApplication) {
        print(""AppDelegate applicationWillEnterForeground"")
    }

    func applicationDidEnterBackground(_ application: UIApplication) {
        print(""AppDelegate applicationDidEnterBackground"")
    }

    func applicationDidBecomeActive(_ application: UIApplication) {
        print(""AppDelegate applicationDidBecomeActive"")
    }

    func applicationWillResignActive(_ application: UIApplication) {
        print(""AppDelegate applicationWillResignActive"")
    }

    // MARK: UISceneSession Lifecycle

    @available(iOS 13.0, *)
    func application(_ application: UIApplication, configurationForConnecting connectingSceneSession: UISceneSession, options: UIScene.ConnectionOptions) -&gt; UISceneConfiguration {
        print(""AppDelegate configurationForConnecting"")

        return UISceneConfiguration(name: ""Default Configuration"", sessionRole: connectingSceneSession.role)
    }

    @available(iOS 13.0, *)
    func application(_ application: UIApplication, didDiscardSceneSessions sceneSessions: Set&lt;UISceneSession&gt;) {
        print(""AppDelegate didDiscardSceneSessions"")
    }
}
</code></pre>

<p>SceneDelegate.swift:</p>

<pre class=""lang-swift prettyprint-override""><code>import UIKit

@available(iOS 13.0, *)
class SceneDelegate: UIResponder, UIWindowSceneDelegate {
    var window: UIWindow?

    func scene(_ scene: UIScene, willConnectTo session: UISceneSession, options connectionOptions: UIScene.ConnectionOptions) {
        print(""SceneDelegate willConnectTo"")

        guard let winScene = (scene as? UIWindowScene) else { return }

        // Got some of this from WWDC2109 video 258
        window = UIWindow(windowScene: winScene)
        if let activity = connectionOptions.userActivities.first ?? session.stateRestorationActivity {
            // Now what? How to connect the UI restored in the AppDelegate to this window?
        } else {
            // Create the initial UI if there is nothing to restore
            let vc = ViewController()
            let nc = UINavigationController(rootViewController: vc)
            nc.restorationIdentifier = ""RootNC""

            self.window?.rootViewController = nc
            window?.makeKeyAndVisible()
        }
    }

    func stateRestorationActivity(for scene: UIScene) -&gt; NSUserActivity? {
        print(""SceneDelegate stateRestorationActivity"")

        // What should be done here?
        let activity = NSUserActivity(activityType: ""What?"")
        activity.persistentIdentifier = ""huh?""

        return activity
    }

    func scene(_ scene: UIScene, didUpdate userActivity: NSUserActivity) {
        print(""SceneDelegate didUpdate"")
    }

    func sceneDidDisconnect(_ scene: UIScene) {
        print(""SceneDelegate sceneDidDisconnect"")
    }

    func sceneDidBecomeActive(_ scene: UIScene) {
        print(""SceneDelegate sceneDidBecomeActive"")
    }

    func sceneWillResignActive(_ scene: UIScene) {
        print(""SceneDelegate sceneWillResignActive"")
    }

    func sceneWillEnterForeground(_ scene: UIScene) {
        print(""SceneDelegate sceneWillEnterForeground"")
    }

    func sceneDidEnterBackground(_ scene: UIScene) {
        print(""SceneDelegate sceneDidEnterBackground"")
    }
}
</code></pre>

<p>ViewController.swift:</p>

<pre class=""lang-swift prettyprint-override""><code>import UIKit

class ViewController: UIViewController, UIViewControllerRestoration {
    var label: UILabel!
    var count: Int = 0
    var timer: Timer?

    static func viewController(withRestorationIdentifierPath identifierComponents: [String], coder: NSCoder) -&gt; UIViewController? {
        print(""ViewController withRestorationIdentifierPath"")

        return ViewController()
    }

    override init(nibName nibNameOrNil: String? = nil, bundle nibBundleOrNil: Bundle? = nil) {
        print(""ViewController init"")

        super.init(nibName: nibNameOrNil, bundle: nibBundleOrNil)

        restorationIdentifier = ""ViewController""
        restorationClass = ViewController.self
    }

    required init?(coder: NSCoder) {
        print(""ViewController init(coder)"")

        super.init(coder: coder)
    }

    override func viewDidLoad() {
        print(""ViewController viewDidLoad"")

        super.viewDidLoad()

        view.backgroundColor = .green // be sure this vc is visible

        label = UILabel(frame: .zero)
        label.translatesAutoresizingMaskIntoConstraints = false
        label.text = ""\(count)""
        view.addSubview(label)
        NSLayoutConstraint.activate([
            label.centerXAnchor.constraint(equalTo: view.centerXAnchor),
            label.centerYAnchor.constraint(equalTo: view.centerYAnchor),
        ])
    }

    override func viewWillAppear(_ animated: Bool) {
        print(""ViewController viewWillAppear"")

        super.viewWillAppear(animated)

        timer = Timer.scheduledTimer(withTimeInterval: 1, repeats: true, block: { (timer) in
            self.count += 1
            self.label.text = ""\(self.count)""
        })
    }

    override func viewDidDisappear(_ animated: Bool) {
        print(""ViewController viewDidDisappear"")

        super.viewDidDisappear(animated)

        timer?.invalidate()
        timer = nil
    }

    override func encodeRestorableState(with coder: NSCoder) {
        print(""ViewController encodeRestorableState"")

        super.encodeRestorableState(with: coder)

        coder.encode(count, forKey: ""count"")
    }

    override func decodeRestorableState(with coder: NSCoder) {
        print(""ViewController decodeRestorableState"")

        super.decodeRestorableState(with: coder)

        count = coder.decodeInteger(forKey: ""count"")
        label.text = ""\(count)""
    }
}
</code></pre>

<p>Run this under iOS 11 or 12 and it works just fine.</p>

<p>You can run this under iOS 13 and on a fresh install of the app you get the UI. But any subsequent run of the app gives a black screen because the UI restored via state restoration isn't connected to the scene's window.</p>

<p>What am I missing? Is this just missing a line or two of code or is my entire approach to iOS 13 scene state restoration wrong?</p>

<p>Keep in mind that once I get this figured out the next step will be supporting multiple windows. So the solution should work for multiple scenes, not just one.</p>
","1226963","","","","","2019-09-19 08:59:34","UI state restoration for a scene in iOS 13 while still supporting iOS 12. No storyboards","<ios><ios13><state-restoration><uiscene>","4","4","6","","","1226963","276683","2012-02-22 21:58:04","rmaddy","2020-02-10 06:36:19","http://www.maddysoft.com/iphone/","","<p>I am an independent iOS app developer producing and selling my own apps. I started with BASIC in 1979 playing with TRS Model I computers at Radio Shack stores. We sure had a lot of fun with 4k of RAM.</p>
","57909","2865","29801","https://i.stack.imgur.com/yjY1E.png","","1270581"
"57465459","1","","","2019-08-12 17:11:26","","15","242","<p>The <code>std::launder</code> function requires that every byte that would be reachable through the result is reachable through the argument. ""Reachable"" is defined as follows:</p>

<blockquote>
  <p>A byte of storage is reachable through a pointer value that points to an object <em>Y</em> if it is within the storage occupied by <em>Y</em>, an object that is
  pointer-interconvertible with <em>Y</em>, or the immediately-enclosing array object if <em>Y</em> is an array element.</p>
</blockquote>

<p>According to <a href=""https://stackoverflow.com/a/51561687/481267"">an answer</a> to another question, this restriction ""... means that you cannot use <code>launder</code> to obtain a pointer that would allow you to access more bytes than the source pointer value allows, on pain of undefined behavior.""</p>

<p>This makes sense for the examples given by T.C. but I don't understand how to interpret it in the case where the original object has been replaced by a new object, which is the original purpose contemplated for <code>std::launder</code>. The standard has the following example:</p>

<pre><code>struct X { const int n; };
X *p = new X{3};
const int a = p-&gt;n;
new (p) X{5}; // p does not point to new object (6.8) because X::n is const
const int b = p-&gt;n; // undefined behavior
const int c = std::launder(p)-&gt;n; // OK
</code></pre>

<p>In this case, by the time <code>std::launder</code> is called, the object pointed to by <code>p</code>---the original <code>X</code> object---has already ceased to exist since the creation of a new object in the storage it occupied has implicitly ended its lifetime ([basic.life]/1.4). Therefore, it seems that there are no bytes reachable through <code>p</code> since <code>p</code> does not point to any object <em>Y</em>. This is obviously not the intended reading since it would make the call to <code>std::launder</code> undefined behaviour in the example.</p>

<ol>
<li>Have I misunderstood the wording here, or is the wording defective?</li>
<li>What is the intended meaning, which would make the example valid?</li>
</ol>
","481267","","10239789","","2019-08-12 17:27:06","2019-08-30 13:29:50","How to interpret the reachability requirement of std::launder?","<c++><language-lawyer><c++17><stdlaunder>","1","4","4","","","481267","82364","2010-10-20 04:59:07","Brian","2020-03-14 23:55:30","http://brianbi.ca","New York, NY, USA","<p>C++ programmer on the Low Latency team at Citadel Securities. Opinions are mine and not those of my employer. I can be reached by email at bbi5291@gmail.com, but I can't promise that I'll reply.</p>
","16280","1795","923","https://i.stack.imgur.com/DMvoo.png?s=128&g=1","","222578"
"54014913","1","54014914","","2019-01-03 00:28:27","","15","3322","<p>I know that single and double quotes have at least some level of equivelence in Dart. For example,</p>

<pre><code>var myString = ""Hello world"";      // double quotes
</code></pre>

<p>and </p>

<pre><code>var myString = 'Hello world';      // single quotes
</code></pre>

<p>have no programmatic difference to my knowledge. </p>

<p>I keep seeing them used seemingly interchangeably in various examples and in some documentation. I'm wondering if there is a subtle difference that I am missing or if there is a recommended style to follow, especially in Flutter.</p>

<p><em>This is a Q&amp;A self answer after reading the Flutter and Dart style guides.</em></p>
","3681880","","","","","2019-01-03 00:28:27","Difference between single and double quotes in Flutter/Dart","<string><dart><flutter>","1","0","4","","","3681880","281555","2014-05-28 01:38:32","Suragch","2020-03-15 01:46:08","http://www.studymongolian.net","","<p>Why are you developing for a single platform when you could be creating apps for Android, iOS, the web (and soon Linux, Mac, and Windows) with a single code base? Check out <a href=""https://flutter.dev/"" rel=""nofollow noreferrer"">Flutter</a>.</p>

<p><a href=""https://medium.com/@studymongolian/flutter-and-dart-development-articles-981be9ef7b23"" rel=""nofollow noreferrer"">My Flutter and Dart articles</a></p>
","10525","12917","73","","","4531600"
"55929472","1","55929473","","2019-04-30 22:31:46","","15","11168","<p>After upgrading to Django 3.0, I get the following <code>TemplateSyntaxError</code>:</p>

<pre><code>In template /Users/alasdair//myproject/myapp/templates/index.html, error at line 1
'staticfiles' is not a registered tag library. Must be one of: admin_list admin_modify admin_urls cache i18n l10n log static tz
</code></pre>

<p>Here is my template</p>

<pre><code>{% load staticfiles %}
&lt;img src=""{% static 'my_image.html' %}""&gt;
</code></pre>
","113962","","","","","2020-02-02 19:54:11","Django TemplateSyntaxError - 'staticfiles' is not a registered tag library","<python><django><django-templates><django-3.0>","2","0","4","","","113962","215773","2009-05-28 20:26:55","Alasdair","2020-03-14 23:41:05","http://al.sdair.co.uk","Guildford, United Kingdom","<p>Pythonista/Djangonaut</p>
","10514","5933","533","","","39506"
"54573454","1","","","2019-02-07 12:33:43","","15","521","<h2>Background</h2>

<p>Over the past few days, I've worked on making a customizable, more updated version of a library for video trimming, <a href=""https://github.com/AndroidDeveloperLB/VideoTrimmer/"" rel=""noreferrer""><strong>here</strong></a> (based on <a href=""https://github.com/titansgroup/k4l-video-trimmer"" rel=""noreferrer""><strong>this library</strong></a>)</p>

<h2>The problem</h2>

<p>While for the most part, I've succeeded making it customizable and even converted all files into Kotlin, it had a major issue with the trimming itself. </p>

<p>It assumes the input is always a File, so if the user chooses an item from the apps chooser that returns a Uri, it crashes. The reason for this is not just the UI itself, but also because a library that it uses for trimming (<a href=""https://github.com/sannies/mp4parser"" rel=""noreferrer""><strong>mp4parser</strong></a>) assumes an input of only File (or filepath) and not a Uri (wrote about it <a href=""https://github.com/sannies/mp4parser/issues/357"" rel=""noreferrer""><strong>here</strong></a>). I tried multiple ways to let it get a Uri instead, but failed. Also wrote about it <a href=""https://stackoverflow.com/q/54503331/878126""><strong>here</strong></a>.</p>

<p>That's why I used a solution that I've found on StackOverflow (<a href=""http://%20https://stackoverflow.com/a/44653626/878126"" rel=""noreferrer""><strong>here</strong></a>)for the trimming itself. The good thing about it is that it's quiet short and uses just Android's framework itself. However, it seems that for some video files, it always fails to trim them. As an example of such files, there is one on the original library repository, <a href=""https://github.com/titansgroup/k4l-video-trimmer/tree/develop/sample-app/src/main/res/raw"" rel=""noreferrer""><strong>here</strong></a> (issue reported <a href=""https://github.com/titansgroup/k4l-video-trimmer/issues/56"" rel=""noreferrer""><strong>here</strong></a>). </p>

<p>Looking at the exception, this is what I got:</p>

<pre><code>E: Unsupported mime 'audio/ac3'
E: FATAL EXCEPTION: pool-1-thread-1
    Process: life.knowledge4.videocroppersample, PID: 26274
    java.lang.IllegalStateException: Failed to add the track to the muxer
        at android.media.MediaMuxer.nativeAddTrack(Native Method)
        at android.media.MediaMuxer.addTrack(MediaMuxer.java:626)
        at life.knowledge4.videotrimmer.utils.TrimVideoUtils.genVideoUsingMuxer(TrimVideoUtils.kt:77)
        at life.knowledge4.videotrimmer.utils.TrimVideoUtils.genVideoUsingMp4Parser(TrimVideoUtils.kt:144)
        at life.knowledge4.videotrimmer.utils.TrimVideoUtils.startTrim(TrimVideoUtils.kt:47)
        at life.knowledge4.videotrimmer.BaseVideoTrimmerView$initiateTrimming$1.execute(BaseVideoTrimmerView.kt:220)
        at life.knowledge4.videotrimmer.utils.BackgroundExecutor$Task.run(BackgroundExecutor.java:210)
        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:458)
        at java.util.concurrent.FutureTask.run(FutureTask.java:266)
        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:301)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1167)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:641)
        at java.lang.Thread.run(Thread.java:764)
</code></pre>

<h2>What I've found</h2>

<ol>
<li>Reported about the issue <a href=""https://github.com/titansgroup/k4l-video-trimmer/issues/56"" rel=""noreferrer""><strong>here</strong></a>. I don't think it will get an answer, as the library hasn't updated in years...</li>
<li>Looking at the exception, I tried to also trim without sound. This works, but it's not a good thing, because we want to trim normally. </li>
<li>Thinking that this code might be based on someone else's code, I tried to find the original one. I've found that it is based on some old Google code on its gallery app, <a href=""https://android.googlesource.com/platform/packages/apps/Gallery2/+/634248d/src/com/android/gallery3d/app/VideoUtils.java"" rel=""noreferrer""><strong>here</strong></a>, in a class called ""VideoUtils.java"" in package of ""Gallery3d"". Sadly, I don't see any new version for it. Latest one that I see is of Gingerbread, <a href=""https://android.googlesource.com/platform/packages/apps/Gallery3D/+refs"" rel=""noreferrer""><strong>here</strong></a>.</li>
</ol>

<p>The code that I've made out of it looks as such:</p>

<pre><code>object TrimVideoUtils {
    private const val DEFAULT_BUFFER_SIZE = 1024 * 1024

    @JvmStatic
    @WorkerThread
    fun startTrim(context: Context, src: Uri, dst: File, startMs: Long, endMs: Long, callback: VideoTrimmingListener) {
        dst.parentFile.mkdirs()
        //Log.d(TAG, ""Generated file path "" + filePath);
        val succeeded = genVideoUsingMuxer(context, src, dst.absolutePath, startMs, endMs, true, true)
        Handler(Looper.getMainLooper()).post { callback.onFinishedTrimming(if (succeeded) Uri.parse(dst.toString()) else null) }
    }

    //https://stackoverflow.com/a/44653626/878126 https://android.googlesource.com/platform/packages/apps/Gallery2/+/634248d/src/com/android/gallery3d/app/VideoUtils.java
    @JvmStatic
    @WorkerThread
    private fun genVideoUsingMuxer(context: Context, uri: Uri, dstPath: String, startMs: Long, endMs: Long, useAudio: Boolean, useVideo: Boolean): Boolean {
        // Set up MediaExtractor to read from the source.
        val extractor = MediaExtractor()
        //       val isRawResId=uri.scheme == ""android.resource"" &amp;&amp; uri.host == context.packageName &amp;&amp; !uri.pathSegments.isNullOrEmpty())
        val fileDescriptor = context.contentResolver.openFileDescriptor(uri, ""r"")!!.fileDescriptor
        extractor.setDataSource(fileDescriptor)
        val trackCount = extractor.trackCount
        // Set up MediaMuxer for the destination.
        val muxer = MediaMuxer(dstPath, MediaMuxer.OutputFormat.MUXER_OUTPUT_MPEG_4)
        // Set up the tracks and retrieve the max buffer size for selected tracks.
        val indexMap = SparseIntArray(trackCount)
        var bufferSize = -1
        try {
            for (i in 0 until trackCount) {
                val format = extractor.getTrackFormat(i)
                val mime = format.getString(MediaFormat.KEY_MIME)
                var selectCurrentTrack = false
                if (mime.startsWith(""audio/"") &amp;&amp; useAudio) {
                    selectCurrentTrack = true
                } else if (mime.startsWith(""video/"") &amp;&amp; useVideo) {
                    selectCurrentTrack = true
                }
                if (selectCurrentTrack) {
                    extractor.selectTrack(i)
                    val dstIndex = muxer.addTrack(format)
                    indexMap.put(i, dstIndex)
                    if (format.containsKey(MediaFormat.KEY_MAX_INPUT_SIZE)) {
                        val newSize = format.getInteger(MediaFormat.KEY_MAX_INPUT_SIZE)
                        bufferSize = if (newSize &gt; bufferSize) newSize else bufferSize
                    }
                }
            }
            if (bufferSize &lt; 0)
                bufferSize = DEFAULT_BUFFER_SIZE
            // Set up the orientation and starting time for extractor.
            val retrieverSrc = MediaMetadataRetriever()
            retrieverSrc.setDataSource(fileDescriptor)
            val degreesString = retrieverSrc.extractMetadata(MediaMetadataRetriever.METADATA_KEY_VIDEO_ROTATION)
            if (degreesString != null) {
                val degrees = Integer.parseInt(degreesString)
                if (degrees &gt;= 0)
                    muxer.setOrientationHint(degrees)
            }
            if (startMs &gt; 0)
                extractor.seekTo(startMs * 1000, MediaExtractor.SEEK_TO_CLOSEST_SYNC)
            // Copy the samples from MediaExtractor to MediaMuxer. We will loop
            // for copying each sample and stop when we get to the end of the source
            // file or exceed the end time of the trimming.
            val offset = 0
            var trackIndex: Int
            val dstBuf = ByteBuffer.allocate(bufferSize)
            val bufferInfo = MediaCodec.BufferInfo()
//        try {
            muxer.start()
            while (true) {
                bufferInfo.offset = offset
                bufferInfo.size = extractor.readSampleData(dstBuf, offset)
                if (bufferInfo.size &lt; 0) {
                    //InstabugSDKLogger.d(TAG, ""Saw input EOS."");
                    bufferInfo.size = 0
                    break
                } else {
                    bufferInfo.presentationTimeUs = extractor.sampleTime
                    if (endMs &gt; 0 &amp;&amp; bufferInfo.presentationTimeUs &gt; endMs * 1000) {
                        //InstabugSDKLogger.d(TAG, ""The current sample is over the trim end time."");
                        break
                    } else {
                        bufferInfo.flags = extractor.sampleFlags
                        trackIndex = extractor.sampleTrackIndex
                        muxer.writeSampleData(indexMap.get(trackIndex), dstBuf,
                                bufferInfo)
                        extractor.advance()
                    }
                }
            }
            muxer.stop()
            return true
            //        } catch (e: IllegalStateException) {
            // Swallow the exception due to malformed source.
            //InstabugSDKLogger.w(TAG, ""The source video file is malformed"");
        } catch (e: Exception) {
            e.printStackTrace()
        } finally {
            muxer.release()
        }
        return false
    }

}
</code></pre>

<p>The exception is thrown on <code>val dstIndex = muxer.addTrack(format)</code> . For now, I've wrapped it in try-catch, to avoid a real crash.</p>

<p>I tried to search for newer versions of this code (assuming that it got fixed later), but failed.</p>

<ol start=""4"">
<li>Searching on the Internet and here, I've found only one similar question, <a href=""https://stackoverflow.com/q/19505845/878126""><strong>here</strong></a>, but it's not the same at all. </li>
</ol>

<h2>The questions</h2>

<ol>
<li><p>Is it possible to use Android's framework to trim such problematic files? Maybe there is a newer version of the trimming of the videos code? I'm interested of course only for the pure implementation of video trimming, like the function I wrote above, of ""genVideoUsingMuxer"" . </p></li>
<li><p>As a temporary solution, is it possible to detect problematic input videos, so that I won't let the user start to trim them, as I know they will fail?</p></li>
<li><p>Is there maybe another alternative to both of those, that have a permissive license and doesn't bloat the app?  For <code>mp4parser</code>, I wrote a separate question, <a href=""https://stackoverflow.com/q/54503331/878126""><strong>here</strong></a>.</p></li>
</ol>
","878126","","878126","","2019-02-11 09:49:04","2019-02-18 07:34:49","How can I trim a video from Uri, including files that `mp4parser` library can handle, but using Android's framework instead?","<android><video-editing><mediamuxer>","1","0","1","","","878126","98917","2011-08-04 08:05:33","android developer","2020-03-15 00:36:55","","Israel","<p>Really like to develop Android apps &amp; libraries on my spare time.</p>

<p>Github website:
<a href=""https://github.com/AndroidDeveloperLB/"" rel=""nofollow noreferrer"">https://github.com/AndroidDeveloperLB/</a> </p>

<p>My spare time apps:
<a href=""https://play.google.com/store/apps/developer?id=AndroidDeveloperLB"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/developer?id=AndroidDeveloperLB</a></p>
","44922","888","41","https://i.stack.imgur.com/D5dZW.jpg","","796053"
"59458257","1","","","2019-12-23 16:10:28","","14","159","<p>Is an iterable the same as an iterator, or are they different?</p>

<p>It seems, <a href=""http://ecma-international.org/ecma-262/6.0/#sec-iterable-interface"" rel=""noreferrer"">from the specifications</a>, an iterable is an object, say, <code>obj</code>, such that <code>obj[Symbol.iterator]</code> refers to a function, so that when invoked, returns an object that has a <code>next</code> method that can return a <code>{value: ___, done: ___}</code> object:</p>

<pre><code>function foo() {
    let i = 0;
    const wah = {
        next: function() {
            if (i &lt;= 2) return { value: (1 + 2 * i++), done: false }
            else return { value: undefined, done: true }
        }
    };
    return wah;     // wah is iterator
}

let bar = {}        // bar is iterable

bar[Symbol.iterator] = foo;

console.log([...bar]);             // [1, 3, 5]   
for (a of bar) console.log(a);     // 1 3 5 (in three lines)
</code></pre>

<p>So in the code above, <code>bar</code> is the iterable, and <code>wah</code> is the iterator, and the <code>next()</code> is the iterator interface.</p>

<p>So, iterable and iterator are different things.</p>

<p>Now, however, in a common example of generator and iterator:</p>

<pre><code>function* gen1() {
    yield 1;
    yield 3;
    yield 5;
}

const iter1 = gen1();

console.log([...iter1]);                           // [1, 3, 5]
for (a of iter1) console.log(a);                   // nothing

const iter2 = gen1();
for (a of iter2) console.log(a);                   // 1 3 5 (in three lines)

console.log(iter1[Symbol.iterator]() === iter1);   // true
</code></pre>

<p>In the case above, <code>gen1</code> is the generator, and <code>iter1</code> is the iterator, and <code>iter1.next()</code> will do the proper job.  But <code>iter1[Symbol.iterator]</code> does give a function that, when invoked, gives back <code>iter1</code>, which is an iterator. So <code>iter1</code> is both an iterable and iterator in this case?</p>

<p>Besides, <code>iter1</code> is different from the example 1 above, because the iterable in example 1 can give <code>[1, 3, 5]</code> as many times as wanted using <code>[...bar]</code>, while <code>iter1</code> is an iterable, but since it returns itself, which is the same iterator every time, will only give <code>[1, 3, 5]</code> once.</p>

<p>So we can say, for an iterable <code>bar</code>, how many times can <code>[...bar]</code> give the result <code>[1, 3, 5]</code> -- and the answer is, it depends.  And is iterable the same as an iterator? And the answer is, they are different things, but they can be the same, when the iterable uses itself as the iterator. Is that correct?</p>
","325418","","325418","","2019-12-24 02:38:06","2019-12-29 20:23:31","In JavaScript ES6, what is the difference between an iterable and iterator?","<javascript><ecmascript-6><iterator><iterable>","2","3","2","","","325418","118574","2009-05-09 15:50:29","nonopolarity","2020-03-15 04:53:48","http://www.google.com","","<p>I started with Apple Basic and 6502 machine code and Assembly, then went onto Fortran, Pascal, C, Lisp (Scheme), microcode, Perl, Java, JavaScript, Python, Ruby, PHP, and Objective-C.</p>

<p>Originally, I was going to go with an Atari... but it was a big expense for my family... and after months of me nagging, my dad agreed to buy an Apple ][.  At that time, the Pineapple was also available.  The few months in childhood seem to last forever.  A few months nowadays seem to pass like days.  Those days, a computer had 16kb or 48kb of RAM.  Today, the computer has 16GB.  So it is in fact a million times.</p>

<p>If you know what D5 AA 96 means, we belong to the same era.</p>
","11827","1374","36","","","127918"
"59503994","1","","","2019-12-27 17:18:54","","14","386","<p>Using the <a href=""https://github.com/dart-lang/source_gen"" rel=""noreferrer"">source_gen</a> stack to make a code generator, how can I make a generator that generates code that would be the input of another generator (more specifically <code>json_serializable</code>)?</p>

<p>For example, consider:</p>

<pre class=""lang-dart prettyprint-override""><code>class Example extends Generator {
  @override
  String generate(LibraryReader library, BuildStep buildStep) {
    return '''
@JsonSerializable(nullable: false)
class Person {
  final String firstName;
  final String lastName;
  final DateTime dateOfBirth;
  Person({this.firstName, this.lastName, this.dateOfBirth});
  factory Person.fromJson(Map&lt;String, dynamic&gt; json) =&gt; _PersonFromJson(json);
  Map&lt;String, dynamic&gt; toJson() =&gt; _PersonToJson(this);
}
''';
  }
}
</code></pre>

<p>This is an example of a code-generator that output code which then needs to be sent to <code>json_serializable</code></p>

<p>What can I do so that <code>json_serializable</code> correctly generates here?</p>
","8394265","","8394265","","2020-01-01 00:19:09","2020-01-06 14:05:12","How to run a code-generator on the top of another code-generator?","<flutter><dart>","3","4","2","","","8394265","87647","2017-07-31 13:22:44","R√©mi Rousselet","2020-03-15 02:28:41","","Paris, France","<p><em>Dart makes my heart Flutter</em></p>

<p>Some interesting Flutter topics: </p>

<ul>
<li><a href=""https://medium.com/@darky12s/flutter-reducing-widgets-boilerplate-3e635f10685e"" rel=""nofollow noreferrer"">https://medium.com/@darky12s/flutter-reducing-widgets-boilerplate-3e635f10685e</a></li>
<li><a href=""https://stackoverflow.com/questions/53972392/custom-width-height-property-for-a-widget-are-ignored/53972393"">Custom width/height property for a widget are ignored</a></li>
<li><a href=""https://stackoverflow.com/questions/46057353/controlling-state-from-outside-of-a-statefulwidget/51460832"">Controlling State from outside of a StatefulWidget</a></li>
<li><a href=""https://stackoverflow.com/questions/50080860/what-are-keys-in-the-stateless-widgets-class/50081052#50081052"">What are Keys in the Stateless widgets class?</a></li>
<li><a href=""https://stackoverflow.com/questions/53234825/what-is-the-difference-between-functions-and-classes-to-create-widgets/53234826#53234826"">What is the difference between functions and classes to create widgets?</a></li>
<li><a href=""https://stackoverflow.com/questions/52249578/how-to-deal-with-unwanted-widget-build"">How to deal with unwanted widget build?</a></li>
<li><a href=""https://stackoverflow.com/questions/53467979/understanding-flutter-render-engine"">Understanding Flutter Render Engine</a></li>
<li><a href=""https://stackoverflow.com/questions/44004451/navigator-operation-requested-with-a-context-that-does-not-include-a-navigator/51292613#51292613"">Navigator operation requested with a context that does not include a Navigator</a></li>
<li><a href=""https://stackoverflow.com/questions/47501710/what-is-the-relation-between-stateful-and-stateless-widgets-in-flutter/47502202#47502202"">What is the relation between stateful and stateless widgets in Flutter?</a></li>
<li><a href=""https://stackoverflow.com/questions/50818770/passing-data-to-a-stateful-widget/50818870"">Passing Data to a Stateful Widget</a></li>
</ul>
","9664","239","246","","","11452143"
"54506744","1","","","2019-02-03 19:33:58","","14","13082","<p>I would like to use TypeScript <em>in the future</em>, but for right now, I have chosen to install TypeScript in Create React App. (Later, I will go back and add types)</p>

<p>Therefore, I would like to disable all type checks.</p>

<p>Right now, when I do something like this:</p>

<pre><code>&lt;PlaceSearchBar
    placeSearchChanged={this.placeSearchChanged}
/&gt;


class PlaceSearchBar extends React.Component {
...
}
</code></pre>

<p>I get an error:</p>

<pre><code>Type error: Type '{ placeSearchChanged: (place: any) =&gt; void; }' is not assignable to type 'IntrinsicAttributes &amp; IntrinsicClassAttributes&lt;PlaceSearchBar&gt; &amp; Readonly&lt;{ children?: ReactNode; }&gt; &amp; Readonly&lt;{}&gt;'.
  Property 'placeSearchChanged' does not exist on type 'IntrinsicAttributes &amp; IntrinsicClassAttributes&lt;PlaceSearchBar&gt; &amp; Readonly&lt;{ children?: ReactNode; }&gt; &amp; Readonly&lt;{}&gt;'.  TS2322
</code></pre>

<p>Apparently I need to declare types in <code>React.Component&lt;placeSearchChanged:function&gt;</code> or something of that sort.</p>

<p>I think it's annoying, and I would like to disable all checks in my <code>tsconfig.json</code>.</p>

<p>How can I disable all checks (but still keep TypeScript installed, just for future-proof)?</p>

<p>This is my current tsconfig.json:</p>

<pre><code>{
  ""compilerOptions"": {
    ""target"": ""es6"",
    ""lib"": [
      ""dom"",
      ""dom.iterable"",
      ""esnext"",
    ],
    ""allowJs"": true,
    ""skipLibCheck"": true,
    ""esModuleInterop"": true,
    ""allowSyntheticDefaultImports"": true,
    ""strict"": false,
    ""forceConsistentCasingInFileNames"": true,
    ""module"": ""esnext"",
    ""moduleResolution"": ""node"",
    ""resolveJsonModule"": true,
    ""isolatedModules"": true,
    ""noEmit"": true,
    ""jsx"": ""preserve"",
    ""noImplicitAny"": false,
  },
  ""include"": [
    ""src""
  ]
}
</code></pre>
","179736","","","","","2020-03-04 16:30:49","How can I disable all typescript type checking?","<javascript><reactjs><typescript>","5","1","3","","","179736","186366","2009-09-27 11:27:55","TIMEX","2020-03-07 18:32:31","","","","9263","741","38","","","60131"
"54021490","1","","","2019-01-03 11:35:09","","14","417","<p>Given a series</p>

<pre><code>s = pd.Series([1.1, 1.2, np.nan])
s
0    1.1
1    1.2
2    NaN
dtype: float64
</code></pre>

<p>If the need arises to convert the NaNs to None (to, for example, work with parquets), then I would like to have </p>

<pre><code>0     1.1
1     1.2
2    None
dtype: object
</code></pre>

<p>I would assume <code>Series.replace</code> would be the obvious way of doing this, but here's what the function returns:</p>

<pre><code>s.replace(np.nan, None)

0    1.1
1    1.2
2    1.2
dtype: float64
</code></pre>

<p>The NaN was forward filled, instead of being replaced. Going through the <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.replace.html"" rel=""noreferrer"">docs</a>, I see that if the second argument is None, then the first argument should be a dictionary. Based on this, I would expect <code>replace</code> to either replace as intended, or throw an exception. </p>

<p>I believe the workaround here is </p>

<pre><code>pd.Series([x if pd.notna(x) else None for x in s], dtype=object) 
0     1.1
1     1.2
2    None
dtype: object
</code></pre>

<p>Which is fine. But I would like to understand why this behaviour occurs, whether it is documented, or if it is just a bug and I have to dust off my git profile and log one on the issue tracker... any ideas?</p>
","4909087","","","","","2019-01-03 12:26:01","pandas replace NaN to None exhibits counterintuitive behaviour","<python><pandas><replace>","1","17","1","","","4909087","195757","2015-05-17 14:31:31","cs95","2020-03-15 02:58:01","","At an ipython shell near you","<h2><a href=""https://meta.stackoverflow.com/questions/386324/the-stack-overflow-i-wish-to-build-and-participate-in-is-no-longer-supported"">The Stack Overflow I wish to build and participate in no longer exists.</a></h2>

<h1><a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">My pandas canonicals</a> ‚¨Ö please critique!</h1>

<p>When asking a question here, please describe the problem you are trying to solve, rather than asking about the method you <em>think</em> is the solution to that problem. This is known as the <a href=""https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem"">XY problem</a> and can easily be averted if you ask the right questions. This will make it easy for us to understand what you're trying to do, and you may even receive better suggestions that you may never have considered yourself. </p>

<h3><strong>Rep = participation</strong></h3>

<h3><strong>Badges = quality</strong></h3>

<h3><strong><s>1 like = 1 prayer </s> 1 upvote = 1 thanks</strong></h3>

<p><a href=""https://stackoverflow.com/users/4909087/coldspeed""><img src=""https://stackoverflow.com/users/flair/4909087.png"" width=""208"" height=""58"" alt=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers"" title=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers""></a></p>

<p><a href=""https://i.stack.imgur.com/YfCOa.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YfCOa.gif"" alt=""enter image description here""></a></p>

<p><a href=""https://stackoverflow.com/a/53915214/4909087"">Some people, when confronted with a problem, think ""I know, I'll use regular expressions."" Now they have two problems.</a></p>

<hr>

<h2>(Actively Maintained) Pandas Canonicals</h2>

<p>The full list is on <a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">GitHub</a>.</p>

<ul>
<li><a href=""https://stackoverflow.com/q/53645882/pandas-merging-101"">Pandas Merging 101</a>: Everything you ever wanted to know about merging and more</li>
<li><a href=""https://stackoverflow.com/a/55557758"">How to iterate over a DataFrame.</a> Spoler alert: don't!</li>
<li><a href=""https://stackoverflow.com/a/54508052"">How to convert a DataFrame to NumPy array</a>: from 0.24, use <code>df.to_numpy()</code></li>
<li><a href=""https://stackoverflow.com/a/56746204/4909087"">The Right Way to create an empty DataFrame and fill it</a>: Use a list to grow your data, not a DataFrame</li>
<li><a href=""https://stackoverflow.com/a/59242208/4909087"">Don't use <code>inplace=True</code>!</a></li>
</ul>

<h2>Other Posts I'm Proud Of</h2>

<ul>
<li>Pandas Merging 101 (see above)</li>
<li><a href=""https://stackoverflow.com/a/50312321/4909087"">Best way to interleave two lists</a></li>
<li><a href=""https://stackoverflow.com/questions/47007680/strange-use-of-pythons-and-operator/47007761#47007761"">How do &quot;and&quot; and &quot;or&quot; act with non-boolean values?</a></li>
<li><a href=""https://stackoverflow.com/a/46333422/4909087"">So you think you know recursion?</a></li>
</ul>

<p>In addition to this, some of my <a href=""https://stackoverflow.com/search?tab=votes&amp;q=user%3a4909087%20perfplot"">answers that use <code>perfplot</code></a> are worth a read.</p>

<hr>

<h3>236th awardee of the <a href=""https://stackoverflow.com/help/badges/146/legendary"">Legendary</a> badge.</h3>

<p>Thanks, Stack Overflow! I love the shirt :-)</p>

<p><a href=""https://i.stack.imgur.com/7YKND.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7YKND.jpg"" alt=""enter image description here""></a></p>
","57988","9183","7537","https://i.stack.imgur.com/LmD3e.png?s=128&g=1","","6321039"
"58660207","1","58660208","","2019-11-01 13:39:49","","14","282","<p>I have code like this:</p>

<pre><code>#include &lt;vector&gt;
#include &lt;utility&gt;

int main()
{
   std::vector&lt;bool&gt; vb{true, false};
   std::swap(vb[0], vb[1]);
}
</code></pre>

<p>Arguments about the sanity of <code>vector&lt;bool&gt;</code> aside, this was working just fine on:</p>

<ul>
<li>Clang for Mac</li>
<li>Visual Studio for Windows</li>
<li>GCC for Linux</li>
</ul>

<p>Then I tried building it with Clang on Windows and received the following error (abridged):</p>

<pre><code>error: no matching function for call to 'swap'
                                std::swap(vb[0], vb[1]);
                                ^~~~~~~~~

note: candidate function [with _Ty = std::_Vb_reference&lt;std::_Wrap_alloc&lt;std::allocator&lt;unsigned int&gt; &gt; &gt;, $1 = void] not viable: expects an l-value for 1st argument
inline void swap(_Ty&amp; _Left, _Ty&amp; _Right) _NOEXCEPT_COND(is_nothrow_move_constructible_v&lt;_Ty&gt;&amp;&amp;
</code></pre>

<p>I'm surprised that the results differ across implementations.</p>

<p>Why does it not work with Clang on Windows?</p>
","560648","","","","","2019-11-01 14:01:53","Why doesn't std::swap work on vector<bool> elements under Clang/Win?","<c++><visual-studio><clang><c++17><std>","1","7","","","","560648","341647","2011-01-02 22:20:15","Lightness Races in Orbit","2020-03-03 18:26:07","","","<p>Retired.</p>

<hr>

<p>Pet hates:</p>

<ul>
<li>Answers in the comments section</li>
<li>""Ternary operator""</li>
<li>Comma splices</li>
</ul>
","175635","13431","14422","https://i.stack.imgur.com/pBDFJ.jpg?s=128&g=1","","270599"
"57174400","1","","","2019-07-24 02:25:19","","14","228","<p>Consider the following examples (<a href=""http://coliru.stacked-crooked.com/a/4457bbda7ce97674"" rel=""noreferrer"">Coliru link</a>):</p>

<pre><code>template &lt;class... T&gt; struct S { using type = int; };

template &lt;class... T&gt;
void f(typename S&lt;T...&gt;::type) {
    static_assert(sizeof...(T) == 0);
}

template &lt;class... T&gt;
void g(typename S&lt;T...&gt;::type, S&lt;T...&gt;*) {}

int main() {
    f(42);
    g(42, nullptr);
}
</code></pre>

<p>GCC and Clang are both happy with the call to <code>f</code>, but not the call to <code>g</code>.</p>

<p>In the call to <code>f</code>, although <code>T...</code> appears in a non-deduced context, it ends up being deduced as empty. This seems to be due to <a href=""http://eel.is/c++draft/temp.arg.explicit#4"" rel=""noreferrer"">[temp.arg.explicit]/4</a>:</p>

<blockquote>
  <p>... A trailing template parameter pack ([temp.variadic]) not otherwise deduced will be deduced as an empty sequence of template arguments. ...</p>
</blockquote>

<p>In the call to <code>g</code>, however, the fact that <code>T...</code> additionally <em>appears in a deduced context</em>, which causes deduction to be <em>attempted and failed</em>, seems to cause <code>g</code> to become non-viable. There seems to be no ""fallback"" to <code>T...</code> being empty once deduction has been attempted and failed.</p>

<ul>
<li>Is this behaviour intended? If so, why?</li>
<li>If so, was it intended that the ""not otherwise deduced"" wording specifies this behaviour? (<em>i.e.</em>, it implies that the empty fallback only occurs if the pack appears in no deduced contexts)</li>
<li>If so, is this wording clear enough? It seems a plausible alternative reading of ""not otherwise deduced"" is ""either deduction was not done, or deduction was attempted and failed"".</li>
</ul>
","481267","","9716597","","2019-07-24 03:15:33","2019-08-30 20:24:28","When are template parameter packs deduced as empty?","<c++><templates><language-lawyer><variadic-templates>","1","8","3","","","481267","82364","2010-10-20 04:59:07","Brian","2020-03-14 23:55:30","http://brianbi.ca","New York, NY, USA","<p>C++ programmer on the Low Latency team at Citadel Securities. Opinions are mine and not those of my employer. I can be reached by email at bbi5291@gmail.com, but I can't promise that I'll reply.</p>
","16280","1795","923","https://i.stack.imgur.com/DMvoo.png?s=128&g=1","","222578"
"57661132","1","57665148","","2019-08-26 15:49:21","","14","197","<p>Suppose I am maintaining a library function that takes two arguments, both pointers.  The second argument exists only for backward compatibility; callers should always pass a NULL. I would like to put something into my header file that makes the compiler issue warnings if the second argument is not a compile-time constant NULL.  I thought I would be able to do this using GCC's <code>__builtin_constant_p</code> and <code>__attribute__((warning))</code> extensions:</p>

<pre><code>extern void thefun_called_with_nonnull_arg (void)
    __attribute__((__warning__(
        ""'thefun' called with second argument not NULL"")));

extern int real_thefun (void *, void *);

static inline int
thefun (void *a, void *b)
{
   if (!__builtin_constant_p(b) || b != 0)
       thefun_called_with_nonnull_arg();
   return real_thefun(a, b);
}

int warning_expected (void *a, void *b)
{
    return thefun(a, b);
}
int warning_not_expected (void *a)
{
    return thefun(a, 0);
}
</code></pre>

<p>But this doesn't work with any version of GCC I have tested.  I get warnings for <em>both</em> calls to <code>thefun</code>.  (<a href=""https://godbolt.org/z/V-FHtZ"" rel=""nofollow noreferrer"">Compiler Explorer demo</a>.)</p>

<p>Can anyone suggest an alternative construct that will produce a warning for <code>warning_expected</code>, and not for <code>warning_not_expected</code> ?</p>

<p>Notes:</p>

<ul>
<li>Curiously, the above <a href=""https://godbolt.org/z/rcpAug"" rel=""nofollow noreferrer""><em>does</em> work</a> if <code>b</code> is an <code>int</code>.</li>
<li>The above uses GCC-specific extensions, however a solution that works on a broader variety of compilers would be welcome.  (In particular, clang does not implement <code>attribute((warning))</code> and I haven't had any luck finding an alternative.)</li>
<li>A solution that still works when optimization is turned off would be preferable to one that doesn't.  (The above does not work with optimization turned off, even if <code>b</code> is an <code>int</code> and <code>thefun</code> is marked always-inline.)</li>
<li>A solution that doesn't involve defining <code>thefun</code> as a macro would be preferable to one that does.</li>
<li>The header has to work when included from C programs and from C++ programs.  A modest amount of ifdeffage is acceptable.</li>
<li>It must be a warning, not a hard error, unless <code>-Werror</code> or equivalent is active.</li>
</ul>

<hr>

<p><strong>EDIT:</strong> Based on <a href=""https://stackoverflow.com/a/57665148"">Kamil Cuk's discovery</a> that the unwanted warning can be suppressed by casting the pointer to an integer <em>of a different size</em>, I have determined that this is an oversight in the implementation of <code>__builtin_constant_p</code> and <a href=""https://gcc.gnu.org/bugzilla/show_bug.cgi?id=91554"" rel=""nofollow noreferrer"">filed GCC bug report #91554</a>.  I'd still be interested in answers that provide ways to do this with clang, icc, or any other compiler that's commonly used together with GNU libc.</p>
","388520","","388520","","2019-08-27 13:29:26","2019-08-29 17:59:07","Warn for function argument that is NOT a compile time constant","<c><gcc><compiler-warnings>","2","11","1","","","388520","112200","2010-07-10 17:26:22","zwol","2020-03-14 20:42:10","https://www.owlfolio.org/","Pittsburgh, PA","<p>DO NOT CONTACT ME WITH ANY SORT OF JOB OFFER. </p>

<p>If you want to know about me, please see my website: <a href=""https://www.owlfolio.org/"" rel=""nofollow noreferrer"">https://www.owlfolio.org/</a> .</p>

<p>I will not discuss any of my questions or answers anywhere other than in the comments on those questions or answers.  The policy of treating comment threads as ephemeral and ""not for extended discussion"" is wrong, is actively harmful to the community, and I will not cooperate with it in any way.</p>

<p>To use people's preferred pronouns, all you have to do is take their word for their preferences, just as you do for their names.  This is basic courtesy and it is reasonable for the code of conduct to insist on it.  I am disappointed that several moderators and high-rep users have taken the recent change as the last straw for them.  There are plenty of better reasons to have beef with Stack Exchange, Inc.</p>

<p>(I go by ""he"", for the record.)</p>
","8345","3126","366","","","165234"
"58647874","1","58648094","","2019-10-31 16:45:00","","14","138","<p>Is the following program well-formed?</p>

<pre><code>#include &lt;vector&gt;
struct A {
    explicit A(int) {}
};
int main() {
    std::vector&lt;int&gt; vi = {1, 2, 3, 4, 5};
    std::vector&lt;A&gt; va(vi.begin(), vi.end());
}
</code></pre>

<p>According to C++17 [sequence.reqmts], the requirement for</p>

<pre><code>X u(i, j);
</code></pre>

<p>where <code>X</code> is a sequence container, is:</p>

<blockquote>
  <p><code>T</code> shall be <code>EmplaceConstructible</code> into <code>X</code> from <code>*i</code>.</p>
</blockquote>

<p>However, in the preceding paragraph it is stated that:</p>

<blockquote>
  <p><code>i</code> and <code>j</code> denote iterators satisfying input iterator requirements and refer to elements implicitly convertible to <code>value_type</code>,</p>
</blockquote>

<p>Thus it seems to me that both requirements would need to be met: the value type of the range must be implicitly convertible to the value type of the container, <em>and</em> <code>EmplaceConstructible</code> must be satisfied (which means the allocator must be able to perform the required initialization). Since <code>int</code> is not implicitly convertible to <code>A</code>, this program should be ill-formed.</p>

<p>However, surprisingly, <a href=""http://coliru.stacked-crooked.com/a/9c9dd43b0c8aee12"" rel=""noreferrer"">it seems to compile under GCC</a>.</p>
","481267","","","","","2019-10-31 17:35:30","Can the std::vector range constructor invoke explicit conversions?","<c++><c++17>","1","2","","","","481267","82364","2010-10-20 04:59:07","Brian","2020-03-14 23:55:30","http://brianbi.ca","New York, NY, USA","<p>C++ programmer on the Low Latency team at Citadel Securities. Opinions are mine and not those of my employer. I can be reached by email at bbi5291@gmail.com, but I can't promise that I'll reply.</p>
","16280","1795","923","https://i.stack.imgur.com/DMvoo.png?s=128&g=1","","222578"
"54357468","1","54357469","","2019-01-25 00:39:13","","14","10628","<p>How do you set the version name and version code of a Flutter app without having to go into the Android and iOS settings?</p>

<p>In my pubspec.yaml I have</p>

<pre><code>version: 2.0.0
</code></pre>

<p>but I don't see a place for the build number.</p>
","3681880","","","","","2019-02-02 20:49:02","How to set build and version number of Flutter app","<flutter><version>","1","0","4","","","3681880","281555","2014-05-28 01:38:32","Suragch","2020-03-15 01:46:08","http://www.studymongolian.net","","<p>Why are you developing for a single platform when you could be creating apps for Android, iOS, the web (and soon Linux, Mac, and Windows) with a single code base? Check out <a href=""https://flutter.dev/"" rel=""nofollow noreferrer"">Flutter</a>.</p>

<p><a href=""https://medium.com/@studymongolian/flutter-and-dart-development-articles-981be9ef7b23"" rel=""nofollow noreferrer"">My Flutter and Dart articles</a></p>
","10525","12917","73","","","4531600"
"55616929","1","","","2019-04-10 16:04:49","","13","168","<p>I have a DataFrame as below </p>

<hr>

<pre><code>df=pd.DataFrame({'A':[np.nan,1,1,np.nan],'B':[2,np.nan,2,2]},index=[1,1,2,2])
df.columns=['A','A']
</code></pre>

<hr>

<p>Now I want to <code>ffill</code> the values <code>groupby</code> the <code>index</code> , first I try </p>

<pre><code>df.groupby(level=0).ffill()
</code></pre>

<p>Which returns the error code </p>

<pre><code>&gt; ValueError: Buffer has wrong number of dimensions (expected 1, got 2)
</code></pre>

<p>It looks like a bug, then I am trying with apply, which returns the expected output.  </p>

<pre><code>df.groupby(level=0).apply(lambda x : x.ffill())
     A    A
1  NaN  2.0
1  1.0  2.0
2  1.0  2.0
2  1.0  2.0
</code></pre>

<p>For your reference when the columns is unique , it works <strong><em>just</em></strong>(Q2) fine, however, create one index columns and columns name is <code>NaN</code> </p>

<pre><code>df.columns=['C','D']
df.groupby(level=0).ffill()
   NaN    C    D
1    1  NaN  2.0
1    1  1.0  2.0
2    2  1.0  2.0
2    2  1.0  2.0
</code></pre>

<hr>

<blockquote>
  <p>Question :<br>
  1 Is this a bug ? why apply can still work with this type situation ? </p>
  
  <p>2 why <code>groupby</code> with <code>index</code> and <code>ffill</code>, it creates the additional columns ?</p>
</blockquote>
","7964527","","7964527","","2019-04-10 16:56:06","2019-07-16 09:12:29","ffill weird behavior , when have the duplicate columns names","<python><pandas>","1","14","","","","7964527","181401","2017-05-04 16:45:29","YOBEN_S","2020-03-15 03:15:11","https://stackoverflow.com/users/7964527/wen","United States","<p>Life is not hard when coding and cooking. </p>

<pre><code>Data noob

#Day   : R(7 year)/Matlab(11 year)

#Night : Python(5 year)

#Sleep : Machine Learning Algorithms

#Current : Going to put more effort in Machine Learning:-) and Monster Hunter XX
</code></pre>

<h2><strong><em>SO ready to help</em></strong></h2>

<p>Some Answers : </p>

<p><em><a href=""https://stackoverflow.com/questions/53218931/how-to-unnesting-a-column-in-pandas-dataframe/53218939#53218939"">How to unnesting a column in pandas' DataFrame?</a></em></p>

<hr>

<p><a href=""https://stackoverflow.com/help/badges/146/legendary"">Legendary</a> </p>
","17709","4972","730","https://lh6.googleusercontent.com/-VnQG7L5unxM/AAAAAAAAAAI/AAAAAAAAAD4/idJBt5gg_C0/photo.jpg?sz=128","","10829702"
"59503760","1","59522470","","2019-12-27 16:54:55","","13","259","<p>Given this bit of Kotlin:</p>

<pre><code>object OldTownRoad {
  const val COWBOY_HATS = ""from Gucci""
  const val WRANGLER = ""on my booty""
}
</code></pre>

<p>and this Java class:</p>

<pre><code>public class Scrap {
  @Named(OldTownRoad.COWBOY_HATS)
  public void lilNasXrefs() {
    System.out.println(OldTownRoad.COWBOY_HATS);
    System.out.println(OldTownRoad.WRANGLER);
  }
}
</code></pre>

<p>The compiler is happy with the <code>println()</code> calls. It complains about the use of <code>COWBOY_HATS</code> in the <code>@Named</code> annotation, saying ""Attribute value must be constant"", as seen in this Android Studio 3.5.3 screenshot:</p>

<p><img src=""https://i.stack.imgur.com/KTNDr.png"" alt=""Kotlin error""></p>

<p>I tried <code>@JvmStatic</code> and <code>@JvmField</code> on those <code>const val</code> declarations, but the compiler complains that neither are valid for <code>const</code> properties.</p>

<p>I get the same results from a <code>companion object</code>:</p>

<pre><code>class OldTownRoad {
  companion object {
    const val COWBOY_HATS = ""from Gucci""
    const val WRANGLER = ""on my booty""
  }
}
</code></pre>

<p>Is there some other Kotlin constant syntax that works when referenced from a Java annotation?</p>
","115145","","115145","","2019-12-29 18:48:31","2019-12-29 19:08:37","How Can We Reference Kotlin Constants in a Java Annotation Declaration?","<kotlin>","1","7","2","","","115145","839967","2009-05-31 16:20:08","CommonsWare","2020-03-14 23:24:39","https://commonsware.com","Pennsylvania, United States","<p>Mark Murphy, founder of CommonsWare, writes a lot.</p>

<h2>Second-Generation Books</h2>

<p>His most recent books have been focused on second-generation Android app development (Kotlin and the Android Jetpack):</p>

<ul>
<li><p><a href=""https://commonsware.com/Jetpack"" rel=""nofollow noreferrer""><em>Elements of Android Jetpack</em></a>, a new introductory book on Android app development, focused on second-generation techniques. Version 0.8 is available, with 880 pages, covering Android Studio 3.5.3 and up through Android 10.</p></li>
<li><p><a href=""https://commonsware.com/AndExplore"" rel=""nofollow noreferrer""><em>Exploring Android</em></a>, a series of step-by-step tutorials for building an Android app from scratch. This book is being rewritten to demonstrate using Kotlin and the Jetpack libraries. Version 1.0 is available, with 36 tutorials spanning 576 pages.</p></li>
<li><p><a href=""https://commonsware.com/Q"" rel=""nofollow noreferrer""><em>Elements of Android Q</em></a>, to help you deal with the changes introduced by Android 10 (code-named ""Q""), such as <a href=""https://commonsware.com/blog/2019/06/07/death-external-storage-end-saga.html"" rel=""nofollow noreferrer"">the changes in external storage access</a>. The final version is available, comprising 96 pages.</p></li>
<li><p><a href=""https://commonsware.com/Room"" rel=""nofollow noreferrer""><em>Elements of Android Room</em></a>, to help you incorporate Google's reactive object wrapper around SQLite. Version 0.2 is available, comprising 162 pages.</p></li>
<li><p><a href=""https://commonsware.com/Kotlin"" rel=""nofollow noreferrer""><em>Elements of Kotlin</em></a>, a guide to the Kotlin programming language, which is rapidly gaining in popularity for Android app development. Version 0.2 is available, comprising 342 pages.</p></li>
<li><p><a href=""https://commonsware.com/Coroutines"" rel=""nofollow noreferrer""><em>Elements of Kotlin Coroutines</em></a>, exploring Kotlin's new
first-class reactive programming system. Version 0.1 is available, comprising 170 pages.</p></li>
</ul>

<h2>First-Generation Books</h2>

<p>In the beginning, Android development was focused on Java and, partially, on the Android Support Library. Mark's earliest books share that focus:</p>

<ul>
<li><p><a href=""https://commonsware.com/Android"" rel=""nofollow noreferrer""><em>The Busy Coder's Guide to Android Development</em></a>, the first and largest book on Android app programming</p></li>
<li><p><a href=""https://commonsware.com/AndroidArch"" rel=""nofollow noreferrer""><em>Android's Architecture Components</em></a></p></li>
<li><p><a href=""https://commonsware.com/GraphQL"" rel=""nofollow noreferrer""><em>GraphQL and Android</em></a></p></li>
</ul>

<h2>Things Other Than Books</h2>

<p>He offers <a href=""https://training.commonsware.com/seminars/"" rel=""nofollow noreferrer"">training</a> on Android app development topics, from ""starting from scratch"" introductory material to advanced areas.</p>

<p>He also offers <a href=""https://commonsware.com/office-hours/"" rel=""nofollow noreferrer"">office hours chats</a> and <a href=""https://commonsware.com/consulting"" rel=""nofollow noreferrer"">consulting</a> on Android app development, in case you are interested in help beyond what fits the Stack Overflow model, the books, and the training.</p>

<p>Heck, he even has <a href=""http://commonsware.com/blog"" rel=""nofollow noreferrer"">a blog</a>.</p>

<p>All code in Stack Overflow questions, answers, or comments written by Mark Murphy are hereby licensed under <a href=""http://www.apache.org/licenses/LICENSE-2.0"" rel=""nofollow noreferrer"">the Apache Software License 2.0</a>, unless otherwise noted where that code appears on Stack Overflow.</p>
","237658","11157","7098","https://i.stack.imgur.com/wDnd8.png?s=128&g=1","","39846"
"54776759","1","55077293","","2019-02-19 23:59:00","","13","572","<p>Is it possible to execute a block of code without the implicit <code>with(global)</code> context that all scripts seem to have by default? For example, in a browser, would there be any way to set up a script so that a line such as</p>

<pre><code>const foo = location;
</code></pre>

<p>throws</p>

<blockquote>
  <p>Uncaught ReferenceError: location is not defined</p>
</blockquote>

<p>instead of accessing <code>window.location</code>, when <code>location</code> has not been declared first? Lacking that, is there a way that such an implicit reference could result in a warning of some sort? It can be a source of bugs when writing code (see below), so having a way to guard against it could be useful.</p>

<p>(Of course, due to ordinary scoping rules, it's possible to declare another variable with the same name using <code>const</code> or <code>let</code>, or within an inner block, to ensure that using that variable name references the new variable rather than the global property, but that's not the same thing.)</p>

<p>This may be similar to asking whether it's possible to stop referencing a property from within an <em>actual</em> <code>with</code> statement:</p>

<pre><code>const obj = { prop: 'prop' };
with (obj) {
  // how to make referencing ""prop"" from somewhere within this block throw a ReferenceError
}
</code></pre>

<p>It's known that <code>with</code> should not be used in the first place, but unfortunately it seems we have no choice when it comes to the <code>with(global)</code>, which occasionally saves a few characters at the expense of confusing bugs which pop up somewhat frequently: <a href=""https://stackoverflow.com/questions/40450783/javascript-function-close"">1</a> <a href=""https://stackoverflow.com/questions/29685364/boolean-variable-returns-as-string-from-javascript-function"">2</a> <a href=""https://stackoverflow.com/questions/10523701/using-the-variable-name-doesnt-work-with-a-js-object"">3</a> <a href=""https://stackoverflow.com/questions/30585775/simple-javascript-error-that-is-driving-me-insane"">4</a> <a href=""https://stackoverflow.com/questions/11334581/error-on-using-alert-in-javascript-property-alert-of-object-is-not-a-function"">5</a> <a href=""https://stackoverflow.com/questions/7844558/confirm-function-is-not-working"">6</a>. For example:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>var status = false;
if (status) {
  console.log('status is actually truthy!');
}</code></pre>
</div>
</div>
</p>

<p>(the issue here: <code>window.status</code> is a reserved property - when assigned to, it coerces the assigned expression to a string)</p>

<p>These sorts of bugs are the same reason that explicit use of <code>with</code> is discouraged or prohibited, yet the implicit <code>with(global)</code> continues to cause issues, even in strict mode, so figuring out a way around it would be useful.</p>
","9515207","","9515207","","2019-03-10 01:21:59","2019-03-10 14:29:25","How to avoid accidentally implicitly referring to properties on the global object?","<javascript><scope><with-statement>","5","9","4","","","9515207","170251","2018-03-19 07:56:42","CertainPerformance","2020-03-15 05:06:04","","Austin, TX, USA","<p>Check out my <a href=""https://github.com/CertainPerformance/Stack-Exchange-Userscripts"" rel=""nofollow noreferrer"">userscripts</a> for useful tools and UI improvements for Stack Exchange sites.</p>
","28723","3188","24875","https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1","","13173718"
"54057958","1","55348571","","2019-01-06 01:46:40","","13","2290","<p>I read these posts:</p>

<ul>
<li><a href=""https://stackoverflow.com/questions/12649573/how-do-you-build-a-singleton-in-dart"">How do you build a Singleton in Dart?</a></li>
<li><a href=""https://stackoverflow.com/questions/53956106/how-to-implement-singleton-pattern-in-dart-using-factory-constructors"">How to implement Singleton pattern in Dart using factory constructors?</a></li>
<li><a href=""http://www.peachpit.com/articles/article.aspx?p=2468332&amp;seqNum=4"" rel=""noreferrer"">Object Structures in Dart</a></li>
</ul>

<p>I'm having a little trouble understanding the difference between the following ways of creating singletons:</p>

<p><strong>1. Factory constructor</strong></p>

<pre><code>class SingletonOne {

  SingletonOne._privateConstructor();

  static final SingletonOne _instance = SingletonOne._privateConstructor();

  factory SingletonOne(){
    return _instance;
  }

}
</code></pre>

<p><strong>2. Static field with getter</strong></p>

<pre><code>class SingletonTwo {

  SingletonTwo._privateConstructor();

  static final SingletonTwo _instance = SingletonTwo._privateConstructor();

  static SingletonTwo get instance { return _instance;}

}
</code></pre>

<p><strong>3. Static field</strong></p>

<pre><code>class SingletonThree {

  SingletonThree._privateConstructor();

  static final SingletonThree instance = SingletonThree._privateConstructor();

}
</code></pre>

<p><strong>These are instantiated like this:</strong></p>

<pre><code>SingletonOne one = SingletonOne();
SingletonTwo two = SingletonTwo.instance;
SingletonThree three = SingletonThree.instance;
</code></pre>

<h2>Questions</h2>

<p><a href=""https://stackoverflow.com/a/53956224/3681880"">G√ºnter Z√∂chbauer said</a> about <a href=""https://stackoverflow.com/q/53956106/3681880"">this question</a>:</p>

<blockquote>
  <p>There is no need to use the factory constructor. The factory
  constructor was convenient when new was not yet optional because then
  it <code>new MyClass()</code> worked for classes where the constructor returned a
  new instance every time or where the class returned a cached instance.
  It was not the callers responsibility to know how and when the object
  was actually created.</p>
</blockquote>

<p>I don't understand how <code>new</code> being optional now makes the factory constructor unnecessary now. Before you couldn't do something like <code>SingletonTwo</code> or <code>SingletonThree</code> above?</p>

<p><a href=""https://stackoverflow.com/questions/53956106/how-to-implement-singleton-pattern-in-dart-using-factory-constructors#comment94751078_53956224"">G√ºnter Z√∂chbauer also said</a>:</p>

<blockquote>
  <p>You can also change <code>static final DbHelper _db = new
  DbHelper._constr();</code> to <code>static final DbHelper singleton = new
  DbHelper._constr();</code> and remove the singleton getter I suggested in my
  answer. It depends on your use case. You might not be able to use a
  field initializer if you need additional config values to create the
  instance. In your example it would be sufficient though.</p>
</blockquote>

<p>What are the use cases for each of the singleton patterns above (SingletonOne, SingletonTwo, and SingletonThree)? It would be helpful to see an example for each. Wouldn't the factory pattern be useful if you wanted to hide the fact that the class was a singleton (as described <a href=""https://theburningmonk.com/2013/09/dart-implementing-the-singleton-pattern-with-factory-constructors/"" rel=""noreferrer"">here</a>)?</p>
","3681880","","3681880","","2019-01-06 02:01:12","2020-01-05 22:21:35","Comparing ways to create singletons in Dart","<dart><singleton>","1","1","3","","","3681880","281555","2014-05-28 01:38:32","Suragch","2020-03-15 01:46:08","http://www.studymongolian.net","","<p>Why are you developing for a single platform when you could be creating apps for Android, iOS, the web (and soon Linux, Mac, and Windows) with a single code base? Check out <a href=""https://flutter.dev/"" rel=""nofollow noreferrer"">Flutter</a>.</p>

<p><a href=""https://medium.com/@studymongolian/flutter-and-dart-development-articles-981be9ef7b23"" rel=""nofollow noreferrer"">My Flutter and Dart articles</a></p>
","10525","12917","73","","","4531600"
"55390991","1","55391240","","2019-03-28 05:56:16","","13","1285","<p>Let's say I have a max 32-bit integer -</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const a =
  ((2 ** 32) - 1)
  
const b =
  parseInt(""11111111111111111111111111111111"", 2) // 32 bits, each is a one!
  
console.log(a === b) // true

console.log(a.toString(2))
// 11111111111111111111111111111111  (32 ones)

console.log(b.toString(2))
// 11111111111111111111111111111111  (32 ones)</code></pre>
</div>
</div>
</p>

<p>So far so good. But now let's say I want to make a 32-bit number using eight (8) 4-bit numbers. The idea is simple: shift (<code>&lt;&lt;</code>) each 4-bit sequence into position and add (<code>+</code>) them together -</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const make = ([ bit, ...more ], e = 0) =&gt;
  bit === undefined
    ? 0
    : (bit &lt;&lt; e) + make (more, e + 4)

const print = n =&gt;
  console.log(n.toString(2))

// 4 bits
print(make([ 15 ])) // 1111

// 8 bits
print(make([ 15, 15 ])) // 11111111

// 12 bits
print(make([ 15, 15, 15 ])) // 111111111111

// 16 bits
print(make([ 15, 15, 15, 15 ])) // 1111111111111111

// 20 bits
print(make([ 15, 15, 15, 15, 15 ])) // 11111111111111111111

// 24 bits
print(make([ 15, 15, 15, 15, 15, 15 ])) // 111111111111111111111111

// 28 bits
print(make([ 15, 15, 15, 15, 15, 15, 15 ])) // 1111111111111111111111111111

// almost there ... now 32 bits
print(make([ 15, 15, 15, 15, 15, 15, 15, 15 ])) // -1 :(</code></pre>
</div>
</div>
</p>

<p>I'm getting <code>-1</code> but the <strong>expected</strong> result is 32-bits of all ones, or <code>11111111111111111111111111111111</code>.</p>

<p>Worse, if I start with the expected outcome and work my way backwards, I get the expected result -</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const c =
 `11111111111111111111111111111111`

const d = 
  parseInt(c, 2)
  
console.log(d) // 4294967295

console.log(d.toString(2) === c) // true</code></pre>
</div>
</div>
</p>

<p>I tried debugging my make function to ensure there wasn't an obvious problem -</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const make = ([ bit, ...more ], e = 0) =&gt;
  bit === undefined
    ? `0`
    : `(${bit} &lt;&lt; ${e}) + ` + make (more, e + 4)

console.log(make([ 15, 15, 15, 15, 15, 15, 15, 15 ])) 
// (15 &lt;&lt; 0) + (15 &lt;&lt; 4) + (15 &lt;&lt; 8) + (15 &lt;&lt; 12) + (15 &lt;&lt; 16) + (15 &lt;&lt; 20) + (15 &lt;&lt; 24) + (15 &lt;&lt; 28) + 0</code></pre>
</div>
</div>
</p>

<p>The formula looks like it checks out. I thought maybe it was something to do with <code>+</code> and switched to bitwise or (<code>|</code>) which should effectively do the same thing here -</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const a =
  parseInt(""1111"",2)
  
const b =
  (a &lt;&lt; 0) | (a &lt;&lt; 4)
  
console.log(b.toString(2)) // 11111111

const c =
  b | (a &lt;&lt; 8)
  
console.log(c.toString(2)) // 111111111111</code></pre>
</div>
</div>
</p>

<p>However, I get the same bug with my <code>make</code> function when attempting to combine all eight (8) numbers -</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const make = ([ bit, ...more ], e = 0) =&gt;
  bit === undefined
    ? 0
    : (bit &lt;&lt; e) | make (more, e + 4)

const print = n =&gt;
  console.log(n.toString(2))


print(make([ 15, 15, 15, 15, 15, 15, 15 ])) // 1111111111111111111111111111 (28 bits)

print(make([ 15, 15, 15, 15, 15, 15, 15, 15 ])) // -1 :(</code></pre>
</div>
</div>
</p>

<p>What gives?</p>

<p>The goal is to convert eight (8) 4-bit integers into a single 32-bit integer using JavaScript - this is just my attempt. I'm curious where my function is breaking, but I'm open to alternative solutions.</p>

<p>I'd like to avoid converting each 4-bit integer to a binary string, mashing the binary strings together, then parsing the binary string into a single int. A numeric solution is preferred.</p>
","633183","","","","","2019-03-28 18:36:56","How to create a 32-bit integer from eight (8) 4-bit integers?","<javascript><twos-complement><base-conversion>","1","2","","","","633183","88485","2011-02-24 21:51:00","Thank you","2019-10-14 18:43:18","","","","14040","2147","3682","https://i.stack.imgur.com/RHeN9.png?s=128&g=1","","316828"
"56657639","1","56782485","","2019-06-18 22:05:50","","13","1290","<h2>Background</h2>

<p>Google (sadly) <a href=""https://www.xda-developers.com/android-q-storage-access-framework-scoped-storage/"" rel=""noreferrer""><strong>plans to ruin storage permission</strong></a> so that apps won't be able to access the file system using the standard File API (and file-paths). Many are <a href=""https://issuetracker.google.com/issues/128591846"" rel=""noreferrer""><strong>against it</strong></a> as it changes the way apps can access the storage and in many ways it's a restricted and limited API.</p>

<p>As a result, we will need to use SAF (storage access framework) entirely on some future Android version (on Android Q we can, at least temporarily, <a href=""https://developer.android.com/preview/privacy/scoped-storage"" rel=""noreferrer""><strong>use a flag</strong></a> to use the normal storage permission), if we wish to deal with various storage volumes and reach all files there.</p>

<p>So, for example, suppose you want to make a file manager and show all the storage volumes of the device, to show what the user can grant access to, and if you already have access to each, you just enter it. Such a thing seems very legitimate, but as I can't find a way to do it.</p>

<h2>The problem</h2>

<p>Starting from API 24 (<a href=""https://developer.android.com/reference/android/os/storage/StorageManager#getStorageVolumes()"" rel=""noreferrer""><strong>here</strong></a>), we finally have the ability to list all of the storage volumes, as such:</p>

<pre><code>    val storageManager = getSystemService(Context.STORAGE_SERVICE) as StorageManager
    val storageVolumes = storageManager.storageVolumes
</code></pre>

<p>And, for the first time ever, we can have an Intent to request access to a storageVolume (<a href=""https://developer.android.com/reference/android/os/storage/StorageVolume.html#createOpenDocumentTreeIntent()"" rel=""noreferrer""><strong>here</strong></a>). So if we want, for example, to request the user to grant access to the primary one (which will just start from there, actually, and not really ask anything), we could use this:</p>

<pre><code>startActivityForResult(storageManager.primaryStorageVolume.createOpenDocumentTreeIntent(), REQUEST_CODE__DIRECTORTY_PERMISSION)
</code></pre>

<p>Instead of <code>startActivityForResult(Intent(Intent.ACTION_OPEN_DOCUMENT_TREE), REQUEST_CODE__DIRECTORTY_PERMISSION)</code> , and hoping the user will choose the correct thing there.</p>

<p>And to finally get the access to what the user chose, we have this:</p>

<pre><code>@TargetApi(Build.VERSION_CODES.KITKAT)
override fun onActivityResult(requestCode: Int, resultCode: Int, data: Intent?) {
    super.onActivityResult(requestCode, resultCode, data)
    if (requestCode == REQUEST_CODE__DIRECTORTY_PERMISSION &amp;&amp; resultCode == Activity.RESULT_OK &amp;&amp; data != null) {
        val treeUri = data.data ?: return
        contentResolver.takePersistableUriPermission(treeUri, Intent.FLAG_GRANT_READ_URI_PERMISSION or Intent.FLAG_GRANT_WRITE_URI_PERMISSION)
        val pickedDir = DocumentFile.fromTreeUri(this, treeUri)
        ...
</code></pre>

<p>So far we can request for permission on the various storage volumes...</p>

<p>However, the problem arises if you want to know which you got permission to and which you haven't.</p>

<h2>What I've found</h2>

<ol>
<li><p>There is a video about ""Scoped Directory Access"" by Google (<a href=""https://www.youtube.com/watch?v=XBfQC4owUJg"" rel=""noreferrer""><strong>here</strong></a>), which they talk specifically about the StorageVolume class. They even give information about listening to mount-events of StorageVolume, but they don't tell anything about identifying those that we got access to.</p></li>
<li><p>The only ID of StorageVolume class is <a href=""https://developer.android.com/reference/android/os/storage/StorageVolume.html#getUuid()"" rel=""noreferrer""><strong>uuid</strong></a> , but it's not even guaranteed to return anything. And indeed it returns null in various cases. For example the case of the primary storage.</p></li>
<li><p>When using the <code>createOpenDocumentTreeIntent</code> function, I've noticed there is a Uri hidden inside, probably telling which to start with. It's inside the extras, in a key called ""android.provider.extra.INITIAL_URI"". When checking its value on the primary storage, for example, I got this:</p>

<p>content://com.android.externalstorage.documents/root/primary</p></li>
<li><p>When I look at the Uri I get in return in the onActivityResult, I get something a bit similar to #2, but different for the <code>treeUri</code> variable I've shown :</p>

<p>content://com.android.externalstorage.documents/tree/primary%3A</p></li>
<li><p>In order to get the list of what you have access to so far, you can use <a href=""https://developer.android.com/reference/android/content/ContentResolver#getPersistedUriPermissions()"" rel=""noreferrer""><strong>this</strong></a>:</p>

<p>val persistedUriPermissions = contentResolver.persistedUriPermissions</p></li>
</ol>

<p>This returns you a list of <a href=""https://developer.android.com/reference/android/content/UriPermission"" rel=""noreferrer""><strong>UriPermission</strong></a>, each has a Uri. Sadly, when I use it, I get the same as on #3, which I can't really compare to what I get from StorageVolume :</p>

<pre><code>content://com.android.externalstorage.documents/tree/primary%3A
</code></pre>

<p>So as you can see, I can't find any kind of mapping between the list of storage volumes and what the user grants.</p>

<p>I can't even know if the user has chosen a storage volume at all, because the function of <code>createOpenDocumentTreeIntent</code> only send the user to the StorageVolume, but it's still possible to select a folder instead.</p>

<p>The only thing that I do have, is a chunk of workaround functions I've found on other questions here, and I don't think they are reliable, especially now that we don't really have access to File API and file-path.</p>

<p>I've written them here, in case you think they are useful:</p>

<pre><code>@TargetApi(VERSION_CODES.LOLLIPOP)
private static String getVolumeIdFromTreeUri(final Uri treeUri) {
    final String docId = DocumentsContract.getTreeDocumentId(treeUri);
    final int end = docId.indexOf(':');
    String result = end == -1 ? null : docId.substring(0, end);
    return result;
}

private static String getDocumentPathFromTreeUri(final Uri treeUri) {
    final String docId = DocumentsContract.getTreeDocumentId(treeUri);
    //TODO avoid using spliting of a string (because it uses extra strings creation)
    final String[] split = docId.split("":"");
    if ((split.length &gt;= 2) &amp;&amp; (split[1] != null))
        return split[1];
    else
        return File.separator;
}

public static String getFullPathOfDocumentFile(Context context, DocumentFile documentFile) {
    String volumePath = getVolumePath(context, getVolumeIdFromTreeUri(documentFile.getUri()));
    if (volumePath == null)
        return null;
    DocumentFile parent = documentFile.getParentFile();
    if (parent == null)
        return volumePath;
    final LinkedList&lt;String&gt; fileHierarchy = new LinkedList&lt;&gt;();
    while (true) {
        fileHierarchy.add(0, documentFile.getName());
        documentFile = parent;
        parent = documentFile.getParentFile();
        if (parent == null)
            break;
    }
    final StringBuilder sb = new StringBuilder(volumePath).append(File.separator);
    for (String fileName : fileHierarchy)
        sb.append(fileName).append(File.separator);
    return sb.toString();
}

/**
 * Get the full path of a document from its tree URI.
 *
 * @param treeUri The tree RI.
 * @return The path (without trailing file separator).
 */
public static String getFullPathFromTreeUri(Context context, final Uri treeUri) {
    if (treeUri == null)
        return null;
    String volumePath = getVolumePath(context, getVolumeIdFromTreeUri(treeUri));
    if (volumePath == null)
        return File.separator;
    if (volumePath.endsWith(File.separator))
        volumePath = volumePath.substring(0, volumePath.length() - 1);
    String documentPath = getDocumentPathFromTreeUri(treeUri);
    if (documentPath.endsWith(File.separator))
        documentPath = documentPath.substring(0, documentPath.length() - 1);
    if (documentPath.length() &gt; 0)
        if (documentPath.startsWith(File.separator))
            return volumePath + documentPath;
        else return volumePath + File.separator + documentPath;
    return volumePath;
}

/**
 * Get the path of a certain volume.
 *
 * @param volumeId The volume id.
 * @return The path.
 */
private static String getVolumePath(Context context, final String volumeId) {
    if (VERSION.SDK_INT &lt; VERSION_CODES.LOLLIPOP)
        return null;
    try {
        final StorageManager storageManager = (StorageManager) context.getSystemService(Context.STORAGE_SERVICE);
        if (VERSION.SDK_INT &gt;= VERSION_CODES.N) {
            final Class&lt;?&gt; storageVolumeClazz = StorageVolume.class;
            final Method getPath = storageVolumeClazz.getMethod(""getPath"");
            final List&lt;StorageVolume&gt; storageVolumes = storageManager.getStorageVolumes();
            for (final StorageVolume storageVolume : storageVolumes) {
                final String uuid = storageVolume.getUuid();
                final boolean primary = storageVolume.isPrimary();
                // primary volume?
                if (primary &amp;&amp; PRIMARY_VOLUME_NAME.equals(volumeId)) {
                    return (String) getPath.invoke(storageVolume);
                }
                // other volumes?
                if (uuid != null &amp;&amp; uuid.equals(volumeId))
                    return (String) getPath.invoke(storageVolume);
            }
            return null;
        }
        final Class&lt;?&gt; storageVolumeClazz = Class.forName(""android.os.storage.StorageVolume"");
        final Method getVolumeList = storageManager.getClass().getMethod(""getVolumeList"");
        final Method getUuid = storageVolumeClazz.getMethod(""getUuid"");
        //noinspection JavaReflectionMemberAccess
        final Method getPath = storageVolumeClazz.getMethod(""getPath"");
        final Method isPrimary = storageVolumeClazz.getMethod(""isPrimary"");
        final Object result = getVolumeList.invoke(storageManager);
        final int length = Array.getLength(result);
        for (int i = 0; i &lt; length; i++) {
            final Object storageVolumeElement = Array.get(result, i);
            final String uuid = (String) getUuid.invoke(storageVolumeElement);
            final Boolean primary = (Boolean) isPrimary.invoke(storageVolumeElement);
            // primary volume?
            if (primary &amp;&amp; PRIMARY_VOLUME_NAME.equals(volumeId)) {
                return (String) getPath.invoke(storageVolumeElement);
            }
            // other volumes?
            if (uuid != null &amp;&amp; uuid.equals(volumeId))
                return (String) getPath.invoke(storageVolumeElement);
        }
        // not found.
        return null;
    } catch (Exception ex) {
        return null;
    }
}
</code></pre>

<h2>The question</h2>

<p>How can I map between the list of StorageVolume and the list of granted UriPermission ? </p>

<p>In other words, given a list of StorageVolume, how can I know to which I have access to and which I don't , and if I do have access, to open it and see what's inside?</p>
","878126","","878126","","2019-06-23 05:10:11","2019-06-29 21:44:07","How to check which StorageVolume we have access to, and which we don't?","<android><storage-access-framework>","2","1","5","","","878126","98917","2011-08-04 08:05:33","android developer","2020-03-15 00:36:55","","Israel","<p>Really like to develop Android apps &amp; libraries on my spare time.</p>

<p>Github website:
<a href=""https://github.com/AndroidDeveloperLB/"" rel=""nofollow noreferrer"">https://github.com/AndroidDeveloperLB/</a> </p>

<p>My spare time apps:
<a href=""https://play.google.com/store/apps/developer?id=AndroidDeveloperLB"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/developer?id=AndroidDeveloperLB</a></p>
","44922","888","41","https://i.stack.imgur.com/D5dZW.jpg","","796053"
"54446734","1","","","2019-01-30 17:56:42","","13","536","<p>I'm trying to dynamically create triggers, but ran into a confusing issue around using <code>sp_executesql</code> and passing parameters into the dynamic SQL.  The following simple test case works:</p>

<pre><code>DECLARE @tableName sysname = 'MyTable';
DECLARE @sql nvarchar(max) = N'
    CREATE TRIGGER TR_' + @tableName + N' ON ' + @tableName + N' FOR INSERT
        AS
        BEGIN
            PRINT 1
        END';
EXEC sp_executesql @sql
</code></pre>

<p>However, I want to be able to use <code>@tableName</code> (and other values) as variables within the script, so I passed it along to the <code>sp_executesql</code> call:</p>

<pre><code>DECLARE @tableName sysname = 'ContentItems';
DECLARE @sql nvarchar(max) = N'
    CREATE TRIGGER TR_' + @tableName + N' ON ' + @tableName + N' FOR INSERT
        AS
        BEGIN
            PRINT @tableName
        END';
EXEC sp_executesql @sql, N'@tableName sysname', @tableName=@tableName
</code></pre>

<p>When running the above, I get an error:</p>

<blockquote>
  <p>Msg 156, Level 15, State 1, Line 2<br>
  Incorrect syntax near the keyword 'TRIGGER'.</p>
</blockquote>

<p>After trying I few things, I've discovered that even if I don't use <code>@tableName</code> in the dynamic SQL at all, I still get this error.  And I also get this error trying to create a <code>PROCEDURE</code> (except, obviously, the message is <em>Incorrect syntax near the keyword 'PROCEDURE'.</em>)</p>

<p>Since the SQL runs fine either directly or when not supplying parameters to <code>sp_executesql</code>, this seems like I'm running into a true limitation in the SQL engine, but I don't see it documented anywhere.  Does anyone know if there is a way to accept to a dynamic <code>CREATE</code> script, or at least have insight into the underlying limitation that's being run into?</p>

<p><strong>Update</strong>
I can add a <code>PRINT</code> statement, and get the below SQL, which is valid, and runs successfully (when run directly).  I still get the error if there's nothing dynamic in the SQL (it's just a single string with no concatenation).</p>

<pre><code>CREATE TRIGGER TR_ContentItems ON ContentItems FOR INSERT
    AS
    BEGIN
        PRINT @tableName
    END
</code></pre>

<p>I also get the same error whether using <code>sysname</code> or <code>nvarchar(max)</code> for the parameter.</p>
","2688","","2688","","2019-01-30 18:45:57","2019-02-05 11:36:16","Is it possible to issue CREATE statements using sp_executesql with parameters?","<sql-server><dynamic-sql><sp-executesql>","7","11","1","","","2688","125664","2008-08-24 14:48:05","bdukes","2020-03-11 20:30:31","http://www.engagesoftware.com","St Louis, MO","<p>Brian Dukes has been working with <a href=""http://www.engagesoftware.com/"" rel=""nofollow"">Engage</a> professionally since 2006, but has been writing code since around 1998. Brian is very passionate about writing code that is easily maintainable, and helping others to do the same. He has been a leader in the DNN Platform community, and can often be found speaking at conferences and helping others on <a href=""http://twitter.com/BrianDukes"" rel=""nofollow"">twitter</a>, <a href=""http://github.com/bdukes"" rel=""nofollow"">GitHub</a>, and <a href=""http://stackoverflow.com/users/2688/bdukes"">Stack Overflow</a>. DNN recognized his community efforts by recognizing him as a DNN MVP starting 2012. Outside of work, Brian spends time with his family, serves Jesus at <a href=""http://www.citylightschurch.com"" rel=""nofollow"">City Lights Church</a>, as well as supporting social justice, fair trade, local, seasonable food, and international adoption. #SOreadytohelp</p>
","5428","3697","537","","","1955"
"57957168","1","57959084","","2019-09-16 12:44:24","","12","349","<p>I get the following warning:</p>

<pre><code>warning: 'X' is initialized and declared 'extern'
</code></pre>

<p>and it <a href=""https://stackoverflow.com/a/21585233/57428"">looks like it's no big deal</a> and I could disable it. Changing the code is not really a good idea in my case because I have no control over the code, I just need to compile it. So I want to disable the warning.</p>

<p>If it had a <code>-WSomeDefect</code> key next to it then I could use a <code>-Wno-SomeDefect</code> command line switch but it looks like there's no distinct switch for this warning.</p>

<p>How do I disable such warning? </p>
","57428","","","","","2019-09-24 15:23:51","How do I disable a gcc warning which has no command line switch?","<c++><c><gcc><command-line><gcc-warning>","4","15","1","","","57428","153385","2009-01-21 08:23:46","sharptooth","2020-03-13 15:09:48","","","","9911","25956","0","","","23033"
"56901198","1","56901549","","2019-07-05 10:22:05","","12","233","<p>I try following code to check if template are instantiated in unevaluated context:</p>

<pre class=""lang-cpp prettyprint-override""><code>#include ""foo.h""

template &lt;typename T = int&gt;
constexpr auto f(int)
// from declaration, foo(std::declval&lt;T&gt;()) is allowed.
// Even if definition would produce errors if instantiated
-&gt; decltype(foo(std::declval&lt;T&gt;()), void(), 42)
{
    return 42;
}
static_assert(f(0) == 42);
</code></pre>

<p>with <code>foo</code> as template function: (No errors)</p>

<pre class=""lang-cpp prettyprint-override""><code>template &lt;typename ...Ts&gt;
void foo(Ts... args)
{
    static_assert(sizeof...(Ts) == 42, ""!"");
    ((args += """"), ...);
}
</code></pre>

<p><a href=""http://coliru.stacked-crooked.com/a/5157042e07c2f778"" rel=""noreferrer"">Demo</a></p>

<p>with <code>foo</code> as regular functor: (No errors)</p>

<pre class=""lang-cpp prettyprint-override""><code>struct Foo
{
    template &lt;typename ...Ts&gt;
    void operator ()(Ts... args) const
    {
        static_assert(sizeof...(args) == 42, ""!"");
        ((args += """"), ...);
    }
} foo;
</code></pre>

<p><a href=""http://coliru.stacked-crooked.com/a/e41c4623dd4fe020"" rel=""noreferrer"">Demo</a></p>

<p>But <code>foo</code> as lambda: (Error)</p>

<pre class=""lang-cpp prettyprint-override""><code>auto foo = [](auto... args)
{
    static_assert(sizeof...(args) == 42, ""!""); // Triggers
    ((args += """"), ...);                       // spotted as invalid: int += const char*
};
</code></pre>

<p><a href=""http://coliru.stacked-crooked.com/a/559909484a8566d8"" rel=""noreferrer"">Demo</a></p>

<p>Is it normal that <code>operator()</code> of lamdba is instantiated?</p>

<p>gcc/clang have same behavior.</p>
","2684539","","","","","2019-07-05 10:46:15","Is it unspecified to instantiate template/lambda in unevaluated context?","<c++><templates><lambda><language-lawyer><instantiation>","1","0","4","","","2684539","143641","2013-08-15 02:08:44","Jarod42","2020-03-13 22:46:28","https://bitbucket.org/jarod42/ccccc","France","<p>.</p>
","9631","1345","755","https://www.gravatar.com/avatar/?s=128&d=identicon&r=PG&f=1","","3176925"
"54031546","1","54031547","","2019-01-04 00:11:03","","12","8191","<p>I want to create an empty list for a Flutter project.</p>

<pre><code>final prefs = await SharedPreferences.getInstance();
final myStringList = prefs.getStringList('my_string_list_key') ?? &lt;empty list&gt;;
</code></pre>

<p>I seem to remember there are multiple ways but one recommended way. How do I do it?</p>
","3681880","","3681880","","2019-11-22 01:00:47","2019-11-22 01:00:47","How to create an empty list in Dart","<list><dart><flutter>","1","0","","","","3681880","281555","2014-05-28 01:38:32","Suragch","2020-03-15 01:46:08","http://www.studymongolian.net","","<p>Why are you developing for a single platform when you could be creating apps for Android, iOS, the web (and soon Linux, Mac, and Windows) with a single code base? Check out <a href=""https://flutter.dev/"" rel=""nofollow noreferrer"">Flutter</a>.</p>

<p><a href=""https://medium.com/@studymongolian/flutter-and-dart-development-articles-981be9ef7b23"" rel=""nofollow noreferrer"">My Flutter and Dart articles</a></p>
","10525","12917","73","","","4531600"
"56647032","1","56648003","","2019-06-18 10:26:47","","12","814","<p>I seem to stumble across something interesting in <code>ArrayList</code> implementation that I can't wrap my head around. Here is some code that shows what I mean:</p>

<pre><code>public class Sandbox {

    private static final VarHandle VAR_HANDLE_ARRAY_LIST;

    static {
        try {
            Lookup lookupArrayList = MethodHandles.privateLookupIn(ArrayList.class, MethodHandles.lookup());
            VAR_HANDLE_ARRAY_LIST = lookupArrayList.findVarHandle(ArrayList.class, ""elementData"", Object[].class);
        } catch (Exception e) {
            e.printStackTrace();
            throw new RuntimeException();
        }
    }

    public static void main(String[] args) {

        List&lt;String&gt; defaultConstructorList = new ArrayList&lt;&gt;();
        defaultConstructorList.add(""one"");

        Object[] elementData = (Object[]) VAR_HANDLE_ARRAY_LIST.get(defaultConstructorList);
        System.out.println(elementData.length);

        List&lt;String&gt; zeroConstructorList = new ArrayList&lt;&gt;(0);
        zeroConstructorList.add(""one"");

        elementData = (Object[]) VAR_HANDLE_ARRAY_LIST.get(zeroConstructorList);
        System.out.println(elementData.length);

    }
}
</code></pre>

<p>The idea is if you create an <code>ArrayList</code> like this:</p>

<pre><code>List&lt;String&gt; defaultConstructorList = new ArrayList&lt;&gt;();
defaultConstructorList.add(""one"");
</code></pre>

<p>And look inside what the <code>elementData</code> (<code>Object[]</code> where all elements are kept) the it will report <code>10</code>. Thus you add one element - you get 9 additional slots that are un-used.</p>

<p>If, on the other hand, you do:</p>

<pre><code>List&lt;String&gt; zeroConstructorList = new ArrayList&lt;&gt;(0);
zeroConstructorList.add(""one"");
</code></pre>

<p>you add one element, <em>space reserved is just for that element</em>, nothing more. </p>

<p>Internally this is achieved via two fields:</p>

<pre><code>/**
 * Shared empty array instance used for empty instances.
 */
private static final Object[] EMPTY_ELEMENTDATA = {};

/**
 * Shared empty array instance used for default sized empty instances. We
 * distinguish this from EMPTY_ELEMENTDATA to know how much to inflate when
 * first element is added.
 */
private static final Object[] DEFAULTCAPACITY_EMPTY_ELEMENTDATA = {};
</code></pre>

<hr>

<p>When you create an <code>ArrayList</code> via <code>new ArrayList(0)</code> - <code>EMPTY_ELEMENTDATA</code> will be used.</p>

<p>When you create an <code>ArrayList</code> via <code>new Arraylist()</code> - <code>DEFAULTCAPACITY_EMPTY_ELEMENTDATA</code> is used.</p>

<p>The intuitive part from inside me - simply screams ""remove <code>DEFAULTCAPACITY_EMPTY_ELEMENTDATA</code>"" and let all the cases be handled with <code>EMPTY_ELEMENTDATA</code>; of course the code comment:</p>

<blockquote>
  <p>We distinguish this from EMPTY_ELEMENTDATA to know how much to inflate when first element is added</p>
</blockquote>

<p>does make sense, but why would one inflate to <code>10</code> (a lot more than I asked for) and the other one to <code>1</code> (exactly as much as I requested).</p>

<hr>

<p>Even if you use <code>List&lt;String&gt; zeroConstructorList = new ArrayList&lt;&gt;(0)</code>, and keep adding elements, eventually you will get to a point where <code>elementData</code> is bigger than the one requested:</p>

<pre><code>    List&lt;String&gt; zeroConstructorList = new ArrayList&lt;&gt;(0);
    zeroConstructorList.add(""one"");
    zeroConstructorList.add(""two"");
    zeroConstructorList.add(""three"");
    zeroConstructorList.add(""four"");
    zeroConstructorList.add(""five""); // elementData will report 6, though there are 5 elements only
</code></pre>

<p>But the rate at which it grows is smaller than the case of default constructor. </p>

<hr>

<p>This reminds me about <code>HashMap</code> implementation, where the number of buckets is almost always more than you asked for; but there that is done because of the need for ""power of two"" buckets needed, not the case here though.</p>

<p>So the question is - can someone explain this difference to me?</p>
","1059372","","1441122","","2019-06-21 03:23:43","2019-06-21 03:23:43","Why does using different ArrayList constructors cause a different growth rate of the internal array?","<java><arraylist><collections><java-8><java-12>","6","6","5","","","1059372","85526","2011-11-22 08:38:54","Eugene","2020-03-15 01:05:37","","Chisinau, Moldova","<p>I come to SO mainly to fail, and I do that quite successfully.</p>
","11867","9168","120","https://i.stack.imgur.com/W6OMC.png","","1056871"
"58201173","1","","","2019-10-02 12:06:07","","12","1385","<p>I have the following sequence happening:</p>

<ul>
<li><p>Main screen</p></li>
<li><p>Loading screen</p></li>
<li><p>Results screen</p></li>
</ul>

<p>On homepage, when someone clicks a button, I send them to the loading screen, thru:</p>

<p><code>this.$router.push({path: ""/loading""});</code></p>

<p>And once their task finishes, they are sent to the results screen via  </p>

<p><code>this.$router.push({path: ""/results/xxxx""});</code></p>

<p>The problem is, usually they want to go from results back to the main screen, but when they click back, they're sent to loading again which sends them back to results, so they're stuck in an infinite loop &amp; unable to go back to main screen.</p>

<p>Any ideas how to fix this? I'd ideally like if there was an option like:</p>

<p><code>this.$router.push({path: ""/loading"", addToHistory: false});</code></p>

<p>which would send them to the route without adding it to history.</p>
","49153","","","","","2019-10-24 17:40:57","How to push to vue-router without adding to history?","<javascript><vue.js><vue-router>","5","6","1","","","49153","213794","2008-12-26 04:39:37","Click Upvote","2020-03-12 00:12:05","https://ali.actor","Your favorite IDE","<p><a href=""https://ali.actor"" rel=""nofollow noreferrer"">https://ali.actor</a></p>
","30967","7194","718","","","20530"
"54460967","1","54461064","","2019-01-31 12:47:06","","12","524","<p>Consider these two programs and their attempted compilations.</p>

<pre><code>#include &lt;vector&gt;

int main() {
    std::vector&lt;struct Typo&gt; a; // Errors centered around `Typo` being an incomplete type
}
</code></pre>

<p>gcc 6.3, for example, gives error messages centered around <code>Typo</code> being an incomplete type, including</p>

<blockquote>
  <p>/usr/include/c++/6/bits/stl_vector.h:161:9: error: invalid use of incomplete type ‚Äò<code>struct main()::Typo</code>‚Äô</p>
</blockquote>

<pre><code>#include &lt;vector&gt;

int main() {
    std::vector&lt;Typo&gt; b; // Errors centred around `Typo` not being defined
}
</code></pre>

<p>gcc 6.3, for example, gives errors centered around <code>Typo</code> not being defined, including</p>

<blockquote>
  <p>prog.cpp:4:14: error: <code>‚ÄòTypo‚Äô</code> was not declared in this scope</p>
</blockquote>

<p>Both vector instantiations are errors of course, but what is the rationale for the differing diagnostic messages as cited in the program comments?</p>
","2380830","","2380830","","2019-01-31 13:06:32","2019-01-31 13:07:35","What is the rationale behind the differences between the compiler diagnostics issued when it sees std::vector<Typo> and std::vector<struct Typo>","<c++><compiler-errors>","1","16","2","","","2380830","203210","2013-05-14 08:33:02","Bathsheba","2020-03-14 19:38:32","","Mayfair, London","<p>I'm an equity partner at an asset management firm in London.</p>

<p>I read mathematics at Cambridge and have been using C and C++ for many years. I have an affection for Java. In my opinion, Microsoft Excel is the best application ever written.</p>
","16392","8120","7428","https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1","","2764833"
"54869278","1","54984333","","2019-02-25 15:14:35","","12","914","<h2>Background</h2>

<p>In the past, Google always shown the toolbar to have the title aligned to the left:</p>

<p><a href=""https://material.io/develop/android/components/app-bar-layout/"" rel=""nofollow noreferrer"">https://material.io/develop/android/components/app-bar-layout/</a></p>

<p>However, recently, it seems that on some of its apps, the title is centered, even if it doesn't have symmetric content on the left and right. Example is on <a href=""https://play.google.com/store/apps/details?id=com.google.android.apps.messaging&amp;hl=en"" rel=""nofollow noreferrer""><strong>""Messages"" app</strong></a>:</p>

<p><a href=""https://i.stack.imgur.com/ZvKyE.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/ZvKyE.png"" alt=""enter image description here""></a></p>

<p>And on <a href=""https://play.google.com/store/apps/details?id=com.google.android.apps.magazines&amp;hl=en"" rel=""nofollow noreferrer""><strong>""Google News"" app</strong></a> :</p>

<p><a href=""https://i.stack.imgur.com/BYmpn.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/BYmpn.png"" alt=""enter image description here""></a></p>

<p>It also got updated on the material guidelines, <a href=""https://material.io/design/components/app-bars-top.html#theming"" rel=""nofollow noreferrer""><strong>here</strong></a>. Example:</p>

<p><a href=""https://i.stack.imgur.com/RbVlr.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/RbVlr.png"" alt=""enter image description here""></a></p>

<p>Some people like to call it ""material design 2.0"", as it got various things updated.</p>

<h2>The problem</h2>

<p>While there are plenty of similar questions on StackOverflow from the time it was called ""ActionBar"" (example <a href=""https://stackoverflow.com/questions/26533510/android-toolbar-center-title-and-custom-font"">here</a> ), here it's different, because it should have the support library (AKA ""Android-X"") have a way to handle it correctly, because things have changed, and now Google should support it as it's a part of the guidelines and part of various Android apps.</p>

<h2>What I've tried</h2>

<p>I tried to add a view within the toolbar, but even by coloring the view, you can see that it's not really centered, automatically, and that's before adding more action-items or up-button :</p>

<p><a href=""https://i.stack.imgur.com/dEWFt.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/dEWFt.png"" alt=""enter image description here""></a></p>

<p><strong>activity_main.xml</strong></p>

<pre><code>&lt;androidx.coordinatorlayout.widget.CoordinatorLayout
        xmlns:android=""http://schemas.android.com/apk/res/android""
        xmlns:app=""http://schemas.android.com/apk/res-auto""
        xmlns:tools=""http://schemas.android.com/tools""
        android:layout_width=""match_parent""
        android:layout_height=""match_parent""
        tools:context="".MainActivity""&gt;

    &lt;com.google.android.material.appbar.AppBarLayout
            android:layout_height=""wrap_content""
            android:layout_width=""match_parent""
            android:theme=""@style/AppTheme.AppBarOverlay""&gt;

        &lt;androidx.appcompat.widget.Toolbar
                android:id=""@+id/toolbar""
                android:layout_width=""match_parent""
                android:layout_height=""?attr/actionBarSize""
                android:background=""?attr/colorPrimary""
                app:popupTheme=""@style/AppTheme.PopupOverlay""&gt;

            &lt;TextView android:layout_width=""match_parent"" android:layout_height=""match_parent"" android:text=""title""
                      android:gravity=""center"" android:background=""#33ff0000""
                      android:id=""@+id/titleTextView""/&gt;
        &lt;/androidx.appcompat.widget.Toolbar&gt;

    &lt;/com.google.android.material.appbar.AppBarLayout&gt;

&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;
</code></pre>

<p>This solution is similar to many others presented on other StackOverflow threads similar to this question, and just like there, it fails to really center the text, while on Google's attempt, it gets centered correctly, no matter the number of action items and other views around.</p>

<p>There is also a nicer workaround that I've come up with: have one toolbar on each side, and make the TextView have margin that is the max of both. There is even a library for this, ""<a href=""https://github.com/RaviKoradiya/Toolbar-Center-Title"" rel=""nofollow noreferrer"">Toolbar-Center-Title</a>""... But again, this is a workaround. Not what I'm asking about. </p>

<h2>The question</h2>

<p>Is there now an official way to have a centered title on the Toolbar, no matter how many action items there are, and no matter what's on the other side (up button, for example) ? </p>

<p>If so, how can this be done?</p>

<p>NOTE: Again, I'm not interested in workarounds. There are plenty of workarounds and I can think of such by myself.</p>
","878126","","878126","","2019-03-09 18:07:09","2019-03-09 18:07:09","Is there an official API for centered title on Toolbar like on popular Android apps, in the new material design?","<android><material-design><android-toolbar>","3","0","3","","","878126","98917","2011-08-04 08:05:33","android developer","2020-03-15 00:36:55","","Israel","<p>Really like to develop Android apps &amp; libraries on my spare time.</p>

<p>Github website:
<a href=""https://github.com/AndroidDeveloperLB/"" rel=""nofollow noreferrer"">https://github.com/AndroidDeveloperLB/</a> </p>

<p>My spare time apps:
<a href=""https://play.google.com/store/apps/developer?id=AndroidDeveloperLB"" rel=""nofollow noreferrer"">https://play.google.com/store/apps/developer?id=AndroidDeveloperLB</a></p>
","44922","888","41","https://i.stack.imgur.com/D5dZW.jpg","","796053"
"56606447","1","","","2019-06-15 00:36:14","","12","579","<p>I have data that is stored on a client's browser in-memory. For example, let's say the dataset is as follows:</p>

<pre><code>""name"" (string),     ""age"" (int32),   ""isAdult"" (bool)
""Tom""          ,     29               1
""Tom""          ,     14               0
""Dina""         ,     20               1
</code></pre>

<p>I would like to run non-trivial SQL statements on this data in javascript, such as:</p>

<pre><code>SELECT name, GROUP_CONCAT(age ORDER BY age) ages
FROM arrowData a1 JOIN arrowData a2 USING (name)
WHERE a1.isAdult != a2.isAdult
</code></pre>

<p>And I would get:</p>

<pre><code>""name"" (string),      ""ages"" (string)
""Tom""                 ""14,29""
</code></pre>

<p>The data that I have in javascript is stored in as apache Arrow (also used in connection with <a href=""https://perspective.finos.org/"" rel=""noreferrer"">Perspective</a>), and I'd like to execute SQL on that apache Arrow data as well. As a last resort, I think it would be possible to use <a href=""https://github.com/kripken/sql.js"" rel=""noreferrer"">sqllite in wasm</a>, but I'm hoping there might be a simpler way where I can query the Arrow data directly, without having to move it all into a sqllite store in order to execute a query on it.</p>

<p>Are there any ways to do this?</p>
","651174","","19750","","2019-07-15 14:19:17","2019-07-15 14:19:17","SQL on top of apache arrow in-browser?","<javascript><webassembly><apache-arrow><dremio>","2","8","1","","","651174","81063","2011-03-09 08:26:41","David542","2020-03-15 02:15:57","","","","5162","2352","10","","","328297"
"55417186","1","55420185","","2019-03-29 12:10:41","","12","620","<p>I've been looking for a way to check if a variadic macro argument list is empty. All solutions I find seem to be either quite complex or using non-standard extensions. </p>

<p>I think I've found an easy solution that is both compact and standard:</p>

<pre><code>#define is_empty(...) ( sizeof( (char[]){#__VA_ARGS__} ) == 1 )
</code></pre>

<p>Q: Are there any circumstances where my solution will fail or invoke poorly-defined behavior?</p>

<p>Based on C17 6.10.3.2/2 (the # operator): <em>""The character string literal corresponding to an empty argument is <code>""""</code>""</em>, I believe that <code>#__VA_ARGS__</code> is always well-defined. </p>

<p>Explanation of the macro:</p>

<ul>
<li>This creates a compound literal char array and initializes it by using a string literal.</li>
<li>No matter what is passed to the macro, all arguments will be translated to one long string literal. </li>
<li>In case the macro list is empty, the string literal will become <code>""""</code>, which consists only of a null terminator and therefore has size 1. </li>
<li>In all other cases, it will have a size greater than 1.</li>
</ul>
","584518","","","","","2019-03-31 23:19:48","Is this a valid way of checking if a variadic macro argument list is empty?","<c><c-preprocessor><c11><variadic-macros>","2","11","","","","584518","131235","2011-01-21 13:46:43","Lundin","2020-03-14 18:28:09","","","","16106","1887","6326","https://i.stack.imgur.com/RZLo7.png?s=128&g=1","","285695"
"56162109","1","","","2019-05-16 06:27:53","","12","222","<p>I'm trying to import the below excel file present in the azure blob storage into sql server</p>

<p><strong>EXCEL File</strong></p>

<p><a href=""https://i.stack.imgur.com/R1FJm.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/R1FJm.png"" alt=""enter image description here""></a></p>

<p><strong>Query</strong></p>

<pre><code>SELECT * 
    FROM OPENROWSET(
        BULK 'container/testfile.xlsx', 
        DATA_SOURCE = 'ExternalSrcImport',
        FORMATFILE='container/test.fmt', FORMATFILE_DATA_SOURCE = 'ExternalSrcImport',
        codepage = 1252,
        FIRSTROW = 1
        ) as data
</code></pre>

<p><strong>Format file</strong> </p>

<pre><code>10.0  
4  
1       SQLCHAR       0       7       ""\t""     1     DepartmentID     """"  
2       SQLCHAR       0       100     ""\t""     2     Name             SQL_Latin1_General_CP1_CI_AS  
3       SQLCHAR       0       100     ""\t""     3     GroupName        SQL_Latin1_General_CP1_CI_AS  
4       SQLCHAR       0       24      ""\r\n""   4     ModifiedDate     """"  
</code></pre>

<p><strong>Illustration of Format File</strong> </p>

<p><a href=""https://i.stack.imgur.com/svGi6.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/svGi6.png"" alt=""enter image description here""></a></p>

<p>when I execute the query, I'm getting the below error</p>

<blockquote>
  <p>Msg 4863, Level 16, State 1, Line 210 Bulk load data conversion error
  (truncation) for row 1, column 1 (DepartmentID).</p>
</blockquote>

<p>looks like field terminator in the format file is not working, any ideas to import the file ?</p>
","3349551","","3349551","","2019-05-20 04:30:44","2019-05-22 20:46:39","Data Truncation issue while importing excel from Azure Blob storage to Sql Server","<sql><sql-server><azure><azure-blob-storage><openrowset>","1","11","","","","3349551","81219","2014-02-25 04:34:46","P‡Æ∞‡Æ§‡ØÄ‡Æ™‡Øç","2020-03-13 15:25:52","https://www.linkedin.com/in/thanga-pradeep-t-6bb52a98?trk=hp-identity-name","Chennai, India","<p>My original name is Thanga Pradeep and I am a C#/Sql Server Developer</p>

<p>Best answer I ever wrote in SO(based on complexity not on votes)</p>

<ul>
<li><a href=""http://stackoverflow.com/a/41805657/3349551"">Calculation in Sql Server</a></li>
</ul>

<p>Some of my answers I enjoyed writing  </p>

<ol>
<li><a href=""http://stackoverflow.com/questions/30515158/simplify-ms-sql-statements/30515226#30515226"">Simplify MS SQL Statements</a></li>
<li><a href=""http://stackoverflow.com/questions/27728225/generate-a-sequnce-number-for-every-3-rows-in-sql/27728232#27728232"">Generate a sequnce number for every 3 rows in SQL</a></li>
<li><a href=""http://stackoverflow.com/questions/34454867/difference-between-filtering-queries-in-join-and-where/34454902#34454902"">Difference between filtering queries in JOIN and WHERE?</a></li>
<li><a href=""http://stackoverflow.com/questions/27606518/how-to-drop-all-tables-from-database-with-one-sql-query/27606618#27606618"">How to drop all tables from a database with one SQL query?</a></li>
<li><a href=""http://stackoverflow.com/questions/28948583/sql-server-coalesce-data-set/28948682#28948682"">SQL Server Coalesce data set</a></li>
</ol>

<p>Also 44th to get <a href=""http://stackoverflow.com/help/badges/118/sql-server""><strong>Sql Server</strong></a> Gold Badge</p>

<p>I learned many things from below <a href=""http://stackoverflow.com/questions/tagged/sql-server"">Sql Server</a> gurus</p>

<ul>
<li><a href=""http://stackoverflow.com/users/61305/aaron-bertrand"">Aaron Bertrand</a></li>
<li><a href=""http://stackoverflow.com/users/13302/marc-s"">Marc_S</a></li>
<li><a href=""http://stackoverflow.com/users/73226/martin-smith"">Martin Smith</a></li>
<li><a href=""http://stackoverflow.com/users/27535/gbn"">gbn</a></li>
</ul>
","7665","2539","954","https://i.stack.imgur.com/xodSn.jpg?s=128&g=1","","4078567"
"57926891","1","57927169","","2019-09-13 15:57:47","","12","178","<p>Consider the following example:</p>

<pre><code>struct Parent
{
    Parent ();

    Parent (const Parent &amp;);
};

struct Child : public Parent
{
    using Parent::Parent;
};

Parent p;

Child c (p);
</code></pre>

<p>This was taken from the following question: <a href=""https://stackoverflow.com/q/57926023/481267"">Why &quot;an inherited constructor is not a candidate for initialization from an expression of the same or derived type&quot;?</a></p>

<p>That original question asked about C++11. In C++11, there is wording that prevents <code>Child</code> from acquiring a constructor that takes <code>const Parent&amp;</code>:</p>

<blockquote>
  <p>For each non-template constructor in the candidate set of inherited constructors other than a constructor having no parameters or a copy/move constructor having a single parameter, a constructor is implicitly declared with the same constructor characteristics unless there is a user-declared constructor with the same
  signature in the class where the <em>using-declaration</em> appears.</p>
</blockquote>

<p><a href=""http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/n4429.html"" rel=""noreferrer"">N4429</a> significantly changed the specification of inheriting constructors and was considered retroactive to C++11 (I think?). The purpose of N4429 was to cause the base class constructors to be visible as if they were derived class constructors, rather than declaring derived class constructors that delegate to base class constructors. In the first version of N4429, there is the following wording, keeping the restriction from C++11:</p>

<blockquote>
  <p>When a <em>using-declaration</em> declares that a class inherits constructors from a base class, the default constructor, copy constructor, and move constructor (if any) of the base class are excluded from the set of introduced declarations.</p>
</blockquote>

<p>However, in the updated version of this paper, <a href=""http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2015/p0136r0.html"" rel=""noreferrer"">P0136R0</a>, this wording is no longer present, and no explanation is given as to why. The paper was revised once more and then merged into the standard. So in C++17, I cannot see any rule that would prevent the above code from compiling.</p>

<p>Nonetheless, <a href=""http://coliru.stacked-crooked.com/a/294e4de3cd7d2351"" rel=""noreferrer"">GCC and Clang both reject it</a>. Clang says:</p>

<blockquote>
  <p>an inherited constructor is not a candidate for initialization from an expression of the same or derived type</p>
</blockquote>

<p>However, I cannot find anything in the standard that says anything like this.</p>

<p>Is this code ill-formed in C++17? And if so, why?</p>
","481267","","963864","","2019-09-13 16:30:18","2019-09-13 16:31:53","Inheritance of copy constructors in C++17","<c++><inheritance><language-lawyer><c++17><copy-constructor>","1","1","1","","","481267","82364","2010-10-20 04:59:07","Brian","2020-03-14 23:55:30","http://brianbi.ca","New York, NY, USA","<p>C++ programmer on the Low Latency team at Citadel Securities. Opinions are mine and not those of my employer. I can be reached by email at bbi5291@gmail.com, but I can't promise that I'll reply.</p>
","16280","1795","923","https://i.stack.imgur.com/DMvoo.png?s=128&g=1","","222578"
"56020455","1","","","2019-05-07 10:21:15","","12","252","<p><code>Foo</code> is a component that should be rendered only once. This can be used for performance optimization, although this is purely theoretical question that doesn't address any specific coding problem.</p>

<p>This can be achieved by using <code>shouldComponentUpdate</code> or pure components, this is a recommended way to do this:</p>

<pre><code>const Foo = () =&gt; &lt;p&gt;{Math.random()}&lt;/p&gt;;
const FooOnce = React.memo(Foo);
const Bar = () =&gt; {
  const [, update] = useState();

  useEffect(() =&gt; {
    setTimeout(() =&gt; {
      update({});
    }, 500);
  }, []);

  return &lt;&gt;
    &lt;FooOnce/&gt;
  &lt;/&gt;;
};
</code></pre>

<p>Or by keeping a reference to React element object and reusing it:</p>

<pre><code>const fooOnce = &lt;Foo/&gt;;
const Bar = () =&gt; {
  const [, update] = useState();

  useEffect(() =&gt; {
    setTimeout(() =&gt; {
      update({});
    }, 500);
  }, []);

  return &lt;&gt;
    {fooOnce}
  &lt;/&gt;;
};
</code></pre>

<p>That a component isn't re-rendered when element object is reused is intuitive but I know this from my own experience and not from official sources. This may result in less <code>createElement</code> calls than in pure components, so this could be considered a benefit.</p>

<p>Is this behaviour documented and expected in all React versions?</p>

<p>Are there reasons to not reuse elements this way to prevent component updates?</p>
","3731501","","3731501","","2019-05-11 05:48:46","2019-05-13 10:12:08","Reused React element prevents component updates","<reactjs>","2","2","1","","","3731501","112430","2014-06-11 19:11:43","Estus Flask","2020-03-14 21:33:11","","","","6267","3838","376","https://www.gravatar.com/avatar/e4783dfa8ec98c884e61d29f2192ac97?s=128&d=identicon&r=PG&f=1","","4600649"
"54044022","1","54075275","","2019-01-04 18:07:55","","12","970","<p>I have an awkward CSV file which has multiple delimiters: the delimiter for the non-numeric part is <code>','</code>, for the numeric part <code>';'</code>. I want to construct a dataframe only out of the numeric part as efficiently as possible.</p>

<p>I have made 5 attempts: among them, utilising the <code>converters</code> argument of <code>pd.read_csv</code>, using regex with <code>engine='python'</code>, using <code>str.replace</code>. They are all more than 2x slower than reading the entire CSV file with no conversions. This is prohibitively slow for my use case.</p>

<p>I understand the comparison isn't like-for-like, but it does demonstrate the overall poor performance is <em>not</em> driven by I/O. Is there a more efficient way to read in the data into a numeric Pandas dataframe? Or the equivalent NumPy array?</p>

<p>The below string can be used for benchmarking purposes.</p>

<pre><code># Python 3.7.0, Pandas 0.23.4

from io import StringIO
import pandas as pd
import csv

# strings in first 3 columns are of arbitrary length
x = '''ABCD,EFGH,IJKL,34.23;562.45;213.5432
MNOP,QRST,UVWX,56.23;63.45;625.234
'''*10**6

def csv_reader_1(x):
    df = pd.read_csv(x, usecols=[3], header=None, delimiter=',',
                     converters={3: lambda x: x.split(';')})
    return df.join(pd.DataFrame(df.pop(3).values.tolist(), dtype=float))

def csv_reader_2(x):
    df = pd.read_csv(x, header=None, delimiter=';',
                     converters={0: lambda x: x.rsplit(',')[-1]}, dtype=float)
    return df.astype(float)

def csv_reader_3(x):
    return pd.read_csv(x, usecols=[3, 4, 5], header=None, sep=',|;', engine='python')

def csv_reader_4(x):
    with x as fin:
        reader = csv.reader(fin, delimiter=',')
        L = [i[-1].split(';') for i in reader]
        return pd.DataFrame(L, dtype=float)

def csv_reader_5(x):
    with x as fin:
        return pd.read_csv(StringIO(fin.getvalue().replace(';',',')),
                           sep=',', header=None, usecols=[3, 4, 5])
</code></pre>

<p>Checks:</p>

<pre><code>res1 = csv_reader_1(StringIO(x))
res2 = csv_reader_2(StringIO(x))
res3 = csv_reader_3(StringIO(x))
res4 = csv_reader_4(StringIO(x))
res5 = csv_reader_5(StringIO(x))

print(res1.head(3))
#        0       1         2
# 0  34.23  562.45  213.5432
# 1  56.23   63.45  625.2340
# 2  34.23  562.45  213.5432

assert all(np.array_equal(res1.values, i.values) for i in (res2, res3, res4, res5))
</code></pre>

<p>Benchmarking results:</p>

<pre><code>%timeit csv_reader_1(StringIO(x))  # 5.31 s per loop
%timeit csv_reader_2(StringIO(x))  # 6.69 s per loop
%timeit csv_reader_3(StringIO(x))  # 18.6 s per loop
%timeit csv_reader_4(StringIO(x))  # 5.68 s per loop
%timeit csv_reader_5(StringIO(x))  # 7.01 s per loop
%timeit pd.read_csv(StringIO(x))   # 1.65 s per loop
</code></pre>

<h2>Update</h2>

<p>I'm open to using command-line tools as a last resort. To that extent, I have included such an answer. My hope is there is a pure-Python or Pandas solution with comparable efficiency.</p>
","9209546","","9209546","","2019-01-13 15:50:48","2019-01-16 08:50:56","Reading data from CSV into dataframe with multiple delimiters efficiently","<python><pandas><performance><csv><dataframe>","6","8","5","","","9209546","115429","2018-01-12 14:47:22","jpp","2020-03-14 23:20:20","","London, UK","","18866","7976","3679","https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1","","12672477"