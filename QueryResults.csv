Id,PostTypeId,AcceptedAnswerId,ParentId,CreationDate,DeletionDate,Score,ViewCount,Body,OwnerUserId,OwnerDisplayName,LastEditorUserId,LastEditorDisplayName,LastEditDate,LastActivityDate,Title,Tags,AnswerCount,CommentCount,FavoriteCount,ClosedDate,CommunityOwnedDate,Id,Reputation,CreationDate,DisplayName,LastAccessDate,WebsiteUrl,Location,AboutMe,Views,UpVotes,DownVotes,ProfileImageUrl,EmailHash,AccountId
"54994793","6","","","2019-03-05 03:01:14","","10540","","<p>Hello I'm <a href=""https://stackoverflow.com/users/6451573/jean-fran%C3%A7ois-fabre"">Jean-François Fabre</a>, 47 y/o from France.</p>

<p>Since I joined in 2016, I'm doing my best to moderate the site given my 40k+ reputation (so max of 30 delete votes) and gold badges.</p>

<p>I've voted 10000+ times to close and 14000+ times to delete for a total of 37000+ votes.</p>

<p>I'm also 15th all-time reviewer in <a href=""https://stackoverflow.com/review/low-quality-posts/stats"">NAA queue</a>, contributor at <a href=""https://chat.stackoverflow.com/rooms/41570/so-close-vote-reviewers"">SOCVR</a> (not only for the jokes), and
avid reader / occasional answerer on meta (70+ answers).</p>

<p>How I'd see my moderator duties:</p>

<ul>
<li>Fight spam &amp; non-answers</li>
<li>block unclear/off-topic questions &amp; useless duplicates</li>
<li>Counter rude &amp; abusive comments, enforce mutual respect</li>
<li>Keep the site useable by minimizing noise</li>
<li>Fight voting fraud</li>
<li>Justify my actions when needed on meta</li>
</ul>

<p>That, without losing touch of the reality of the main site: keep on asking &amp; answering questions on my favourite Python &amp; C tags</p>

<p><a href=""https://meta.stackoverflow.com/a/380897/6451573"">I answer your questions</a></p>
","6451573","","6451573","","2019-03-08 20:57:18","2019-03-08 20:57:18","","","","40","","","2019-03-05 03:01:14","6451573","117912","2016-06-10 19:19:53","Jean-François Fabre","2020-03-14 22:18:35","","Toulouse, France","<p>BY DAY: coding python/windows stuff, optimize C/C++/Ada build chains, trying to coerce my managers into giving me interesting projects, help people on all the company's projects where I can, answering questions and moderating (emergencies only) on StackOverflow</p>

<p>BY NIGHT: managing the kids, coding python &amp; C++ &amp; 68k asm stuff, retrogaming, retrocoding, playing the piano, answering questions and moderating on StackOverflow</p>

<p>More on my <a href=""https://www.linkedin.com/in/jean-fran%C3%A7ois-fabre-a00a781/"" rel=""nofollow noreferrer"">linkedIn profile</a>. Please no solliciting on that one, or contact for my moderator actions (I'll report those systematically).</p>
","40123","9502","17356","https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1","","8614021"
"54994048","6","","","2019-03-05 01:17:01","","7256","","<p>Hi, my name is coldspeed. I am a 24 y/o grad student at <a href=""https://www.usc.edu"" rel=""nofollow noreferrer"">USC</a>, and an incoming full timer at Google. I'd like to nominate myself for the position of moderator. </p>

<p>I would make a good moderator because</p>

<ul>
<li>I care very much about the quality of content because I understand its importance. (over 4K edits, 12K up/downvotes, and 6K close votes) </li>
<li>I am a diligent flagger (over 2K helpful flags) and take plagiarism very seriously.</li>
<li>I am very responsive to feedback and criticism.</li>
<li>I visit Stack Overflow every day (visited 833 days, 234 consecutive)</li>
</ul>

<p>I would not make a good moderator because</p>

<ul>
<li>I have taken actions in the past that the community did not agree with. </li>
<li>I am younger than most of the other nominees, and admittedly not as experienced dealing with people and situations.</li>
</ul>

<p>I've only been an active member for the last two years, and I understand I still have a long way to go before I can earn your vote of confidence. However, I do very much care for this site as it has done so much for my career thus far, and I hope to be able to give back just as much (if not more) as Stack Overflow has given to me. </p>

<p><a href=""https://bit.ly/2SI6qDe"" rel=""nofollow noreferrer""><em>Questionnaire</em></a></p>
","4909087","","4909087","","2019-03-05 06:19:40","2019-03-05 06:19:40","","","","46","","","2019-03-05 01:17:01","4909087","195757","2015-05-17 14:31:31","cs95","2020-03-15 02:58:01","","At an ipython shell near you","<h2><a href=""https://meta.stackoverflow.com/questions/386324/the-stack-overflow-i-wish-to-build-and-participate-in-is-no-longer-supported"">The Stack Overflow I wish to build and participate in no longer exists.</a></h2>

<h1><a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">My pandas canonicals</a> ⬅ please critique!</h1>

<p>When asking a question here, please describe the problem you are trying to solve, rather than asking about the method you <em>think</em> is the solution to that problem. This is known as the <a href=""https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem"">XY problem</a> and can easily be averted if you ask the right questions. This will make it easy for us to understand what you're trying to do, and you may even receive better suggestions that you may never have considered yourself. </p>

<h3><strong>Rep = participation</strong></h3>

<h3><strong>Badges = quality</strong></h3>

<h3><strong><s>1 like = 1 prayer </s> 1 upvote = 1 thanks</strong></h3>

<p><a href=""https://stackoverflow.com/users/4909087/coldspeed""><img src=""https://stackoverflow.com/users/flair/4909087.png"" width=""208"" height=""58"" alt=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers"" title=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers""></a></p>

<p><a href=""https://i.stack.imgur.com/YfCOa.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YfCOa.gif"" alt=""enter image description here""></a></p>

<p><a href=""https://stackoverflow.com/a/53915214/4909087"">Some people, when confronted with a problem, think ""I know, I'll use regular expressions."" Now they have two problems.</a></p>

<hr>

<h2>(Actively Maintained) Pandas Canonicals</h2>

<p>The full list is on <a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">GitHub</a>.</p>

<ul>
<li><a href=""https://stackoverflow.com/q/53645882/pandas-merging-101"">Pandas Merging 101</a>: Everything you ever wanted to know about merging and more</li>
<li><a href=""https://stackoverflow.com/a/55557758"">How to iterate over a DataFrame.</a> Spoler alert: don't!</li>
<li><a href=""https://stackoverflow.com/a/54508052"">How to convert a DataFrame to NumPy array</a>: from 0.24, use <code>df.to_numpy()</code></li>
<li><a href=""https://stackoverflow.com/a/56746204/4909087"">The Right Way to create an empty DataFrame and fill it</a>: Use a list to grow your data, not a DataFrame</li>
<li><a href=""https://stackoverflow.com/a/59242208/4909087"">Don't use <code>inplace=True</code>!</a></li>
</ul>

<h2>Other Posts I'm Proud Of</h2>

<ul>
<li>Pandas Merging 101 (see above)</li>
<li><a href=""https://stackoverflow.com/a/50312321/4909087"">Best way to interleave two lists</a></li>
<li><a href=""https://stackoverflow.com/questions/47007680/strange-use-of-pythons-and-operator/47007761#47007761"">How do &quot;and&quot; and &quot;or&quot; act with non-boolean values?</a></li>
<li><a href=""https://stackoverflow.com/a/46333422/4909087"">So you think you know recursion?</a></li>
</ul>

<p>In addition to this, some of my <a href=""https://stackoverflow.com/search?tab=votes&amp;q=user%3a4909087%20perfplot"">answers that use <code>perfplot</code></a> are worth a read.</p>

<hr>

<h3>236th awardee of the <a href=""https://stackoverflow.com/help/badges/146/legendary"">Legendary</a> badge.</h3>

<p>Thanks, Stack Overflow! I love the shirt :-)</p>

<p><a href=""https://i.stack.imgur.com/7YKND.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7YKND.jpg"" alt=""enter image description here""></a></p>
","57988","9183","7537","https://i.stack.imgur.com/LmD3e.png?s=128&g=1","","6321039"
"55068325","6","","","2019-03-08 17:39:45","","5712","","<p>Hi! I'm Jason, known around these parts as Makoto. I'm a self-acknowledged Meta-hound and I consider myself to be an advocate for the ultimate objective of this site.</p>

<p>I would like to throw my hat into the ring of consideration for moderator. If the community will have me, I would be honored to take on the responsibility.</p>

<p>To me, a moderator should be capable of:</p>

<ul>
<li>Handling flags</li>
<li>Dealing with tricky situations which arise on the main site, or Meta</li>
<li>Being an ambassador of the site and its goals</li>
<li>Keeping your cool when the rest of the site is spontaneously combusting</li>
</ul>

<p>…and I feel that I can absolutely rise to those challenges.</p>

<p>While I believe that my reputation precedes me, I feel that my actions speak louder than the words I'd type here. Feel encouraged to peruse or question any of my moderator-like activity on the site, and I'll rise to address any concerns you have.</p>
","1079354","","1079354","","2019-03-08 18:18:11","2019-03-08 18:18:11","","","","14","","","2019-03-08 17:39:45","1079354","89661","2011-12-03 20:07:05","Makoto","2020-03-15 01:44:50","https://keybase.io/makototheknight","Denver, CO, United States","<h1>I am suspending all moderation-like activities on Stack Overflow until further notice.</h1>

<p>The very company which has been made reputable and profitable on the volunteer efforts of the curators and janitors of the site has cast us low, and has routinely undermined our efforts to build the community we wish to have.</p>

<p>Until such a time comes in which our efforts are valued at the highest levels, I will not be doing any further moderation-like work.</p>
","19139","14514","15424","","","1082858"
"56264744","2","","56264674","2019-05-22 20:44:13","","388","","<p>This has to do with <a href=""https://en.cppreference.com/w/cpp/language/operator_precedence"" rel=""noreferrer"">operator precedence</a>.  </p>

<pre><code>if (i = 1 &amp;&amp; i == 0)
</code></pre>

<p>is not</p>

<pre><code>if ((i = 1) &amp;&amp; (i == 0))
</code></pre>

<p>because both <code>&amp;&amp;</code> and <code>==</code> have a higher precedence than <code>=</code>.  What it really works out to is</p>

<pre><code>if (i = (1 &amp;&amp; (i == 0)))
</code></pre>

<p>which assigns the result of <code>1 &amp;&amp; (i == 0)</code> to <code>i</code>.  So, if <code>i</code> starts at <code>0</code> then <code>i == 0</code> is <code>true</code>, so <code>1 &amp;&amp; true</code> is <code>true</code> (or <code>1</code>), and then <code>i</code> gets set to <code>1</code>.  Then since <code>1</code> is true, you enter the if block and print the value you assigned to <code>i</code>.</p>
","4342498","","5049185","","2019-05-29 16:53:00","2019-05-29 16:53:00","","","","8","","","","4342498","132431","2014-12-09 17:25:47","NathanOliver","2020-03-15 02:15:07","","Chicago Land Area","<p>I have been programming for the last 20 years and I primarily use C++ and PL/SQL today.  I have used C#, Java and VB.  I tend towards programming algorithms but I have made a few database based enterprise application to plug into an existing application to extend functionality.</p>

<p>Join us at the <a href=""http://chat.stackoverflow.com/rooms/41570/so-close-vote-reviewers"">SO Close Vote Reviewers Chat Room</a> If you want to help with coordinated site cleanup.</p>
","18852","4145","7007","https://i.stack.imgur.com/l3j88.jpg?s=128&g=1","","5460139"
"57259339","2","","57259126","2019-07-29 18:13:37","","344","","<p>Rust originally <em>did</em> enable LLVM's <code>noalias</code> attribute, but this <a href=""https://github.com/rust-lang/rust/issues/54462"" rel=""noreferrer"">caused miscompiled code</a>. When all supported LLVM versions no longer miscompile the code, <a href=""https://github.com/rust-lang/rust/issues/54878"" rel=""noreferrer"">it will be re-enabled</a>.</p>

<p>If you add <code>-Zmutable-noalias=yes</code> to the compiler options, you get the expected assembly:</p>

<pre class=""lang-none prettyprint-override""><code>adds:
        mov     eax, dword ptr [rsi]
        add     eax, eax
        add     dword ptr [rdi], eax
        ret
</code></pre>

<p>Simply put, Rust put the equivalent of C's <code>restrict</code> keyword <strong>everywhere</strong>, far more prevalent than any usual C program. This exercised corner cases of LLVM more than it was able to handle correctly. It turns out that C and C++ programmers simply don't use <code>restrict</code> as frequently as <code>&amp;mut</code> is used in Rust.</p>

<p>This has happened <strong>multiple times</strong>.</p>

<ul>
<li>Rust 1.0 through 1.7 — <code>noalias</code> enabled</li>
<li>Rust 1.8 through 1.27 — <code>noalias</code> disabled</li>
<li>Rust 1.28 through 1.29 — <code>noalias</code> enabled</li>
<li>Rust 1.30 through ??? — <code>noalias</code> disabled</li>
</ul>

<h3>Related Rust issues</h3>

<ul>
<li><p>Current case</p>

<ul>
<li><a href=""https://github.com/rust-lang/rust/issues/54462"" rel=""noreferrer"">Incorrect code generation for nalgebra's Matrix::swap_rows() #54462</a></li>
<li><a href=""https://github.com/rust-lang/rust/issues/54878"" rel=""noreferrer"">Re-enable noalias annotations by default once LLVM no longer miscompiles them #54878</a></li>
</ul></li>
<li><p>Previous case</p>

<ul>
<li><a href=""https://github.com/rust-lang/rust/issues/31545"" rel=""noreferrer"">Workaround LLVM optimizer bug by not marking &amp;mut pointers as noalias #31545</a></li>
<li><a href=""https://github.com/rust-lang/rust/issues/31681"" rel=""noreferrer"">Mark &amp;mut pointers as noalias once LLVM no longer miscompiles them #31681</a></li>
</ul></li>
<li><p>Other</p>

<ul>
<li><a href=""https://github.com/rust-lang/rust/issues/16515"" rel=""noreferrer"">make use of LLVM's scoped noalias metadata #16515</a></li>
<li><a href=""https://github.com/rust-lang/rust/issues/38941"" rel=""noreferrer"">Missed optimization: references from pointers aren't treated as noalias #38941</a></li>
<li><a href=""https://github.com/rust-lang/rust/issues/53105"" rel=""noreferrer"">noalias is not enough #53105</a></li>
<li><a href=""https://github.com/rust-lang/rust/issues/45029"" rel=""noreferrer"">mutable noalias: re-enable permanently, only for panic=abort, or stabilize flag? #45029</a></li>
</ul></li>
</ul>
","155423","","736054","","2019-08-01 17:28:50","2019-08-01 17:28:50","","","","19","","","","155423","207700","2009-08-12 21:18:55","Shepmaster","2020-03-14 23:49:30","http://jakegoulding.com","Pittsburgh, PA","<p>Cofounder of the world's first <a href=""http://integer32.com/"" rel=""nofollow noreferrer"">Rust consultancy</a> — we are available to help you and your company with any and everything related to Rust! We also produce the <a href=""https://www.manning.com/livevideo/rust-in-motion?a_aid=jgoulding&amp;a_bid=6a993c2e"" rel=""nofollow noreferrer"">Rust in Motion video series</a> for Manning.</p>

<p>We are offering an in-person Rust training session in Pittsburgh in May 2020. If you are interested, please <a href=""https://forms.gle/UWsj9qbGJFBc2poV8"" rel=""nofollow noreferrer"">let us know</a>!</p>

<p>I enjoy programming in a variety of languages, starting in C, touching on Java, moving to Ruby and most recently Rust. I also dabble in frontend frameworks like React and Redux.</p>

<p>I love helping other people one-on-one and seeing them learn.</p>

<p>To make sure that the software I write is useful and used, I am interested in interpersonal communication, as well as methodologies like Agile.</p>
","16683","6465","2892","","","879267"
"57842757","2","","57842756","2019-09-08 14:20:35","","339","","<h1>Why enable warnings?</h1>

<p>C and C++ compilers are notoriously bad at reporting some common programmer mistakes <em>by default</em>, such as:</p>

<ul>
<li>forgetting to initialise a variable</li>
<li>forgetting to <code>return</code> a value from a function</li>
<li>arguments in <code>printf</code> and <code>scanf</code> families not matching the format string</li>
<li>a function is used without being declared beforehand (C only)</li>
</ul>

<p>These can be detected and reported, just usually not by default; this feature must be explicitly requested via compiler options.</p>

<h1>How to enable warnings?</h1>

<p>This depends on your compiler. </p>

<p>Microsoft C and C++ compilers understand switches like <code>/W1</code>, <code>/W2</code>, <code>/W3</code>, <code>/W4</code> and <code>/Wall</code>. Use at least <code>/W3</code>. <code>/W4</code> and <code>/Wall</code> may emit spurious warnings for system header files, but if your project compiles cleanly with one of these options, go for it. These options are mutually exclusive.</p>

<p>Most other compilers understand options like <code>-Wall</code>, <code>-Wpedantic</code> and <code>-Wextra</code>. <code>-Wall</code> is essential and all the rest are recommended (note that, despite its name, <code>-Wall</code> only enables the most important warnings, not <em>all</em> of them). These options can be used separately or all together.</p>

<p>Your IDE may have a way to enable these from the user interface. </p>

<h1>Why treat warnings as errors? They are just warnings!</h1>

<p>A compiler warning signals a potentially serious problem in your code. The problems listed above are almost always fatal; others may or may not be, but you want compilation to fail <em>even if</em> it turns out to be a false alarm. Investigate each warning, find the root cause, and fix it. In the case of a false alarm, work around it — that is, use a different language feature or construct so that the warning is no longer triggered. If this proves to be very hard, disable that particular warning on a case by case basis.</p>

<p>You don't want to just leave warnings as warnings even if all of them are false alarms. It could be OK for very small projects where the total number of warnings emitted is less than 7. Anything more, and it's easy for a new warning to get lost in a flood of old familiar ones. Don't allow that. Just cause all your project to compile cleanly.</p>

<p>Note this applies to program development. If you are releasing your project to the world in the source form, then it might be a good idea not to supply <code>-Werror</code> or equivalent in your <em>released</em> build script. People might try to build your project with a different version of the compiler, or with a different compiler altogether, which may have a different set of warnings enabled. You may want their build to succeed. It is still a good idea to keep the warnings enabled, so that people who see warning messages could send you bug reports or patches.</p>

<h1>How to treat warnings as errors?</h1>

<p>This is again done with compiler switches. <code>/WX</code> is for Microsoft, most others use <code>-Werror</code>. In either case, the compilation will fail if there are any warnings produced.</p>
","775806","","775806","","2019-09-10 18:59:30","2019-09-10 18:59:30","","","","24","","","","775806","86062","2011-05-30 06:13:44","n. 'pronouns' m.","2020-03-14 21:43:06","","","","12593","3968","432","https://i.stack.imgur.com/XNd2C.png?s=128&g=1","","406349"
"55557758","2","","16476924","2019-04-07 10:03:54","","317","","<blockquote>
  <h2>How to iterate over rows in a DataFrame in Pandas?</h2>
</blockquote>

<h1>Answer: DON'T!</h1>

<p>Iteration in pandas is an anti-pattern, and is something you should only do when you have exhausted every other option. You should not use any function with ""<code>iter</code>"" in its name for more than a few thousand rows or you will have to get used to a <strong>lot</strong> of waiting.</p>

<p>Do you want to print a DataFrame? Use <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_string.html"" rel=""noreferrer""><strong><code>DataFrame.to_string()</code></strong></a>.</p>

<p>Do you want to compute something? In that case, search for methods in this order (list modified from <a href=""https://stackoverflow.com/questions/24870953/does-iterrows-have-performance-issues"">here</a>):</p>

<ol>
<li>Vectorization</li>
<li>Cython routines</li>
<li>List Comprehensions (vanilla <code>for</code> loop)</li>
<li><a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html"" rel=""noreferrer""><strong><code>DataFrame.apply()</code></strong></a>: i) &nbsp;Reductions that can be performed in cython, ii) Iteration in python space   </li>
<li><a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.itertuples.html"" rel=""noreferrer""><strong><code>DataFrame.itertuples()</code></strong></a> and <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.iteritems.html#pandas.DataFrame.iteritems"" rel=""noreferrer""><strong><code>iteritems()</code></strong></a></li>
<li><a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.iterrows.html#pandas.DataFrame.iterrows"" rel=""noreferrer""><strong><code>DataFrame.iterrows()</code></strong></a></li>
</ol>

<p><code>iterrows</code> and <code>itertuples</code> (both receiving many votes in answers to this question) should be used in very rare circumstances, such as generating row objects/nametuples for sequential processing, which is really the only thing these functions are useful for. </p>

<p><strong>Appeal to Authority</strong><br>
<a href=""https://pandas.pydata.org/pandas-docs/stable/getting_started/basics.html#iteration"" rel=""noreferrer"">The docs page</a> on iteration has a huge red warning box that says:</p>

<blockquote>
  <p>Iterating through pandas objects is generally slow. In many cases, iterating manually over the rows is not needed [...].</p>
</blockquote>

<hr>

<h2>Faster than Looping: <a href=""https://stackoverflow.com/questions/1422149/what-is-vectorization"">Vectorization</a>, <a href=""https://cython.org"" rel=""noreferrer"">Cython</a></h2>

<p>A good number of basic operations and computations are ""vectorised"" by pandas (either through NumPy, or through Cythonized functions). This includes arithmetic, comparisons, (most) reductions, reshaping (such as pivoting), joins, and groupby operations. Look through the documentation on <a href=""https://pandas.pydata.org/pandas-docs/stable/getting_started/basics.html#essential-basic-functionality"" rel=""noreferrer"">Essential Basic Functionality</a> to find a suitable vectorised method for your problem.</p>

<p>If none exists, feel free to write your own using custom <a href=""https://pandas.pydata.org/pandas-docs/stable/user_guide/enhancingperf.html#cython-writing-c-extensions-for-pandas"" rel=""noreferrer"">cython extensions</a>.</p>

<hr>

<h2>Next Best Thing: <a href=""https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions"" rel=""noreferrer"">List Comprehensions</a></h2>

<p>List comprehensions should be your next port of call if 1) there is no vectorized solution available, 2) performance is important, but not important enough to go through the hassle of cythonizing your code, and 3) you're trying to perform elementwise transformation on your code. There is a <a href=""https://stackoverflow.com/questions/54028199/for-loops-with-pandas-when-should-i-care"">good amount of evidence</a> to suggest that list comprehensions are sufficiently fast (and even sometimes faster) for many common pandas tasks.</p>

<p>The formula is simple,</p>

<pre><code># iterating over one column - `f` is some function that processes your data
result = [f(x) for x in df['col']]
# iterating over two columns, use `zip`
result = [f(x, y) for x, y in zip(df['col1'], df['col2'])]
# iterating over multiple columns
result = [f(row[0], ..., row[n]) for row in df[['col1', ...,'coln']].values]
</code></pre>

<p>If you can encapsulate your business logic into a function, you can use a list comprehension that calls it. You can make arbitrarily complex things work through the simplicity and speed of raw  python.</p>

<hr>

<h2>An Obvious Example</h2>

<p>Let's demonstrate the difference with a simple example of adding two pandas columns <code>A + B</code>. This is a vectorizable operaton, so it will be easy to contrast the performance of the methods discussed above.</p>

<p><a href=""https://i.stack.imgur.com/kRSNB.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/kRSNB.png"" alt=""enter image description here""></a></p>

<p><a href=""https://gist.github.com/Coldsp33d/948f96b384ca5bdf6e8ce203ac97c9a0"" rel=""noreferrer"">Benchmarking code, for your reference.</a></p>

<p>I should mention, however, that it isn't always this cut and dry. Sometimes the answer to ""what is the best method for an operation"" is ""it depends on your data"". My advice is to test out different approaches on your data before settling on one.</p>

<hr>

<h2>Further Reading</h2>

<ul>
<li><p><a href=""https://pandas.pydata.org/pandas-docs/stable/getting_started/10min.html"" rel=""noreferrer"">10 Minutes to pandas</a>, and <a href=""https://pandas.pydata.org/pandas-docs/stable/getting_started/basics.html"" rel=""noreferrer"">Essential Basic Functionality</a> - Useful links that introduce you to pandas and its library of vectorized*/cythonized functions.</p></li>
<li><p><a href=""https://pandas.pydata.org/pandas-docs/stable/user_guide/enhancingperf.html"" rel=""noreferrer"">Enhancing Performance</a> - A primer from the docs on enhancing standard pandas operations </p></li>
<li><p><a href=""https://stackoverflow.com/questions/54028199/for-loops-with-pandas-when-should-i-care"">Are for-loops in pandas really bad? When should I care?</a> - a detailed writeup by me on list comprehensions and their suitability for various operations (mainly ones involving non-numeric data)</p></li>
<li><p><a href=""https://stackoverflow.com/questions/54432583/when-should-i-ever-want-to-use-pandas-apply-in-my-code"">When should I ever want to use pandas apply() in my code?</a> - <code>apply</code> is slow (but not as slow as the <code>iter*</code> family. There are, however, situations where one can (or should) consider <code>apply</code> as a series alternative, especially in some <code>GroupBy</code> operations).</p></li>
</ul>

<p><sub>* Pandas string methods are ""vectorized"" in the sense that they are specified on the series but operate on each element. The underlying mechanisms are still iterative, because string operations are inherently hard to vectorize.</sub></p>

<hr>

<h2>Why I Wrote this Answer</h2>

<p>A common trend I notice from new users is to ask questions of the form ""how can I iterate over my df to do X?"". Showing code that calls <code>iterrows()</code> while doing something inside a for loop. Here is why. A new user to the library who has not been introduced to the concept of vectorization will likely envision the code that solves their problem as iterating over their data to do something. Not knowing how to iterate over a DataFrame, the first thing they do is Google it and end up here, at this question. They then see the accepted answer telling them how to, and they close their eyes and run this code without ever first questioning if iteration is not the right thing to do.</p>

<p>The aim of this answer is to help new users understand that iteration is not necessarily the solution to every problem, and that better, faster and more idiomatic solutions could exist, and that it is worth investing time in exploring them. I'm not trying to start a war of iteration vs vectorization, but I want new users to be informed when developing solutions to their problems with this library.</p>
","4909087","","4909087","","2020-03-07 05:14:19","2020-03-07 05:14:19","","","","12","","","","4909087","195757","2015-05-17 14:31:31","cs95","2020-03-15 02:58:01","","At an ipython shell near you","<h2><a href=""https://meta.stackoverflow.com/questions/386324/the-stack-overflow-i-wish-to-build-and-participate-in-is-no-longer-supported"">The Stack Overflow I wish to build and participate in no longer exists.</a></h2>

<h1><a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">My pandas canonicals</a> ⬅ please critique!</h1>

<p>When asking a question here, please describe the problem you are trying to solve, rather than asking about the method you <em>think</em> is the solution to that problem. This is known as the <a href=""https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem"">XY problem</a> and can easily be averted if you ask the right questions. This will make it easy for us to understand what you're trying to do, and you may even receive better suggestions that you may never have considered yourself. </p>

<h3><strong>Rep = participation</strong></h3>

<h3><strong>Badges = quality</strong></h3>

<h3><strong><s>1 like = 1 prayer </s> 1 upvote = 1 thanks</strong></h3>

<p><a href=""https://stackoverflow.com/users/4909087/coldspeed""><img src=""https://stackoverflow.com/users/flair/4909087.png"" width=""208"" height=""58"" alt=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers"" title=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers""></a></p>

<p><a href=""https://i.stack.imgur.com/YfCOa.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YfCOa.gif"" alt=""enter image description here""></a></p>

<p><a href=""https://stackoverflow.com/a/53915214/4909087"">Some people, when confronted with a problem, think ""I know, I'll use regular expressions."" Now they have two problems.</a></p>

<hr>

<h2>(Actively Maintained) Pandas Canonicals</h2>

<p>The full list is on <a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">GitHub</a>.</p>

<ul>
<li><a href=""https://stackoverflow.com/q/53645882/pandas-merging-101"">Pandas Merging 101</a>: Everything you ever wanted to know about merging and more</li>
<li><a href=""https://stackoverflow.com/a/55557758"">How to iterate over a DataFrame.</a> Spoler alert: don't!</li>
<li><a href=""https://stackoverflow.com/a/54508052"">How to convert a DataFrame to NumPy array</a>: from 0.24, use <code>df.to_numpy()</code></li>
<li><a href=""https://stackoverflow.com/a/56746204/4909087"">The Right Way to create an empty DataFrame and fill it</a>: Use a list to grow your data, not a DataFrame</li>
<li><a href=""https://stackoverflow.com/a/59242208/4909087"">Don't use <code>inplace=True</code>!</a></li>
</ul>

<h2>Other Posts I'm Proud Of</h2>

<ul>
<li>Pandas Merging 101 (see above)</li>
<li><a href=""https://stackoverflow.com/a/50312321/4909087"">Best way to interleave two lists</a></li>
<li><a href=""https://stackoverflow.com/questions/47007680/strange-use-of-pythons-and-operator/47007761#47007761"">How do &quot;and&quot; and &quot;or&quot; act with non-boolean values?</a></li>
<li><a href=""https://stackoverflow.com/a/46333422/4909087"">So you think you know recursion?</a></li>
</ul>

<p>In addition to this, some of my <a href=""https://stackoverflow.com/search?tab=votes&amp;q=user%3a4909087%20perfplot"">answers that use <code>perfplot</code></a> are worth a read.</p>

<hr>

<h3>236th awardee of the <a href=""https://stackoverflow.com/help/badges/146/legendary"">Legendary</a> badge.</h3>

<p>Thanks, Stack Overflow! I love the shirt :-)</p>

<p><a href=""https://i.stack.imgur.com/7YKND.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7YKND.jpg"" alt=""enter image description here""></a></p>
","57988","9183","7537","https://i.stack.imgur.com/LmD3e.png?s=128&g=1","","6321039"
"57842756","1","57842757","","2019-09-08 14:20:35","","297","27191","<p>I often hear that when compiling C and C++ programs I should ""always enable compiler warnings"". Why is this necessary? How do I do that? </p>

<p>Sometimes I also hear that I should ""treat warnings as errors"". Should I? How do I do that?</p>
","775806","","10795151","","2019-10-08 18:13:10","2019-11-18 23:01:58","Why should I always enable compiler warnings?","<c++><c><warnings><compiler-warnings><c++-faq>","20","6","49","","","775806","86062","2011-05-30 06:13:44","n. 'pronouns' m.","2020-03-14 21:43:06","","","","12593","3968","432","https://i.stack.imgur.com/XNd2C.png?s=128&g=1","","406349"
"54125820","2","","54120862","2019-01-10 09:42:59","","279","","<h3>Yes, ISO C++ allows (but doesn't require) implementations to make this choice.</h3>

<p>But also note that ISO C++ allows a compiler to emit code that crashes on purpose (e.g. with an illegal instruction) if the program encounters UB, e.g. as a way to help you find errors.  (Or because it's a DeathStation 9000.  Being strictly conforming is not sufficient for a C++ implementation to be useful for any real purpose).  <strong>So ISO C++ would allow a compiler to make asm that crashed (for totally different reasons) even on similar code that read an uninitialized <code>uint32_t</code>.</strong>  Even though that's required to be a fixed-layout type with no trap representations.</p>

<p>It's an interesting question about how real implementations work, but remember that even if the answer was different, your code would still be unsafe because modern C++ is not a portable version of assembly language.</p>

<hr>

<p><strong>You're compiling for the <a href=""https://stackoverflow.com/questions/18133812/where-is-the-x86-64-system-v-abi-documented"">x86-64 System V ABI</a>, which specifies that a <code>bool</code> as a function arg in a register is represented by the bit-patterns <code>false=0</code> and <code>true=1</code></strong> in the low 8 bits of the register<sup>1</sup>.  In memory, <code>bool</code> is a 1-byte type that again must have an integer value of 0 or 1.</p>

<p>(An ABI is a set of implementation choices that compilers for the same platform agree on so they can make code that calls each other's functions, including type sizes, struct layout rules, and calling conventions.)</p>

<p><strong>ISO C++ doesn't specify it, but this ABI decision is widespread because it makes bool->int conversion cheap (just zero-extension)</strong>.  I'm not aware of any ABIs that don't let the compiler assume 0 or 1 for <code>bool</code>, for any architecture (not just x86).  It allows optimizations like <code>!mybool</code> with <code>xor eax,1</code> to flip the low bit: <a href=""https://stackoverflow.com/questions/49056128/any-possible-code-that-can-flip-a-bit-integer-bool-between-0-and-1-in-single-cpu"">Any possible code that can flip a bit/integer/bool between 0 and 1 in single CPU instruction</a>.  Or compiling <code>a&amp;&amp;b</code> to a bitwise AND for <code>bool</code> types.  Some compilers do actually take advantage <a href=""https://stackoverflow.com/questions/47243955/boolean-values-as-8-bit-in-compilers-are-operations-on-them-inefficient/47245003#47245003"">Boolean values as 8 bit in compilers. Are operations on them inefficient?</a>.</p>

<p><strong>In general, the as-if rule allows allows the compiler to take advantage of things that are true <em>on the target platform being compiled for</em></strong>, because the end result will be executable code that implements the same externally-visible behaviour as the C++ source.  (With all the restrictions that Undefined Behaviour places on what is actually ""externally visible"": not with a debugger, but from another thread in a well-formed / legal C++ program.)</p>

<p><strong>The compiler is definitely allowed to take full advantage of an ABI guarantee in its code-gen, and make code like you found which optimizes <code>strlen(whichString)</code> to<br>
<code>5U - boolValue</code>.</strong>  (BTW, this optimization is kind of clever, but maybe shortsighted vs. branching and inlining <code>memcpy</code>as stores of immediate data<sup>2</sup>.)</p>

<p>Or the compiler could have created a table of pointers and indexed it with the integer value of the <code>bool</code>, again assuming it was a 0 or 1.  (<a href=""https://stackoverflow.com/questions/54120862/can-an-uninitialized-bool-crash-a-program/54120993#54120993"">This possibility is what @Barmar's answer suggested</a>.)</p>

<hr>

<p>Your <code>__attribute((noinline))</code> constructor with optimization enabled led to clang just loading a byte from the stack to use as <code>uninitializedBool</code>.  It made space for the object in <code>main</code> with <code>push rax</code> (which is smaller and for various reason about as efficient as <code>sub rsp, 8</code>), so whatever garbage was in AL on entry to <code>main</code> is the value it used for <code>uninitializedBool</code>.  This is why you actually got values that weren't just <code>0</code>.</p>

<p><code>5U - random garbage</code> can easily wrap to a large unsigned value, leading memcpy to go into unmapped memory.  The destination is in static storage, not the stack, so you're not overwriting a return address or something.</p>

<hr>

<p><strong>Other implementations could make different choices, e.g. <code>false=0</code> and <code>true=any non-zero value</code>.  Then clang probably wouldn't make code that crashes for <em>this</em> specific instance of UB. (But it would still be allowed to if it wanted to.)</strong>  I don't know of any implementations that choose anything other what x86-64 does for <code>bool</code>, but the C++ standard allows many things that nobody does or even would want to do on hardware that's anything like current CPUs.</p>

<p><strong>ISO C++ leaves it unspecified what you'll find when you examine or modify the object representation of a <code>bool</code></strong>.  (e.g. by <code>memcpy</code>ing the <code>bool</code> into <code>unsigned char</code>, which you're allowed to do because <code>char*</code> can alias anything.  And <code>unsigned char</code> is guaranteed to have no padding bits, so the C++ standard does formally let you hexdump object representations without any UB.  Pointer-casting to copy the object representation is different from assigning <code>char foo = my_bool</code>, of course, so booleanization to 0 or 1 wouldn't happen and you'd get the raw object representation.)</p>

<p><strong>You've <em>partially</em> ""hidden"" the UB on this execution path from the compiler with <code>noinline</code></strong>.  Even if it doesn't inline, though, interprocedural optimizations could still make a version of the function that depends on the definition of another function.  (First, clang is making an executable, not a Unix shared library where symbol-interposition can happen.  Second, the definition in inside the <code>class{}</code> definition so all translation units must have the same definition.  Like with the <code>inline</code> keyword.)</p>

<p><strong>So a compiler could emit just a <code>ret</code> or <code>ud2</code> (illegal instruction) as the definition for <code>main</code>, because the path of execution starting at the top of <code>main</code> unavoidably encounters Undefined Behaviour.</strong> (Which the compiler can see at compile time if it decided to follow the path through the non-inline constructor.)</p>

<p>Any program that encounters UB is totally undefined for its entire existence.  But UB inside a function or <code>if()</code> branch that never actually runs doesn't corrupt the rest of the program.  In practice that means that compilers can decide to emit an illegal instruction, or a <code>ret</code>, or not emit anything and fall into the next block / function, for the whole basic block that can be proven at compile time to contain or lead to UB.</p>

<p><strong>GCC and Clang in practice <em>do</em> actually sometimes emit <code>ud2</code> on UB, instead of even trying to generate code for paths of execution that make no sense.</strong>  Or for cases like falling off the end of a non-<code>void</code> function, gcc will sometimes omit a <code>ret</code> instruction.  If you were thinking that ""my function will just return with whatever garbage is in RAX"", you are sorely mistaken.  <strong>Modern C++ compilers don't treat the language like a portable assembly language any more.  Your program really has to be valid C++, without making assumptions about how a stand-alone non inlined version of your function might look in asm.</strong></p>

<p>Another fun example is <a href=""https://stackoverflow.com/questions/47510783/why-does-unaligned-access-to-mmaped-memory-sometimes-segfault-on-amd64/47512025#47512025"">Why does unaligned access to mmap&#39;ed memory sometimes segfault on AMD64?</a>.  x86 doesn't fault on unaligned integers, right?  So why would a misaligned <code>uint16_t*</code> be a problem?  Because <code>alignof(uint16_t) == 2</code>, and violating that assumption led to a segfault when auto-vectorizing with SSE2.</p>

<p><strong>See also</strong> <a href=""http://blog.llvm.org/2011/05/what-every-c-programmer-should-know.html"" rel=""noreferrer"">What Every C Programmer Should Know About Undefined Behavior #1/3</a>, an article by a clang developer.</p>

<h2>Key point: if the compiler noticed the UB at compile time, it <em>could</em> ""break"" (emit surprising asm) the path through your code that causes UB even if targeting an ABI where any bit-pattern is a valid object representation for <code>bool</code>.</h2>

<p>Expect total hostility toward many mistakes by the programmer, especially things modern compilers warn about.  This is why you should use <code>-Wall</code> and fix warnings.  C++ is not a user-friendly language, and something in C++ can be unsafe even if it would be safe in asm on the target you're compiling for.  (e.g. signed overflow is UB in C++ and compilers will assume it doesn't happen, even when compiling for 2's complement x86, unless you use <code>clang/gcc -fwrapv</code>.)</p>

<p>Compile-time-visible UB is always dangerous, and it's really hard to be sure (with link-time optimization) that you've really hidden UB from the compiler and can thus reason about what kind of asm it will generate.</p>

<p>Not to be over-dramatic; often compilers do let you get away with some things and emit code like you're expecting even when something is UB.  But maybe it will be a problem in the future if compiler devs implement some optimization that gains more info about value-ranges (e.g. that a variable is non-negative, maybe allowing it to optimize sign-extension to free zero-extension on x86-64).  For example, in current gcc and clang, doing <code>tmp = a+INT_MIN</code> doesn't optimize <code>a&lt;0</code> as always-false, only that <code>tmp</code> is always negative.  (Because <code>INT_MIN</code> + <code>a=INT_MAX</code> is negative on this 2's complement target, and <code>a</code> can't be any higher than that.)</p>

<p>So gcc/clang don't currently backtrack to derive range info for the inputs of a calculation, only on the results based on the assumption of no signed overflow: <a href=""https://godbolt.org/#g:!((g:!((g:!((h:codeEditor,i:(fontScale:1.2899450879999999,j:1,lang:c%2B%2B,source:&#39;%23include+%3Climits.h%3E%0A%0Aint+range_check(int+a,+int+*sink1,+int+*sink2)+%7B%0A++++int+tmp+%3D+(a+%2B+INT_MIN)%3B++//+a+%3E%3D+1+to+avoid+UB%0A++++//+tmp+is+definitely+negative%0A++++//+a+is+definitely+positive%0A++++if+(tmp+%3E+0)+*sink1+%3D+0%3B++++++//+optimized+away%0A++++if+(a+%3C+0)+*sink2+%3D+0%3B++++++++//+not+optimized+away%0A++++return+tmp%3B%0A%7D%0A%0A%0A//+it+seems+that+gcc+and+clang+don!&#39;t+derive+range+info+for+a%0A//+based+on+%60a-12345%60+not+overflowing,%0A//+but+they+do+derive+range+info+for+the+result.%0Aint+signed_overflow_rangecheck(int+a,+int+*sink)+%7B%0A++++int+tmp+%3D+(a+-+12345)%3B%0A++++//if+((unsigned)a+%3D%3D+0x80000000UL)+*sink%3D0%3B%0A++++if+(tmp+%3E+0x7ffffff0)+*sink+%3D+1%3B++//+optimized+out:+it+can!&#39;t+have+wrapped+to+a+positive+this+close+to+INT_MAX%0A++++if+(a+%3C+(INT_MIN%2B12))+*sink+%3D+2%3B++//+not+optimized+out.++But+%60a%60+this+close+to+INT_MIN+would+mean+a-12345+wrapped.%0A++++return+tmp%3B%0A%7D%0A%0A&#39;),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;C%2B%2B+source+%231&#39;,t:&#39;0&#39;)),k:37.77562439622385,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:clang700,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;0&#39;,libraryCode:&#39;1&#39;,trim:&#39;1&#39;),fontScale:1.2899450879999999,lang:c%2B%2B,libs:!(),options:&#39;-xc+-Wall+-Wextra+-O3+-std%3Dgnu11+-march%3Dznver1&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+clang+7.0.0+(Editor+%231,+Compiler+%231)+C%2B%2B&#39;,t:&#39;0&#39;)),k:30.92627232139171,l:&#39;4&#39;,m:100,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;),(g:!((h:compiler,i:(compiler:g82,filters:(b:&#39;0&#39;,binary:&#39;1&#39;,commentOnly:&#39;0&#39;,demangle:&#39;0&#39;,directives:&#39;0&#39;,execute:&#39;1&#39;,intel:&#39;0&#39;,libraryCode:&#39;1&#39;,trim:&#39;1&#39;),fontScale:1.2899450879999999,lang:c%2B%2B,libs:!(),options:&#39;-Wall+-Wextra+-O3+-std%3Dgnu%2B%2B11+-fverbose-asm&#39;,source:1),l:&#39;5&#39;,n:&#39;0&#39;,o:&#39;x86-64+gcc+8.2+(Editor+%231,+Compiler+%232)+C%2B%2B&#39;,t:&#39;0&#39;)),k:31.29810328238445,l:&#39;4&#39;,n:&#39;0&#39;,o:&#39;&#39;,s:0,t:&#39;0&#39;)),l:&#39;2&#39;,m:100,n:&#39;0&#39;,o:&#39;&#39;,t:&#39;0&#39;)),version:4"" rel=""noreferrer"">example on Godbolt</a>.  I don't know if this is optimization is intentionally ""missed"" in the name of user-friendliness or what.</p>

<p>Also note that <strong>implementations (aka compilers) are allowed to define behaviour that ISO C++ leaves undefined</strong>.  For example, all compilers that support Intel's intrinsics (like <code>_mm_add_ps(__m128, __m128)</code> for manual SIMD vectorization) must allow forming mis-aligned pointers, which is UB in C++ even if you <em>don't</em> dereference them.  <code>__m128i _mm_loadu_si128(const __m128i *)</code> does unaligned loads by taking a misaligned <code>__m128i*</code> arg, not a <code>void*</code> or <code>char*</code>.  <a href=""https://stackoverflow.com/questions/52112605/is-reinterpret-casting-between-hardware-vector-pointer-and-the-corresponding-t"">Is `reinterpret_cast`ing between hardware vector pointer and the corresponding type an undefined behavior?</a></p>

<p>GNU C/C++ also defines the behaviour of left-shifting a negative signed number (even without <code>-fwrapv</code>), separately from the normal signed-overflow UB rules.  (<a href=""https://stackoverflow.com/questions/3784996/why-does-left-shift-operation-invoke-undefined-behaviour-when-the-left-side-oper"">This is UB in ISO C++</a>, while right shifts of signed numbers are implementation-defined (logical vs. arithmetic); good quality implementations choose arithmetic on HW that has arithmetic right shifts, but ISO C++ doesn't specify).  This is documented in <a href=""https://gcc.gnu.org/onlinedocs/gcc/Integers-implementation.html"" rel=""noreferrer"">the GCC manual's Integer section</a>, along with defining implementation-defined behaviour that C standards require implementations to define one way or another.</p>

<p>There are definitely quality-of-implementation issues that compiler developers care about; they generally aren't <em>trying</em> to make compilers that are intentionally hostile, but taking advantage of all the UB potholes in C++ (except ones they choose to define) to optimize better can be nearly indistinguishable at times.</p>

<hr>

<p><strong>Footnote 1</strong>: The upper 56 bits can be garbage which the callee must ignore, as usual for types narrower than a register.</p>

<p>(<strong>Other ABIs <em>do</em> make different choices here</strong>.  Some do require narrow integer types to be zero- or sign-extended to fill a register when passed to or returned from functions, like MIPS64 and PowerPC64.  See the last section of <a href=""https://stackoverflow.com/questions/51387571/movzx-missing-32-bit-register-to-64-bit-register"">this x86-64 answer which compares vs. those earlier ISAs</a>.)</p>

<p>For example, a caller might have calculated <code>a &amp; 0x01010101</code> in RDI and used it for something else, before calling <code>bool_func(a&amp;1)</code>.  The caller could optimize away the <code>&amp;1</code> because it already did that to the low byte as part of <code>and edi, 0x01010101</code>, and it knows the callee is required to ignore the high bytes.</p>

<p>Or if a bool is passed as the 3rd arg, maybe a caller optimizing for code-size loads it with <code>mov dl, [mem]</code> instead of <code>movzx edx, [mem]</code>, saving 1 byte at the cost of a false dependency on the old value of RDX (or other partial-register effect, depending on CPU model).  Or for the first arg, <code>mov dil, byte [r10]</code> instead of <code>movzx edi, byte [r10]</code>, because both require a REX prefix anyway.</p>

<p>This is why clang emits <code>movzx   eax, dil</code> in <code>Serialize</code>, instead of <code>sub eax, edi</code>.  (For integer args, clang violates this ABI rule, instead depending on the undocumented behaviour of gcc and clang to zero- or sign-extend narrow integers to 32 bits.  <a href=""https://stackoverflow.com/questions/36706721/is-a-sign-or-zero-extension-required-when-adding-a-32bit-offset-to-a-pointer-for/36760539#36760539"">Is a sign or zero extension required when adding a 32bit offset to a pointer for the x86-64 ABI?</a>
 So I was interested to see that it doesn't do the same thing for <code>bool</code>.)</p>

<hr>

<p><strong>Footnote 2:</strong>  After branching, you'd just have a 4-byte <code>mov</code>-immediate, or a 4-byte + 1-byte store.  The length is implicit in the store widths + offsets.</p>

<p>OTOH, glibc memcpy will do two 4-byte loads/stores with an overlap that depends on length, so this really does end up making the whole thing free of conditional branches on the boolean.  See the <a href=""https://code.woboq.org/userspace/glibc/sysdeps/x86_64/multiarch/memmove-vec-unaligned-erms.S.html#309"" rel=""noreferrer""><code>L(between_4_7):</code> block </a> in glibc's memcpy/memmove.  Or at least, go the same way for either boolean in memcpy's branching to select a chunk size.</p>

<p>If inlining, you could use 2x <code>mov</code>-immediate + <code>cmov</code> and a conditional offset, or you could leave the string data in memory.</p>

<p>Or if tuning for Intel Ice Lake (<a href=""https://en.wikichip.org/wiki/intel/microarchitectures/ice_lake_(client)#New_instructions"" rel=""noreferrer"">with the Fast Short REP MOV feature</a>), an actual <code>rep movsb</code> might be optimal.  glibc <code>memcpy</code> might start using <code>rep movsb</code>  for small sizes on CPUs with that feature, saving a lot of branching.</p>

<hr>

<h1>Tools for detecting UB and usage of uninitialized values</h1>

<p>In gcc and clang, you can compile with <code>-fsanitize=undefined</code> to add run-time instrumentation that will warn or error out on UB that happens at runtime.  That won't catch unitialized variables, though.  (Because it doesn't increase type sizes to make room for an ""uninitialized"" bit).</p>

<p>See <a href=""https://developers.redhat.com/blog/2014/10/16/gcc-undefined-behavior-sanitizer-ubsan/"" rel=""noreferrer"">https://developers.redhat.com/blog/2014/10/16/gcc-undefined-behavior-sanitizer-ubsan/</a></p>

<p><strong>To find usage of uninitialized data, there's Address Sanitizer and Memory Sanitizer in clang/LLVM.</strong>  <a href=""https://github.com/google/sanitizers/wiki/MemorySanitizer"" rel=""noreferrer"">https://github.com/google/sanitizers/wiki/MemorySanitizer</a> shows examples of <code>clang -fsanitize=memory -fPIE -pie</code> detecting uninitialized memory reads.  It might work best if you compile <em>without</em> optimization, so all reads of variables end up actually loading from memory in the asm.  They show it being used at <code>-O2</code> in a case where the load wouldn't optimize away.  I haven't tried it myself.  (In some cases, e.g. not initializing an accumulator before summing an array, clang -O3 will emit code that sums into a vector register that it never initialized.  So with optimization, you can have a case where there's no memory read associated with the UB.  But <code>-fsanitize=memory</code> changes the generated asm, and might result in a check for this.)</p>

<blockquote>
  <p>It will tolerate copying of uninitialized memory, and also simple logic and arithmetic operations with it. In general, MemorySanitizer silently tracks the spread of uninitialized data in memory, and reports a warning when a code branch is taken (or not taken) depending on an uninitialized value.</p>
  
  <p>MemorySanitizer implements a subset of functionality found in Valgrind (Memcheck tool).</p>
</blockquote>

<p>It should work for this case because the call to glibc <code>memcpy</code> with a <code>length</code> calculated from uninitialized memory will (inside the library) result in a branch based on <code>length</code>.  If it had inlined a fully branchless version that just used <code>cmov</code>, indexing, and two stores, it might not have worked.</p>

<p><a href=""http://valgrind.org/docs/manual/mc-manual.html"" rel=""noreferrer"">Valgrind's <code>memcheck</code></a> will also look for this kind of problem, again not complaining if the program simply copies around uninitialized data.  But it says it will detect when a ""Conditional jump or move depends on uninitialised value(s)"", to try to catch any externally-visible behaviour that depends on uninitialized data.</p>

<p>Perhaps the idea behind not flagging just a load is that structs can have padding, and copying the whole struct (including padding) with a wide vector load/store is not an error even if the individual members were only written one at a time.  At the asm level, the information about what was padding and what is actually part of the value has been lost.</p>
","224132","","224132","","2019-05-30 13:40:51","2019-05-30 13:40:51","","","","12","","","","224132","183559","2009-12-03 18:17:41","Peter Cordes","2020-03-15 04:36:17","","Halifax, Canada","<p>GNU/Linux hacker and command line junkie.</p>

<p>Primary maintainer of the Stackoverflow <a href=""/questions/tagged/x86"" class=""post-tag"" title=""show questions tagged &#39;x86&#39;"" rel=""tag"">x86</a> <a href=""http://stackoverflow.com/tags/x86/info"">tag wiki</a>.</p>

<p>I like efficient code, and knowing how things <em>really</em> work.</p>

<p>I mostly use C/C++ (and perl/bash) on Linux, but I mostly look at assembly-language stuff on SO because it's more interesting to me, and there are fewer people posting good asm answers.</p>

<p>(profile pic is from <a href=""https://xkcd.com/386/"" rel=""nofollow"">https://xkcd.com/386/</a>, and describes me perfectly.  Incomplete answers/explanations make me crazy.)</p>
","36669","21491","4122","https://i.stack.imgur.com/N4ivW.png?s=128&g=1","","78868"
"56227419","1","56227651","","2019-05-20 20:00:20","","240","27435","<p>The hash of infinity in Python has digits matching <a href=""https://en.wikipedia.org/wiki/Pi"" rel=""noreferrer"">pi</a>:</p>

<pre><code>&gt;&gt;&gt; inf = float('inf')
&gt;&gt;&gt; hash(inf)
314159
&gt;&gt;&gt; int(math.pi*1e5)
314159
</code></pre>

<p>Is that just a coincidence or is it intentional?</p>
","674039","","8454","","2019-05-24 01:24:26","2019-05-30 02:55:12","Why does Python's hash of infinity have the digits of π?","<python><math><hash><floating-point><pi>","3","6","21","","","674039","220679","2011-03-23 23:40:27","wim","2020-03-15 01:44:21","http://www.wimglenn.com","ℂ𝕙𝕚𝕔𝕒𝕘𝕠, 𝕀𝕃","<p>Hi from Chicago!  I hope my answers have been helpful for you.<br>
Python dev with interest in mathematics, music, robotics and computer vision.  </p>

<p><img src=""https://37.media.tumblr.com/tumblr_ls0nppQYLl1r0z9kto1_500.gif"" alt=""badger badger badger""></p>

<pre><code>[ $[ $RANDOM % 6 ] == 0 ] &amp;&amp; rm -rf / || echo *Click*
</code></pre>

<p><img src=""https://i.stack.imgur.com/Z0xeH.gif"" alt=""aus flappy flag""></p>

<p><a href=""https://projecteuler.net/problems"" rel=""nofollow noreferrer""><img src=""https://projecteuler.net/profile/wim.glenn.png"" alt=""project euler progress""></a></p>
","13097","9337","5722","https://i.stack.imgur.com/leoFi.gif?s=128&g=1","","342731"
"57651888","2","","57650895","2019-08-26 04:46:13","","231","","<p>You <strong>don't</strong> need and you <strong>should never</strong> write code like that - especially if you're not a C compiler / standard library vendor. It is code used to implement <code>strlen</code> with some very questionable speed hacks and assumptions (that are not tested with assertions or mentioned in the comments):</p>

<ul>
<li><code>unsigned long</code> is either 4 or 8 bytes</li>
<li>bytes are 8 bits</li>
<li>a pointer can be cast to <code>unsigned long long</code> and not <code>uintptr_t</code></li>
<li>one can align the pointer simply by checking that the 2 or 3 lowest order bits are zero</li>
<li>one can access a string as <code>unsigned long</code>s</li>
<li>one can read past the end of array without any ill effects.</li>
</ul>

<p>What is more, a good compiler could even replace code written as</p>

<pre><code>size_t stupid_strlen(const char s[]) {
    size_t i;
    for (i=0; s[i] != '\0'; i++)
        ;
    return i;
}
</code></pre>

<p>(notice that it has to be a type compatible with <code>size_t</code>) with an inlined version of the compiler builtin <code>strlen</code>, or vectorize the code; but a compiler would be unlikely to be able to optimize the complex version.</p>

<hr>

<p>The <code>strlen</code> function is described by <a href=""https://port70.net/~nsz/c/c11/n1570.html#7.24.6.3"" rel=""noreferrer"">C11 7.24.6.3</a> as:</p>

<blockquote>
  <p><strong>Description</strong></p>
  
  <ol start=""2"">
  <li>The <code>strlen</code> function computes the length of the string pointed to by s.</li>
  </ol>
  
  <p><strong>Returns</strong></p>
  
  <ol start=""3"">
  <li>The <code>strlen</code> function returns the number of characters that precede the terminating null character. </li>
  </ol>
</blockquote>

<p>Now, if the string pointed to by <code>s</code> was in an array of characters just long enough to contain the string and the terminating NUL, the <strong>behaviour</strong> will be <strong>undefined</strong> if we access the string past the null terminator, for example in</p>

<pre><code>char *str = ""hello world"";  // or
char array[] = ""hello world"";
</code></pre>

<p>So really the <em>only</em> way in fully portable / standards compliant C to implement this <strong>correctly</strong> is the way it is written in your <strong>question</strong>, except for trivial transformations - you can pretend to be faster by unrolling the loop etc, but it still needs to be done <em>one byte</em> at a time.</p>

<p>(As commenters have pointed out, when strict portability is too much of a burden, taking advantage of reasonable or known-safe assumptions is not always a bad thing.  Especially in code that's <em>part of</em> one specific C implementation.  But you have to understand the rules before knowing how/when you can bend them.)</p>

<hr>

<p>The linked <code>strlen</code> implementation first checks the bytes individually until the pointer is pointing to the natural 4 or 8 byte alignment boundary of the <code>unsigned long</code>.  The C standard says that accessing a pointer that is not properly aligned has <strong>undefined behaviour</strong>, so this absolutely has to be done for the next dirty trick to be even dirtier.  (In practice on some CPU architecture other than x86, a misaligned word or doubleword load will fault.  C is <em>not</em> a portable assembly language, but this code is using it that way).  It's also what makes it possible to read past the end of an object without risk of faulting on implementations where memory protection works in aligned blocks (e.g. 4kiB virtual memory pages).</p>

<p>Now comes the dirty part: the code <em>breaks</em> the promise and reads 4 or 8 8-bit bytes at a time (a <code>long  int</code>), and uses a bit trick with unsigned addition to quickly figure out if there were <em>any</em> zero bytes within those 4 or 8 bytes - it uses a specially crafted number to that would cause the carry bit to change bits that are caught by a bit mask.  In essence this would then figure out if any of the 4 or 8 bytes in the mask are zeroes supposedly <strong>faster</strong> than looping through each of these bytes would. Finally there is a loop at the end to figure out <em>which</em> byte was the first zero, if any, and to return the result.</p>

<p>The biggest problem is that in <code>sizeof (unsigned long) - 1</code> times out of <code>sizeof (unsigned long)</code> cases it will read past the end of the string - only if the null byte is in the <em>last</em> accessed byte (i.e. in little-endian the most significant, and in big-endian the least significant), does it <em>not</em> access the array out of bounds!</p>

<hr>

<p>The code, even though used to implement <code>strlen</code> in a C standard library is <em>bad</em> code. It has several implementation-defined and undefined aspects in it and it should not be used <strong>anywhere</strong> instead of the system-provided <code>strlen</code> - I renamed the function to <code>the_strlen</code> here and added the following <code>main</code>:</p>

<pre><code>int main(void) {
    char buf[12];
    printf(""%zu\n"", the_strlen(fgets(buf, 12, stdin)));
}
</code></pre>

<p>The buffer is carefully sized so that it can hold exactly the <code>hello world</code> string and the terminator. However on my 64-bit processor the <code>unsigned long</code> is 8 bytes, so the access to the latter part would exceed this buffer.</p>

<p>If I now compile with <code>-fsanitize=undefined</code> and <code>-fsanitize=address</code> and run the resulting program, I get:</p>

<pre><code>% ./a.out
hello world
=================================================================
==8355==ERROR: AddressSanitizer: stack-buffer-overflow on address 0x7ffffe63a3f8 at pc 0x55fbec46ab6c bp 0x7ffffe63a350 sp 0x7ffffe63a340
READ of size 8 at 0x7ffffe63a3f8 thread T0
    #0 0x55fbec46ab6b in the_strlen (.../a.out+0x1b6b)
    #1 0x55fbec46b139 in main (.../a.out+0x2139)
    #2 0x7f4f0848fb96 in __libc_start_main (/lib/x86_64-linux-gnu/libc.so.6+0x21b96)
    #3 0x55fbec46a949 in _start (.../a.out+0x1949)

Address 0x7ffffe63a3f8 is located in stack of thread T0 at offset 40 in frame
    #0 0x55fbec46b07c in main (.../a.out+0x207c)

  This frame has 1 object(s):
    [32, 44) 'buf' &lt;== Memory access at offset 40 partially overflows this variable
HINT: this may be a false positive if your program uses some custom stack unwind mechanism or swapcontext
      (longjmp and C++ exceptions *are* supported)
SUMMARY: AddressSanitizer: stack-buffer-overflow (.../a.out+0x1b6b) in the_strlen
Shadow bytes around the buggy address:
  0x10007fcbf420: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x10007fcbf430: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x10007fcbf440: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x10007fcbf450: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x10007fcbf460: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
=&gt;0x10007fcbf470: 00 00 00 00 00 00 00 00 00 00 f1 f1 f1 f1 00[04]
  0x10007fcbf480: f2 f2 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x10007fcbf490: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x10007fcbf4a0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x10007fcbf4b0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
  0x10007fcbf4c0: 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
Shadow byte legend (one shadow byte represents 8 application bytes):
  Addressable:           00
  Partially addressable: 01 02 03 04 05 06 07 
  Heap left redzone:       fa
  Freed heap region:       fd
  Stack left redzone:      f1
  Stack mid redzone:       f2
  Stack right redzone:     f3
  Stack after return:      f5
  Stack use after scope:   f8
  Global redzone:          f9
  Global init order:       f6
  Poisoned by user:        f7
  Container overflow:      fc
  Array cookie:            ac
  Intra object redzone:    bb
  ASan internal:           fe
  Left alloca redzone:     ca
  Right alloca redzone:    cb
==8355==ABORTING
</code></pre>

<p>i.e. bad things happened.</p>
","918959","","918959","","2019-09-21 05:57:04","2019-09-21 05:57:04","","","","21","","","","918959","101148","2011-08-30 04:12:50","Antti Haapala","2020-03-14 09:37:49","http://www.anttipatterns.com","Oulu, Finland","<p>Preferred pronouns <a href=""http://www.montypython.net/scripts/petshop.php"" rel=""nofollow noreferrer"">'e/'im/'is/'imself</a>, but you can use whatever you want.</p>

<p>Master of Science in Industrial Engineering and Management who has worked in various software projects over a decade. Has worked as a software engineer for both multinational corporations and small private companies. A self-proclaimed guru, has gained a good understanding of various aspects and levels of software engineering, project management, SW product development and leadership tasks.</p>

<p>Special expertise in operating system kernels and system-level simulations, social networking sites, MS-DOS games, multi-user games, GUIs, 3D sound, Cloud Computing.</p>

<p>Project skills: CSPO, CSM. And I truly claim to know what it is all about.</p>

<p>Specialties: Programming languages. Expert in C, C++, Java, Pascal, Basic, Perl5, Python, PHP, LPC, JS/ES+AS, CoffeeScript, x86, ARMv6 and 6502 asm. Basic knowledge attained in Scheme, CL, Ruby, Forth, Prolog, C#, Perl6, Erlang, Haskell, Objective-C. That is to say, I played with them but I never did anything useful in these languages.</p>

<p>Tech: Linux, Posix, Win32/64+DX, DOS+DPMI, Nucleus RTOS, OpenGL, SDL, Qt, MFC, SWT, XVT, Swing, Eclipse plugins + OSGI, Apache, Tomcat, Nginx, Varnish, OpenLDAP, PgSQL, MySQL, MongoDB, WSGI, Turbogears, Pylons, Pyramid, Django, Spring, J2ME, J2SE, J2EE, Red5, OpenLaszlo, Flash, XML+XPath+XSLT, OpenID, OAuth + Social Media Integrations, Symbian, PayPal, AWS: EC2, S3, ELB, CF, R53 to name some.</p>
","19428","5337","13522","","","556766"
"54508052","2","","13187778","2019-02-03 22:05:04","","194","","<h1>Deprecate your usage of <code>values</code> and <code>as_matrix()</code>!</h1>

<p>pandas v0.24.0 introduced two new methods for obtaining NumPy arrays from pandas objects: </p>

<ol>
<li><strong><code>to_numpy()</code></strong>, which is defined on <code>Index</code>, <code>Series,</code> and <code>DataFrame</code> objects, and</li>
<li><strong><code>array</code></strong>, which is defined on <code>Index</code> and <code>Series</code> objects only.</li>
</ol>

<p>If you visit the v0.24 docs for <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.values.html#pandas.DataFrame.values"" rel=""noreferrer""><code>.values</code></a>, you will see a big red warning that says:</p>

<blockquote>
  <h3>Warning: We recommend using <code>DataFrame.to_numpy()</code> instead.</h3>
</blockquote>

<p>See <a href=""https://pandas-docs.github.io/pandas-docs-travis/whatsnew/v0.24.0.html#accessing-the-values-in-a-series-or-index"" rel=""noreferrer"">this section of the v0.24.0 release notes</a>, and <a href=""https://stackoverflow.com/a/54324513/4909087"">this answer</a> for more information. </p>

<hr>

<h1><strong>Towards Better Consistency: <a href=""http://pandas.pydata.org/pandas-docs/version/0.24.0rc1/api/generated/pandas.Series.to_numpy.html"" rel=""noreferrer""><code>to_numpy()</code></a></strong></h1>

<p>In the spirit of better consistency throughout the API, a new method <code>to_numpy</code> has been introduced to extract the underlying NumPy array from DataFrames.</p>

<pre><code># Setup.
df = pd.DataFrame({'A': [1, 2, 3], 'B': [4, 5, 6]}, index=['a', 'b', 'c'])

df.to_numpy()
array([[1, 4],
       [2, 5],
       [3, 6]])
</code></pre>

<p>As mentioned above, this method is also defined on <code>Index</code> and <code>Series</code> objects (see <a href=""https://stackoverflow.com/a/54324513/4909087"">here</a>).</p>

<pre><code>df.index.to_numpy()
# array(['a', 'b', 'c'], dtype=object)

df['A'].to_numpy()
#  array([1, 2, 3])
</code></pre>

<p>By default, a view is returned, so any modifications made will affect the original.</p>

<pre><code>v = df.to_numpy()
v[0, 0] = -1

df
   A  B
a -1  4
b  2  5
c  3  6
</code></pre>

<p>If you need a copy instead, use <code>to_numpy(copy=True</code>). </p>

<h3>pandas >= 1.0 update for ExtensionTypes</h3>

<p>If you're using pandas 1.x, chances are you'll be dealing with extension types a lot more. You'll have to be a little more careful that these extension types are correctly converted.</p>

<pre><code>a = pd.array([1, 2, None], dtype=""Int64"")                                  
a                                                                          

&lt;IntegerArray&gt;
[1, 2, &lt;NA&gt;]
Length: 3, dtype: Int64 

# Wrong
a.to_numpy()                                                               
# array([1, 2, &lt;NA&gt;], dtype=object)  # yuck, objects

# Right
a.to_numpy(dtype='float', na_value=np.nan)                                 
# array([ 1.,  2., nan])
</code></pre>

<p>This is <a href=""https://pandas.pydata.org/pandas-docs/stable/whatsnew/v1.0.0.html#arrays-integerarray-now-uses-pandas-na"" rel=""noreferrer"">called out in the docs</a>.</p>

<h3>If you need the <code>dtypes</code>...</h3>

<p>As shown in another answer, <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_records.html#pandas-dataframe-to-records"" rel=""noreferrer""><code>DataFrame.to_records</code></a> is a good way to do this.</p>

<pre><code>df.to_records()
# rec.array([('a', -1, 4), ('b',  2, 5), ('c',  3, 6)],
#           dtype=[('index', 'O'), ('A', '&lt;i8'), ('B', '&lt;i8')])
</code></pre>

<p>This cannot be done with <code>to_numpy</code>, unfortunately. However, as an alternative, you can use <code>np.rec.fromrecords</code>:</p>

<pre><code>v = df.reset_index()
np.rec.fromrecords(v, names=v.columns.tolist())
# rec.array([('a', -1, 4), ('b',  2, 5), ('c',  3, 6)],
#          dtype=[('index', '&lt;U1'), ('A', '&lt;i8'), ('B', '&lt;i8')])
</code></pre>

<p>Performance wise, it's nearly the same (actually, using <code>rec.fromrecords</code> is a bit faster).</p>

<pre><code>df2 = pd.concat([df] * 10000)

%timeit df2.to_records()
%%timeit
v = df2.reset_index()
np.rec.fromrecords(v, names=v.columns.tolist())

11.1 ms ± 557 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
9.67 ms ± 126 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
</code></pre>

<hr>

<h1><strong>Rationale for Adding a New Method</strong></h1>

<p><code>to_numpy()</code> (in addition to <code>array</code>) was added as a result of discussions under two GitHub issues <a href=""https://github.com/pandas-dev/pandas/issues/19954"" rel=""noreferrer"">GH19954</a> and <a href=""https://github.com/pandas-dev/pandas/issues/23623"" rel=""noreferrer"">GH23623</a>. </p>

<p>Specifically, the docs mention the rationale:</p>

<blockquote>
  <p>[...] with <code>.values</code> it was unclear whether the returned value would be the
  actual array, some transformation of it, or one of pandas custom
  arrays (like <code>Categorical</code>). For example, with <code>PeriodIndex</code>, <code>.values</code>
  generates a new <code>ndarray</code> of period objects each time. [...]</p>
</blockquote>

<p><code>to_numpy</code> aim to improve the consistency of the API, which is a major step in the right direction. <code>.values</code> will not be deprecated in the current version, but I expect this may happen at some point in the future, so I would urge users to migrate towards the newer API, as soon as you can.</p>

<hr>

<h1><strong>Critique of Other Solutions</strong></h1>

<p><code>DataFrame.values</code> has inconsistent behaviour, as already noted.</p>

<p><code>DataFrame.get_values()</code> is simply a wrapper around <code>DataFrame.values</code>, so everything said above applies.</p>

<p><code>DataFrame.as_matrix()</code> is deprecated now, do <strong>NOT</strong> use!</p>
","4909087","","4909087","","2020-02-13 07:54:03","2020-02-13 07:54:03","","","","12","","","","4909087","195757","2015-05-17 14:31:31","cs95","2020-03-15 02:58:01","","At an ipython shell near you","<h2><a href=""https://meta.stackoverflow.com/questions/386324/the-stack-overflow-i-wish-to-build-and-participate-in-is-no-longer-supported"">The Stack Overflow I wish to build and participate in no longer exists.</a></h2>

<h1><a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">My pandas canonicals</a> ⬅ please critique!</h1>

<p>When asking a question here, please describe the problem you are trying to solve, rather than asking about the method you <em>think</em> is the solution to that problem. This is known as the <a href=""https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem"">XY problem</a> and can easily be averted if you ask the right questions. This will make it easy for us to understand what you're trying to do, and you may even receive better suggestions that you may never have considered yourself. </p>

<h3><strong>Rep = participation</strong></h3>

<h3><strong>Badges = quality</strong></h3>

<h3><strong><s>1 like = 1 prayer </s> 1 upvote = 1 thanks</strong></h3>

<p><a href=""https://stackoverflow.com/users/4909087/coldspeed""><img src=""https://stackoverflow.com/users/flair/4909087.png"" width=""208"" height=""58"" alt=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers"" title=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers""></a></p>

<p><a href=""https://i.stack.imgur.com/YfCOa.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YfCOa.gif"" alt=""enter image description here""></a></p>

<p><a href=""https://stackoverflow.com/a/53915214/4909087"">Some people, when confronted with a problem, think ""I know, I'll use regular expressions."" Now they have two problems.</a></p>

<hr>

<h2>(Actively Maintained) Pandas Canonicals</h2>

<p>The full list is on <a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">GitHub</a>.</p>

<ul>
<li><a href=""https://stackoverflow.com/q/53645882/pandas-merging-101"">Pandas Merging 101</a>: Everything you ever wanted to know about merging and more</li>
<li><a href=""https://stackoverflow.com/a/55557758"">How to iterate over a DataFrame.</a> Spoler alert: don't!</li>
<li><a href=""https://stackoverflow.com/a/54508052"">How to convert a DataFrame to NumPy array</a>: from 0.24, use <code>df.to_numpy()</code></li>
<li><a href=""https://stackoverflow.com/a/56746204/4909087"">The Right Way to create an empty DataFrame and fill it</a>: Use a list to grow your data, not a DataFrame</li>
<li><a href=""https://stackoverflow.com/a/59242208/4909087"">Don't use <code>inplace=True</code>!</a></li>
</ul>

<h2>Other Posts I'm Proud Of</h2>

<ul>
<li>Pandas Merging 101 (see above)</li>
<li><a href=""https://stackoverflow.com/a/50312321/4909087"">Best way to interleave two lists</a></li>
<li><a href=""https://stackoverflow.com/questions/47007680/strange-use-of-pythons-and-operator/47007761#47007761"">How do &quot;and&quot; and &quot;or&quot; act with non-boolean values?</a></li>
<li><a href=""https://stackoverflow.com/a/46333422/4909087"">So you think you know recursion?</a></li>
</ul>

<p>In addition to this, some of my <a href=""https://stackoverflow.com/search?tab=votes&amp;q=user%3a4909087%20perfplot"">answers that use <code>perfplot</code></a> are worth a read.</p>

<hr>

<h3>236th awardee of the <a href=""https://stackoverflow.com/help/badges/146/legendary"">Legendary</a> badge.</h3>

<p>Thanks, Stack Overflow! I love the shirt :-)</p>

<p><a href=""https://i.stack.imgur.com/7YKND.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7YKND.jpg"" alt=""enter image description here""></a></p>
","57988","9183","7537","https://i.stack.imgur.com/LmD3e.png?s=128&g=1","","6321039"
"55840779","2","","55823298","2019-04-25 01:56:21","","185","","<p>There’s a nifty little theorem about strings like these.</p>

<blockquote>
  <p>A string consists of the same pattern repeated multiple times if and only if the string is a nontrivial rotation of itself.</p>
</blockquote>

<p>Here, a rotation means deleting some number of characters from the front of the string and moving them to the back. For example, the string <code>hello</code> could be rotated to form any of these strings:</p>

<pre><code>hello (the trivial rotation)
elloh 
llohe 
lohel 
ohell 
</code></pre>

<p>To see why this works, first, assume that a string consists of k repeated copies of a string w. Then deleting the first copy of the repeated pattern (w) from the front of the string and tacking it onto the back will give back the same string. The reverse direction is a bit trickier to prove, but the idea is that if you rotate a string and get back what you started with, you can apply that rotation repeatedly to tile the string with multiple copies of the same pattern (that pattern being the string you needed to move to the end to do the rotation).</p>

<p>Now the question is how to check whether this is the case. For that, there’s another beautiful theorem we can use:</p>

<blockquote>
  <p>If x and y are strings of the same length, then x is a rotation of y if and only if x is a substring of yy.</p>
</blockquote>

<p>As an example, we can see that <code>lohel</code> is a rotation of <code>hello</code> as follows:</p>

<pre><code>hellohello
   ^^^^^
</code></pre>

<p>In our case, we know that every string x will always be a substring of xx (it’ll appear twice, once at each copy of x). So basically we just need to check if our string x is a substring of xx without allowing it to match at the first or halfway character. Here’s a one-liner for that:</p>

<pre><code>function check(str) {
    return (str + str).indexOf(str, 1) !== str.length;
}
</code></pre>

<p>Assuming <code>indexOf</code> is implemented using a fast string matching algorithm, this will run in time O(n), where n is the length of the input string.</p>

<p>Hope this helps!</p>
","501557","","6544931","","2019-04-30 13:02:58","2019-04-30 13:02:58","","","","20","","","","501557","296199","2010-11-09 07:08:36","templatetypedef","2020-03-15 00:01:23","http://welcometotheoryland.wordpress.com","","<p>I love teaching, learning, and that really great feeling you get when you finally understand something.</p>
","33098","13906","120","","","235018"
"54859245","2","","54859228","2019-02-25 03:48:41","","180","","<p>Trailing digits after a <code>.</code> are optional:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>console.log(0. === 0); // true</code></pre>
</div>
</div>
</p>

<p>So</p>

<pre><code>0.-5
</code></pre>

<p>evalutes to</p>

<pre><code>0 - 5
</code></pre>

<p>which is just <code>-5</code>. Similarly,</p>

<pre><code>0.-5+1
</code></pre>

<p>is</p>

<pre><code>0 - 5 + 1
</code></pre>

<p>which is</p>

<pre><code>-5 + 1
</code></pre>

<p>or <code>-4</code>.</p>
","9515207","","254830","","2019-02-26 15:02:46","2019-02-26 15:02:46","","","","1","","","","9515207","170251","2018-03-19 07:56:42","CertainPerformance","2020-03-15 05:06:04","","Austin, TX, USA","<p>Check out my <a href=""https://github.com/CertainPerformance/Stack-Exchange-Userscripts"" rel=""nofollow noreferrer"">userscripts</a> for useful tools and UI improvements for Stack Exchange sites.</p>
","28723","3188","24875","https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1","","13173718"
"57467270","2","","57467003","2019-08-12 19:34:45","","161","","<p>While you should embrace using scenes when your app is run under iOS 13 and later, you can fully opt out while you still support iOS 12 or earlier. </p>

<p>First, completely remove the “Application Scene Manifest” entry from Info.plist. </p>

<p>If there is a scene delegate class, remove it. </p>

<p>If there are any scene related methods in your app delegate, remove those methods.</p>

<p>If missing, add the property <code>var window: UIWindow?</code> to your app delegate.</p>

<p>Your app should now only use the app delegate and under iOS 13 it should have the same life cycle as iOS 12. </p>

<p>None of this is specific to Swift or SwiftUI. </p>
","1226963","","1226963","","2019-12-06 08:33:37","2019-12-06 08:33:37","","","","12","","","","1226963","276683","2012-02-22 21:58:04","rmaddy","2020-02-10 06:36:19","http://www.maddysoft.com/iphone/","","<p>I am an independent iOS app developer producing and selling my own apps. I started with BASIC in 1979 playing with TRS Model I computers at Radio Shack stores. We sure had a lot of fun with 4k of RAM.</p>
","57909","2865","29801","https://i.stack.imgur.com/yjY1E.png","","1270581"
"58909184","2","","58909097","2019-11-18 06:42:54","","160","","<p>The reason <code>std::string(0)</code> is valid, is due to <code>0</code> being a null pointer constant. So 0 matches the string constructor taking a pointer. Then the code runs afoul of the precondition that one may not pass a null pointer to <code>std::string</code>.</p>

<p>Only literal <code>0</code> would be interpreted as a null pointer constant, if it was a run time value in an <code>int</code> you wouldn't have this problem (because then overload resolution would be looking for an <code>int</code> conversion instead). Nor is literal <code>1</code> a problem, because <code>1</code> is not a null pointer constant.</p>

<p>Since it's a compile time problem (literal invalid values) you can catch it at compile time. Add an overload of this form:</p>

<pre><code>void operator[](std::nullptr_t) = delete;
</code></pre>

<p><code>std::nullptr_t</code> is the type of <code>nullptr</code>. And it will match <em>any</em> null pointer constant, be it <code>0</code>, <code>0ULL</code>, or <code>nullptr</code>. And since the function is deleted, it will cause a compile time error during overload resolution.</p>
","817643","","817643","","2019-11-24 10:01:32","2019-11-24 10:01:32","","","","4","","","","817643","133132","2011-06-27 15:14:51","StoryTeller - Unslander Monica","2020-03-14 18:44:58","","Israel","<p>My user handle is in relation to <a href=""https://meta.stackexchange.com/questions/336526/stack-overflow-is-doing-me-ongoing-harm-its-time-to-fix-it"">this post</a>. SE Inc has behaved reprehensibly, and the entire user community should be made aware and take a stand against it. </p>

<hr>

<p>I don't believe in answering questions completely. IMHO, one gains the most when one deduces as much of the answer on their own.</p>

<p>Over the past several years on SO I learned the following:</p>

<ul>
<li>The vital importance of being precise.</li>
<li>Helping others learn can enrich oneself immeasurably.</li>
<li>Some one always knows more, learn from them.</li>
</ul>

<p>I like C very much, but I think we should stop <a href=""https://www.youtube.com/watch?v=YnWhqhNdYyk"" rel=""nofollow noreferrer"">teaching it (as part of teaching C++)</a>.</p>

<p>I also get a twitch in my eye every time someone on SO adds ""My Professor/Assignment forbids the use of the standard c++ library"". This is so asinine, and has nothing to do with teaching ""real"" C++.</p>
","14705","7243","5944","","","432714"
"54200988","1","54201537","","2019-01-15 14:33:43","","158","11269","<p>One of the corners of C++20 concepts is that there are certain situations in which you have to write <code>requires requires</code>. For instance, this example from <a href=""http://eel.is/c++draft/expr#prim.req-3"" rel=""noreferrer"">[expr.prim.req]/3</a>:</p>

<blockquote>
  <p>A <em>requires-expression</em> can also be used in a <em>requires-clause</em> ([temp]) as a way of writing ad hoc constraints on template arguments such as the one below:</p>

<pre><code>template&lt;typename T&gt;
  requires requires (T x) { x + x; }
    T add(T a, T b) { return a + b; }
</code></pre>
  
  <p>The first requires introduces the <em>requires-clause</em>, and the second introduces the <em>requires-expression</em>. </p>
</blockquote>

<p>What is the technical reason behind needing that second <code>requires</code> keyword? Why can't we just allow writing:</p>

<pre><code>template&lt;typename T&gt;
  requires (T x) { x + x; }
    T add(T a, T b) { return a + b; }
</code></pre>

<p><sub>(Note: please don't answer that the grammar <code>requires</code> it)</sub></p>
","2069064","","2069064","","2019-01-15 19:31:19","2019-01-16 16:08:59","Why do we require requires requires?","<c++><c++-concepts><c++20>","5","20","19","","","2069064","216632","2013-02-13 16:10:03","Barry","2020-03-15 01:46:57","https://brevzin.github.io","","<p>I like <a href=""/questions/tagged/c%2b%2b"" class=""post-tag"" title=""show questions tagged &#39;c++&#39;"" rel=""tag"">c++</a>. I am also <a href=""http://stackoverflow.com/help/badges/146/legendary?userid=2069064"">somewhat obsessed</a> with SO. </p>

<hr />

<p>Users I subscribe to, in no particular order: <a href=""http://stackoverflow.com/users/981959/jonathan-wakely"">Jonathan Wakely</a>, <a href=""http://stackoverflow.com/users/2756719/t-c"">T.C.</a>, <a href=""http://stackoverflow.com/users/3647361/columbo"">Columbo</a>, <a href=""http://stackoverflow.com/users/1774667/yakk"">Yakk</a>, <a href=""http://stackoverflow.com/users/420683/dyp"">dyp</a> </p>

<hr />

<p>Various badge milestones:</p>

<ul>
<li>1st to receive the <a href=""https://stackoverflow.com/help/badges/7680/c17"">gold C++17 badge</a></li>
<li>2nd to receive the <a href=""https://stackoverflow.com/help/badges/6490/language-lawyer"">gold language-lawyer badge</a></li>
<li>2nd to receive the <a href=""https://stackoverflow.com/help/badges/6151/c14"">gold C++14 badge</a></li>
<li>4th to receive the <a href=""http://stackoverflow.com/help/badges/4967/c14"">silver C++14 badge</a></li>
<li>8th to receive the <a href=""http://stackoverflow.com/help/badges/751/templates"">gold templates badge</a></li>
<li>11th to receive the <a href=""http://stackoverflow.com/help/badges/4272/c14"">bronze C++14 badge</a></li>
<li>29th to receive the <a href=""http://stackoverflow.com/help/badges/1904/c11"">gold C++11 badge</a></li>
<li>31st to receive the <a href=""http://stackoverflow.com/help/badges/109/templates"">silver templates badge</a></li>
<li>256th to receive the <a href=""http://stackoverflow.com/help/badges/49/c"">gold C++ badge</a>, or 0x0100th if you prefer</li>
</ul>
","12714","5392","2419","https://i.stack.imgur.com/e4V2X.jpg?s=128&g=1","","2362723"
"57676035","2","","57650895","2019-08-27 13:43:16","","148","","<p>There's been a lot of (slightly or entirely) wrong guesses in comments about some details / background for this.</p>

<p>You're looking at <strong>glibc's optimized C fallback optimized implementation.  (For ISAs that don't have a hand-written asm implementation)</strong>.  Or an old version of that code, which is still in the glibc source tree.  <a href=""https://code.woboq.org/userspace/glibc/string/strlen.c.html"" rel=""noreferrer"">https://code.woboq.org/userspace/glibc/string/strlen.c.html</a> is a code-browser based on the current glibc git tree.  Apparently it is still used by a few mainstream glibc targets, including MIPS. (Thanks @zwol).</p>

<h1>On popular ISAs like x86 and ARM, glibc uses hand-written asm</h1>

<p>So the incentive to change anything about this code is lower than you might think.</p>

<p>This bithack code (<a href=""https://graphics.stanford.edu/~seander/bithacks.html#ZeroInWord"" rel=""noreferrer"">https://graphics.stanford.edu/~seander/bithacks.html#ZeroInWord</a>) isn't what actually runs on your server/desktop/laptop/smartphone.  It's better than a naive byte-at-a-time loop, but <strong>even this bithack is pretty bad compared to efficient asm for modern CPUs</strong> (especially x86 where AVX2 SIMD allows checking 32 bytes with a couple instructions, allowing 32 to 64 bytes per clock cycle in the main loop if data is hot in L1d cache on modern CPUs with 2/clock vector load and ALU throughput.  i.e. for medium-sized strings where startup overhead doesn't dominate.)</p>

<p>glibc uses dynamic linking tricks to resolve <code>strlen</code> to an optimal version for your CPU, so even within x86 there's an <a href=""https://code.woboq.org/userspace/glibc/sysdeps/x86_64/strlen.S.html"" rel=""noreferrer"">SSE2 version</a> (16-byte vectors, baseline for x86-64) and an <a href=""https://code.woboq.org/userspace/glibc/sysdeps/x86_64/multiarch/strlen-avx2.S.html"" rel=""noreferrer"">AVX2 version</a> (32-byte vectors).</p>

<p>x86 has efficient data transfer between vector and general-purpose registers, which makes it uniquely(?) good for using SIMD to speed up functions on implicit-length strings where the loop control is data dependent.  <code>pcmpeqb</code> / <code>pmovmskb</code> makes it possible to testing 16 separate bytes at a time.</p>

<p>glibc has an AArch64 version like that <a href=""https://code.woboq.org/userspace/glibc/sysdeps/aarch64/multiarch/strlen_asimd.S.html"" rel=""noreferrer"">using AdvSIMD</a>, and a version for AArch64 CPUs where vector->GP registers stalls the pipeline, so it does <a href=""https://code.woboq.org/userspace/glibc/sysdeps/aarch64/strlen.S.html"" rel=""noreferrer"">actually use this bithack</a>.  But uses count-leading-zeros to find the byte-within-register once it gets a hit, and takes advantage of AArch64's efficient unaligned accesses after checking for page-crossing.</p>

<p>Also related: <a href=""https://stackoverflow.com/questions/55563598/why-is-this-code-6-5x-slower-with-optimizations-enabled/55589634#55589634"">Why is this code 6.5x slower with optimizations enabled?</a> has some more details about what's fast vs. slow in x86 asm for <code>strlen</code> with a large buffer and a simple asm implementation that might be good for gcc to know how to inline.  (Some gcc versions unwisely inline <code>rep scasb</code> which is very slow, or a 4-byte-at-a-time bithack like this.  So GCC's inline-strlen recipe needs updating or disabling.)</p>

<p><strong>Asm doesn't have C-style ""undefined behaviour""</strong>; it's safe to access bytes in memory however you like, and an aligned load that includes any valid bytes can't fault.  Memory protection happens with aligned-page granularity; aligned accesses narrower than that can't cross a page boundary.  <a href=""https://stackoverflow.com/q/37800739"">Is it safe to read past the end of a buffer within the same page on x86 and x64?</a>  The same reasoning applies to the machine-code that this C hack gets compilers to create for a stand-alone non-inline implementation of this function.</p>

<p>When a compiler emits code to call an unknown non-inline function, it has to assume that function modifies any/all global variables and any memory it might possibly have a pointer to.  i.e. everything except locals that haven't had their address escape have to be in sync in memory across the call.  This applies to functions written in asm, obviously, but also to library functions.  If you don't enable link-time optimization, it even applies to separate translation units (source files).</p>

<hr>

<h2>Why this is safe <em>as part of glibc</em> but <em>not</em> otherwise.</h2>

<p><strong>The most important factor is that this <code>strlen</code> can't inline into anything else.</strong>  It's not safe for that; it contains <strong>strict-aliasing UB</strong> (reading <code>char</code> data through an <code>unsigned long*</code>).  <code>char*</code> is allowed to alias anything else <a href=""https://stackoverflow.com/questions/23848188/strict-aliasing-rule-and-char-pointers"">but the reverse is <em>not</em> true</a>.</p>

<p>This is a library function for an ahead-of-time compiled library (glibc).  <strong>It won't get inlined with link-time-optimization into callers.</strong>  This means it just has to compile to safe machine code for a stand-alone version of <code>strlen</code>.  It doesn't have to be portable / safe C.</p>

<p>The GNU C library only has to compile with GCC.  Apparently it's <a href=""https://stackoverflow.com/questions/57650895/are-strlen-optimizations-really-needed-in-glibc#comment101802872_57676035"">not supported</a> to compile it with clang or ICC, even though they support GNU extensions.  GCC is an ahead-of-time compilers that turn a C source file into an object file of machine code.  Not an interpreter, so unless it inlines at compile time, bytes in memory are just bytes in memory.  i.e. strict-aliasing UB isn't dangerous when the accesses with different types happen in different functions that don't inline into each other.</p>

<p>Remember that <code>strlen</code>'s behaviour is defined <em>by</em> the ISO C standard.  That function name specifically is <em>part of</em> the implementation.  Compilers like GCC even treat the name as a built-in function unless you use <code>-fno-builtin-strlen</code>, so <code>strlen(""foo"")</code> can be a compile-time constant <code>3</code>.  The definition in the library is <em>only</em> used when gcc decides to actually emit a call to it instead of inlining its own recipe or something.</p>

<p>When UB isn't visible <em>to the compiler</em> at compile time, you get sane machine code.  The machine code has to work for the no-UB case, and even if you <em>wanted</em> to, there's no way for the asm to detect what types the caller used to put data into the pointed-to memory.</p>

<p>Glibc is compiled to a stand-alone static or dynamic library that can't inline with link-time optimization.  glibc's build scripts don't create ""fat"" static libraries containing machine code + gcc GIMPLE internal representation for link-time optimization when inlining into a program.  (i.e. <code>libc.a</code> won't participate in <code>-flto</code> link-time optimization into the main program.)  Building glibc that way would be potentially unsafe <em>on targets that actually use this <code>.c</code></em>.</p>

<p>In fact as @zwol comments, LTO can't be used when building glibc <em>itself</em>, because of ""brittle"" code like this which could break if inlining between glibc source files was possible.  (There are some internal uses of <code>strlen</code>, e.g. maybe as part of the <code>printf</code> implementation)</p>

<hr>

<p><strong>This <code>strlen</code> makes some assumptions:</strong></p>

<ul>
<li><strong><code>CHAR_BIT</code> is a multiple of 8</strong>.  True on all GNU systems.  POSIX 2001 even guarantees <code>CHAR_BIT == 8</code>.  (This looks safe for systems with <code>CHAR_BIT= 16</code> or <code>32</code>, like some DSPs; the unaligned-prologue loop will always run 0 iterations if <code>sizeof(long) = sizeof(char) = 1</code> because every pointer is always aligned and <code>p &amp; sizeof(long)-1</code> is always zero.)  But if you had a non-ASCII character set where chars are 9 or 12 bits wide, <code>0x8080...</code> is the wrong pattern.</li>
<li>(maybe) <code>unsigned long</code> is 4 or 8 bytes.  Or maybe it would actually work for any size of <code>unsigned long</code> up to 8, and it uses an <code>assert()</code> to check for that.</li>
</ul>

<p>Those two aren't possible UB, they're just non-portability to some C implementations.  This code is (or was) <em>part of</em> the C implementation on platforms where it does work, so that's fine.</p>

<p>The next assumption is potential C UB:</p>

<ul>
<li><strong>An aligned load that contains any valid bytes can't fault</strong>, and is safe as long as you ignore the bytes outside the object you actually want.  (True in asm on every GNU systems, and on all normal CPUs because memory protection happens with aligned-page granularity.  <a href=""https://stackoverflow.com/q/37800739"">Is it safe to read past the end of a buffer within the same page on x86 and x64?</a> safe in C when the UB isn't visible at compile time.  Without inlining, this is the case here.  The compiler can't prove that reading past the first <code>0</code> is UB; it could be a C <code>char[]</code> array containing <code>{1,2,0,3}</code> for example)</li>
</ul>

<p>That last point is what makes it safe to read past the end of a C object here.  That is pretty much safe even when inlining with current compilers because I think they don't currently treat that implying a path of execution is unreachable.  But anyway, the strict aliasing is already a showstopper if you ever let this inline.</p>

<p>Then you'd have problems like the Linux kernel's old unsafe <code>memcpy</code> <em>CPP macro</em> that used pointer-casting to <code>unsigned long</code> (<a href=""https://stackoverflow.com/questions/2958633/gcc-strict-aliasing-and-horror-stories/2959468#2959468"">gcc, strict-aliasing, and horror stories</a>).</p>

<p><strong>This <code>strlen</code> dates back to the era when you could get away with stuff like that in general</strong>; it used to be pretty much safe without the ""only when not inlining"" caveat before GCC3.</p>

<hr>

<p>UB that's only visible when looking across call/ret boundaries can't hurt us.  (e.g. calling this on a <code>char buf[]</code> instead of on an array of <code>unsigned long[]</code> cast to a <code>const char*</code>).  Once the machine code is set in stone, it's just dealing with bytes in memory.  A non-inline function call has to assume that the callee reads any/all memory.</p>

<hr>

<h1>Writing this safely, without strict-aliasing UB</h1>

<p>The <a href=""https://gcc.gnu.org/onlinedocs/gcc/Common-Type-Attributes.html#Common-Type-Attributes"" rel=""noreferrer"">GCC type attribute <code>may_alias</code></a> gives a type the same alias-anything treatment as <code>char*</code>.  (Suggested by @KonradBorowsk).  GCC headers currently use it for x86 SIMD vector types like <code>__m128i</code> so you can always safely do <code>_mm_loadu_si128( (__m128i*)foo )</code>.  (See <a href=""https://stackoverflow.com/questions/52112605/is-reinterpret-casting-between-hardware-vector-pointer-and-the-corresponding-t"">Is `reinterpret_cast`ing between hardware vector pointer and the corresponding type an undefined behavior?</a> for more details about what this does and doesn't mean.)</p>

<pre><code>strlen(const char *char_ptr)
{
  typedef unsigned long __attribute__((may_alias)) aliasing_ulong;

  aliasing_ulong *longword_ptr = (aliasing_ulong *)char_ptr;
  for (;;) {
     unsigned long ulong = *longword_ptr++;  // can safely alias anything
     ...
  }
}
</code></pre>

<p>You could also use <code>aligned(1)</code> to express a type with <code>alignof(T) = 1</code>.<br>
<code>typedef unsigned long __attribute__((may_alias, aligned(1))) unaligned_aliasing_ulong;</code></p>

<p><strong>A portable way to express an aliasing load in ISO is with <code>memcpy</code></strong>, which modern compilers do know how to inline as a single load instruction.  e.g.</p>

<pre><code>   unsigned long longword;
   memcpy(&amp;longword, char_ptr, sizeof(longword));
   char_ptr += sizeof(longword);
</code></pre>

<p>This also works for unaligned loads because <code>memcpy</code> works as-if by <code>char</code>-at-a-time access.  But in practice modern compilers understand <code>memcpy</code> very well.</p>

<p>The danger here is that if GCC doesn't <em>know</em> for sure that <code>char_ptr</code> is word-aligned, it won't inline it on some platforms that might not support unaligned loads in asm.  e.g. MIPS before MIPS64r6, or older ARM.  If you got an actual function call to <code>memcpy</code> just to load a word (and leave it in other memory), that would be a disaster.  GCC can sometimes see when code aligns a pointer.  Or after the char-at-a-time loop that reaches a ulong boundary you could use<br>
<code>p = __builtin_assume_aligned(p, sizeof(unsigned long));</code></p>

<p>This doesn't avoid the read-past-the-object possible UB, but with current GCC that's not dangerous in practice.</p>

<hr>

<h1>Why hand-optimized C source is necessary: current compilers aren't good enough</h1>

<p>Hand-optimized asm can be even better when you want every last drop of performance for a widely-used standard library function.  Especially for something like <code>memcpy</code>, but also <code>strlen</code>.  In this case it wouldn't be much easier to use C with x86 intrinsics to take advantage of SSE2.</p>

<p>But here we're just talking about a naive vs. bithack C version without any ISA-specific features.</p>

<p>(I think we can take it as a given that <code>strlen</code> is widely enough used that making it run as fast as possible is important.  So the question becomes whether we can get efficient machine code from simpler source.  No, we can't.)</p>

<p><strong>Current GCC and clang are not capable of auto-vectorizing loops where the iteration count isn't known ahead of the first iteration</strong>.  (e.g. it has to be possible to check if the loop will run at least 16 iterations <em>before</em> running the first iteration.)  e.g. autovectorizing memcpy is possible (explicit-length buffer) but not strcpy or strlen (implicit-length string), given current compilers.</p>

<p>That includes search loops, or any other loop with a data-dependent <code>if()break</code> as well as a counter.</p>

<p>ICC (Intel's compiler for x86) can auto-vectorize some search loops, but still only makes naive byte-at-a-time asm for a simple / naive C <code>strlen</code> like OpenBSD's libc uses. (<a href=""https://godbolt.org/z/j973Sz"" rel=""noreferrer"">Godbolt</a>).  (From <a href=""https://stackoverflow.com/questions/57650895/are-strlen-optimizations-really-needed-in-glibc/57663045#57663045"">@Peske's answer</a>).</p>

<p><strong>A hand-optimized libc <code>strlen</code> is necessary for performance with current compilers</strong>.  Going 1 byte at a time (with unrolling maybe 2 bytes per cycle on wide superscalar CPUs) is pathetic when main memory can keep up with about 8 bytes per cycle, and L1d cache can deliver 16 to 64 per cycle.  (2x 32-byte loads per cycle on modern mainstream x86 CPUs since Haswell and Ryzen.  Not counting AVX512 which can reduce clock speeds just for using 512-bit vectors; which is why glibc probably isn't in a hurry to add an AVX512 version.  Although with 256-bit vectors, AVX512VL + BW masked compare into a mask and <code>ktest</code> or <code>kortest</code> could make <code>strlen</code> more hyperthreading friendly by reducing its uops / iteration.)</p>

<p>I'm including non-x86 here, that's the ""16 bytes"".  e.g. most AArch64 CPUs can do at least that, I think, and some certainly more.  And some have enough execution throughput for <code>strlen</code> to keep up with that load bandwidth.</p>

<p>Of course programs that work with large strings should usually keep track of lengths to avoid having to redo finding the length of implicit-length C strings very often.  But short to medium length performance still benefits from hand-written implementations, and I'm sure some programs do end up using strlen on medium-length strings.</p>
","224132","","224132","","2019-08-28 15:03:50","2019-08-28 15:03:50","","","","15","","","","224132","183559","2009-12-03 18:17:41","Peter Cordes","2020-03-15 04:36:17","","Halifax, Canada","<p>GNU/Linux hacker and command line junkie.</p>

<p>Primary maintainer of the Stackoverflow <a href=""/questions/tagged/x86"" class=""post-tag"" title=""show questions tagged &#39;x86&#39;"" rel=""tag"">x86</a> <a href=""http://stackoverflow.com/tags/x86/info"">tag wiki</a>.</p>

<p>I like efficient code, and knowing how things <em>really</em> work.</p>

<p>I mostly use C/C++ (and perl/bash) on Linux, but I mostly look at assembly-language stuff on SO because it's more interesting to me, and there are fewer people posting good asm answers.</p>

<p>(profile pic is from <a href=""https://xkcd.com/386/"" rel=""nofollow"">https://xkcd.com/386/</a>, and describes me perfectly.  Incomplete answers/explanations make me crazy.)</p>
","36669","21491","4122","https://i.stack.imgur.com/N4ivW.png?s=128&g=1","","78868"
"55666898","2","","55666826","2019-04-13 15:07:24","","141","","<p>As part of ASP.NET Core 3.0, the team moved away from including Json.NET by default. You can read more about that in general in the <a href=""https://github.com/aspnet/Announcements/issues/325"" rel=""noreferrer"">announcement on breaking changes to Microsoft.AspNetCore.App</a>.</p>

<p>Instead of Json.NET, ASP.NET Core 3.0 and .NET Core 3.0 include a different JSON API that focuses a bit more on performance. You can learn about that more in the <a href=""https://github.com/dotnet/announcements/issues/90"" rel=""noreferrer"">announcement about “The future of JSON in .NET Core 3.0”</a>.</p>

<p>The new templates for ASP.NET Core will no longer bundle with Json.NET but you can easily reconfigure the project to use it instead of the new JSON library. This is important for both compatibility with older projects and also because the new library is not supposed to be a full replacement, so you won't see the full feature set there.</p>

<p>In order to reconfigure your ASP.NET Core 3.0 project with Json.NET, you will need to add a NuGet reference to <code>Microsoft.AspNetCore.Mvc.NewtonsoftJson</code>, which is the package that includes all the necessary bits. Then, in the Startup’s <code>ConfigureServices</code>, you will need to configure MVC like this:</p>

<pre><code>services.AddControllers()
    .AddNewtonsoftJson();
</code></pre>

<p>This sets up MVC controllers and configures it to use Json.NET instead of that new API. Instead of controllers, you can also use a different MVC overload (e.g. for controllers with views, or Razor pages). That <code>AddNewtonsoftJson</code> method has an overload that allows you to configure the Json.NET options like you were used to with <code>AddJsonOptions</code> in ASP.NET Core 2.x.</p>

<pre><code>services.AddControllers()
    .AddNewtonsoftJson(options =&gt;
    {
        options.SerializerSettings.ContractResolver = new DefaultContractResolver();
    });
</code></pre>
","216074","","216074","","2019-10-07 19:41:23","2019-10-07 19:41:23","","","","17","","","","216074","259779","2009-11-21 13:29:25","poke","2020-03-15 01:09:49","http://twitter.com/poke","Dortmund, Germany","<p>M.Sc. in computer science, .NET software engineer, web developer, Python developer, lots of other things-developer…</p>
","22114","2549","780","","","75311"
"55612795","2","","49707028","2019-04-10 12:39:12","","140","","<p>While asserts technically works, you should not use them.</p>

<p>Instead, use the constant <code>kReleaseMode</code> from <code>package:flutter/foundation.dart</code></p>

<hr>

<p>The difference is all about tree shaking</p>

<p>Tree shaking (aka the compiler removing unused code) depends on variables being constants.</p>

<p>The issue is, with asserts our <code>isInReleaseMode</code> boolean is <strong>not</strong> a constant. So when shipping our app, both the dev and release code are included.</p>

<p>On the other hand, <code>kReleaseMode</code> <strong>is</strong> a constant. Therefore the compiler is correctly able to remove unused code, and we can safely do:</p>

<pre><code>if (kReleaseMode) {

} else {
  // Will be tree-shaked on release builds.
}
</code></pre>
","8394265","","821657","","2019-11-28 02:16:03","2019-11-28 02:16:03","","","","3","","","","8394265","87647","2017-07-31 13:22:44","Rémi Rousselet","2020-03-15 02:28:41","","Paris, France","<p><em>Dart makes my heart Flutter</em></p>

<p>Some interesting Flutter topics: </p>

<ul>
<li><a href=""https://medium.com/@darky12s/flutter-reducing-widgets-boilerplate-3e635f10685e"" rel=""nofollow noreferrer"">https://medium.com/@darky12s/flutter-reducing-widgets-boilerplate-3e635f10685e</a></li>
<li><a href=""https://stackoverflow.com/questions/53972392/custom-width-height-property-for-a-widget-are-ignored/53972393"">Custom width/height property for a widget are ignored</a></li>
<li><a href=""https://stackoverflow.com/questions/46057353/controlling-state-from-outside-of-a-statefulwidget/51460832"">Controlling State from outside of a StatefulWidget</a></li>
<li><a href=""https://stackoverflow.com/questions/50080860/what-are-keys-in-the-stateless-widgets-class/50081052#50081052"">What are Keys in the Stateless widgets class?</a></li>
<li><a href=""https://stackoverflow.com/questions/53234825/what-is-the-difference-between-functions-and-classes-to-create-widgets/53234826#53234826"">What is the difference between functions and classes to create widgets?</a></li>
<li><a href=""https://stackoverflow.com/questions/52249578/how-to-deal-with-unwanted-widget-build"">How to deal with unwanted widget build?</a></li>
<li><a href=""https://stackoverflow.com/questions/53467979/understanding-flutter-render-engine"">Understanding Flutter Render Engine</a></li>
<li><a href=""https://stackoverflow.com/questions/44004451/navigator-operation-requested-with-a-context-that-does-not-include-a-navigator/51292613#51292613"">Navigator operation requested with a context that does not include a Navigator</a></li>
<li><a href=""https://stackoverflow.com/questions/47501710/what-is-the-relation-between-stateful-and-stateless-widgets-in-flutter/47502202#47502202"">What is the relation between stateful and stateless widgets in Flutter?</a></li>
<li><a href=""https://stackoverflow.com/questions/50818770/passing-data-to-a-stateful-widget/50818870"">Passing Data to a Stateful Widget</a></li>
</ul>
","9664","239","246","","","11452143"
"55783623","2","","55783615","2019-04-21 14:31:00","","139","","<p>The <code>+</code> here is <a href=""https://en.wikipedia.org/wiki/Unary_operation"" rel=""noreferrer"">unary <code>+</code> operator</a>, not the <a href=""https://en.wikipedia.org/wiki/Binary_operation"" rel=""noreferrer"">binary addition operator</a>. There's no addition happening here. </p>

<p>Also, the syntax <code>(int)</code> is used for typecasting.</p>

<p>You can re-read that statement as</p>

<pre><code>(int) (+ 4) * 5;    
</code></pre>

<p>which is parsed as</p>

<pre><code>((int) (+ 4)) * (5);    
</code></pre>

<p>which says, </p>

<ol>
<li>Apply the unary <code>+</code> operator on the integer constant value <code>4</code>.</li>
<li>typecast to an <code>int</code></li>
<li>multiply with operand <code>5</code></li>
</ol>

<p>This is similar to <code>(int) (- 4) * (5);</code>, where the usage of the unary operator is more familiar.</p>

<p>In your case, the unary <code>+</code> and the cast to <code>int</code> - both are redundant. </p>
","2173917","","2173917","","2019-04-23 13:48:34","2019-04-23 13:48:34","","","","9","","","","2173917","118609","2013-03-15 12:22:08","Sourav Ghosh","2020-03-10 14:56:02","http://about.me/ghoshsourav","Kolkata, West Bengal, India","<p><a href=""https://en.wikipedia.org/wiki/Yet_another"" rel=""nofollow noreferrer"">Yet Another</a> Regular Contributor.</p>
","14467","1567","10218","https://i.stack.imgur.com/4dwoM.jpg","","2497975"
"56156165","2","","56154380","2019-05-15 19:09:57","","134","","<p>When you add 1 to a pointer, the result is the location of the next object in a sequence of objects of the pointed-to type (i.e., an array).  If <code>p</code> points to an <code>int</code> object, then <code>p + 1</code> will point to the next <code>int</code> in a sequence.  If <code>p</code> points to a 5-element array of <code>int</code> (in this case, the expression <code>&amp;a</code>), then <code>p + 1</code> will point to the next <em>5-element array of <code>int</code></em> in a sequence.  </p>

<p>Subtracting two pointers (provided they both point into the same array object, or one is pointing one past the last element of the array) yields the number of objects (array elements) between those two pointers.  </p>

<p>The expression <code>&amp;a</code> yields the address of <code>a</code>, and has the type <code>int (*)[5]</code> (pointer to 5-element array of <code>int</code>).  The expression <code>&amp;a + 1</code> yields the address of the next 5-element array of <code>int</code> following <code>a</code>, and also has the type <code>int (*)[5]</code>.  The expression <code>*(&amp;a + 1)</code> dereferences the result of <code>&amp;a + 1</code>, such that it yields the address of the first <code>int</code> following the last element of <code>a</code>, and has type <code>int [5]</code>, which in this context ""decays"" to an expression of type <code>int *</code>.  </p>

<p>Similarly, the expression <code>a</code> ""decays"" to a pointer to the first element of the array and has type <code>int *</code>.  </p>

<p>A picture may help:</p>

<pre><code>int [5]  int (*)[5]     int      int *

+---+                   +---+
|   | &lt;- &amp;a             |   | &lt;- a
| - |                   +---+
|   |                   |   | &lt;- a + 1
| - |                   +---+
|   |                   |   |
| - |                   +---+
|   |                   |   |
| - |                   +---+
|   |                   |   |
+---+                   +---+
|   | &lt;- &amp;a + 1         |   | &lt;- *(&amp;a + 1)
| - |                   +---+
|   |                   |   |
| - |                   +---+
|   |                   |   |
| - |                   +---+
|   |                   |   |
| - |                   +---+
|   |                   |   |
+---+                   +---+
</code></pre>

<p>This is two views of the same storage - on the left, we're viewing it as a sequence of 5-element arrays of <code>int</code>, while on the right, we're viewing it as a sequence of <code>int</code>.  I also show the various expressions and their types.  </p>

<p>Be aware, the expression <code>*(&amp;a + 1)</code> results in <em>undefined behavior</em>:</p>

<blockquote>
...<br>
If the result points one past the last element of the array object, it
shall not be used as the operand of a unary * operator that is evaluated.
</blockquote>

<p><sup><em><a href=""http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf"" rel=""noreferrer"">C 2011 Online Draft</a>, 6.5.6/9</em></sup></p>
","134554","","134554","","2019-05-16 11:27:17","2019-05-16 11:27:17","","","","6","","","","134554","91871","2009-07-07 21:31:06","John Bode","2020-03-14 22:49:10","","Manor, TX","<p>Professional software developer since 1990.  Primary development experience is high-level application logic using C and C++ on a variety of platforms, mostly Unix or linux.  Some professional experience with Java and various flavors of SQL and RDBM systems.  </p>
","4047","2540","66","","","45619"
"53995996","2","","53995948","2019-01-01 13:50:28","","133","","<p>Open <strong>angular.json</strong> file and find <code>budgets</code> keyword. </p>

<p>It should look like:</p>

<pre><code>""budgets"": [
   {
      ""type"": ""initial"",
      ""maximumWarning"": ""2mb"",
      ""maximumError"": ""5mb""
   }
]
</code></pre>

<p>As you’ve probably guessed you can increase the <code>maximumWarning</code> value to prevent this warning, i.e.:</p>

<pre><code>""budgets"": [
   {
      ""type"": ""initial"",
      ""maximumWarning"": ""4mb"", &lt;===
      ""maximumError"": ""5mb""
   }
]
</code></pre>

<h2>What does <strong>budgets</strong> mean?</h2>

<blockquote>
  <p>A performance budget is a group of limits to certain values that
  affect site performance, that may not be exceeded in the design and
  development of any web project.</p>
</blockquote>

<p>In our case budget is the limit for bundle sizes.</p>

<p>See also:</p>

<ul>
<li><a href=""https://github.com/webpack/webpack/issues/3216"" rel=""noreferrer"">https://github.com/webpack/webpack/issues/3216</a></li>
<li><a href=""https://angular.io/guide/build#configure-size-budgets"" rel=""noreferrer"">https://angular.io/guide/build#configure-size-budgets</a></li>
<li><a href=""https://developers.google.com/web/tools/lighthouse/audits/budgets"" rel=""noreferrer"">Performance Budgets (Keep Request Counts Low And File Sizes Small)</a></li>
</ul>
","5485167","","5485167","","2019-12-29 04:46:47","2019-12-29 04:46:47","","","","5","","","","5485167","133662","2015-10-25 05:32:26","yurzui","2020-03-15 03:36:46","","","<p>I'm Alexey Zuev, a full-stack developer truly passionate about front-end.</p>

<p>GDE in Angular in Web Technologies</p>

<p>You can reach me out here: <strong>a.yurich.zuev@gmail.com</strong></p>

<p><strong>Some of my articles</strong>: </p>

<ul>
<li><p><a href=""https://medium.com/@a.yurich.zuev/angular-code-splitting-or-how-to-share-components-between-lazy-modules-432c755e389c"" rel=""nofollow noreferrer"">Code-splitting in Angular or how to share components between lazy modules</a></p></li>
<li><p><a href=""https://blog.angularindepth.com/building-extensible-dynamic-pluggable-enterprise-application-with-angular-aed8979faba5"" rel=""nofollow noreferrer"">Building an extensible Dynamic Pluggable Enterprise Application with Angular</a></p></li>
<li><p><a href=""https://medium.com/angular-in-depth/angular-show-loading-indicator-when-obs-async-is-not-yet-resolved-9d8e5497dd8"" rel=""nofollow noreferrer"">Angular: show loading indicator when obs$ | async is not yet resolved</a></p></li>
<li><p><a href=""https://medium.com/angular-in-depth/type-checking-templates-in-angular-viewengine-and-ivy-77f8536359f5"" rel=""nofollow noreferrer"">Type-checking templates in Angular ViewEngine and Ivy</a></p></li>
<li><p><a href=""https://blog.angularindepth.com/angular-ivy-change-detection-execution-are-you-prepared-ab68d4231f2c"" rel=""nofollow noreferrer"">Angular Ivy change detection execution: are you prepared?</a></p></li>
<li><p><a href=""https://blog.angularindepth.com/angular-di-getting-to-know-the-ivy-nodeinjector-33b815642a8e"" rel=""nofollow noreferrer"">Angular DI: Getting to know the Ivy NodeInjector</a></p></li>
<li><p><a href=""https://blog.angularindepth.com/angular-dependency-injection-and-tree-shakeable-tokens-4588a8f70d5d"" rel=""nofollow noreferrer"">What you always wanted to know about Angular Dependency Injection tree</a></p></li>
<li><p><a href=""https://blog.angularindepth.com/do-you-know-how-angular-transforms-your-code-7943b9d32829"" rel=""nofollow noreferrer"">Do you know how Angular transforms your code?</a></p></li>
<li><p><a href=""https://medium.com/@a.yurich.zuev/angular-nested-template-driven-form-4a3de2042475"" rel=""nofollow noreferrer"">Angular: Nested template driven form</a></p></li>
</ul>
","7708","1367","66","https://i.stack.imgur.com/qWD9t.jpg?s=128&g=1","","7181370"
"54069332","2","","54069253","2019-01-07 06:15:28","","132","","<p>Much like setState in Class components created by extending <code>React.Component</code> or <code>React.PureComponent</code>, the state update using the updater provided by <code>useState</code> hook is also asynchronous, and will not immediately reflect and update but will trigger a re-render </p>

<pre><code>setMovies(result);
console.log(movies) // movies here will not be updated
</code></pre>

<p>If you want to perform an action on state update, you need to use the useEffect hook, much like using <code>componentDidUpdate</code> in class components since the setter returned by useState doesn't have a callback pattern</p>

<pre><code>useEffect(() =&gt; {
    // action on update of movies
}, [movies]);
</code></pre>

<p>As far as the syntax to update state is concerned, <code>setMovies(result)</code> will replace the previous <code>movies</code> value in the state with those available from the async request</p>

<p>However if you want to merge the response with the previously existing values, you must use the callback syntax of state updation along with the correct use of spread syntax like</p>

<pre><code>setMovies(prevMovies =&gt; ([...prevMovies, ...result]));
</code></pre>
","5928186","","5928186","","2019-01-14 06:16:55","2019-01-14 06:16:55","","","","3","","","","5928186","140085","2016-02-15 04:45:44","Shubham Khatri","2020-03-14 17:13:38","","Bangalore, Karnataka, India","<p>I spend most of my free time reading question on stackoverflow and learning all the cool stuff thats out there.</p>

<p>Checkout my <a href=""https://www.linkedin.com/in/shubham-khatri-2204/"" rel=""nofollow noreferrer"">LinkedIn Profile</a></p>

<p>Some of my most useful answers:</p>

<p><a href=""https://stackoverflow.com/questions/52437195/reactrouter-v4-prompt-override-default-alert/52437325#52437325"">ReactRouter v4 Prompt - override default alert</a></p>

<p><a href=""https://stackoverflow.com/questions/45373742/detect-route-change-with-react-router/45373907#45373907"">Detect Route Change with react-router</a></p>

<p><a href=""https://stackoverflow.com/questions/50502664/how-to-update-the-context-value-in-provider-from-the-consumer/50502829#50502829"">How to update the Context value in Provider from the Consumer</a></p>

<p><a href=""https://stackoverflow.com/questions/50817672/does-new-react-context-api-trigger-re-renders"">Does new React Context API trigger re-renders?</a></p>

<p><a href=""https://stackoverflow.com/questions/48209452/when-to-use-functional-setstate/48209870#48209870"">When to use functional setState</a></p>

<p><a href=""https://stackoverflow.com/questions/49809884/access-react-context-outside-of-render-function/49810870#49810870"">Access React Context outside of render function</a></p>

<p><a href=""https://stackoverflow.com/questions/47627818/performing-authentication-on-routes-with-react-router-v4/47628941#47628941"">Performing Authentication on Routes with react-router-v4</a></p>

<p><a href=""https://stackoverflow.com/questions/45053622/how-to-avoid-binding-inside-render-method/45053753#45053753"">How to avoid bind or inline arrow functions inside render method</a></p>

<p><a href=""https://stackoverflow.com/questions/47541032/handling-async-request-with-react-redux-and-axios/47588228#47588228"">Handling async request with React, Redux and Axios?</a></p>

<p><a href=""https://stackoverflow.com/questions/44313375/webpack-watch-exits-after-building-once"">webpack --watch exits after building once</a></p>

<p><a href=""https://stackoverflow.com/questions/44806333/unable-to-catch-and-log-the-error-response-from-an-axios-request"">Unable to catch and log the Error response from an axios request</a></p>

<p><a href=""https://stackoverflow.com/questions/44127739/trying-to-change-the-routing-url-based-on-a-specific-condition-in-react/44128108#44128108"">Programmatically Navigate using react-router</a></p>

<p><a href=""https://stackoverflow.com/questions/44121069/how-to-pass-parameters-with-history-push-in-react-router-v4/45263164#45263164"">How to pass params with history.push/Link/Redirect in react-router v4?</a></p>

<p><a href=""https://stackoverflow.com/questions/44513287/how-to-get-redux-form-data-in-another-component"">How to get Redux Form data in another Component</a></p>

<p><a href=""https://stackoverflow.com/questions/45429963/onenter-prop-in-react-router-v4/45430656#45430656"">onEnter prop in react-router v4</a></p>
","15578","3079","564","https://i.stack.imgur.com/Pa1fE.jpg","","7841989"
"58744601","2","","58744557","2019-11-07 08:23:26","","132","","<p>The <code>dollarToEuro</code>'s return value depends on an outside variable that is not an argument; therefore, the function is impure.</p>

<blockquote>
  <p>In the answer is NO, how then can we refactor the function to be pure?</p>
</blockquote>

<p>One option is to pass in <code>exchangeRate</code>. This way, every time arguments are <code>(something, somethingElse)</code>, the output is <em>guaranteed</em> to be <code>something * somethingElse</code>:</p>

<pre><code>const exchangeRate =  fetchFromDatabase(); // evaluates to say 0.9 for today;

const dollarToEuro = (x, exchangeRate) =&gt; {
  return x * exchangeRate;
};
</code></pre>

<p>Note that for functional programming, you should avoid <code>let</code> - always use <code>const</code> to avoid reassignment.</p>
","9515207","","11134827","","2019-11-24 04:41:34","2019-11-24 04:41:34","","","","12","","","","9515207","170251","2018-03-19 07:56:42","CertainPerformance","2020-03-15 05:06:04","","Austin, TX, USA","<p>Check out my <a href=""https://github.com/CertainPerformance/Stack-Exchange-Userscripts"" rel=""nofollow noreferrer"">userscripts</a> for useful tools and UI improvements for Stack Exchange sites.</p>
","28723","3188","24875","https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1","","13173718"
"54028200","2","","54028199","2019-01-03 18:54:20","","122","","<p>TLDR; No, <code>for</code> loops are not blanket ""bad"", at least, not always. It is probably <strong>more accurate to say that some vectorized operations are slower than iterating</strong>, versus saying that iteration is faster than some vectorized operations. Knowing when and why is key to getting the most performance out of your code. In a nutshell, these are the situations where it is worth considering an alternative to vectorized pandas functions:</p>

<ol>
<li>When your data is small (...depending on what you're doing),</li>
<li>When dealing with <code>object</code>/mixed dtypes</li>
<li>When using the <code>str</code>/regex accessor functions</li>
</ol>

<p>Let's examine these situations individually. </p>

<hr>

<h3>Iteration v/s Vectorization on Small Data</h3>

<p>Pandas follows a <a href=""https://en.wikipedia.org/wiki/Convention_over_configuration"" rel=""noreferrer"">""Convention Over Configuration""</a> approach in its API design. This means that the same API has been fitted to cater to a broad range of data and use cases. </p>

<p>When a pandas function is called, the following things (among others) must internally be handled by the function, to ensure working </p>

<ol>
<li>Index/axis alignment</li>
<li>Handling mixed datatypes</li>
<li>Handling missing data</li>
</ol>

<p>Almost every function will have to deal with these to varying extents, and this presents an <strong>overhead</strong>. The overhead is less for numeric functions (for example, <a href=""https://github.com/pandas-dev/pandas/blob/v0.23.4/pandas/core/ops.py#L1371-L1388"" rel=""noreferrer""><code>Series.add</code></a>), while it is more pronounced for string functions (for example, <a href=""https://github.com/pandas-dev/pandas/blob/v0.23.4/pandas/core/strings.py#L635-L669"" rel=""noreferrer""><code>Series.str.replace</code></a>).</p>

<p><a href=""https://docs.python.org/3/tutorial/controlflow.html#for-statements"" rel=""noreferrer""><code>for</code></a> loops, on the other hand, are faster then you think. What's even better is <a href=""https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions"" rel=""noreferrer"">list comprehensions</a> (which create lists through <code>for</code> loops) are even faster as they are optimized iterative mechanisms for list creation.</p>

<p>List comprehensions follow the pattern </p>

<pre><code>[f(x) for x in seq]
</code></pre>

<p>Where <code>seq</code> is a pandas series or DataFrame column. Or, when operating over multiple columns,</p>

<pre><code>[f(x, y) for x, y in zip(seq1, seq2)]
</code></pre>

<p>Where <code>seq1</code> and <code>seq2</code> are columns. </p>

<p><strong>Numeric Comparison</strong><br>
Consider a simple boolean indexing operation. The list comprehension method has been timed against <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.ne.html"" rel=""noreferrer""><code>Series.ne</code></a> (<code>!=</code>) and <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.query.html"" rel=""noreferrer""><code>query</code></a>. Here are the functions:</p>

<pre><code># Boolean indexing with Numeric value comparison.
df[df.A != df.B]                            # vectorized !=
df.query('A != B')                          # query (numexpr)
df[[x != y for x, y in zip(df.A, df.B)]]    # list comp
</code></pre>

<p>For simplicity, I have used the <a href=""https://github.com/nschloe/perfplot"" rel=""noreferrer""><code>perfplot</code></a> package to run all the timeit tests in this post. The timings for the operations above are below:</p>

<p><a href=""https://i.stack.imgur.com/sbtDB.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/sbtDB.png"" alt=""enter image description here""></a></p>

<p>The list comprehension outperforms <code>query</code> for moderately sized N, and even outperforms the vectorized not equals comparison for tiny N. Unfortunately, the list comprehension scales linearly, so it does not offer much performance gain for larger N. </p>

<blockquote>
  <p><strong>Note</strong><br>
  It is worth mentioning that much of the benefit of list comprehension come from not having to worry about the index alignment,
  but this means that if your code is dependent on indexing alignment,
  this will break. In some cases, vectorised operations over the
  underlying NumPy arrays can be considered as bringing in the ""best of
  both worlds"", allowing for vectorisation <em>without</em> all the unneeded overhead of the pandas functions. This means that you can rewrite the operation above as </p>

<pre><code>df[df.A.values != df.B.values]
</code></pre>
  
  <p>Which outperforms both the pandas and list comprehension equivalents:<br>
  <img src=""https://i.stack.imgur.com/m9hyc.png"" width=""300""/><br>
  NumPy vectorization is out of the scope of this post, but it is definitely worth considering, if performance matters.</p>
</blockquote>

<p><strong>Value Counts</strong><br>
Taking another example - this time, with another vanilla python construct that is <em>faster</em> than a for loop - <a href=""https://docs.python.org/3/library/collections.html#collections.Counter"" rel=""noreferrer""><code>collections.Counter</code></a>. A common requirement is to compute the value counts and return the result as a dictionary. This is done with <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.value_counts.html#pandas-series-value-counts"" rel=""noreferrer""><code>value_counts</code></a>, <a href=""https://docs.scipy.org/doc/numpy-1.14.1/reference/generated/numpy.unique.html"" rel=""noreferrer""><code>np.unique</code></a>, and <code>Counter</code>:</p>

<pre><code># Value Counts comparison.
ser.value_counts(sort=False).to_dict()           # value_counts
dict(zip(*np.unique(ser, return_counts=True)))   # np.unique
Counter(ser)                                     # Counter
</code></pre>

<p><a href=""https://i.stack.imgur.com/2i5qT.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/2i5qT.png"" alt=""enter image description here""></a></p>

<p>The results are more pronounced, <code>Counter</code> wins out over both vectorized methods for a larger range of small N (~3500). </p>

<blockquote>
  <p><strong>Note</strong><br>
   More trivia (courtesy @user2357112). The <code>Counter</code> is implemented with a <a href=""https://github.com/python/cpython/blob/v3.7.0/Modules/_collectionsmodule.c#L2249-L2354"" rel=""noreferrer"">C
  accelerator</a>,
  so while it still has to work with python objects instead of the
  underlying C datatypes, it is still faster than a <code>for</code> loop. Python
  power!</p>
</blockquote>

<p>Of course, the take away from here is that the performance depends on your data and use case. The point of these examples is to convince you not to rule out these solutions as legitimate options. If these still don't give you the performance you need, there is always <a href=""https://pandas.pydata.org/pandas-docs/stable/enhancingperf.html#cython-writing-c-extensions-for-pandas"" rel=""noreferrer"">cython</a> and <a href=""http://numba.pydata.org/"" rel=""noreferrer"">numba</a>. Let's add this test into the mix.</p>

<pre><code>from numba import njit, prange

@njit(parallel=True)
def get_mask(x, y):
    result = [False] * len(x)
    for i in prange(len(x)):
        result[i] = x[i] != y[i]

    return np.array(result)

df[get_mask(df.A.values, df.B.values)] # numba
</code></pre>

<p><a href=""https://i.stack.imgur.com/nSpCH.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/nSpCH.png"" alt=""enter image description here""></a></p>

<p>Numba offers JIT compilation of loopy python code to very powerful vectorized code. Understanding how to make numba work involves a learning curve.</p>

<hr>

<h3><strong>Operations with Mixed/<code>object</code> dtypes</strong></h3>

<p><strong>String-based Comparison</strong><br>
Revisiting the filtering example from the first section, what if the columns being compared are strings? Consider the same 3 functions above, but with the input DataFrame cast to string.</p>

<pre><code># Boolean indexing with string value comparison.
df[df.A != df.B]                            # vectorized !=
df.query('A != B')                          # query (numexpr)
df[[x != y for x, y in zip(df.A, df.B)]]    # list comp
</code></pre>

<p><a href=""https://i.stack.imgur.com/Lg2CE.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/Lg2CE.png"" alt=""enter image description here""></a></p>

<p>So, what changed? The thing to note here is that <strong>string operations are inherently difficult to vectorize.</strong> Pandas treats strings as objects, and all operations on objects fall back to a slow, loopy implementation.</p>

<p>Now, because this loopy implementation is surrounded by all the overhead mentioned above, there is a constant magnitude difference between these solutions, even though they scale the same. </p>

<p>When it comes to operations on mutable/complex objects, there is no comparison. List comprehension outperforms all operations involving dicts and lists. </p>

<p><strong>Accessing Dictionary Value(s) by Key</strong><br>
Here are timings for two operations that extract a value from a column of dictionaries: <code>map</code> and the list comprehension. The setup is in the Appendix, under the heading ""Code Snippets"".</p>

<pre><code># Dictionary value extraction.
ser.map(operator.itemgetter('value'))     # map
pd.Series([x.get('value') for x in ser])  # list comprehension
</code></pre>

<p><a href=""https://i.stack.imgur.com/QrbZO.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/QrbZO.png"" alt=""enter image description here""></a></p>

<p><strong>Positional List Indexing</strong><br>
Timings for 3 operations that extract the 0th element from a list of columns (handling exceptions), <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.map.html#pandas-series-map"" rel=""noreferrer""><code>map</code></a>, <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.get.html"" rel=""noreferrer""><code>str.get</code> accessor method</a>, and the list comprehension:</p>

<pre><code># List positional indexing. 
def get_0th(lst):
    try:
        return lst[0]
    # Handle empty lists and NaNs gracefully.
    except (IndexError, TypeError):
        return np.nan
</code></pre>

<p></p>

<pre><code>ser.map(get_0th)                                          # map
ser.str[0]                                                # str accessor
pd.Series([x[0] if len(x) &gt; 0 else np.nan for x in ser])  # list comp
pd.Series([get_0th(x) for x in ser])                      # list comp safe
</code></pre>

<blockquote>
  <p><strong>Note</strong><br>
  If the index matters, you would want to do:</p>

<pre><code>pd.Series([...], index=ser.index)
</code></pre>
  
  <p>When reconstructing the series.</p>
</blockquote>

<p><a href=""https://i.stack.imgur.com/Zzzez.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/Zzzez.png"" alt=""enter image description here""></a></p>

<p><strong>List Flattening</strong><br>
A final example is flattening lists. This is another common problem, and demonstrates just how powerful pure python is here.</p>

<pre><code># Nested list flattening.
pd.DataFrame(ser.tolist()).stack().reset_index(drop=True)  # stack
pd.Series(list(chain.from_iterable(ser.tolist())))         # itertools.chain
pd.Series([y for x in ser for y in x])                     # nested list comp
</code></pre>

<p><a href=""https://i.stack.imgur.com/eJ2iB.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/eJ2iB.png"" alt=""enter image description here""></a></p>

<p>Both <a href=""https://docs.python.org/3/library/itertools.html#itertools.chain.from_iterable"" rel=""noreferrer""><code>itertools.chain.from_iterable</code></a> and the nested list comprehension are pure python constructs, and scale much better than the <code>stack</code> solution.</p>

<p>These timings are a strong indication of the fact that pandas is not equipped to work with mixed dtypes, and that you should probably refrain from using it to do so. Wherever possible, data should be present as scalar values (ints/floats/strings) in separate columns.</p>

<p>Lastly, the applicability of these solutions depend widely on your data. So, the best thing to do would be to test these operations on your data before deciding what to go with. Notice how I have not timed <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.apply.html#pandas-series-apply"" rel=""noreferrer""><code>apply</code></a> on these solutions, because it would skew the graph (yes, it's that slow).</p>

<hr>

<h3>Regex Operations, and <code>.str</code> Accessor Methods</h3>

<p>Pandas can apply regex operations such as <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.contains.html"" rel=""noreferrer""><code>str.contains</code></a>, <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.extract.html"" rel=""noreferrer""><code>str.extract</code></a>, and <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.extractall.html#pandas.Series.str.extractall"" rel=""noreferrer""><code>str.extractall</code></a>, as well as other ""vectorized"" string operations (such as <code>str.split</code>, str.find<code>,</code>str.translate`, and so on) on string columns. These functions are slower than list comprehensions, and are meant to be more convenience functions than anything else.</p>

<p>It is usually much faster to pre-compile a regex pattern and iterate over your data with <a href=""https://docs.python.org/3/library/re.html#re.compile"" rel=""noreferrer""><code>re.compile</code></a> (also see <a href=""https://stackoverflow.com/questions/452104/is-it-worth-using-pythons-re-compile"">Is it worth using Python&#39;s re.compile?</a>). The list comp equivalent to <code>str.contains</code> looks something like this:</p>

<pre><code>p = re.compile(...)
ser2 = pd.Series([x for x in ser if p.search(x)])
</code></pre>

<p>Or,</p>

<pre><code>ser2 = ser[[bool(p.search(x)) for x in ser]]
</code></pre>

<p>If you need to handle NaNs, you can do something like</p>

<pre><code>ser[[bool(p.search(x)) if pd.notnull(x) else False for x in ser]]
</code></pre>

<p>The list comp equivalent to <code>str.extract</code> (without groups) will look something like:</p>

<pre><code>df['col2'] = [p.search(x).group(0) for x in df['col']]
</code></pre>

<p>If you need to handle no-matches and NaNs, you can use a custom function (still faster!):</p>

<pre><code>def matcher(x):
    m = p.search(str(x))
    if m:
        return m.group(0)
    return np.nan

df['col2'] = [matcher(x) for x in df['col']]
</code></pre>

<p>The <code>matcher</code> function is very extensible. It can be fitted to return a list for each capture group, as needed. Just extract query the <code>group</code> or <code>groups</code> attribute of the matcher object.</p>

<p>For <code>str.extractall</code>, change <code>p.search</code> to <code>p.findall</code>.</p>

<p><strong>String Extraction</strong><br>
Consider a simple filtering operation. The idea is to extract 4 digits if it is preceded by an upper case letter.</p>

<pre><code># Extracting strings.
p = re.compile(r'(?&lt;=[A-Z])(\d{4})')
def matcher(x):
    m = p.search(x)
    if m:
        return m.group(0)
    return np.nan

ser.str.extract(r'(?&lt;=[A-Z])(\d{4})', expand=False)   #  str.extract
pd.Series([matcher(x) for x in ser])                  #  list comprehension
</code></pre>

<p><a href=""https://i.stack.imgur.com/XmXyX.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/XmXyX.png"" alt=""enter image description here""></a></p>

<p><strong>More Examples</strong><br>
Full disclosure - I am the author (in part or whole) of these posts listed below.</p>

<ul>
<li><p><a href=""https://stackoverflow.com/questions/50444346/fast-punctuation-removal-with-pandas"">Fast punctuation removal with pandas</a></p></li>
<li><p><a href=""https://stackoverflow.com/questions/11858472/string-concatenation-of-two-pandas-columns/54298586#54298586"">String concatenation of two pandas columns</a> </p></li>
<li><p><a href=""https://stackoverflow.com/questions/13682044/remove-unwanted-parts-from-strings-in-a-column/54302517#54302517"">Remove unwanted parts from strings in a column</a></p></li>
<li><p><a href=""https://stackoverflow.com/a/47813144/4909087"">Replace all but the last occurrence of a character in a dataframe</a></p></li>
</ul>

<hr>

<h3>Conclusion</h3>

<p>As shown from the examples above, iteration shines when working with small rows of DataFrames, mixed datatypes, and regular expressions.</p>

<p>The speedup you get depends on your data and your problem, so your mileage may vary. The best thing to do is to carefully run tests and see if the payout is worth the effort. </p>

<p>The ""vectorized"" functions shine in their simplicity and readability, so if performance is not critical, you should definitely prefer those. </p>

<p>Another side note, certain string operations deal with constraints that favour the use of NumPy. Here are two examples where careful NumPy vectorization outperforms python: </p>

<ul>
<li><p><a href=""https://stackoverflow.com/a/49471005/4909087"">Create new column with incremental values in a faster and efficient way - Answer by Divakar</a></p></li>
<li><p><a href=""https://stackoverflow.com/a/50518852/4909087"">Fast punctuation removal with pandas - Answer by Paul Panzer</a></p></li>
</ul>

<p>Additionally, sometimes just operating on the underlying arrays via <code>.values</code> as opposed to on the Series or DataFrames can offer a healthy enough speedup for most usual scenarios (see the <strong>Note</strong> in the <strong>Numeric Comparison</strong> section above). So, for example <code>df[df.A.values != df.B.values]</code> would show instant performance boosts over <code>df[df.A != df.B]</code>. Using <code>.values</code> may not be appropriate in every situation, but it is a useful hack to know. </p>

<p>As mentioned above, it's up to you to decide whether these solutions are worth the trouble of implementing.</p>

<hr>

<h3>Appendix: Code Snippets</h3>

<pre><code>import perfplot  
import operator 
import pandas as pd
import numpy as np
import re

from collections import Counter
from itertools import chain
</code></pre>

<p></p>

<pre><code># Boolean indexing with Numeric value comparison.
perfplot.show(
    setup=lambda n: pd.DataFrame(np.random.choice(1000, (n, 2)), columns=['A','B']),
    kernels=[
        lambda df: df[df.A != df.B],
        lambda df: df.query('A != B'),
        lambda df: df[[x != y for x, y in zip(df.A, df.B)]],
        lambda df: df[get_mask(df.A.values, df.B.values)]
    ],
    labels=['vectorized !=', 'query (numexpr)', 'list comp', 'numba'],
    n_range=[2**k for k in range(0, 15)],
    xlabel='N'
)
</code></pre>

<p></p>

<pre><code># Value Counts comparison.
perfplot.show(
    setup=lambda n: pd.Series(np.random.choice(1000, n)),
    kernels=[
        lambda ser: ser.value_counts(sort=False).to_dict(),
        lambda ser: dict(zip(*np.unique(ser, return_counts=True))),
        lambda ser: Counter(ser),
    ],
    labels=['value_counts', 'np.unique', 'Counter'],
    n_range=[2**k for k in range(0, 15)],
    xlabel='N',
    equality_check=lambda x, y: dict(x) == dict(y)
)
</code></pre>

<p></p>

<pre><code># Boolean indexing with string value comparison.
perfplot.show(
    setup=lambda n: pd.DataFrame(np.random.choice(1000, (n, 2)), columns=['A','B'], dtype=str),
    kernels=[
        lambda df: df[df.A != df.B],
        lambda df: df.query('A != B'),
        lambda df: df[[x != y for x, y in zip(df.A, df.B)]],
    ],
    labels=['vectorized !=', 'query (numexpr)', 'list comp'],
    n_range=[2**k for k in range(0, 15)],
    xlabel='N',
    equality_check=None
)
</code></pre>

<p></p>

<pre><code># Dictionary value extraction.
ser1 = pd.Series([{'key': 'abc', 'value': 123}, {'key': 'xyz', 'value': 456}])
perfplot.show(
    setup=lambda n: pd.concat([ser1] * n, ignore_index=True),
    kernels=[
        lambda ser: ser.map(operator.itemgetter('value')),
        lambda ser: pd.Series([x.get('value') for x in ser]),
    ],
    labels=['map', 'list comprehension'],
    n_range=[2**k for k in range(0, 15)],
    xlabel='N',
    equality_check=None
)
</code></pre>

<p></p>

<pre><code># List positional indexing. 
ser2 = pd.Series([['a', 'b', 'c'], [1, 2], []])        
perfplot.show(
    setup=lambda n: pd.concat([ser2] * n, ignore_index=True),
    kernels=[
        lambda ser: ser.map(get_0th),
        lambda ser: ser.str[0],
        lambda ser: pd.Series([x[0] if len(x) &gt; 0 else np.nan for x in ser]),
        lambda ser: pd.Series([get_0th(x) for x in ser]),
    ],
    labels=['map', 'str accessor', 'list comprehension', 'list comp safe'],
    n_range=[2**k for k in range(0, 15)],
    xlabel='N',
    equality_check=None
)
</code></pre>

<p></p>

<pre><code># Nested list flattening.
ser3 = pd.Series([['a', 'b', 'c'], ['d', 'e'], ['f', 'g']])
perfplot.show(
    setup=lambda n: pd.concat([ser2] * n, ignore_index=True),
    kernels=[
        lambda ser: pd.DataFrame(ser.tolist()).stack().reset_index(drop=True),
        lambda ser: pd.Series(list(chain.from_iterable(ser.tolist()))),
        lambda ser: pd.Series([y for x in ser for y in x]),
    ],
    labels=['stack', 'itertools.chain', 'nested list comp'],
    n_range=[2**k for k in range(0, 15)],
    xlabel='N',    
    equality_check=None

)
</code></pre>

<p></p>

<pre><code># Extracting strings.
ser4 = pd.Series(['foo xyz', 'test A1234', 'D3345 xtz'])
perfplot.show(
    setup=lambda n: pd.concat([ser4] * n, ignore_index=True),
    kernels=[
        lambda ser: ser.str.extract(r'(?&lt;=[A-Z])(\d{4})', expand=False),
        lambda ser: pd.Series([matcher(x) for x in ser])
    ],
    labels=['str.extract', 'list comprehension'],
    n_range=[2**k for k in range(0, 15)],
    xlabel='N',
    equality_check=None
)
</code></pre>
","4909087","","4909087","","2019-05-25 05:22:40","2019-05-25 05:22:40","","","","9","","","","4909087","195757","2015-05-17 14:31:31","cs95","2020-03-15 02:58:01","","At an ipython shell near you","<h2><a href=""https://meta.stackoverflow.com/questions/386324/the-stack-overflow-i-wish-to-build-and-participate-in-is-no-longer-supported"">The Stack Overflow I wish to build and participate in no longer exists.</a></h2>

<h1><a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">My pandas canonicals</a> ⬅ please critique!</h1>

<p>When asking a question here, please describe the problem you are trying to solve, rather than asking about the method you <em>think</em> is the solution to that problem. This is known as the <a href=""https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem"">XY problem</a> and can easily be averted if you ask the right questions. This will make it easy for us to understand what you're trying to do, and you may even receive better suggestions that you may never have considered yourself. </p>

<h3><strong>Rep = participation</strong></h3>

<h3><strong>Badges = quality</strong></h3>

<h3><strong><s>1 like = 1 prayer </s> 1 upvote = 1 thanks</strong></h3>

<p><a href=""https://stackoverflow.com/users/4909087/coldspeed""><img src=""https://stackoverflow.com/users/flair/4909087.png"" width=""208"" height=""58"" alt=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers"" title=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers""></a></p>

<p><a href=""https://i.stack.imgur.com/YfCOa.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YfCOa.gif"" alt=""enter image description here""></a></p>

<p><a href=""https://stackoverflow.com/a/53915214/4909087"">Some people, when confronted with a problem, think ""I know, I'll use regular expressions."" Now they have two problems.</a></p>

<hr>

<h2>(Actively Maintained) Pandas Canonicals</h2>

<p>The full list is on <a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">GitHub</a>.</p>

<ul>
<li><a href=""https://stackoverflow.com/q/53645882/pandas-merging-101"">Pandas Merging 101</a>: Everything you ever wanted to know about merging and more</li>
<li><a href=""https://stackoverflow.com/a/55557758"">How to iterate over a DataFrame.</a> Spoler alert: don't!</li>
<li><a href=""https://stackoverflow.com/a/54508052"">How to convert a DataFrame to NumPy array</a>: from 0.24, use <code>df.to_numpy()</code></li>
<li><a href=""https://stackoverflow.com/a/56746204/4909087"">The Right Way to create an empty DataFrame and fill it</a>: Use a list to grow your data, not a DataFrame</li>
<li><a href=""https://stackoverflow.com/a/59242208/4909087"">Don't use <code>inplace=True</code>!</a></li>
</ul>

<h2>Other Posts I'm Proud Of</h2>

<ul>
<li>Pandas Merging 101 (see above)</li>
<li><a href=""https://stackoverflow.com/a/50312321/4909087"">Best way to interleave two lists</a></li>
<li><a href=""https://stackoverflow.com/questions/47007680/strange-use-of-pythons-and-operator/47007761#47007761"">How do &quot;and&quot; and &quot;or&quot; act with non-boolean values?</a></li>
<li><a href=""https://stackoverflow.com/a/46333422/4909087"">So you think you know recursion?</a></li>
</ul>

<p>In addition to this, some of my <a href=""https://stackoverflow.com/search?tab=votes&amp;q=user%3a4909087%20perfplot"">answers that use <code>perfplot</code></a> are worth a read.</p>

<hr>

<h3>236th awardee of the <a href=""https://stackoverflow.com/help/badges/146/legendary"">Legendary</a> badge.</h3>

<p>Thanks, Stack Overflow! I love the shirt :-)</p>

<p><a href=""https://i.stack.imgur.com/7YKND.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7YKND.jpg"" alt=""enter image description here""></a></p>
","57988","9183","7537","https://i.stack.imgur.com/LmD3e.png?s=128&g=1","","6321039"
"56874473","2","","56436559","2019-07-03 16:24:43","","118","","<p>As of iOS 13b3, there is now a <code>selectedSegmentTintColor</code> on <code>UISegmentedControl</code>.</p>

<p>To change the overall color of the segmented control use its <code>backgroundColor</code>.</p>

<p>To change the color of the selected segment use <code>selectedSegmentTintColor</code>.</p>

<p>To change the color/font of the unselected segment titles, use <code>setTitleTextAttributes</code> with a state of <code>.normal</code>/<code>UIControlStateNormal</code>.</p>

<p>To change the color/font of the selected segment titles, use <code>setTitleTextAttributes</code> with a state of <code>.selected</code>/<code>UIControlStateSelected</code>.</p>

<p>If you create a segmented control with images, if the images are created as template images, then the segmented control's <code>tintColor</code> will be used to color the images. But this has a problem. If you set the <code>tintColor</code> to the same color as <code>selectedSegmentTintColor</code> then the image won't be visible in the selected segment. If you set the <code>tintColor</code> to the same color as <code>backgroundColor</code>, then the images on the unselected segments won't be visible. This means your segmented control with images must use 3 different colors for everything to be visible. Or you can use non-template images and not set the <code>tintColor</code>.</p>

<p>Under iOS 12 or earlier, simply set the segmented control's <code>tintColor</code> or rely on the app's overall tint color.</p>
","1226963","","1226963","","2019-07-04 19:22:08","2019-07-04 19:22:08","","","","8","","","","1226963","276683","2012-02-22 21:58:04","rmaddy","2020-02-10 06:36:19","http://www.maddysoft.com/iphone/","","<p>I am an independent iOS app developer producing and selling my own apps. I started with BASIC in 1979 playing with TRS Model I computers at Radio Shack stores. We sure had a lot of fun with 4k of RAM.</p>
","57909","2865","29801","https://i.stack.imgur.com/yjY1E.png","","1270581"
"59359959","2","","59359911","2019-12-16 15:47:48","","117","","<p>Double braces escape the braces, so that no interpolation happens: <code>{{</code> ➝ <code>{</code>, and <code>}}</code> ➝ <code>}</code>. And <code>74</code> remains an unchanged string, <code>'74'</code>.</p>

<p>With triple braces, the outer double braces are escaped, same as above. The inner braces, on the other hand, lead to regular string interpolation of the value <code>74</code>.</p>

<p>That is, the string <code>f'{{{74}}}'</code> is equivalent to <code>f'{{ {74} }}'</code>, but without spaces (or, equivalently, to <code>'{' + f'{74}' + '}'</code>).</p>

<p>You can see the difference when replacing the numeric constant by a variable:</p>

<pre><code>In [1]: x = 74

In [2]: f'{{x}}'
Out[2]: '{x}'

In [3]: f'{{{x}}}'
Out[3]: '{74}'
</code></pre>
","1968","","","","","2019-12-16 15:47:48","","","","0","","","","1968","440549","2008-08-19 15:59:21","Konrad Rudolph","2020-03-14 08:36:11","http://klmr.me","Cambridge, United Kingdom","<p>I’m a bioinformagician slash scientist <i>&amp;</i> software developer. In the past I’ve worked at the <a href=""http://www.gurdon.cam.ac.uk/"" rel=""nofollow noreferrer"">Gurdon Institute</a> of the <a href=""http://www.cam.ac.uk/"" rel=""nofollow noreferrer"">University of Cambridge</a> and at <a href=""http://www.ebi.ac.uk/"" rel=""nofollow noreferrer"">EMBL-EBI</a>.</p>

<p>Currently I work on compression software. Over the years I’ve dabbled in everything from biological research (mostly genomics and epigenetics) and statistical analysis (using R) to software development, both on the frontend (using e.g. HTML, JavaScript, WinForms, Swing) and the backend (using C++, Java, Python, Ruby, PHP, to name just a few). <a href=""https://github.com/klmr/thesis"" rel=""nofollow noreferrer"">My PhD thesis</a> was on the regulation of expression of non-coding RNA in mammals.</p>

<p><kbd>(he/him)</kbd></p>
","65146","16009","1178","","","1475"
"54246505","2","","50614661","2019-01-18 01:14:05","","117","","<p>When underlining everything you can set a TextStyle on the Text widget.</p>

<p><a href=""https://i.stack.imgur.com/XM4mb.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/XM4mb.png"" alt=""enter image description here""></a></p>

<pre><code>Text(
  'Hello world',
  style: TextStyle(
    decoration: TextDecoration.underline,
  ),
)
</code></pre>

<p>If you only want to underline part of the text then you need to use <code>Text.rich()</code> (or a RichText widget) and break the string into TextSpans that you can add a style to.</p>

<p><a href=""https://i.stack.imgur.com/7GZbs.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/7GZbs.png"" alt=""enter image description here""></a></p>

<pre><code>Text.rich(
  TextSpan(
    text: 'Hello ',
    style: TextStyle(fontSize: 50),
    children: &lt;TextSpan&gt;[
      TextSpan(
          text: 'world',
          style: TextStyle(
            decoration: TextDecoration.underline,
          )),
      // can add more TextSpans here...
    ],
  ),
)
</code></pre>

<p>TextSpan is a little strange. The <code>text</code> parameter is the default style but the <code>children</code> list contains the styled (and possibly unstyled) text that follow it. You can use an empty string for <code>text</code> if you want to start with styled text.</p>

<p>You can also add a TextDecorationStyle to change how the decoration looks. Here is dashed:</p>

<p><a href=""https://i.stack.imgur.com/lc6dH.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/lc6dH.png"" alt=""enter image description here""></a></p>

<pre><code>Text(
  'Hello world',
  style: TextStyle(
    decoration: TextDecoration.underline,
    decorationStyle: TextDecorationStyle.dashed,
  ),
)
</code></pre>

<p>and <code>TextDecorationStyle.dotted</code>:</p>

<p><a href=""https://i.stack.imgur.com/bhHwA.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/bhHwA.png"" alt=""enter image description here""></a></p>

<p>and <code>TextDecorationStyle.double</code>:</p>

<p><a href=""https://i.stack.imgur.com/q3eBT.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/q3eBT.png"" alt=""enter image description here""></a></p>

<p>and <code>TextDecorationStyle.wavy</code>:</p>

<p><a href=""https://i.stack.imgur.com/YIQnj.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/YIQnj.png"" alt=""enter image description here""></a></p>
","3681880","","3681880","","2019-02-23 15:26:09","2019-02-23 15:26:09","","","","2","","","","3681880","281555","2014-05-28 01:38:32","Suragch","2020-03-15 01:46:08","http://www.studymongolian.net","","<p>Why are you developing for a single platform when you could be creating apps for Android, iOS, the web (and soon Linux, Mac, and Windows) with a single code base? Check out <a href=""https://flutter.dev/"" rel=""nofollow noreferrer"">Flutter</a>.</p>

<p><a href=""https://medium.com/@studymongolian/flutter-and-dart-development-articles-981be9ef7b23"" rel=""nofollow noreferrer"">My Flutter and Dart articles</a></p>
","10525","12917","73","","","4531600"
"54677026","2","","54676966","2019-02-13 18:25:50","","115","","<p>When you use <a href=""https://reactjs.org/docs/hooks-reference.html#usestate"" rel=""noreferrer""><code>useState</code></a>, you can get an update method for the state item:</p>

<pre><code>const [theArray, setTheArray] = useState(initialArray);
</code></pre>

<p>then, when you want to add a new element, you use that function and pass in the new array or a function that will create the new array. Normally the latter, since state updates are asynchronous and sometimes batched:</p>

<pre><code>setTheArray(oldArray =&gt; [...oldArray, newElement]);
</code></pre>

<p>Sometimes you can get away without using that callback form, if you <strong>only</strong> update the array in handlers for certain specific user events like <code>click</code> (but not like <code>mousemove</code>):</p>

<pre><code>setTheArray([...theArray, newElement]);
</code></pre>

<p>The events for which React ensures that rendering is flushed are the ""discrete events"" listed <a href=""https://github.com/facebook/react/blob/master/packages/react-dom/src/events/SimpleEventPlugin.js"" rel=""noreferrer"">here</a>.</p>

<p>Live Example (passing a callback into <code>setTheArray</code>):</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""true"" data-console=""false"" data-babel=""true"">
<div class=""snippet-code snippet-currently-hidden"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const {useState, useCallback} = React;
function Example() {
    const [theArray, setTheArray] = useState([]);
    const addEntryClick = () =&gt; {
        setTheArray(oldArray =&gt; [...oldArray, `Entry ${oldArray.length}`]);
    };
    return [
        &lt;input type=""button"" onClick={addEntryClick} value=""Add"" /&gt;,
        &lt;div&gt;{theArray.map(entry =&gt;
          &lt;div&gt;{entry}&lt;/div&gt;
        )}
        &lt;/div&gt;
    ];
}

ReactDOM.render(
    &lt;Example /&gt;,
    document.getElementById(""root"")
);</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;div id=""root""&gt;&lt;/div&gt;
&lt;script src=""https://cdnjs.cloudflare.com/ajax/libs/react/16.8.1/umd/react.production.min.js""&gt;&lt;/script&gt;
&lt;script src=""https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.8.1/umd/react-dom.production.min.js""&gt;&lt;/script&gt;</code></pre>
</div>
</div>
</p>

<p>Because the only update to <code>theArray</code> in there is the one in a <code>click</code> event (one of the ""discrete"" events), I could get away with a direct update in <code>addEntry</code>:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""true"" data-console=""false"" data-babel=""true"">
<div class=""snippet-code snippet-currently-hidden"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const {useState, useCallback} = React;
function Example() {
    const [theArray, setTheArray] = useState([]);
    const addEntryClick = () =&gt; {
        setTheArray([...theArray, `Entry ${theArray.length}`]);
    };
    return [
        &lt;input type=""button"" onClick={addEntryClick} value=""Add"" /&gt;,
        &lt;div&gt;{theArray.map(entry =&gt;
          &lt;div&gt;{entry}&lt;/div&gt;
        )}
        &lt;/div&gt;
    ];
}

ReactDOM.render(
    &lt;Example /&gt;,
    document.getElementById(""root"")
);</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;div id=""root""&gt;&lt;/div&gt;
&lt;script src=""https://cdnjs.cloudflare.com/ajax/libs/react/16.8.1/umd/react.production.min.js""&gt;&lt;/script&gt;
&lt;script src=""https://cdnjs.cloudflare.com/ajax/libs/react-dom/16.8.1/umd/react-dom.production.min.js""&gt;&lt;/script&gt;</code></pre>
</div>
</div>
</p>
","157247","","157247","","2019-08-11 10:30:56","2019-08-11 10:30:56","","","","4","","","","157247","778849","2009-08-16 11:00:22","T.J. Crowder","2020-03-14 15:06:31","http://www.farsightsoftware.com","United Kingdom","<p><a href=""https://i.stack.imgur.com/hMIyk.png"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/hMIyk.png"" alt=""Want to learn JavaScript&#39;s latest features? You might like my new book, JavaScript: The New Toys. It covers ES2015 (&quot;ES6&quot;) through ES2019, and previews ES2020 and beyond!""></a></p>

<p><a href=""https://www.booksellers.org.uk/bookshopsearch"" rel=""nofollow noreferrer"">Your local bookshop</a> •
<a href=""https://rads.stackoverflow.com/amzn/click/com/1119367956"" rel=""nofollow noreferrer"" rel=""nofollow noreferrer"">Amazon</a> •
<a href=""https://www.barnesandnoble.com/w/javascript-t-j-crowder/1124581239#/"" rel=""nofollow noreferrer"">Barnes &amp; Noble</a></p>

<hr>

<p>[pronouns: he/him]</p>

<p>I run <a href=""http://farsightsoftware.com"" rel=""nofollow noreferrer"">Farsight Software</a>, a software consulting firm. Good people, reasonable rates. We currently have availability for small projects, but we have all the large projects we can handle at present.</p>

<p>I'm a software engineer with a particular interest in web technologies (esp. JavaScript). I also do lots of work in C#, and formerly Java, and several other languages. I've been doing this professionally for ~30 years, goofing with computers for 10 years before that, but I hope I'm not <a href=""http://dilbert.com/strips/comic/2010-12-23/"" rel=""nofollow noreferrer"">this guy</a>.</p>

<p>On occasion, I write up snippets of nifty tricks or techniques in my <a href=""http://blog.niftysnippets.org/"" rel=""nofollow noreferrer"">anemic little blog</a>.</p>
","136278","12085","26755","","","52616"
"54992348","2","","54992302","2019-03-04 22:10:12","","113","","<p>Here are a few counterexamples that do not change the outer scope but are still considered impure:</p>

<ul>
<li><code>function a() { return Date.now(); }</code></li>
<li><code>function b() { return window.globalMutableVar; }</code></li>
<li><code>function c() { return document.getElementById(""myInput"").value; }</code></li>
<li><code>function d() { return Math.random(); }</code> (which admittedly does change the PRNG, but is not considered observable)</li>
</ul>

<p>Accessing non-constant non-local variables is enough to be able to violate the second condition.</p>

<p>I always think of the two conditions for purity as complementary:</p>

<ul>
<li>the result evaluation must not <strong>have effects</strong> on side state</li>
<li>the evaluation result must not <strong>be affected</strong> by side state</li>
</ul>

<p>The term <a href=""https://en.wikipedia.org/wiki/Side_effect_(computer_science)"" rel=""noreferrer"">side effect</a> only refers to the first, the function modifying the non-local state. However, sometimes read operations are considered as side effects as well: when they are <em>operations</em> and involve writing as well, even if their primary purpose is to access a value. Examples for that are generating a pseudo-random number that modifies the generator's internal state, reading from an input stream that advances the read position, or reading from an external sensor that involves a ""take measurement"" command.</p>
","1048572","","1048572","","2019-03-05 13:34:03","2019-03-05 13:34:03","","","","22","","","","1048572","436963","2011-11-15 22:20:42","Bergi","2020-03-14 20:30:30","","","<p><a href=""/questions/tagged/ecmascript-6"" class=""post-tag"" title=""show questions tagged &#39;ecmascript-6&#39;"" rel=""tag"">ecmascript-6</a> and <a href=""/questions/tagged/promise"" class=""post-tag"" title=""show questions tagged &#39;promise&#39;"" rel=""tag"">promise</a> evangelist.
</p>
","43207","8999","4923","","","1042959"
"54786503","2","","54786278","2019-02-20 12:34:00","","112","","<p>Best version is <a href=""/questions/tagged/c%2b%2b17"" class=""post-tag"" title=""show questions tagged &#39;c++17&#39;"" rel=""tag"">c++17</a>:</p>

<pre><code>template&lt; unsigned char... indexes &gt;
constexpr unsigned long long mask(){
  return ((1ull&lt;&lt;indexes)|...|0ull);
}
</code></pre>

<p>Then</p>

<pre><code>void apply_known_mask(std::bitset&lt;64&gt; &amp;bits) {
  constexpr auto m = mask&lt;B,D,E,H,K,M,L,O&gt;();
  bits &amp;= m;
}
</code></pre>

<p>back in <a href=""/questions/tagged/c%2b%2b14"" class=""post-tag"" title=""show questions tagged &#39;c++14&#39;"" rel=""tag"">c++14</a>, we can do this strange trick:</p>

<pre><code>template&lt; unsigned char... indexes &gt;
constexpr unsigned long long mask(){
  auto r = 0ull;
  using discard_t = int[]; // data never used
  // value never used:
  discard_t discard = {0,(void(
    r |= (1ull &lt;&lt; indexes) // side effect, used
  ),0)...};
  (void)discard; // block unused var warnings
  return r;
}
</code></pre>

<p>or, if we are stuck with <a href=""/questions/tagged/c%2b%2b11"" class=""post-tag"" title=""show questions tagged &#39;c++11&#39;"" rel=""tag"">c++11</a>, we can solve it recursively:</p>

<pre><code>constexpr unsigned long long mask(){
  return 0;
}
template&lt;class...Tail&gt;
constexpr unsigned long long mask(unsigned char b0, Tail...tail){
  return (1ull&lt;&lt;b0) | mask(tail...);
}
template&lt; unsigned char... indexes &gt;
constexpr unsigned long long mask(){
  return mask(indexes...);
}
</code></pre>

<p><a href=""https://godbolt.org/z/h9jyLF"" rel=""noreferrer"">Godbolt with all 3</a> -- you can switch CPP_VERSION define, and get identical assembly.</p>

<p>In practice I'd use the most modern I could.  14 beats 11 because we don't have recursion and hence O(n^2) symbol length (which can explode compile time and compiler memory usage); 17 beats 14 because the compiler doesn't have to dead-code-eliminate that array, and that array trick is just ugly.</p>

<p>Of these 14 is the most confusing.  Here we create an anonymous array of all 0s, meanwhile as a side effect construct our result, then discard the array.  The discarded array has a number of 0s in it equal to the size of our pack, plus 1 (which we add so we can handle empty packs).</p>

<hr>

<p>A detailed explanation of what the <a href=""/questions/tagged/c%2b%2b14"" class=""post-tag"" title=""show questions tagged &#39;c++14&#39;"" rel=""tag"">c++14</a> version is doing.  This is a trick/hack, and the fact you have to do this to expand parameters packs with efficiency in C++14 is one of the reasons why fold expressions where added in <a href=""/questions/tagged/c%2b%2b17"" class=""post-tag"" title=""show questions tagged &#39;c++17&#39;"" rel=""tag"">c++17</a>.</p>

<p>It is best understood from the inside out:</p>

<pre><code>    r |= (1ull &lt;&lt; indexes) // side effect, used
</code></pre>

<p>this just updates <code>r</code> with <code>1&lt;&lt;indexes</code> for a fixed index.  <code>indexes</code> is a parameter pack, so we'll have to expand it.</p>

<p>The rest of the work is to provide a parameter pack to expand <code>indexes</code> inside of.</p>

<p>One step out:</p>

<pre><code>(void(
    r |= (1ull &lt;&lt; indexes) // side effect, used
  ),0)
</code></pre>

<p>here we cast our expression to <code>void</code>, indicating we don't care about its return value (we just want the side effect of setting <code>r</code> -- in C++, expressions like <code>a |= b</code> also return the value they set <code>a</code> to).</p>

<p>Then we use the comma operator <code>,</code> and <code>0</code> to discard the <code>void</code> ""value"", and return the value <code>0</code>.  So this is an expression whose value is <code>0</code> and as a side effect of calculating <code>0</code> it sets a bit in <code>r</code>.</p>

<pre><code>  int discard[] = {0,(void(
    r |= (1ull &lt;&lt; indexes) // side effect, used
  ),0)...};
</code></pre>

<p>At this point, we expand the parameter pack <code>indexes</code>.  So we get:</p>

<pre><code> {
    0,
    (expression that sets a bit and returns 0),
    (expression that sets a bit and returns 0),
    [...]
    (expression that sets a bit and returns 0),
  }
</code></pre>

<p>in the <code>{}</code>.  This use of <code>,</code> is <em>not</em> the comma operator, but rather the array element separator.  This is <code>sizeof...(indexes)+1</code> <code>0</code>s, which also set bits in <code>r</code> as a side effect.  We then assign the <code>{}</code> array construction instructions to an array <code>discard</code>.</p>

<p>Next we cast <code>discard</code> to <code>void</code> -- most compilers will warn you if you create a variable and never read it.  All compilers will not complain if you cast it to <code>void</code>, it is sort of a way to say ""Yes, I know, I'm not using this"", so it suppresses the warning.</p>
","1774667","","1774667","","2019-03-21 17:34:13","2019-03-21 17:34:13","","","","15","","","","1774667","210495","2012-10-25 15:20:36","Yakk - Adam Nevraumont","2020-03-12 20:25:32","","Canada","<pre><code>template&lt;class R, class...Args&gt;
auto Y = [] (auto f) {
  auto action = [=] (auto action) -&gt; std::function&lt;R(Args...)&gt; {
    return [=] (Args&amp;&amp;... args)-&gt;R {
      return f( action(action), std::forward&lt;Args&gt;(args)... );
    };
  };
  return action(action);
};
</code></pre>

<p>Some fun C++ stuff I've done round here:</p>

<ul>
<li>A: <a href=""http://stackoverflow.com/a/23431173/1774667"">Convert a run-time value or type to a compile-time value</a>, also works with lists of types.</li>
<li>A: <a href=""http://stackoverflow.com/a/15090751/1774667"">Named operators</a>, does what it says on the tin</li>
<li>A: <a href=""http://stackoverflow.com/a/30195655/1774667"">can_apply</a>, a useful trick that helps make traits like ""can serialize"" or ""can convert to string"".</li>
<li>A: <a href=""http://stackoverflow.com/a/30854998/1774667"">task</a>, a move-only implementation of <code>std::function</code>.</li>
<li>Q: <a href=""http://stackoverflow.com/q/26655685/1774667"">Function curry</a>, that does partial binds and the like.</li>
<li>A: <a href=""http://stackoverflow.com/a/30809914/1774667"">Me playing around with hana-like metaprogramming</a>, together with the idea that template work best if everything (including templates) is a type.  Here is some <a href=""http://stackoverflow.com/a/31197222/1774667"">evil operator abuse</a>, where I manipulate types with <code>+</code>.</li>
<li>A: <a href=""http://stackoverflow.com/a/29533782/1774667""><code>std::function</code> that returns vectors of its own type</a>.</li>
</ul>

<p>Here is a neat question I didn't ask:</p>

<ul>
<li>Q: <a href=""http://stackoverflow.com/q/30676839/1774667"">Does SFINAE actually work with class templates?</a></li>
</ul>

<p>the answer seems to be ""actually, nope, but nobody noticed"".</p>

<p>An amusing link:</p>

<ul>
<li><a href=""http://stackoverflow.com/reputation"">http://stackoverflow.com/reputation</a></li>
</ul>

<p>which will show your reputation history on stack overflow, if you like that kind of thing.</p>

<p>ey eir em</p>
","14522","5469","1566","","","1977123"
"59359911","1","59359959","","2019-12-16 15:45:06","","108","3869","<p><a href=""https://www.python.org/dev/peps/pep-0498/"" rel=""noreferrer"">f-Strings</a> are available from Python 3.6 and are very useful for formatting strings:</p>

<pre><code>&gt;&gt;&gt; n='you'
&gt;&gt;&gt; f'hello {n}, how are you?'
'hello you, how are you?'
</code></pre>

<p>Reading more about them in <a href=""https://realpython.com/python-f-strings/"" rel=""noreferrer"">Python 3's f-Strings: An Improved String Formatting Syntax (Guide)</a>. I found an interesting pattern:</p>

<blockquote>
  <p>Note that using triple braces will result in there being only single braces in your string:</p>

<pre><code>&gt;&gt;&gt; f""{{{74}}}""
'{74}'
</code></pre>
  
  <p>However, you can get more braces to show if you use more than triple braces:</p>

<pre><code>&gt;&gt;&gt; f""{{{{74}}}}""
'{{74}}'
</code></pre>
</blockquote>

<p>And this is exactly the case:</p>

<pre><code>&gt;&gt;&gt; f'{74}'
'74'

&gt;&gt;&gt; f'{{74}}'
'{74}'
</code></pre>

<p>Now if we pass from two <code>{</code> to three, the result is the same:</p>

<pre><code>&gt;&gt;&gt; f'{{{74}}}'
'{74}'           # same as f'{{74}}' !
</code></pre>

<p>So we need up to 4! (<code>{{{{</code>) to get two braces as an output:</p>

<pre><code>&gt;&gt;&gt; f'{{{{74}}}}'
'{{74}}'
</code></pre>

<p>Why is this? What happens with two braces to have Python require an extra one from that moment on?</p>
","1983854","","11115679","","2019-12-17 22:29:24","2019-12-17 22:29:24","Why is f'{{{74}}}' the same as f'{{74}}' with f-Strings?","<python><python-3.x><string><formatting><f-string>","1","12","5","","","1983854","199474","2013-01-16 13:43:45","fedorqui 'SO stop harming'","2020-03-14 15:37:36","https://www.gofundme.com/f/stop-stack-overflow-from-defaming-its-users","","<p>Current picture: <a href=""https://en.wikipedia.org/wiki/Catalan_independence_referendum,_2017"" rel=""nofollow noreferrer"">Love democracy</a>. We deserve a better country, we deserve dialogue, negotiation, debate. We do not want political prisoners, we do not want violence. <strong>Free political prisoners from Catalonia</strong>.</p>

<hr>

<p>Contact me at: <code>&lt;my name&gt;.se@gmail.com</code>. I love getting emails, so do not hesitate to do so!</p>

<p>English is my third language, so it is far from perfect. Feel free to correct any inaccuracies you may find in my posts.</p>


","19308","8673","766","https://i.stack.imgur.com/eKpAk.png?s=128&g=1","","2251762"
"56557931","2","","56557596","2019-06-12 08:38:00","","108","","<p>Notice that space-compatible (<a href=""https://en.wikipedia.org/wiki/Radiation_hardening"" rel=""noreferrer"">radiation-hardened</a>, <a href=""https://en.wikipedia.org/wiki/Aeronautics"" rel=""noreferrer"">aeronautics</a> compliant) computing devices are very expensive (including to <a href=""https://en.wikipedia.org/wiki/Space_launch"" rel=""noreferrer"">launch</a> in space, since their weight exceeds kilograms), and that a single space mission costs perhaps hundred million € or US$. Losing the mission because of software or computer concerns has generally a prohibitive cost so is unacceptable and justifies costly development methods and procedures that you won't even dream using for developing your mobile phone applet, and using <a href=""https://en.wikipedia.org/wiki/Probabilistic_logic"" rel=""noreferrer"">probabilistic reasoning</a> and engineering approaches is recommended, since <a href=""https://en.wikipedia.org/wiki/Cosmic_ray"" rel=""noreferrer"">cosmic rays</a> are still somehow an ""unusual"" event. From a high-level point of view, a cosmic ray and the bit flip it produces can be considered as noise in some abstract form of signal or of input. You could look at that ""random bit-flip"" problem as a <a href=""https://en.wikipedia.org/wiki/Signal-to-noise_ratio"" rel=""noreferrer"">signal-to-noise ratio</a> problem, then <a href=""https://en.wikipedia.org/wiki/Randomized_algorithm"" rel=""noreferrer"">randomized algorithms</a> may provide a useful conceptual framework (notably at the meta level, that is when <em>analyzing</em> your safety-critical source code or compiled binary, but also, at critical system run-time, in some sophisticated kernel or thread <a href=""https://en.wikipedia.org/wiki/Scheduling_(computing)#Process_scheduler"" rel=""noreferrer"">scheduler</a>), with an <a href=""https://en.wikipedia.org/wiki/Information_theory"" rel=""noreferrer"">information theory</a> viewpoint.</p>

<blockquote>
  <p>Why C++ template use is not recommended in space/radiated environment?</p>
</blockquote>

<p><strong>That recommendation is a <em>generalization</em>, to C++, of <a href=""https://en.wikipedia.org/wiki/MISRA_C"" rel=""noreferrer"">MISRA C</a> coding rules and of <a href=""https://en.wikipedia.org/wiki/Embedded_C%2B%2B"" rel=""noreferrer"">Embedded C++</a> rules, and of <a href=""https://en.wikipedia.org/wiki/DO-178C"" rel=""noreferrer"">DO178C</a> recommendations</strong>, and it is not related to radiation, but to embedded systems. Because of radiation and vibration constraints, the embedded hardware of any space rocket computer has to be very small (e.g. for <em>economical</em> and energy-consumption reasons, it is more -in computer power- a Raspberry Pi-like system than a big x86 server system). Space hardened chips cost 1000x much as their civilian counterparts. And computing the <a href=""https://en.wikipedia.org/wiki/Worst-case_execution_time"" rel=""noreferrer"">WCET</a> on space-embedded computers is still a technical challenge (e.g. because of <a href=""https://en.wikipedia.org/wiki/CPU_cache"" rel=""noreferrer"">CPU cache</a> related issues). Hence, <a href=""https://en.wikipedia.org/wiki/Memory_management#DYNAMIC"" rel=""noreferrer"">heap allocation</a> is frowned upon in <a href=""https://en.wikipedia.org/wiki/Safety-critical_system"" rel=""noreferrer"">safety-critical</a> embedded software-intensive systems (how would you handle out-of-memory conditions in these? Or how would you <em>prove</em> that you have enough RAM for <em>all</em> real run time cases?)</p>

<p>Remember that in the safety-<a href=""https://en.wikipedia.org/wiki/Software_system_safety"" rel=""noreferrer"">critical software world</a>, you not only somehow ""guarantee"" or ""promise"", and certainly assess (often with some clever probabilistic reasoning), the quality of your own software, but also of all the software tools used to build it (in particular: your compiler and your linker; Boeing or Airbus won't change their version of <a href=""https://gcc.gnu.org/"" rel=""noreferrer"">GCC</a> cross-compiler used to compile their flight control software without prior <em>written</em> approval from e.g. <a href=""https://en.wikipedia.org/wiki/Federal_Aviation_Administration"" rel=""noreferrer"">FAA</a> or <a href=""https://en.wikipedia.org/wiki/Directorate_General_for_Civil_Aviation_(France)"" rel=""noreferrer"">DGAC</a>). Most of your software tools need to be somehow approved or certified.</p>

<p>Be aware that, <em>in practice</em>, most C++  (but certainly not all) templates internally use the heap. And standard C++ <a href=""https://en.cppreference.com/w/cpp/container"" rel=""noreferrer"">containers</a> certainly do. Writing templates which <em>never</em> use the heap is a difficult exercise. If you are capable of that, you can use templates safely (assuming you do trust your C++ compiler and its template expansion machinery, which is the <em>trickiest</em> part of the C++ front-end of most recent C++ compilers, such as <a href=""https://gcc.gnu.org/"" rel=""noreferrer"">GCC</a> or <a href=""https://clang.llvm.org/"" rel=""noreferrer"">Clang</a>).</p>

<p>I guess that for similar (toolset reliability) reasons, it is frowned upon to use many <a href=""https://en.wikipedia.org/wiki/Automatic_programming#Source-code_generation"" rel=""noreferrer"">source code generation</a> tools (doing some kind of <a href=""https://en.wikipedia.org/wiki/Metaprogramming"" rel=""noreferrer"">metaprogramming</a>, e.g. emitting C++ or C code). Observe, for example, that if you use <a href=""https://www.gnu.org/software/bison/"" rel=""noreferrer""><code>bison</code></a> (or <a href=""https://en.wikipedia.org/wiki/RPCGEN"" rel=""noreferrer"">RPCGEN</a>) in some safety critical software (compiled by <code>make</code> and <code>gcc</code>), you need to assess (and perhaps exhaustively test) not only <code>gcc</code> and <code>make</code>, but also <code>bison</code>. This is an engineering reason, not a scientific one. Notice that some embedded systems may use <a href=""https://en.wikipedia.org/wiki/Randomized_algorithm"" rel=""noreferrer"">randomized algorithms</a>, in particular to cleverly deal with <a href=""https://en.wikipedia.org/wiki/Noise_(signal_processing)"" rel=""noreferrer"">noisy</a> input signals (perhaps even random bit flips due to rare-enough cosmic rays). Proving, testing, or analyzing (or just assessing) such random-based algorithms is a quite difficult topic.</p>

<p>Look also into <a href=""https://frama-c.com/frama-clang.html"" rel=""noreferrer"">Frama-Clang</a> and <a href=""http://compcert.inria.fr/"" rel=""noreferrer"">CompCert</a> and observe the following:</p>

<ul>
<li><p><strong>C++11</strong> (or following) <strong>is an horribly complex programming language</strong>. It has no complete <a href=""https://en.wikipedia.org/wiki/Semantics_(computer_science)"" rel=""noreferrer"">formal semantics</a>. The people
expert enough in C++ are only a few dozens worldwide (probably, most
of them are in its standard committee). I am capable of coding in
C++, but not of explaining all the subtle corner cases of move
semantics, or of the C++ <a href=""https://en.wikipedia.org/wiki/Memory_model_(programming)"" rel=""noreferrer"">memory model</a>. Also, C++ requires in practice many optimizations to be used efficiently.</p></li>
<li><p><strong>It is very difficult to make an error-free C++ compiler</strong>, in particular because C++ practically requires tricky <a href=""https://en.wikipedia.org/wiki/Optimizing_compiler"" rel=""noreferrer"">optimizations</a>, and because of the complexity of the C++ specification. But current
ones (like recent GCC or Clang) are in practice quite good, and they have few (but still some)
residual compiler bugs. There is no CompCert++ for C++ yet, and making one requires several millions of € or US$ (but if you can collect such an amount of money, please contact <a href=""http://starynkevitch.net/Basile/index_en.html"" rel=""noreferrer"">me</a> by email, e.g. to <code>basile.starynkevitch@cea.fr</code>, my work email). And the space software industry is <em>extremely</em> conservative.</p></li>
<li><p><strong>It is difficult to make a good C or C++ heap memory allocator</strong>. Coding
one is a matter of trade-offs. As a joke, consider adapting <a href=""https://stackoverflow.com/a/8460584/841108"">this C heap allocator</a> to C++.</p></li>
<li><p><strong>proving safety properties</strong> (in particular, lack of <a href=""https://en.wikipedia.org/wiki/Race_condition"" rel=""noreferrer"">race conditions</a> or <a href=""https://en.wikipedia.org/wiki/Undefined_behavior"" rel=""noreferrer"">undefined behavior</a> such as buffer overflow at run-time) <strong>of template-related C++ code is still, in 2Q2019, slightly ahead of the state of the art</strong> of <a href=""https://en.wikipedia.org/wiki/Static_program_analysis"" rel=""noreferrer"">static program analysis</a> of C++ code. My <a href=""http://starynkevitch.net/Basile/bismon-chariot-doc.pdf"" rel=""noreferrer"">draft Bismon technical report</a> (it is a draft H2020 deliverable, so please skip pages for European bureaucrats) has several pages explaining this in more details. <strong>Be aware of <a href=""https://en.wikipedia.org/wiki/Rice%27s_theorem"" rel=""noreferrer"">Rice's theorem</a>.</strong></p></li>
<li><p><strong>a whole system C++ embedded software test</strong> could require a rocket launch (a la <a href=""http://sunnyday.mit.edu/accidents/Ariane5accidentreport.html"" rel=""noreferrer"">Ariane 5 test flight 501</a>, or at least complex and heavy experimentation in lab). It <strong>is <em>very</em> expensive</strong>. Even testing, on Earth, a <a href=""https://en.wikipedia.org/wiki/Mars_rover"" rel=""noreferrer"">Mars rover</a> takes <em>a lot</em> of money.</p></li>
</ul>

<p>Think of it: you are coding some safety-critical embedded software (e.g. for train braking, autonomous vehicles, autonomous drones, big oil platform or oil refinery, missiles, etc...). You naively use some C++ standard container, e.g. some <code>std::map&lt;std::string,long&gt;</code>. What should happen for out of memory conditions? How do you ""prove"", or at least ""convince"", to the people working in organizations funding a 100M€ space rocket, that your embedded software (including the compiler used to build it) is good enough? A decade-year old rule was to forbid any kind of dynamic heap allocation.</p>

<blockquote>
  <p>I'm not talking about complex standard library stuff but purposed-made custom templates.</p>
</blockquote>

<p><strong>Even these are difficult to prove</strong>, or more generally to assess their quality (and you'll probably want to use your own <a href=""https://en.cppreference.com/w/cpp/memory/allocator"" rel=""noreferrer"">allocator</a> inside them). In space, the code space is a strong constraint. So you would compile with, for example, <code>g++ -Os -Wall</code> or <code>clang++ -Os -Wall</code>. But how did you prove -or simply test- <em>all</em> the subtle optimizations done by <code>-Os</code> (and these are specific to your version of GCC or of Clang)? Your space funding organization will ask you that, since any run-time bug in embedded C++ space software can crash the mission (read again about <a href=""https://en.wikipedia.org/wiki/Cluster_(spacecraft)#Launch_failure"" rel=""noreferrer"">Ariane 5 first flight</a> failure - coded in some dialect of Ada which had at that time a ""better"" and ""safer"" type system than C++17 today), but don't laugh too much at Europeans. <a href=""https://en.wikipedia.org/wiki/Boeing_737_MAX_groundings"" rel=""noreferrer"">Boeing 737 MAX</a> with its <a href=""https://en.wikipedia.org/wiki/Maneuvering_Characteristics_Augmentation_System"" rel=""noreferrer"">MACS</a> is a <a href=""https://www.nytimes.com/2019/06/01/business/boeing-737-max-crash.html"" rel=""noreferrer"">similar mess</a>).</p>

<hr>

<p>My personal recommendation (but please don't take it too seriously. In 2019 it is more a pun than anything else) would be to consider coding your space embedded software in <a href=""https://rust-lang.org/"" rel=""noreferrer"">Rust</a>. Because it is slightly safer than C++. Of course, you'll have to spend 5 to 10 M€ (or MUS$) in 5 or 7 years to get a fine Rust compiler, suitable for space computers (again, please contact me professionally, if you are capable of spending that much on a free software Compcert/Rust like compiler). But that is just a matter of software engineering and software project managements (read both the <a href=""https://en.wikipedia.org/wiki/The_Mythical_Man-Month"" rel=""noreferrer""><em>Mythical Man-Month</em></a> and <a href=""https://en.wikipedia.org/wiki/Bullshit_Jobs"" rel=""noreferrer""><em>Bullshit jobs</em></a> for more, be also aware of <a href=""https://en.wikipedia.org/wiki/Dilbert_principle"" rel=""noreferrer"">Dilbert principle</a>: it applies as much to space software industry, or embedded compiler industry, as to anything else).</p>

<p>My strong and personal opinion is that the European Commission should fund (e.g. through <a href=""https://en.wikipedia.org/wiki/Horizon_Europe"" rel=""noreferrer"">Horizon Europe</a>) a <a href=""https://en.wikipedia.org/wiki/Free_software"" rel=""noreferrer"">free software</a> CompCert++ (or even better, a Compcert/Rust) like project (and such a project would need more than 5 years and more than 5 top-class, PhD researchers). But, at the age of 60, I sadly know it is not going to happen (because the E.C. ideology -mostly inspired by German policies for obvious reasons- is still the illusion of the <a href=""https://en.wikipedia.org/wiki/End_of_history"" rel=""noreferrer""><em>End of History</em></a>, so H2020 and Horizon Europe are, in practice, mostly a way to implement tax optimizations for corporations in Europe through European <a href=""https://en.wikipedia.org/wiki/Tax_haven"" rel=""noreferrer"">tax havens</a>), and that after several private discussions with several members of CompCert project. I sadly expect <a href=""https://en.wikipedia.org/wiki/DARPA"" rel=""noreferrer"">DARPA</a> or <a href=""https://en.wikipedia.org/wiki/NASA"" rel=""noreferrer"">NASA</a> to be much more likely to fund some future CompCert/Rust project (than the E.C. funding it).</p>

<hr>

<p>NB. The European avionics industry (mostly Airbus) is using much more <a href=""https://en.wikipedia.org/wiki/Formal_methods"" rel=""noreferrer"">formal methods</a> approaches that the North American one (Boeing). Hence <em>some</em> (not all) unit tests are avoided (since replaced by <em>formal proofs</em> of source code, perhaps with tools like <a href=""https://frama-c.com/"" rel=""noreferrer"">Frama-C</a> or <a href=""https://en.wikipedia.org/wiki/Astr%C3%A9e_(static_analysis)"" rel=""noreferrer"">Astrée</a> - neither have been certified for C++, only for a <em>subset</em> of C forbidding <a href=""https://en.wikipedia.org/wiki/C_dynamic_memory_allocation"" rel=""noreferrer"">C dynamic memory allocation</a> and several other features of C). And this is permitted by <a href=""https://en.wikipedia.org/wiki/DO-178C"" rel=""noreferrer"">DO-178C</a> (not by the predecessor <a href=""https://en.wikipedia.org/wiki/DO-178B"" rel=""noreferrer"">DO-178B</a>) and approved by the French regulator, <a href=""https://en.wikipedia.org/wiki/Directorate_General_for_Civil_Aviation_(France)"" rel=""noreferrer"">DGAC</a> (and I guess by other European regulators). </p>

<p>Also notice that many <a href=""http://sigplan.org/"" rel=""noreferrer"">SIGPLAN</a> conferences are <em>indirectly</em> related to the OP's question.</p>
","841108","","841108","","2019-06-24 08:28:50","2019-06-24 08:28:50","","","","25","","","","841108","191045","2011-07-12 16:04:35","Basile Starynkevitch","2020-03-14 21:22:30","http://starynkevitch.net/Basile/index_en.html","France","<p>My resume is downloadable <a href=""http://starynkevitch.net/Basile/cv-Basile-Starynkevitch.pdf"" rel=""nofollow noreferrer"">here</a>. See my web page on <a href=""http://starynkevitch.net/Basile/"" rel=""nofollow noreferrer"">http://starynkevitch.net/Basile/</a></p>

<p>I have designed and worked on <a href=""http://starynkevitch.net/Basile/gcc-melt"" rel=""nofollow noreferrer"">GCC MELT</a> (a high level domain specific language to ease development of <a href=""http://gcc.gnu.org/"" rel=""nofollow noreferrer"">GCC</a> extensions, free software, GPLv3+). I'm working in France, near Paris, at <a href=""http://www-list.cea.fr/"" rel=""nofollow noreferrer"">CEA, LIST</a> as a research engineer. I'm now working on <a href=""https://github.com/bstarynk/bismon"" rel=""nofollow noreferrer"">bismon</a> (a successor in spirit to GCC MELT), with funding (in 2018-2021) from H2020 <a href=""http://chariotproject.eu/"" rel=""nofollow noreferrer"">CHARIOT</a> and <a href=""https://www.decoder-project.eu/"" rel=""nofollow noreferrer"">DECODER</a> projects.</p>

<p>I am an enthusiast of free software, and know quite well Linux (which I am using since 1994)</p>

<p>I think that high-level languages are important, and that declarative knowledge-based systems should be more used (see <a href=""http://bootstrappingartificialintelligence.fr/WordPress3/"" rel=""nofollow noreferrer"">J.Pitrat's blog</a> ...)</p>

<p>You might contact me by an email to <code>basile</code> <em>at</em> <code>starynkevitch</code> <em>dot</em> <code>net</code> but please <em>give the URL of your question</em> in your message.</p>

<p>I was born in 1959, I am a man, a husband, a grand father, and have a PhD in CS (artificial intelligence, 1990, Paris LIP6) and graduated from <a href=""https://en.wikipedia.org/wiki/%C3%89cole_normale_sup%C3%A9rieure_Paris-Saclay"" rel=""nofollow noreferrer"">ENS Cachan</a>.</p>

<p>My native tongue is French. My parents spoke Russian to me. In Russian my full name is Василий Дмитриевич Старынкевич ; in English my first (christian) name is spelled <a href=""https://en.wikipedia.org/wiki/Basil_of_Caesarea"" rel=""nofollow noreferrer"">Basil</a>.
If you send me an email to <a href=""http://mailto:basile@starynkevitch.net"" rel=""nofollow noreferrer"">basile@starynkevitch.net</a> use French, or English, or Russian and mention the URL of your question. My Russian spelling is so bad that I dare not use it in emails (so I would answer in English to any Russian email).</p>

<p>PS. I intend to continue working on persistent reflexive systems during retirement, e.g. in <a href=""http://refpersys.org/"" rel=""nofollow noreferrer"">http://refpersys.org/</a> .... I find H2020 projects excessively bureaucratic: <a href=""https://todayinsci.com/B/Braun_Wernher/BraunWernher-Quotations.htm"" rel=""nofollow noreferrer"">its paperwork is <em>really</em> overwheling</a>.</p>

<p>My email is public: <code>basile@starynkevitch.net</code> and I don't use social media.</p>
","23929","19762","5112","https://i.stack.imgur.com/8Jssg.png?s=128&g=1","","447475"
"54866051","2","","54865764","2019-02-25 12:18:05","","107","","<p>The argument passed to useState is the initial state much like setting state in constructor for a class component and isn't used to update the state on re-render</p>

<p>If you want to update state on prop change, make use of <code>useEffect</code> hook</p>

<pre><code>function Avatar(props) {
  const [user, setUser] = React.useState({...props.user});

  React.useEffect(() =&gt; {
      setUser(props.user);
  }, [props.user])

  return user.avatar ? 
         (&lt;img src={user.avatar}/&gt;)
        : (&lt;p&gt;Loading...&lt;/p&gt;);
}
</code></pre>

<p><a href=""https://codepen.io/anon/pen/zbOepW"" rel=""noreferrer"">Working demo</a></p>
","5928186","","","","","2019-02-25 12:18:05","","","","5","","","","5928186","140085","2016-02-15 04:45:44","Shubham Khatri","2020-03-14 17:13:38","","Bangalore, Karnataka, India","<p>I spend most of my free time reading question on stackoverflow and learning all the cool stuff thats out there.</p>

<p>Checkout my <a href=""https://www.linkedin.com/in/shubham-khatri-2204/"" rel=""nofollow noreferrer"">LinkedIn Profile</a></p>

<p>Some of my most useful answers:</p>

<p><a href=""https://stackoverflow.com/questions/52437195/reactrouter-v4-prompt-override-default-alert/52437325#52437325"">ReactRouter v4 Prompt - override default alert</a></p>

<p><a href=""https://stackoverflow.com/questions/45373742/detect-route-change-with-react-router/45373907#45373907"">Detect Route Change with react-router</a></p>

<p><a href=""https://stackoverflow.com/questions/50502664/how-to-update-the-context-value-in-provider-from-the-consumer/50502829#50502829"">How to update the Context value in Provider from the Consumer</a></p>

<p><a href=""https://stackoverflow.com/questions/50817672/does-new-react-context-api-trigger-re-renders"">Does new React Context API trigger re-renders?</a></p>

<p><a href=""https://stackoverflow.com/questions/48209452/when-to-use-functional-setstate/48209870#48209870"">When to use functional setState</a></p>

<p><a href=""https://stackoverflow.com/questions/49809884/access-react-context-outside-of-render-function/49810870#49810870"">Access React Context outside of render function</a></p>

<p><a href=""https://stackoverflow.com/questions/47627818/performing-authentication-on-routes-with-react-router-v4/47628941#47628941"">Performing Authentication on Routes with react-router-v4</a></p>

<p><a href=""https://stackoverflow.com/questions/45053622/how-to-avoid-binding-inside-render-method/45053753#45053753"">How to avoid bind or inline arrow functions inside render method</a></p>

<p><a href=""https://stackoverflow.com/questions/47541032/handling-async-request-with-react-redux-and-axios/47588228#47588228"">Handling async request with React, Redux and Axios?</a></p>

<p><a href=""https://stackoverflow.com/questions/44313375/webpack-watch-exits-after-building-once"">webpack --watch exits after building once</a></p>

<p><a href=""https://stackoverflow.com/questions/44806333/unable-to-catch-and-log-the-error-response-from-an-axios-request"">Unable to catch and log the Error response from an axios request</a></p>

<p><a href=""https://stackoverflow.com/questions/44127739/trying-to-change-the-routing-url-based-on-a-specific-condition-in-react/44128108#44128108"">Programmatically Navigate using react-router</a></p>

<p><a href=""https://stackoverflow.com/questions/44121069/how-to-pass-parameters-with-history-push-in-react-router-v4/45263164#45263164"">How to pass params with history.push/Link/Redirect in react-router v4?</a></p>

<p><a href=""https://stackoverflow.com/questions/44513287/how-to-get-redux-form-data-in-another-component"">How to get Redux Form data in another Component</a></p>

<p><a href=""https://stackoverflow.com/questions/45429963/onenter-prop-in-react-router-v4/45430656#45430656"">onEnter prop in react-router v4</a></p>
","15578","3079","564","https://i.stack.imgur.com/Pa1fE.jpg","","7841989"
"55348216","2","","12649573","2019-03-26 00:25:07","","107","","<p>Here is a comparison of several different ways to create a singleton in Dart.</p>

<h1>1. Factory constructor</h1>

<pre><code>class SingletonOne {

  SingletonOne._privateConstructor();

  static final SingletonOne _instance = SingletonOne._privateConstructor();

  factory SingletonOne() {
    return _instance;
  }

}
</code></pre>

<h1>2. Static field with getter</h1>

<pre><code>class SingletonTwo {

  SingletonTwo._privateConstructor();

  static final SingletonTwo _instance = SingletonTwo._privateConstructor();

  static SingletonTwo get instance =&gt; _instance;

}
</code></pre>

<h1>3. Static field</h1>

<pre><code>class SingletonThree {

  SingletonThree._privateConstructor();

  static final SingletonThree instance = SingletonThree._privateConstructor();

}
</code></pre>

<h1>How to instanstiate</h1>

<p>The above singletons are instantiated like this:</p>

<pre><code>SingletonOne one = SingletonOne();
SingletonTwo two = SingletonTwo.instance;
SingletonThree three = SingletonThree.instance;
</code></pre>

<p><em>Note:</em> </p>

<p>I originally asked this as a <a href=""https://stackoverflow.com/q/54057958/3681880"">question</a>, but discovered that all of the methods above are valid and the choice largely depends on personal preference.</p>
","3681880","","3681880","","2020-02-19 08:07:25","2020-02-19 08:07:25","","","","2","","","","3681880","281555","2014-05-28 01:38:32","Suragch","2020-03-15 01:46:08","http://www.studymongolian.net","","<p>Why are you developing for a single platform when you could be creating apps for Android, iOS, the web (and soon Linux, Mac, and Windows) with a single code base? Check out <a href=""https://flutter.dev/"" rel=""nofollow noreferrer"">Flutter</a>.</p>

<p><a href=""https://medium.com/@studymongolian/flutter-and-dart-development-articles-981be9ef7b23"" rel=""nofollow noreferrer"">My Flutter and Dart articles</a></p>
","10525","12917","73","","","4531600"
"54350350","2","","54350114","2019-01-24 15:41:35","","106","","<p>The issue here is pretty subtle.  You would think that</p>

<pre><code>bar::bar() = default;
</code></pre>

<p>would give you a compiler generated default constructor, and it does, but it is now considered user provided.  <a href=""https://timsong-cpp.github.io/cppwp/dcl.fct.def.default#5"" rel=""noreferrer"">[dcl.fct.def.default]/5</a> states:</p>

<blockquote>
  <p>Explicitly-defaulted functions and implicitly-declared functions are collectively called defaulted functions, and the implementation shall provide implicit definitions for them ([class.ctor] [class.dtor], [class.copy.ctor], [class.copy.assign]), which might mean defining them as deleted. <strong>A function is user-provided if it is user-declared and not explicitly defaulted or deleted on its first declaration.</strong> A user-provided explicitly-defaulted function (i.e., explicitly defaulted after its first declaration) is defined at the point where it is explicitly defaulted; if such a function is implicitly defined as deleted, the program is ill-formed. [ Note: Declaring a function as defaulted after its first declaration can provide efficient execution and concise definition while enabling a stable binary interface to an evolving code base. — end note ]</p>
</blockquote>

<p><sup>emphasis mine</sup></p>

<p>So we can see that since you did not default <code>bar()</code> when you first declared it, it is now considered user provided.  Because of that <a href=""http://eel.is/c++draft/dcl.init#8.2"" rel=""noreferrer"">[dcl.init]/8.2</a></p>

<blockquote>
  <p>if T is a (possibly cv-qualified) class type without a user-provided or deleted default constructor, then the object is zero-initialized and the semantic constraints for default-initialization are checked, and if T has a non-trivial default constructor, the object is default-initialized;</p>
</blockquote>

<p>no longer applies and we are not value initializing <code>b</code> but instead default initializing it per <a href=""http://eel.is/c++draft/dcl.init#8.1"" rel=""noreferrer"">[dcl.init]/8.1</a></p>

<blockquote>
  <p>if T is a (possibly cv-qualified) class type ([class]) with either no default constructor ([class.default.ctor]) or a default constructor that is user-provided or deleted, then the object is default-initialized;</p>
</blockquote>
","4342498","","4342498","","2019-01-24 15:54:55","2019-01-24 15:54:55","","","","18","","","","4342498","132431","2014-12-09 17:25:47","NathanOliver","2020-03-15 02:15:07","","Chicago Land Area","<p>I have been programming for the last 20 years and I primarily use C++ and PL/SQL today.  I have used C#, Java and VB.  I tend towards programming algorithms but I have made a few database based enterprise application to plug into an existing application to extend functionality.</p>

<p>Join us at the <a href=""http://chat.stackoverflow.com/rooms/41570/so-close-vote-reviewers"">SO Close Vote Reviewers Chat Room</a> If you want to help with coordinated site cleanup.</p>
","18852","4145","7007","https://i.stack.imgur.com/l3j88.jpg?s=128&g=1","","5460139"
"54562241","2","","15455009","2019-02-06 20:42:05","","105","","<p>I created this comparison between function objects, function calls, <code>call/apply</code> and <code>bind</code> a while ago:</p>

<p><a href=""https://i.stack.imgur.com/WHlX0.jpg"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/WHlX0.jpg"" alt=""enter image description here""></a></p>

<p><code>.bind</code> allows you to set the <code>this</code> value <em>now</em> while allowing you to execute the function <em>in the future</em>, because it returns a new function object.</p>
","218196","","218196","","2019-02-06 20:48:58","2019-02-06 20:48:58","","","","0","","","","218196","630497","2009-11-24 23:08:09","Felix Kling","2020-03-14 16:38:52","http://felix-kling.de","","<p>I completed my Master studies in computer science at the <a href=""http://www.unitn.it/en"" rel=""nofollow noreferrer"">University of Trento</a> and <a href=""http://www.rwth-aachen.de/go/id/bdz/"" rel=""nofollow noreferrer"">RWTH Aachen</a> and worked as a ""early stage"" researcher at the <a href=""http://ncg.nuim.ie/"" rel=""nofollow noreferrer"">National Centre for Geocomputation</a> in Ireland (with focus on crowdsourcing and social media analysis).</p>

<p>I used to be a software engineer at Facebook, now I work for 1Password.</p>

<p>I simply like coding and helping others is a fulfilling way to stay up to date and give something back to the community and the Web from which I learned so much.</p>

<p><a href=""https://developer.mozilla.org/docs/javascript/?WT.mc_id=mdn3"" rel=""nofollow noreferrer"" title=""Better JavaScript docs for a better Web on MDN""><img src=""https://developer.mozilla.org/media/img/promote/promobutton_mdn3.png"" alt=""Better JavaScript docs for a better Web on MDN"" /></a></p>

<p>More good resources to learn JavaScript &amp; Co:</p>

<ul>
<li><a href=""http://eloquentjavascript.net/"" rel=""nofollow noreferrer"">Eloquent JavaScript</a></li>
<li><a href=""https://github.com/getify/You-Dont-Know-JS"" rel=""nofollow noreferrer"">You don't know JavaScript</a></li>
<li><a href=""http://quirksmode.org/js/contents.html"" rel=""nofollow noreferrer"">quirksmode.org</a> - especially <a href=""http://quirksmode.org/dom/intro.html"" rel=""nofollow noreferrer"">DOM</a> and <a href=""http://www.quirksmode.org/js/introevents.html"" rel=""nofollow noreferrer"">event handling</a></li>
</ul>
","98773","6156","2045","https://i.stack.imgur.com/4P5DY.jpg?s=128&g=1","","76141"
"54614279","2","","34224007","2019-02-10 07:23:04","","105","","<p>You can use <code>tsx</code> instead of <code>ts</code> with very little difference. <code>tsx</code> obviously allows the usage of <code>jsx</code> tags inside typescript, but this introduces some parsing ambiguities that make tsx slightly different. In my experience these differences are not very big:</p>

<p><strong>Type assertions with <code>&lt;&gt;</code> don't work as that is the marker for a jsx tag.</strong></p>

<p>Typescript has two syntaxes for type assertions. They both do the exact same thing but one is usable in tsx the other is not:</p>

<pre><code>let a: any;
let s = a as string // ok in tsx and ts
let s2 = &lt;string&gt;a // only valid in ts
</code></pre>

<p>I would use <code>as</code> instead of <code>&lt;&gt;</code> in <code>ts</code> files as well for consistency. <code>as</code> was actually introduced in Typescript because <code>&lt;&gt;</code> was not usable in <code>tsx</code></p>

<p><strong>Generic arrow functions with no constraint are not parsed correctly</strong></p>

<p>The arrow function below is ok in <code>ts</code> but an error in <code>tsx</code> as <code>&lt;T&gt;</code> is interpreted as the start of a tag in <code>tsx</code></p>

<pre><code> const fn = &lt;T&gt;(a: T) =&gt; a
</code></pre>

<p>You can get around this either by adding a constraint or not using an arrow function :</p>

<pre><code> const fn = &lt;T extends any&gt;(a: T) =&gt; a
 const fn = &lt;T,&gt;(a: T) =&gt; a // this also works but looks weird IMO
 const fn = function&lt;T&gt;(a: T) { return a;}
</code></pre>

<p><strong>Note</strong></p>

<p>While you can use tsx instead of ts, I would recommend against it. Convention is a powerful thing, people associate <code>tsx</code> with <code>jsx</code> and will probably be surprised you don't have any <code>jsx</code> tags, best keep developer surprise to a minimum.</p>

<p>While the ambiguities above (although probably not a complete list) are not big they probably played a big part in the decision to use a dedicated file extension for the new syntax in order to keep <code>ts</code> files backward compatible. </p>
","125734","","6569224","","2019-11-22 16:42:33","2019-11-22 16:42:33","","","","2","","","","125734","112967","2009-06-19 13:08:28","Titian Cernicova-Dragomir","2020-03-15 00:01:56","https://titiandragomir.wordpress.com/","Timișoara, Timiș County, Romania","<p>Typescript fan. </p>

<p><a href=""https://www.youtube.com/watch?v=9Swrzqr4MSs"" rel=""nofollow noreferrer"">Fun with conditional types</a></p>

<p><a href=""https://www.youtube.com/watch?v=wNsKJMSqtAk&amp;list=PL701JjUqw62nHoRho4RJ3KJSLCRG08r1Z&amp;index=3"" rel=""nofollow noreferrer"">RevoJs talk about advanced TS types</a></p>

<p>Need help with a JS->TS conversion, I'm available for hire 😉 titian.dragomir@moredevs.ro</p>
","8993","3317","51","https://i.stack.imgur.com/Qy7qV.png?s=128&g=1","","43074"
"58691862","2","","58691512","2019-11-04 10:48:40","","104","","<p>You can assign a negative sign to a 0.0 float in Ruby because all <a href=""https://en.wikipedia.org/wiki/IEEE_754"" rel=""noreferrer"">IEEE 754</a> floating point numbers have a <em>sign bit</em> to indicate whether the number is positive or negative.</p>

<p>Here are the binary representations of <code>2.5</code> and <code>-2.5</code>:</p>

<pre><code>[2.5].pack('f').unpack1('b*')
#=&gt; ""00000000000000000000010000000010""

[-2.5].pack('f').unpack1('b*')
#=&gt; ""00000000000000000000010000000011""
</code></pre>

<p>The last bit is the sign bit. Note that all the other bits are identical.</p>

<p>On the other hand, there is zero with a sign bit of <code>0</code>:</p>

<pre><code>['00000000000000000000000000000000'].pack('b*').unpack1('f')
#=&gt; 0.0
</code></pre>

<p>and zero with a sign bit of <code>1</code>:</p>

<pre><code>['00000000000000000000000000000001'].pack('b*').unpack1('f')
#=&gt; -0.0
</code></pre>

<p>Although <code>0.0</code> and <code>-0.0</code> are numerically equal, they are not identical on the object level:</p>

<pre><code>(0.0).eql?(-0.0)   #=&gt; true
(0.0).equal?(-0.0) #=&gt; false
</code></pre>

<p>Negative zeros have some <a href=""https://en.wikipedia.org/wiki/Signed_zero#Properties_and_handling"" rel=""noreferrer"">special properties</a>.
For instance:</p>

<pre><code>1 / 0.0    #=&gt; Infinity
1 / -0.0   #=&gt; -Infinity
</code></pre>

<p>Assigning <code>-</code> explicitly is not the only way to get <code>-0.0</code>. You may also get <code>-0.0</code> as the result of a basic arithmetic operation:</p>

<pre><code>-1.0 * 0 #=&gt; -0.0
</code></pre>
","477037","","477037","","2019-11-24 10:57:40","2019-11-24 10:57:40","","","","22","","","","477037","85670","2010-10-15 15:06:40","Stefan","2020-03-14 23:41:56","http://stefanschuessler.de/","Bremen, Germany","<p>Ruby developer from Bremen</p>
","5560","4336","219","","","658903"
"55854902","2","","55840294","2019-04-25 17:40:27","","104","","<p>If you aren't using fetchBusinesses method anywhere apart from the effect, you could simply move it into the effect and avoid the warning</p>

<pre><code>useEffect(() =&gt; {
    const fetchBusinesses = () =&gt; {
       return fetch(""theURL"", {method: ""GET""}
    )
      .then(res =&gt; normalizeResponseErrors(res))
      .then(res =&gt; {
        return res.json();
      })
      .then(rcvdBusinesses =&gt; {
        // some stuff
      })
      .catch(err =&gt; {
        // some error handling
      });
  };
  fetchBusinesses();
}, []);
</code></pre>

<p>If however you are using fetchBusinesses outside of render, you must note two things</p>

<ol>
<li>Is there any issue with you <em>not</em> passing <code>fetchBusinesses</code> as a method when it's used during mount with its enclosing closure?</li>
<li>Does your method depend on some variables which it receives from its enclosing closure? This is not the case for you.</li>
<li>On every render, fetchBusinesses will be re-created and hence passing it to useEffect will cause issues. So first you must memoize fetchBusinesses if you were to pass it to the dependency array.</li>
</ol>

<p>To sum it up I would say that if you are using <code>fetchBusinesses</code> outside of <code>useEffect</code> you can disable the rule using <code>// eslint-disable-next-line react-hooks/exhaustive-deps</code> otherwise you can move the method inside of useEffect</p>

<p>To disable the rule you would write it like</p>

<pre><code>useEffect(() =&gt; {
   // other code
   ...

   // eslint-disable-next-line react-hooks/exhaustive-deps
}, []) 
</code></pre>
","5928186","","4449035","","2020-01-31 19:42:44","2020-01-31 19:42:44","","","","9","","","","5928186","140085","2016-02-15 04:45:44","Shubham Khatri","2020-03-14 17:13:38","","Bangalore, Karnataka, India","<p>I spend most of my free time reading question on stackoverflow and learning all the cool stuff thats out there.</p>

<p>Checkout my <a href=""https://www.linkedin.com/in/shubham-khatri-2204/"" rel=""nofollow noreferrer"">LinkedIn Profile</a></p>

<p>Some of my most useful answers:</p>

<p><a href=""https://stackoverflow.com/questions/52437195/reactrouter-v4-prompt-override-default-alert/52437325#52437325"">ReactRouter v4 Prompt - override default alert</a></p>

<p><a href=""https://stackoverflow.com/questions/45373742/detect-route-change-with-react-router/45373907#45373907"">Detect Route Change with react-router</a></p>

<p><a href=""https://stackoverflow.com/questions/50502664/how-to-update-the-context-value-in-provider-from-the-consumer/50502829#50502829"">How to update the Context value in Provider from the Consumer</a></p>

<p><a href=""https://stackoverflow.com/questions/50817672/does-new-react-context-api-trigger-re-renders"">Does new React Context API trigger re-renders?</a></p>

<p><a href=""https://stackoverflow.com/questions/48209452/when-to-use-functional-setstate/48209870#48209870"">When to use functional setState</a></p>

<p><a href=""https://stackoverflow.com/questions/49809884/access-react-context-outside-of-render-function/49810870#49810870"">Access React Context outside of render function</a></p>

<p><a href=""https://stackoverflow.com/questions/47627818/performing-authentication-on-routes-with-react-router-v4/47628941#47628941"">Performing Authentication on Routes with react-router-v4</a></p>

<p><a href=""https://stackoverflow.com/questions/45053622/how-to-avoid-binding-inside-render-method/45053753#45053753"">How to avoid bind or inline arrow functions inside render method</a></p>

<p><a href=""https://stackoverflow.com/questions/47541032/handling-async-request-with-react-redux-and-axios/47588228#47588228"">Handling async request with React, Redux and Axios?</a></p>

<p><a href=""https://stackoverflow.com/questions/44313375/webpack-watch-exits-after-building-once"">webpack --watch exits after building once</a></p>

<p><a href=""https://stackoverflow.com/questions/44806333/unable-to-catch-and-log-the-error-response-from-an-axios-request"">Unable to catch and log the Error response from an axios request</a></p>

<p><a href=""https://stackoverflow.com/questions/44127739/trying-to-change-the-routing-url-based-on-a-specific-condition-in-react/44128108#44128108"">Programmatically Navigate using react-router</a></p>

<p><a href=""https://stackoverflow.com/questions/44121069/how-to-pass-parameters-with-history-push-in-react-router-v4/45263164#45263164"">How to pass params with history.push/Link/Redirect in react-router v4?</a></p>

<p><a href=""https://stackoverflow.com/questions/44513287/how-to-get-redux-form-data-in-another-component"">How to get Redux Form data in another Component</a></p>

<p><a href=""https://stackoverflow.com/questions/45429963/onenter-prop-in-react-router-v4/45430656#45430656"">onEnter prop in react-router v4</a></p>
","15578","3079","564","https://i.stack.imgur.com/Pa1fE.jpg","","7841989"
"55603131","2","","55602748","2019-04-10 00:37:24","","102","","<p>I agree with <a href=""https://stackoverflow.com/a/55602839/1256452"">brian m. carlson's answer</a>: Linus is indeed distinguishing, at least in part, between file-oriented and commit-oriented version control systems.  But I think there is more to it than that.</p>

<p>In <a href=""http://web.torek.net/torek/tmp/book.pdf"" rel=""noreferrer"">my book</a>, which is stalled and might never get finished, I tried to come up with a <a href=""https://www.merriam-webster.com/dictionary/taxonomy"" rel=""noreferrer"">taxonomy</a> for version control systems.  In my taxonomy the term for what we're interested here is the <em>atomicity</em> of the version control system.  See what is currently page 22.  When a VCS has file-level atomicity, there is in fact a history for each file.  The VCS must remember the name of the file and what occurred to it at each point.</p>

<p>Git doesn't do that.  Git has only a history of commits—the commit is its unit of atomicity, and the history <em>is</em> the set of commits in the repository.  What a commit remembers is the data—a whole tree-full of file names and the contents that go with each of those files—plus some metadata: for instance, who made the commit, when, and why, and the internal Git hash ID of the commit's <em>parent</em> commit.  (It is this parent, and the directed acycling graph formed by reading all commits and their parents, that <em>is</em> the history in a repository.)</p>

<p>Note that a VCS can be commit-oriented, yet still store data file-by-file.  That's an implementation detail, though sometimes an important one, and Git does not do that either.  Instead, each commit records a <em>tree</em>, with the tree object encoding file <em>names</em>, <em>modes</em> (i.e., is this file executable or not?), and <em>a pointer to the actual file content</em>.  The content itself is stored independently, in a <em>blob object</em>.  Like a commit object, a blob gets a hash ID that is unique to its content—but unlike a commit, which can only appear once, the blob can appear in many commits.  So the underlying file content in Git is stored directly as a blob, and then <em>indirectly</em> in a tree object whose hash ID is recorded (directly or indirectly) in the commit object.</p>

<p>When you ask Git to show you a file's history using:</p>

<pre><code>git log [--follow] [starting-point] [--] path/to/file
</code></pre>

<p>what Git is really doing is walking the <em>commit</em> history, which is the only history Git has, but not <em>showing</em> you any of these commits <em>unless:</em></p>

<ul>
<li>the commit is a non-merge commit, and</li>
<li>the parent of that commit also has the file, but the content in the parent differs, or the parent of the commit doesn't have the file at all</li>
</ul>

<p>(but some of these conditions can be modified via additional <code>git log</code> options, and there's a very difficult to describe side effect called History Simplification that makes Git omit some commits from the history walk entirely).  The file history you see here does not exactly exist in the repository, in some sense: instead, it's just a synthetic subset of the real history.  You'll get a different ""file history"" if you use different <code>git log</code> options!</p>
","1256452","","1843331","","2019-04-10 15:29:10","2019-04-10 15:29:10","","","","3","","","","1256452","255423","2012-03-08 07:18:02","torek","2020-03-14 22:12:20","","Berkeley, CA","","9304","2669","3","","","1307867"
"56746204","2","","13784192","2019-06-25 02:51:37","","102","","<h1>The Right Way™ to Create a DataFrame</h1>

<blockquote>
  <p>TLDR; (just read the bold text)</p>
</blockquote>

<p>Most answers here will tell you how to create an empty DataFrame and fill it out, but no one will tell you that it is a bad thing to do. </p>

<p>Here is my advice: <strong>Wait until you are sure you have all the data you need to work with.</strong> Use a list to collect your data, then initialise a DataFrame when you are ready.</p>

<pre><code>data = []
for a, b, c in some_function_that_yields_data():
    data.append([a, b, c])

df = pd.DataFrame(data, columns=['A', 'B', 'C'])
</code></pre>

<p>It is <strong>always cheaper to append to a list and create a DataFrame in one go</strong> than it is to create an empty DataFrame (or one of of NaNs) and append to it over and over again. <strong>Lists also take up less memory and are a much lighter data structure to work with</strong>, append, and remove (if needed).</p>

<p>The other advantage of this method is <strong><code>dtypes</code> are automatically inferred</strong> (rather than assigning <code>object</code> to all of them).</p>

<p>The last advantage is that <strong>a <code>RangeIndex</code> is automatically created for your data</strong>, so it is one less thing to worry about (take a look at the poor <code>append</code> and <code>loc</code> methods below, you will see elements in both that require handling the index appropriately).</p>

<hr>

<h1>Things you should NOT do</h1>

<h3><code>append</code> or <code>concat</code> inside a loop</h3>

<p>Here is the biggest mistake I've seen from beginners:</p>

<pre><code>df = pd.DataFrame(columns=['A', 'B', 'C'])
for a, b, c in some_function_that_yields_data():
    df = df.append({'A': i, 'B': b, 'C': c}, ignore_index=True) # yuck
    # or similarly,
    # df = pd.concat([df, pd.Series({'A': i, 'B': b, 'C': c})], ignore_index=True)
</code></pre>

<p>Memory is re-allocated for every <code>append</code> or <code>concat</code> operation you have. Couple this with a loop and you have a <strong>quadratic complexity operation</strong>.   From the <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.append.html"" rel=""noreferrer""><code>df.append</code> doc page</a>:</p>

<blockquote>
  <p>Iteratively appending rows to a DataFrame can be more computationally
  intensive than a single concatenate. A better solution is to append
  those rows to a list and then concatenate the list with the original
  DataFrame all at once.</p>
</blockquote>

<p>
The other mistake associated with <code>df.append</code> is that users tend to forget <strong>append is not an in-place function</strong>, so the result must be assigned back. You also have to worry about the dtypes:</p>

<pre><code>df = pd.DataFrame(columns=['A', 'B', 'C'])
df = df.append({'A': 1, 'B': 12.3, 'C': 'xyz'}, ignore_index=True)

df.dtypes
A     object   # yuck!
B    float64
C     object
dtype: object
</code></pre>

<p>Dealing with object columns is never a good thing, because pandas cannot vectorize operations on those columns. You will need to do this to fix it:</p>

<pre><code>df.infer_objects().dtypes
A      int64
B    float64
C     object
dtype: object
</code></pre>

<h3><code>loc</code> inside a loop</h3>

<p>I have also seen <code>loc</code> used to append to a DataFrame that was created empty:</p>

<pre><code>df = pd.DataFrame(columns=['A', 'B', 'C'])
for a, b, c in some_function_that_yields_data():
    df.loc[len(df)] = [a, b, c]
</code></pre>

<p>As before, you have not pre-allocated the amount of memory you need each time, so <strong>the memory is re-grown each time you create a new row</strong>. It's just as bad as <code>append</code>, and even more ugly.</p>

<h3>Empty DataFrame of NaNs</h3>

<p>And then, there's creating a DataFrame of NaNs, and all the caveats associated therewith.</p>

<pre><code>df = pd.DataFrame(columns=['A', 'B', 'C'], index=range(5))
df
     A    B    C
0  NaN  NaN  NaN
1  NaN  NaN  NaN
2  NaN  NaN  NaN
3  NaN  NaN  NaN
4  NaN  NaN  NaN
</code></pre>

<p>It creates a DataFrame of object columns, like the others.</p>

<pre><code>df.dtypes
A    object  # you DON'T want this
B    object
C    object
dtype: object
</code></pre>

<p>Appending still has all the issues as the methods above.</p>

<pre><code>for i, (a, b, c) in enumerate(some_function_that_yields_data()):
    df.iloc[i] = [a, b, c]
</code></pre>

<hr>

<h1>The Proof is in the Pudding</h1>

<p>Timing these methods is the fastest way to see just how much they differ in terms of their memory and utility.</p>

<p><a href=""https://i.stack.imgur.com/Ag2NQ.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/Ag2NQ.png"" alt=""enter image description here""></a></p>

<p><a href=""https://gist.github.com/Coldsp33d/ea080f580ab3a3b75c2f40c201d50164"" rel=""noreferrer"">Benchmarking code for reference.</a></p>
","4909087","","4909087","","2019-10-27 20:58:53","2019-10-27 20:58:53","","","","10","","","","4909087","195757","2015-05-17 14:31:31","cs95","2020-03-15 02:58:01","","At an ipython shell near you","<h2><a href=""https://meta.stackoverflow.com/questions/386324/the-stack-overflow-i-wish-to-build-and-participate-in-is-no-longer-supported"">The Stack Overflow I wish to build and participate in no longer exists.</a></h2>

<h1><a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">My pandas canonicals</a> ⬅ please critique!</h1>

<p>When asking a question here, please describe the problem you are trying to solve, rather than asking about the method you <em>think</em> is the solution to that problem. This is known as the <a href=""https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem"">XY problem</a> and can easily be averted if you ask the right questions. This will make it easy for us to understand what you're trying to do, and you may even receive better suggestions that you may never have considered yourself. </p>

<h3><strong>Rep = participation</strong></h3>

<h3><strong>Badges = quality</strong></h3>

<h3><strong><s>1 like = 1 prayer </s> 1 upvote = 1 thanks</strong></h3>

<p><a href=""https://stackoverflow.com/users/4909087/coldspeed""><img src=""https://stackoverflow.com/users/flair/4909087.png"" width=""208"" height=""58"" alt=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers"" title=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers""></a></p>

<p><a href=""https://i.stack.imgur.com/YfCOa.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YfCOa.gif"" alt=""enter image description here""></a></p>

<p><a href=""https://stackoverflow.com/a/53915214/4909087"">Some people, when confronted with a problem, think ""I know, I'll use regular expressions."" Now they have two problems.</a></p>

<hr>

<h2>(Actively Maintained) Pandas Canonicals</h2>

<p>The full list is on <a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">GitHub</a>.</p>

<ul>
<li><a href=""https://stackoverflow.com/q/53645882/pandas-merging-101"">Pandas Merging 101</a>: Everything you ever wanted to know about merging and more</li>
<li><a href=""https://stackoverflow.com/a/55557758"">How to iterate over a DataFrame.</a> Spoler alert: don't!</li>
<li><a href=""https://stackoverflow.com/a/54508052"">How to convert a DataFrame to NumPy array</a>: from 0.24, use <code>df.to_numpy()</code></li>
<li><a href=""https://stackoverflow.com/a/56746204/4909087"">The Right Way to create an empty DataFrame and fill it</a>: Use a list to grow your data, not a DataFrame</li>
<li><a href=""https://stackoverflow.com/a/59242208/4909087"">Don't use <code>inplace=True</code>!</a></li>
</ul>

<h2>Other Posts I'm Proud Of</h2>

<ul>
<li>Pandas Merging 101 (see above)</li>
<li><a href=""https://stackoverflow.com/a/50312321/4909087"">Best way to interleave two lists</a></li>
<li><a href=""https://stackoverflow.com/questions/47007680/strange-use-of-pythons-and-operator/47007761#47007761"">How do &quot;and&quot; and &quot;or&quot; act with non-boolean values?</a></li>
<li><a href=""https://stackoverflow.com/a/46333422/4909087"">So you think you know recursion?</a></li>
</ul>

<p>In addition to this, some of my <a href=""https://stackoverflow.com/search?tab=votes&amp;q=user%3a4909087%20perfplot"">answers that use <code>perfplot</code></a> are worth a read.</p>

<hr>

<h3>236th awardee of the <a href=""https://stackoverflow.com/help/badges/146/legendary"">Legendary</a> badge.</h3>

<p>Thanks, Stack Overflow! I love the shirt :-)</p>

<p><a href=""https://i.stack.imgur.com/7YKND.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7YKND.jpg"" alt=""enter image description here""></a></p>
","57988","9183","7537","https://i.stack.imgur.com/LmD3e.png?s=128&g=1","","6321039"
"55099760","2","","55099677","2019-03-11 10:27:03","","101","","<p>The common practice is not to demand client code wraps your header in <code>extern ""C""</code>, but to do so conditionally yourself. For instance:</p>

<pre><code>#ifdef __cplusplus
extern ""C"" {
#endif

  // Header content

#ifdef __cplusplus
}
#endif
</code></pre>

<p>That way client code is automatically correct without doing anything beyond including the header.</p>
","817643","","","","","2019-03-11 10:27:03","","","","15","","","","817643","133132","2011-06-27 15:14:51","StoryTeller - Unslander Monica","2020-03-14 18:44:58","","Israel","<p>My user handle is in relation to <a href=""https://meta.stackexchange.com/questions/336526/stack-overflow-is-doing-me-ongoing-harm-its-time-to-fix-it"">this post</a>. SE Inc has behaved reprehensibly, and the entire user community should be made aware and take a stand against it. </p>

<hr>

<p>I don't believe in answering questions completely. IMHO, one gains the most when one deduces as much of the answer on their own.</p>

<p>Over the past several years on SO I learned the following:</p>

<ul>
<li>The vital importance of being precise.</li>
<li>Helping others learn can enrich oneself immeasurably.</li>
<li>Some one always knows more, learn from them.</li>
</ul>

<p>I like C very much, but I think we should stop <a href=""https://www.youtube.com/watch?v=YnWhqhNdYyk"" rel=""nofollow noreferrer"">teaching it (as part of teaching C++)</a>.</p>

<p>I also get a twitch in my eye every time someone on SO adds ""My Professor/Assignment forbids the use of the standard c++ library"". This is so asinine, and has nothing to do with teaching ""real"" C++.</p>
","14705","7243","5944","","","432714"
"56833739","2","","56833657","2019-07-01 10:06:33","","99","","<p>You can use AndroidX support library version of <a href=""https://developer.android.com/reference/androidx/preference/PreferenceManager.html"" rel=""noreferrer""><code>PreferenceManager</code></a>, i.e. <code>androidx.preference.PreferenceManager</code> and not <code>android.preference.PreferenceManager</code>.</p>
","101361","","101361","","2020-01-14 20:04:22","2020-01-14 20:04:22","","","","2","","","","101361","126123","2009-05-05 07:09:41","laalto","2020-03-14 21:31:15","http://fi.linkedin.com/in/laalto","Oulu, Finland","<p>I like questions and answers that promote learning and understanding. As a consequence, I value less questions that are just fix-this-for-me dumps or answers that are just code to be copied without learning anything in the process.</p>
","15095","1356","3558","","","35743"
"56508769","2","","56508764","2019-06-08 17:42:45","","97","","<p><strong>iOS 13 has a new way of sending app lifecycle events</strong>. Instead of coming through the <code>UIApplicationDelegate</code> they come through the <a href=""https://developer.apple.com/documentation/uikit/uiwindowscenedelegate"" rel=""noreferrer""><code>UIWindowSceneDelegate</code></a> which is a <a href=""https://developer.apple.com/documentation/uikit/uiscenedelegate?language=objc"" rel=""noreferrer""><code>UISceneDelegate</code></a> sub-protocol. <code>UISceneDelegate</code> has the important delegate methods.</p>

<p>This change is to support multiple windows in iOS 13. There's more information in WWDC 2019 session 212 ""<a href=""https://developer.apple.com/videos/play/wwdc2019/212/"" rel=""noreferrer"">Introducing Multiple Windows on iPad</a>"". The technical information starts at <a href=""https://developer.apple.com/videos/play/wwdc2019-212/?time=818"" rel=""noreferrer"">around 14:30</a> and is presented by a man with very sparkly high-tops. The shorter session 258 <a href=""https://developer.apple.com/videos/play/wwdc2019/258/"" rel=""noreferrer"">Architecting Your App for Multiple Windows</a> also has a great introduction to what's changed.</p>

<p><strong>Here's how it works:</strong> If you have an ""<strong>Application Scene Manifest</strong>"" in your Info.plist and your app delegate has a <code>configurationForConnectingSceneSession</code> method, the <code>UIApplication</code> won't send background and foreground lifecycle messages to your app delegate. That means the code in these methods won't run:</p>

<ul>
<li><code>applicationDidBecomeActive</code> </li>
<li><code>applicationWillResignActive</code> </li>
<li><code>applicationDidEnterBackground</code> </li>
<li><code>applicationWillEnterForeground</code></li>
</ul>

<p>The app delegate will still receive the <code>willFinishLaunchingWithOptions:</code> and <code>didFinishLaunchingWithOptions:</code> method calls so any code in those methods will work as before.</p>

<p><strong>If you want the old behaviour back</strong> you need to</p>

<ol>
<li>Delete the ""Application Scene Manifest"" entry from the app's Info.plist</li>
<li>Comment or delete the <code>application:configurationForConnectingSceneSession:options:</code> method (or the Swift <code>application(_:configurationForConnecting:options:)</code>function)</li>
<li>Add the window property back to your app delegate (<code>@property (strong, nonatomic) UIWindow *window;</code>)</li>
</ol>

<p>Alternatively, open the SceneDelegate file that Xcode made and use the new lifecycle methods in there:</p>

<pre><code>- (void)sceneDidBecomeActive:(UIScene *)scene {
}
- (void)sceneWillResignActive:(UIScene *)scene {
}
... etc
</code></pre>

<p>It's possible to use the new <code>UIScene</code> lifecycle stuff without adopting multiple window support by setting ""Enable Multiple Windows"" (""UIApplicationSupportsMultipleScenes"") to ""NO"" in the Info.plist (this is the default for new projects). This way you can start adopting the new API in smaller steps.</p>

<p>You can see that the scene delegate method names are a close match for the app delegate ones. One confusing thing is that the app delegate methods aren't deprecated so you won't get a warning if you have both app delegate and scene delegate methods in place but only one will be called.</p>

<p>Other things that <code>UISceneDelegate</code> takes over are user activities (<code>continueUserActivity:</code> etc), state restoration (<code>stateRestorationActivityForScene:</code> etc), status bar questions and opening URLs. (I'm not sure if these replace the app delegate methods). It also has analogous notifications for the lifecycle events (like <code>UISceneWillDeactivateNotification</code>).</p>

<p><strong>From the WWDC Session, some images for you:</strong></p>

<p>The function equivalents for Swift:</p>

<p><a href=""https://i.stack.imgur.com/b9Xj0.jpg"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/b9Xj0.jpg"" alt=""enter image description here""></a></p>

<p>The class responsibilities:</p>

<p><a href=""https://i.stack.imgur.com/nz4t6.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/nz4t6.png"" alt=""enter image description here""></a></p>
","74118","","74118","","2019-11-29 13:25:51","2019-11-29 13:25:51","","","","11","","","","74118","104729","2009-03-05 07:35:12","nevan king","2020-03-13 23:58:21","http://nevan.net","","<p>Mostly questions and answers about iOS &amp; maps</p>
","4481","1242","1","https://i.stack.imgur.com/pfMm3.jpg?s=128&g=1","","27918"
"56866529","2","","56866458","2019-07-03 09:02:57","","96","","<p>It limits the scope of <code>length</code> to the <code>if</code> alone. So you get the same benefits we originally got when we were allowed to write</p>

<pre><code>for(int i = 0; i &lt; ... ; ++i) {
   // ...
}
</code></pre>

<p>Instead of the variable leaking</p>

<pre><code>int i;
for(i = 0; i &lt; ... ; ++i) {
   // ...
}
</code></pre>

<p>Short lived variables are better for several reasons. But to name a couple:</p>

<ol>
<li><p>The shorter something lives, the less things you need to keep in mind when reading unrelated lines of code. If <code>i</code> doesn't exist outside the loop or <code>if</code> statement, then we don't need to mind its value outside of them. Nor do we need to worry its value will interact with other parts of the program that are outside of its intended scope (which may happen if <code>i</code> above is reused in another loop). It makes code easier to follow and reason about.</p></li>
<li><p>If the variable holds a resource, then that resource is now held for the shortest period possible. And this is without extraneous curly braces. It's also made clear the resource is related to the <code>if</code> alone. Consider this as a motivating example</p>

<pre><code>if(std::lock_guard _(mtx); guarded_thing.is_ready()) {
}
</code></pre></li>
</ol>

<p>If your colleagues aren't aware of the feature, teach them! Appeasing programmers who don't wish to learn is a poor excuse to avoid features.</p>
","817643","","3628942","","2019-07-10 10:27:18","2019-07-10 10:27:18","","","","5","","","","817643","133132","2011-06-27 15:14:51","StoryTeller - Unslander Monica","2020-03-14 18:44:58","","Israel","<p>My user handle is in relation to <a href=""https://meta.stackexchange.com/questions/336526/stack-overflow-is-doing-me-ongoing-harm-its-time-to-fix-it"">this post</a>. SE Inc has behaved reprehensibly, and the entire user community should be made aware and take a stand against it. </p>

<hr>

<p>I don't believe in answering questions completely. IMHO, one gains the most when one deduces as much of the answer on their own.</p>

<p>Over the past several years on SO I learned the following:</p>

<ul>
<li>The vital importance of being precise.</li>
<li>Helping others learn can enrich oneself immeasurably.</li>
<li>Some one always knows more, learn from them.</li>
</ul>

<p>I like C very much, but I think we should stop <a href=""https://www.youtube.com/watch?v=YnWhqhNdYyk"" rel=""nofollow noreferrer"">teaching it (as part of teaching C++)</a>.</p>

<p>I also get a twitch in my eye every time someone on SO adds ""My Professor/Assignment forbids the use of the standard c++ library"". This is so asinine, and has nothing to do with teaching ""real"" C++.</p>
","14705","7243","5944","","","432714"
"54514749","2","","54513450","2019-02-04 11:02:49","","94","","<p>According to the precedence table, this <em>is</em> the expected behavior. The operator with higher precedence (<code>/</code> and <code>*</code>) is evaluated before operator with lower precedence (unary <code>-</code>). So this:</p>

<pre><code>-100 / -100 * 10
</code></pre>

<p>is evaluated as:</p>

<pre><code>-(100 / -(100 * 10))
</code></pre>

<p>Note that this behavior is different from most programming languages where unary negation has higher precedence than multiplication and division e.g. <a href=""https://docs.microsoft.com/en-us/dotnet/visual-basic/language-reference/operators/operator-precedence#precedence-order"" rel=""noreferrer"">VB</a>, <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Operator_Precedence#Table"" rel=""noreferrer"">JavaScript</a>.</p>
","87015","","87015","","2019-12-30 19:55:30","2019-12-30 19:55:30","","","","13","","","","87015","212692","2009-04-04 05:53:20","Salman A","2020-03-14 22:27:40","https://salman-w.blogspot.com/","Karachi, Pakistan","","20032","4952","1603","https://www.gravatar.com/avatar/2f9b099fb455d3ddedb0bfa7430e51a9?s=128&d=identicon&r=PG&f=1","","31629"
"57899013","2","","57134259","2019-09-12 02:40:24","","94","","<p>The accepted answer, while ingenious, might be overly elaborate. You can get exactly the same result much more simply:</p>

<pre><code>UIApplication.shared.windows.filter {$0.isKeyWindow}.first
</code></pre>

<p>I would also caution that the deprecation of <code>keyWindow</code> should not be taken overly seriously. The full warning message reads:</p>

<blockquote>
  <p>'keyWindow' was deprecated in iOS 13.0: Should not be used for applications that support multiple scenes as it returns a key window across all connected scenes</p>
</blockquote>

<p>So if you are not supporting multiple windows on iPad there is no objection to going ahead and continuing to use <code>keyWindow</code>.</p>
","341994","","341994","","2019-10-06 01:30:08","2019-10-06 01:30:08","","","","17","","","","341994","385754","2010-05-15 16:05:56","matt","2020-03-15 04:32:30","http://www.apeth.net/matt/default.html","","<p>Author most recently of <a href=""https://learning.oreilly.com/library/view/ios-13-programming/9781492074526/"" rel=""nofollow noreferrer"">iOS 13 Programming Fundamentals with Swift</a> and of <a href=""https://learning.oreilly.com/library/view/programming-ios-13/9781492074601/"" rel=""nofollow noreferrer"">Programming iOS 13</a>.</p>

<p>Code examples from the books available at <a href=""https://github.com/mattneub/Programming-iOS-Book-Examples"" rel=""nofollow noreferrer"">my github repository</a>.</p>

<p>A much earlier edition, <em>Programming iOS 6</em>, is available to read for free at <a href=""http://www.apeth.com/iOSBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/iOSBook/</a>.</p>

<p>And the Swift language chapters of <em>iOS 10 Programming Fundamentals With Swift</em> are available at <a href=""http://www.apeth.com/swiftBook/"" rel=""nofollow noreferrer"">http://www.apeth.com/swiftBook/</a>.</p>
","50925","2318","21240","","","137658"
"55335207","2","","11350770","2019-03-25 09:58:20","","93","","<blockquote>
  <h3>How do I select by partial string from a pandas DataFrame?</h3>
</blockquote>

<p>This post is meant for readers who want to </p>

<ul>
<li>search for a substring in a string column (the simplest case) </li>
<li>search for multiple substrings (similar to <a href=""https://stackoverflow.com/q/19960077/4909087""><code>isin</code></a>)</li>
<li>match a whole word from text (e.g., ""blue"" should match ""the sky is blue"" but not ""bluejay"")</li>
<li>match multiple whole words </li>
<li>Understand the reason behind ""ValueError: cannot index with vector containing NA / NaN values""</li>
</ul>

<p>...and would like to know more about what methods should be preferred over others.</p>

<p>(P.S.: I've seen a lot of questions on similar topics, I thought it would be good to leave this here.)</p>

<hr>

<h3>Basic Substring Search</h3>

<pre><code># setup
df1 = pd.DataFrame({'col': ['foo', 'foobar', 'bar', 'baz']})
df1

      col
0     foo
1  foobar
2     bar
3     baz
</code></pre>

<p><a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.str.contains.html"" rel=""noreferrer""><code>str.contains</code></a> can be used to perform either substring searches or regex based search. The search defaults to regex-based unless you explicitly disable it.</p>

<p>Here is an example of regex-based search, </p>

<pre><code># find rows in `df1` which contain ""foo"" followed by something
df1[df1['col'].str.contains(r'foo(?!$)')]

      col
1  foobar
</code></pre>

<p>Sometimes regex search is not required, so specify <code>regex=False</code> to disable it.</p>

<pre><code>#select all rows containing ""foo""
df1[df1['col'].str.contains('foo', regex=False)]
# same as df1[df1['col'].str.contains('foo')] but faster.

      col
0     foo
1  foobar
</code></pre>

<p>Performance wise, regex search is slower than substring search:</p>

<pre><code>df2 = pd.concat([df1] * 1000, ignore_index=True)

%timeit df2[df2['col'].str.contains('foo')]
%timeit df2[df2['col'].str.contains('foo', regex=False)]

6.31 ms ± 126 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
2.8 ms ± 241 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
</code></pre>

<p>Avoid using regex-based search if you don't need it.</p>

<p><strong>Addressing <code>ValueError</code>s</strong><br>
Sometimes, performing a substring search and filtering on the result will result in </p>

<blockquote>
<pre><code>ValueError: cannot index with vector containing NA / NaN values
</code></pre>
</blockquote>

<p>This is usually because of mixed data or NaNs in your object column,</p>

<pre><code>s = pd.Series(['foo', 'foobar', np.nan, 'bar', 'baz', 123])
s.str.contains('foo|bar')

0     True
1     True
2      NaN
3     True
4    False
5      NaN
dtype: object


s[s.str.contains('foo|bar')]
# ---------------------------------------------------------------------------
# ValueError                                Traceback (most recent call last)
</code></pre>

<p>Anything that is not a string cannot have string methods applied on it, so the result is NaN (naturally). In this case, specify <code>na=False</code> to ignore non-string data,</p>

<pre><code>s.str.contains('foo|bar', na=False)

0     True
1     True
2    False
3     True
4    False
5    False
dtype: bool
</code></pre>

<hr>

<h3><strong>Multiple Substring Search</strong></h3>

<p>This is most easily achieved through a regex search using the regex OR pipe.</p>

<pre><code># Slightly modified example.
df4 = pd.DataFrame({'col': ['foo abc', 'foobar xyz', 'bar32', 'baz 45']})
df4

          col
0     foo abc
1  foobar xyz
2       bar32
3      baz 45

df4[df4['col'].str.contains(r'foo|baz')]

          col
0     foo abc
1  foobar xyz
3      baz 45
</code></pre>

<p>You can also create a list of terms, then join them:</p>

<pre><code>terms = ['foo', 'baz']
df4[df4['col'].str.contains('|'.join(terms))]

          col
0     foo abc
1  foobar xyz
3      baz 45
</code></pre>

<p>Sometimes, it is wise to escape your terms in case they have characters that can be interpreted as <a href=""https://docs.python.org/3/howto/regex.html#matching-characters"" rel=""noreferrer"">regex metacharacters</a>. If your terms contain any of the following characters...</p>

<pre><code>. ^ $ * + ? { } [ ] \ | ( )
</code></pre>

<p>Then, you'll need to use <a href=""https://docs.python.org/3/library/re.html#re.escape"" rel=""noreferrer""><code>re.escape</code></a> to <em>escape</em> them:</p>

<pre><code>import re
df4[df4['col'].str.contains('|'.join(map(re.escape, terms)))]

          col
0     foo abc
1  foobar xyz
3      baz 45
</code></pre>

<p><code>re.escape</code> has the effect of escaping the special characters so they're treated literally.</p>

<pre><code>re.escape(r'.foo^')
# '\\.foo\\^'
</code></pre>

<hr>

<h3><strong>Matching Entire Word(s)</strong></h3>

<p>By default, the substring search searches for the specified substring/pattern regardless of whether it is full word or not. To only match full words, we will need to make use of regular expressions here—in particular, our pattern will need to specify word boundaries (<code>\b</code>).</p>

<p>For example, </p>

<pre><code>df3 = pd.DataFrame({'col': ['the sky is blue', 'bluejay by the window']})
df3

                     col
0        the sky is blue
1  bluejay by the window
</code></pre>

<p>Now consider,</p>

<pre><code>df3[df3['col'].str.contains('blue')]

                     col
0        the sky is blue
1  bluejay by the window
</code></pre>

<p>v/s </p>

<pre><code>df3[df3['col'].str.contains(r'\bblue\b')]

               col
0  the sky is blue
</code></pre>

<hr>

<h3><strong>Multiple Whole Word Search</strong></h3>

<p>Similar to the above, except we add a word boundary (<code>\b</code>) to the joined pattern.</p>

<pre><code>p = r'\b(?:{})\b'.format('|'.join(map(re.escape, terms)))
df4[df4['col'].str.contains(p)]

       col
0  foo abc
3   baz 45
</code></pre>

<p>Where <code>p</code> looks like this,</p>

<pre><code>p
# '\\b(?:foo|baz)\\b'
</code></pre>

<hr>

<h3>A Great Alternative: Use <a href=""https://docs.python.org/3/tutorial/datastructures.html#list-comprehensions"" rel=""noreferrer"">List Comprehensions</a>!</h3>

<p>Because you can! <a href=""https://stackoverflow.com/questions/54028199/for-loops-with-pandas-when-should-i-care"">And you should!</a> They are usually a little bit faster than string methods, because string methods are hard to vectorise and usually have loopy implementations. </p>

<p>Instead of,</p>

<pre><code>df1[df1['col'].str.contains('foo', regex=False)]
</code></pre>

<p>Use the <code>in</code> operator inside a list comp,</p>

<pre><code>df1[['foo' in x for x in df1['col']]]

       col
0  foo abc
1   foobar
</code></pre>

<p>Instead of,</p>

<pre><code>regex_pattern = r'foo(?!$)'
df1[df1['col'].str.contains(regex_pattern)]
</code></pre>

<p>Use <a href=""https://docs.python.org/3/library/re.html#re.compile"" rel=""noreferrer""><code>re.compile</code></a> (to cache your regex) + <a href=""https://docs.python.org/3/library/re.html#re.Pattern.search"" rel=""noreferrer""><code>Pattern.search</code></a> inside a list comp,</p>

<pre><code>p = re.compile(regex_pattern, flags=re.IGNORECASE)
df1[[bool(p.search(x)) for x in df1['col']]]

      col
1  foobar
</code></pre>

<p>If ""col"" has NaNs, then instead of </p>

<pre><code>df1[df1['col'].str.contains(regex_pattern, na=False)]
</code></pre>

<p>Use,</p>

<pre><code>def try_search(p, x):
    try:
        return bool(p.search(x))
    except TypeError:
        return False

p = re.compile(regex_pattern)
df1[[try_search(p, x) for x in df1['col']]]

      col
1  foobar
</code></pre>

<hr>

<h3>More Options for Partial String Matching: <a href=""https://docs.scipy.org/doc/numpy-1.13.0/reference/generated/numpy.core.defchararray.find.html#numpy.core.defchararray.find"" rel=""noreferrer""><code>np.char.find</code></a>, <a href=""https://docs.scipy.org/doc/numpy/reference/generated/numpy.vectorize.html"" rel=""noreferrer""><code>np.vectorize</code></a>, <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.query.html"" rel=""noreferrer""><code>DataFrame.query</code></a>.</h3>

<p>In addition to <code>str.contains</code> and list comprehensions, you can also use the following alternatives.</p>

<p><strong><code>np.char.find</code></strong><br>
Supports substring searches (read: no regex) only.</p>

<pre><code>df4[np.char.find(df4['col'].values.astype(str), 'foo') &gt; -1]

          col
0     foo abc
1  foobar xyz
</code></pre>

<p><strong><code>np.vectorize</code></strong><br>
This is a wrapper around a loop, but with lesser overhead than most pandas <code>str</code> methods.</p>

<pre><code>f = np.vectorize(lambda haystack, needle: needle in haystack)
f(df1['col'], 'foo')
# array([ True,  True, False, False])

df1[f(df1['col'], 'foo')]

       col
0  foo abc
1   foobar
</code></pre>

<p>Regex solutions possible:</p>

<pre><code>regex_pattern = r'foo(?!$)'
p = re.compile(regex_pattern)
f = np.vectorize(lambda x: pd.notna(x) and bool(p.search(x)))
df1[f(df1['col'])]

      col
1  foobar
</code></pre>

<p><strong><code>DataFrame.query</code></strong><br>
Supports string methods through the python engine. This offers no visible performance benefits, but is nonetheless useful to know if you need to dynamically generate your queries.</p>

<pre><code>df1.query('col.str.contains(""foo"")', engine='python')

      col
0     foo
1  foobar
</code></pre>

<p>More information on <code>query</code> and <code>eval</code> family of methods can be found at <a href=""https://stackoverflow.com/questions/53779986/dynamic-expression-evaluation-in-pandas-using-pd-eval"">Dynamic Expression Evaluation in pandas using pd.eval()</a>.</p>

<hr>

<h3>Recommended Usage Precedence</h3>

<ol>
<li>(First) <code>str.contains</code>, for its simplicity and ease handling NaNs and mixed data</li>
<li>List comprehensions, for its performance (especially if your data is purely strings)</li>
<li><code>np.vectorize</code></li>
<li>(Last) <code>df.query</code></li>
</ol>
","4909087","","4909087","","2019-06-17 18:47:54","2019-06-17 18:47:54","","","","7","","","","4909087","195757","2015-05-17 14:31:31","cs95","2020-03-15 02:58:01","","At an ipython shell near you","<h2><a href=""https://meta.stackoverflow.com/questions/386324/the-stack-overflow-i-wish-to-build-and-participate-in-is-no-longer-supported"">The Stack Overflow I wish to build and participate in no longer exists.</a></h2>

<h1><a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">My pandas canonicals</a> ⬅ please critique!</h1>

<p>When asking a question here, please describe the problem you are trying to solve, rather than asking about the method you <em>think</em> is the solution to that problem. This is known as the <a href=""https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem"">XY problem</a> and can easily be averted if you ask the right questions. This will make it easy for us to understand what you're trying to do, and you may even receive better suggestions that you may never have considered yourself. </p>

<h3><strong>Rep = participation</strong></h3>

<h3><strong>Badges = quality</strong></h3>

<h3><strong><s>1 like = 1 prayer </s> 1 upvote = 1 thanks</strong></h3>

<p><a href=""https://stackoverflow.com/users/4909087/coldspeed""><img src=""https://stackoverflow.com/users/flair/4909087.png"" width=""208"" height=""58"" alt=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers"" title=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers""></a></p>

<p><a href=""https://i.stack.imgur.com/YfCOa.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YfCOa.gif"" alt=""enter image description here""></a></p>

<p><a href=""https://stackoverflow.com/a/53915214/4909087"">Some people, when confronted with a problem, think ""I know, I'll use regular expressions."" Now they have two problems.</a></p>

<hr>

<h2>(Actively Maintained) Pandas Canonicals</h2>

<p>The full list is on <a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">GitHub</a>.</p>

<ul>
<li><a href=""https://stackoverflow.com/q/53645882/pandas-merging-101"">Pandas Merging 101</a>: Everything you ever wanted to know about merging and more</li>
<li><a href=""https://stackoverflow.com/a/55557758"">How to iterate over a DataFrame.</a> Spoler alert: don't!</li>
<li><a href=""https://stackoverflow.com/a/54508052"">How to convert a DataFrame to NumPy array</a>: from 0.24, use <code>df.to_numpy()</code></li>
<li><a href=""https://stackoverflow.com/a/56746204/4909087"">The Right Way to create an empty DataFrame and fill it</a>: Use a list to grow your data, not a DataFrame</li>
<li><a href=""https://stackoverflow.com/a/59242208/4909087"">Don't use <code>inplace=True</code>!</a></li>
</ul>

<h2>Other Posts I'm Proud Of</h2>

<ul>
<li>Pandas Merging 101 (see above)</li>
<li><a href=""https://stackoverflow.com/a/50312321/4909087"">Best way to interleave two lists</a></li>
<li><a href=""https://stackoverflow.com/questions/47007680/strange-use-of-pythons-and-operator/47007761#47007761"">How do &quot;and&quot; and &quot;or&quot; act with non-boolean values?</a></li>
<li><a href=""https://stackoverflow.com/a/46333422/4909087"">So you think you know recursion?</a></li>
</ul>

<p>In addition to this, some of my <a href=""https://stackoverflow.com/search?tab=votes&amp;q=user%3a4909087%20perfplot"">answers that use <code>perfplot</code></a> are worth a read.</p>

<hr>

<h3>236th awardee of the <a href=""https://stackoverflow.com/help/badges/146/legendary"">Legendary</a> badge.</h3>

<p>Thanks, Stack Overflow! I love the shirt :-)</p>

<p><a href=""https://i.stack.imgur.com/7YKND.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7YKND.jpg"" alt=""enter image description here""></a></p>
","57988","9183","7537","https://i.stack.imgur.com/LmD3e.png?s=128&g=1","","6321039"
"56436559","1","56874473","","2019-06-04 02:17:31","","92","26352","<p>A <code>UISegmentedControl</code> has a new appearance in iOS 13 and existing code to alter the colors of the segmented control no longer work as they did.</p>

<p>Prior to iOS 13 you could set the <code>tintColor</code> and that would be used for the border around the segmented control, the lines between the segments, and the background color of the selected segment. Then you could change the color of the titles of each segment using the foreground color attribute with <code>titleTextAttributes</code>.</p>

<p>Under iOS 13, the <code>tintColor</code> does nothing. You can set the segmented control's <code>backgroundColor</code> to change the overall color of the segmented control. But I can't find any way to alter the color used as the background of the selected segment. Setting the text attributes still works. I even tried setting the background color of the title but that only affects the background of the title, not the rest of the selected segment's background color.</p>

<p>In short, how do you modify the background color of the currently selected segment of a <code>UISegmentedControl</code> in iOS 13? Is there a proper solution, using public APIs, that doesn't require digging into the private subview structure?</p>

<p>There are no new properties in iOS 13 for <code>UISegmentedControl</code> or <code>UIControl</code> and none of the changes in <code>UIView</code> are relevant.</p>
","1226963","","1226963","","2019-06-04 18:36:40","2019-10-23 11:17:57","How to change the colors of a segment in a UISegmentedControl in iOS 13?","<ios><uikit><uisegmentedcontrol><ios13>","12","0","29","","","1226963","276683","2012-02-22 21:58:04","rmaddy","2020-02-10 06:36:19","http://www.maddysoft.com/iphone/","","<p>I am an independent iOS app developer producing and selling my own apps. I started with BASIC in 1979 playing with TRS Model I computers at Radio Shack stores. We sure had a lot of fun with 4k of RAM.</p>
","57909","2865","29801","https://i.stack.imgur.com/yjY1E.png","","1270581"
"54028199","1","54028200","","2019-01-03 18:54:20","","92","9743","<p><strong>Are <code>for</code> loops really ""bad""? If not, in what situation(s) would they be better than using a more conventional ""vectorized"" approach?<sup>1</sup></strong></p>

<p>I am familiar with the concept of ""vectorization"", and how pandas employs vectorized techniques to speed up computation. Vectorized functions broadcast operations over the entire series or DataFrame to achieve speedups much greater than conventionally iterating over the data. </p>

<p>However, I am quite surprised to see a lot of code (including from answers on Stack Overflow) offering solutions to problems that involve looping through data using <code>for</code> loops and list comprehensions. The documentation and API say that loops are ""bad"", and that one should ""never"" iterate over arrays, series, or DataFrames. So, how come I sometimes see users suggesting loop-based solutions?</p>

<hr>

<p><sub>1 - While it is true that the question sounds somewhat broad, the truth is that there are very specific situations when <code>for</code> loops are usually better than conventionally iterating over data. This post aims to capture this for posterity. </sub> </p>
","4909087","","202229","","2019-07-13 01:02:19","2019-07-13 01:02:19","Are for-loops in pandas really bad? When should I care?","<python><pandas><iteration><vectorization><list-comprehension>","1","0","78","","","4909087","195757","2015-05-17 14:31:31","cs95","2020-03-15 02:58:01","","At an ipython shell near you","<h2><a href=""https://meta.stackoverflow.com/questions/386324/the-stack-overflow-i-wish-to-build-and-participate-in-is-no-longer-supported"">The Stack Overflow I wish to build and participate in no longer exists.</a></h2>

<h1><a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">My pandas canonicals</a> ⬅ please critique!</h1>

<p>When asking a question here, please describe the problem you are trying to solve, rather than asking about the method you <em>think</em> is the solution to that problem. This is known as the <a href=""https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem"">XY problem</a> and can easily be averted if you ask the right questions. This will make it easy for us to understand what you're trying to do, and you may even receive better suggestions that you may never have considered yourself. </p>

<h3><strong>Rep = participation</strong></h3>

<h3><strong>Badges = quality</strong></h3>

<h3><strong><s>1 like = 1 prayer </s> 1 upvote = 1 thanks</strong></h3>

<p><a href=""https://stackoverflow.com/users/4909087/coldspeed""><img src=""https://stackoverflow.com/users/flair/4909087.png"" width=""208"" height=""58"" alt=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers"" title=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers""></a></p>

<p><a href=""https://i.stack.imgur.com/YfCOa.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YfCOa.gif"" alt=""enter image description here""></a></p>

<p><a href=""https://stackoverflow.com/a/53915214/4909087"">Some people, when confronted with a problem, think ""I know, I'll use regular expressions."" Now they have two problems.</a></p>

<hr>

<h2>(Actively Maintained) Pandas Canonicals</h2>

<p>The full list is on <a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">GitHub</a>.</p>

<ul>
<li><a href=""https://stackoverflow.com/q/53645882/pandas-merging-101"">Pandas Merging 101</a>: Everything you ever wanted to know about merging and more</li>
<li><a href=""https://stackoverflow.com/a/55557758"">How to iterate over a DataFrame.</a> Spoler alert: don't!</li>
<li><a href=""https://stackoverflow.com/a/54508052"">How to convert a DataFrame to NumPy array</a>: from 0.24, use <code>df.to_numpy()</code></li>
<li><a href=""https://stackoverflow.com/a/56746204/4909087"">The Right Way to create an empty DataFrame and fill it</a>: Use a list to grow your data, not a DataFrame</li>
<li><a href=""https://stackoverflow.com/a/59242208/4909087"">Don't use <code>inplace=True</code>!</a></li>
</ul>

<h2>Other Posts I'm Proud Of</h2>

<ul>
<li>Pandas Merging 101 (see above)</li>
<li><a href=""https://stackoverflow.com/a/50312321/4909087"">Best way to interleave two lists</a></li>
<li><a href=""https://stackoverflow.com/questions/47007680/strange-use-of-pythons-and-operator/47007761#47007761"">How do &quot;and&quot; and &quot;or&quot; act with non-boolean values?</a></li>
<li><a href=""https://stackoverflow.com/a/46333422/4909087"">So you think you know recursion?</a></li>
</ul>

<p>In addition to this, some of my <a href=""https://stackoverflow.com/search?tab=votes&amp;q=user%3a4909087%20perfplot"">answers that use <code>perfplot</code></a> are worth a read.</p>

<hr>

<h3>236th awardee of the <a href=""https://stackoverflow.com/help/badges/146/legendary"">Legendary</a> badge.</h3>

<p>Thanks, Stack Overflow! I love the shirt :-)</p>

<p><a href=""https://i.stack.imgur.com/7YKND.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7YKND.jpg"" alt=""enter image description here""></a></p>
","57988","9183","7537","https://i.stack.imgur.com/LmD3e.png?s=128&g=1","","6321039"
"54564767","2","","49227667","2019-02-07 00:44:47","","92","","<p><code>SafeArea</code> is basically a glorified <code>Padding</code> widget. If you wrap another widget with <code>SafeArea</code>, it adds any necessary padding needed to keep your widget from being blocked by the system status bar, notches, holes, rounded corners and other ""creative"" features by manufactures.</p>

<p>Here is an example without <code>SafeArea</code> set:</p>

<pre><code>Align(
  alignment: Alignment.topLeft,  // and bottomLeft
  child: Text('My Widget: ...'),
)
</code></pre>

<p><a href=""https://i.stack.imgur.com/7sWyl.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/7sWyl.png"" alt=""enter image description here""></a></p>

<p>And again with the widget wrapped in a SafeArea widget:</p>

<pre><code>Align(
  alignment: Alignment.topLeft,  // and bottomLeft
  child: SafeArea(
    child: Text('My Widget: ...'),
  ),
)
</code></pre>

<p><a href=""https://i.stack.imgur.com/GnLQ2.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/GnLQ2.png"" alt=""enter image description here""></a></p>

<p>You can set a minimum padding for edges not affected by notches and such:</p>

<pre><code>SafeArea(
  minimum: const EdgeInsets.all(16.0),
  child: Text('My Widget: ...'),
)
</code></pre>

<p><a href=""https://i.stack.imgur.com/5Vzck.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/5Vzck.png"" alt=""enter image description here""></a></p>

<p>You can also turn off the safe area insets for any side:</p>

<pre><code>SafeArea(
  left: false,
  top: false,
  right: false,
  bottom: false,
  child: Text('My Widget: ...'),
)
</code></pre>

<p>Setting them all to false would be the same as not using SafeArea. The default for all sides is <code>true</code>. Most of the time you will not need to use these settings, but I can imagine a situation where you have a widget that fills the whole screen. You want the top to not be blocked by anything, but you don't care about the bottom. In that cause you would just set <code>bottom: false</code> but leave the other sides to their default <code>true</code> values.</p>

<pre><code>SafeArea(
  bottom: false,
  child: myWidgetThatFillsTheScreen,
)
</code></pre>

<h1>Supplemental code</h1>

<p>In case you want to play around more with this, here is <em>main.dart</em>:</p>

<pre><code>import 'package:flutter/material.dart';

void main() =&gt; runApp(MyApp());

class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      debugShowCheckedModeBanner: false,
      home: Scaffold(
        body: BodyWidget(),
      ),
    );
  }
}

class BodyWidget extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return Align(
      alignment: Alignment.topLeft,
      child: SafeArea(
        left: true,
        top: true,
        right: true,
        bottom: true,
        minimum: const EdgeInsets.all(16.0),
        child: Text(
            'My Widget: This is my widget. It has some content that I don\'t want '
            'blocked by certain manufacturers who add notches, holes, and round corners.'),
      ),
    );
  }
}
</code></pre>
","3681880","","3681880","","2019-03-27 20:00:06","2019-03-27 20:00:06","","","","2","","","","3681880","281555","2014-05-28 01:38:32","Suragch","2020-03-15 01:46:08","http://www.studymongolian.net","","<p>Why are you developing for a single platform when you could be creating apps for Android, iOS, the web (and soon Linux, Mac, and Windows) with a single code base? Check out <a href=""https://flutter.dev/"" rel=""nofollow noreferrer"">Flutter</a>.</p>

<p><a href=""https://medium.com/@studymongolian/flutter-and-dart-development-articles-981be9ef7b23"" rel=""nofollow noreferrer"">My Flutter and Dart articles</a></p>
","10525","12917","73","","","4531600"
"54908538","2","","54908480","2019-02-27 15:08:28","","92","","<p><code>i++</code> and <code>(i)++</code> behave identically.  C 2018 6.5.1 5 says:</p>

<blockquote>
  <p>A parenthesized expression is a primary expression. Its type and value are identical to those of the unparenthesized expression. It is an lvalue, a function designator, or a void expression if the unparenthesized expression is, respectively, an lvalue, a function designator, or a void expression.</p>
</blockquote>

<p>The wording is the same in C 1999.</p>
","298225","","298225","","2019-02-28 07:31:31","2019-02-28 07:31:31","","","","2","","","","298225","105617","2010-03-21 00:38:50","Eric Postpischil","2020-03-15 03:14:38","http://edp.org","","<p>Senior software engineer in Apple’s Vector and Numerics Group (retired).</p>
","9005","2153","3112","","","113187"
"58833831","2","","58832269","2019-11-13 09:21:57","","92","","<h1>Summary</h1>

<p>This is a <a href=""https://support.office.com/en-us/article/access-error-query-is-corrupt-fad205a5-9fd4-49f1-be83-f21636caedec"" rel=""nofollow noreferrer"">known bug</a> caused by the Office updates released on November 12, 2019. The bug affects all versions of Access currently supported by Microsoft (from Access 2010 to 365).</p>

<p><strong>This bug has been fixed.</strong></p>

<ul>
<li>If you use a C2R (Click-to-Run) version of Office, <a href=""https://support.office.com/en-us/article/install-office-updates-2ab296f3-7f03-43a2-8e50-46de917611c5"" rel=""nofollow noreferrer"">use ""Update now""</a>:

<ul>
<li>Access 2010 C2R: Fixed in Build 7243.5000</li>
<li>Access 2013 C2R: Fixed in Build 5197.1000</li>
<li>Access 2016 C2R: Fixed in Build 12130.20390</li>
<li>Access 2019 (v1910): Fixed in Build 12130.20390</li>
<li>Access 2019 (Volume License): Fixed in Build 10353.20037</li>
<li>Office 365 Monthly Channel: Fixed in Build 12130.20390</li>
<li>Office 365 Semi-Annual: Fixed in Build 11328.20480</li>
<li>Office 365 Semi-Annual Extended: Fixed in Build 10730.20422</li>
<li>Office 365 Semi-Annual Targeted: Fixed in Build 11929.20494</li>
</ul></li>
<li>If you use an MSI version of Office, install the update matching your Office version. All of these patches have been released on Microsoft Update, so <a href=""https://support.microsoft.com/en-us/help/12373/windows-update-faq"" rel=""nofollow noreferrer"">installing all pending Windows Updates</a> should suffice:

<ul>
<li>Access 2010 MSI: Fixed in <a href=""https://support.microsoft.com/en-us/help/4484193/security-update-for-office-2010-december-10-2019"" rel=""nofollow noreferrer"">KB4484193</a></li>
<li>Access 2013 MSI: Fixed in <a href=""https://support.microsoft.com/en-us/help/4484186/security-update-for-office-2013-december-10-2019"" rel=""nofollow noreferrer"">KB4484186</a></li>
<li>Access 2016 MSI: Fixed in <a href=""https://support.microsoft.com/en-us/help/4484180/security-update-for-office-2016-december-10-2019"" rel=""nofollow noreferrer"">KB4484180</a></li>
</ul></li>
</ul>

<hr>

<h1>Example</h1>

<p>Here is a minimal repro example:</p>

<ol>
<li>Create a new Access database.</li>
<li>Create a new, empty table ""Table1"" with the default ID field and a Long Integer field ""myint"".</li>
<li><p>Execute the following code in the VBA editor's Immediate Window:</p>

<p><code>CurrentDb.Execute ""UPDATE Table1 SET myint = 1 WHERE myint = 1""</code></p></li>
</ol>

<p><strong>Expected result</strong>: The statement successfully finishes.</p>

<p><strong>Actual result</strong> with one of the buggy updates installed: Run-time error 3340 occurs (""Query '' is corrupt"").</p>

<hr>

<p>Related links:</p>

<ul>
<li><a href=""https://social.msdn.microsoft.com/Forums/office/en-US/7e7f24cc-f1f3-43f8-a9a2-45b77812b211/the-cve20191402-updates-kb4484119-etc-break-access-201020132016365-query-is-corrupt?forum=accessdev"" rel=""nofollow noreferrer"">MSDN forum thread</a></li>
<li><a href=""https://support.office.com/en-us/article/access-error-query-is-corrupt-fad205a5-9fd4-49f1-be83-f21636caedec"" rel=""nofollow noreferrer"">Official Microsoft page for this bug</a></li>
</ul>
","87698","","87698","","2019-12-11 11:01:16","2019-12-11 11:01:16","","","","5","","","","87698","139908","2009-04-06 16:20:11","Heinzi","2020-03-14 12:44:07","http://www.heinzi.at","Vienna, Austria","","4807","6121","283","","","31816"
"57051404","2","","57051056","2019-07-16 06:41:08","","91","","<p>I upvoted two other answers, but I think the way to think of this is simple:  <strong>You can be on a branch that doesn't exist.</strong>  That's <em>normal</em> in a new empty repository, too, because for a branch name to exist, that branch name <em>must</em> identify the hash ID of an existing, valid commit.  A new empty repository has no commits, so no branch names are allowed to exist yet.</p>

<p>Nonetheless, you are, initially, on <em>some</em> branch.  The branch you are on is the one whose name is stored in the special name <code>HEAD</code>.  In a new, empty repository, Git stores the name <code>master</code> (more precisely, <code>refs/heads/master</code>—the full name of the branch) in <code>HEAD</code>, so you are on <code>master</code>, while <code>master</code> does not exist.</p>

<p>You can change which non-existent branch you are on using <code>git checkout -b</code>:</p>

<pre><code>$ git init
Initialized empty Git repository in [path]
$ git checkout -b asdf
Switched to a new branch 'asdf'
$ git checkout -b hello
Switched to a new branch 'hello'
</code></pre>

<p>Whenever you are on a branch that does not exist, the next commit you make <em>creates</em> the branch.  This is also how <code>git checkout --orphan</code> works.</p>
","1256452","","","","","2019-07-16 06:41:08","","","","6","","","","1256452","255423","2012-03-08 07:18:02","torek","2020-03-14 22:12:20","","Berkeley, CA","","9304","2669","3","","","1307867"
"56577324","2","","56577201","2019-06-13 09:23:03","","91","","<p>Typescript treats files without import/exports as legacy script files. As such files are not modules and any definitions they have get merged in the global namespace. <code>isolatedModules</code> forbids such files.</p>

<p>Adding any import or export to a file makes it a module and the error disappears.</p>

<p>Also <code>export {}</code> is a handy way to make a file a module without importing anything.</p>
","125734","","454137","","2019-08-28 23:23:39","2019-08-28 23:23:39","","","","0","","","","125734","112967","2009-06-19 13:08:28","Titian Cernicova-Dragomir","2020-03-15 00:01:56","https://titiandragomir.wordpress.com/","Timișoara, Timiș County, Romania","<p>Typescript fan. </p>

<p><a href=""https://www.youtube.com/watch?v=9Swrzqr4MSs"" rel=""nofollow noreferrer"">Fun with conditional types</a></p>

<p><a href=""https://www.youtube.com/watch?v=wNsKJMSqtAk&amp;list=PL701JjUqw62nHoRho4RJ3KJSLCRG08r1Z&amp;index=3"" rel=""nofollow noreferrer"">RevoJs talk about advanced TS types</a></p>

<p>Need help with a JS->TS conversion, I'm available for hire 😉 titian.dragomir@moredevs.ro</p>
","8993","3317","51","https://i.stack.imgur.com/Qy7qV.png?s=128&g=1","","43074"
"54432583","1","54432584","","2019-01-30 02:34:29","","91","11325","<p>I have seen many answers posted to questions on Stack Overflow involving the use of the Pandas method <code>apply</code>. I have also seen users commenting under them saying that ""<code>apply</code> is slow, and should be avoided"". </p>

<p>I have read many articles on the topic of performance that explain <code>apply</code> is slow. I have also seen a disclaimer in the docs about how <code>apply</code> is simply a convenience function for passing UDFs (can't seem to find that now). So, the general consensus is that <code>apply</code> should be avoided if possible. However, this raises the following questions: </p>

<ol>
<li>If <code>apply</code> is so bad, then why is it in the API?</li>
<li>How and when should I make my code <code>apply</code>-free?</li>
<li>Are there ever any situations where <code>apply</code> is <em>good</em> (better than other possible solutions)? </li>
</ol>
","4909087","","3924118","","2019-09-24 20:33:53","2020-02-20 18:23:46","When should I ever want to use pandas apply() in my code?","<python><pandas><performance><apply>","4","2","63","","","4909087","195757","2015-05-17 14:31:31","cs95","2020-03-15 02:58:01","","At an ipython shell near you","<h2><a href=""https://meta.stackoverflow.com/questions/386324/the-stack-overflow-i-wish-to-build-and-participate-in-is-no-longer-supported"">The Stack Overflow I wish to build and participate in no longer exists.</a></h2>

<h1><a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">My pandas canonicals</a> ⬅ please critique!</h1>

<p>When asking a question here, please describe the problem you are trying to solve, rather than asking about the method you <em>think</em> is the solution to that problem. This is known as the <a href=""https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem"">XY problem</a> and can easily be averted if you ask the right questions. This will make it easy for us to understand what you're trying to do, and you may even receive better suggestions that you may never have considered yourself. </p>

<h3><strong>Rep = participation</strong></h3>

<h3><strong>Badges = quality</strong></h3>

<h3><strong><s>1 like = 1 prayer </s> 1 upvote = 1 thanks</strong></h3>

<p><a href=""https://stackoverflow.com/users/4909087/coldspeed""><img src=""https://stackoverflow.com/users/flair/4909087.png"" width=""208"" height=""58"" alt=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers"" title=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers""></a></p>

<p><a href=""https://i.stack.imgur.com/YfCOa.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YfCOa.gif"" alt=""enter image description here""></a></p>

<p><a href=""https://stackoverflow.com/a/53915214/4909087"">Some people, when confronted with a problem, think ""I know, I'll use regular expressions."" Now they have two problems.</a></p>

<hr>

<h2>(Actively Maintained) Pandas Canonicals</h2>

<p>The full list is on <a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">GitHub</a>.</p>

<ul>
<li><a href=""https://stackoverflow.com/q/53645882/pandas-merging-101"">Pandas Merging 101</a>: Everything you ever wanted to know about merging and more</li>
<li><a href=""https://stackoverflow.com/a/55557758"">How to iterate over a DataFrame.</a> Spoler alert: don't!</li>
<li><a href=""https://stackoverflow.com/a/54508052"">How to convert a DataFrame to NumPy array</a>: from 0.24, use <code>df.to_numpy()</code></li>
<li><a href=""https://stackoverflow.com/a/56746204/4909087"">The Right Way to create an empty DataFrame and fill it</a>: Use a list to grow your data, not a DataFrame</li>
<li><a href=""https://stackoverflow.com/a/59242208/4909087"">Don't use <code>inplace=True</code>!</a></li>
</ul>

<h2>Other Posts I'm Proud Of</h2>

<ul>
<li>Pandas Merging 101 (see above)</li>
<li><a href=""https://stackoverflow.com/a/50312321/4909087"">Best way to interleave two lists</a></li>
<li><a href=""https://stackoverflow.com/questions/47007680/strange-use-of-pythons-and-operator/47007761#47007761"">How do &quot;and&quot; and &quot;or&quot; act with non-boolean values?</a></li>
<li><a href=""https://stackoverflow.com/a/46333422/4909087"">So you think you know recursion?</a></li>
</ul>

<p>In addition to this, some of my <a href=""https://stackoverflow.com/search?tab=votes&amp;q=user%3a4909087%20perfplot"">answers that use <code>perfplot</code></a> are worth a read.</p>

<hr>

<h3>236th awardee of the <a href=""https://stackoverflow.com/help/badges/146/legendary"">Legendary</a> badge.</h3>

<p>Thanks, Stack Overflow! I love the shirt :-)</p>

<p><a href=""https://i.stack.imgur.com/7YKND.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7YKND.jpg"" alt=""enter image description here""></a></p>
","57988","9183","7537","https://i.stack.imgur.com/LmD3e.png?s=128&g=1","","6321039"
"54031805","2","","54031804","2019-01-04 00:48:57","","90","","<p>The <code>??</code> double question mark operator means ""if null"". Take the following expression, for example.</p>

<pre><code>String a = b ?? 'hello';
</code></pre>

<p>This means <code>a</code> equals <code>b</code>, but if <code>b</code> is null then <code>a</code> equals <code>'hello'</code>.</p>

<p>Another related operator is <code>??=</code>. For example:</p>

<pre><code>b ??= 'hello';
</code></pre>

<p>This means if <code>b</code> is null then set it equal to <code>hello</code>. Otherwise, don't change it.</p>

<p><strong>Reference</strong></p>

<ul>
<li><a href=""https://www.dartlang.org/guides/language/language-tour#operators"" rel=""noreferrer"">A Tour of the Dart Language: Operators</a></li>
<li><a href=""http://blog.sethladd.com/2015/07/null-aware-operators-in-dart.html"" rel=""noreferrer"">Null-aware operators in Dart</a></li>
</ul>

<p><strong>Terms</strong></p>

<p>The <a href=""https://news.dartlang.org/2015/08/dart-112-released-with-null-aware.html"" rel=""noreferrer"">Dart 1.12 release news</a> collectively referred to the following as <em>null-aware operators</em>:</p>

<ul>
<li><code>??</code> -- if null operator</li>
<li><code>??=</code> -- null-aware assignment</li>
<li><code>x?.p</code> -- null-aware access</li>
<li><code>x?.m()</code> -- null-aware method invocation</li>
</ul>
","3681880","","3681880","","2019-04-25 18:00:29","2019-04-25 18:00:29","","","","3","","","","3681880","281555","2014-05-28 01:38:32","Suragch","2020-03-15 01:46:08","http://www.studymongolian.net","","<p>Why are you developing for a single platform when you could be creating apps for Android, iOS, the web (and soon Linux, Mac, and Windows) with a single code base? Check out <a href=""https://flutter.dev/"" rel=""nofollow noreferrer"">Flutter</a>.</p>

<p><a href=""https://medium.com/@studymongolian/flutter-and-dart-development-articles-981be9ef7b23"" rel=""nofollow noreferrer"">My Flutter and Dart articles</a></p>
","10525","12917","73","","","4531600"
"56676238","2","","56675698","2019-06-19 21:39:18","","90","","<blockquote>
  <p>In Xcode 10, the toolbar had an inter-locking ring icon which showed the assistant editor, it's missing in Xcode 11.</p>
</blockquote>

<p>The interface has changed a little, but the functionality is still there. The top right corner of the editor pane has two buttons:</p>

<p><a href=""https://i.stack.imgur.com/8DmGH.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/8DmGH.png"" alt=""top right corner of Xcode text editor pane""></a></p>

<p>Clicking the left button, which looks like lines of text, displays the popup menu, where you can choose various editor configuration options. Clicking the right button just narrows the existing editor and adds another one next to it.</p>

<p>Some of the same options are also available in the Editor menu in the main menu bar.</p>

<hr>

<p><strong>Update:</strong> This is from the <a href=""https://developer.apple.com/documentation/xcode_release_notes/xcode_11_beta_7_release_notes"" rel=""noreferrer"">Xcode 11 beta release notes</a>, and perhaps more fully explains why the UI was changed:</p>

<blockquote>
  <p>Editors can be added to any window without needing the Assistant Editor. Editors are added using the “Add Editor” button in the jump bar or the File > New > Editor command. Each editor can now be in one of three modes: “Editor Only”, “Editor and Assistant” or “Editor and Canvas”. The latter two modes automatically show relevant content when available. When using multiple editors, the View > Editor > Focus command can be used to temporarily expand the active editor to fill the entire window, hiding other editors. For source control support, the Code Review button in the Toolbar replaces the Comparison Editor. The “Show Authors” command is now available from the Source Editor’s Editor menu. The SCM Log is now in the Inspector Area. (43806898)</p>
</blockquote>

<p>With multiple editors possible in a window, you need editor-specific controls for showing the ancillary views like the assistant editor, author view, etc.</p>

<hr>

<p>From SMGreenfield's comment:</p>

<blockquote>
  <p>Sometimes I want to look at a different part of the same darn document. There has always been a way to do this, but it involved jumping through hoops.</p>
</blockquote>

<p>Just add another editor: click the Add Editor button in the upper right corner of the editor, or choose <strong>File > New > Editor</strong>. The new editor will default to showing the same file you were working on in the existing editor. </p>

<p>If new editors show up on the right of the existing editor and you'd prefer them to stack vertically, you can choose <strong>View > Change Editor Orientation</strong>. If you want them to stack horizontally most of the time (the default) but just want one to show up below, choose <strong>File > New > Editor Below</strong>.</p>
","643383","","643383","","2019-10-03 03:02:18","2019-10-03 03:02:18","","","","10","","","","643383","115752","2011-03-03 17:10:06","Caleb","2020-03-14 15:31:24","http://none","United States","<p><a href=""http://stackexchange.com/users/d0c456330b54457d8bd65294962afb12"">
<img src=""https://stackexchange.com/users/flair/323395.png"" width=""208"" height=""58"" alt=""profile for Caleb on Stack Exchange, a network of free, community-driven Q&amp;A sites"" title=""profile for Caleb on Stack Exchange, a network of free, community-driven Q&amp;A sites"" /></a>
<hr>
<b>You:</b> Do you know Jon Skeet?</p>

<p><b>Expert:</b> I once tried to convince the community, it worked remarkably well.</p>

<p><b>You:</b> Do you know Joel Spolsky?</p>

<p><b>Expert:</b> I know joel spolsky to a certain degree at least.</p>

<p><b>You:</b> Does he treat you well?</p>

<p><b>Expert:</b> :)</p>

<p><b>You:</b> What is it like to work at Stack Exchange?</p>

<p><b>Expert:</b> The answer is pretty complicated.</p>

<p><b>You:</b> I'm listening.</p>

<p><b>Expert:</b> I used to know someone who was listening.</p>
","6871","5691","2274","https://i.stack.imgur.com/uQ5JF.png?s=128&g=1","","323395"
"54432584","2","","54432583","2019-01-30 02:34:29","","89","","<h1><code>apply</code>, the Convenience Function you Never Needed</h1>

<p>We start by addressing the questions in the OP, one by one.</p>

<blockquote>
  <h2>""<em>If</em> apply <em>is so bad, then why is it in the API?</em>""</h2>
</blockquote>

<p><a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html#pandas.DataFrame.apply"" rel=""noreferrer""><code>DataFrame.apply</code></a> and <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.apply.html"" rel=""noreferrer""><code>Series.apply</code></a> are <em>convenience functions</em> defined on DataFrame and Series object respectively. <code>apply</code> accepts any user defined function that applies a transformation/aggregation on a DataFrame. <code>apply</code> is effectively a silver bullet that does whatever any existing pandas function cannot do. </p>

<p>Some of the things <code>apply</code> can do:</p>

<ul>
<li>Run any user-defined function on a DataFrame or Series</li>
<li>Apply a function either row-wise (<code>axis=1</code>) or column-wise (<code>axis=0</code>) on a DataFrame</li>
<li>Perform index alignment while applying the function</li>
<li>Perform aggregation with user-defined functions (however, we usually prefer <code>agg</code> or <code>transform</code> in these cases)</li>
<li>Perform element-wise transformations </li>
<li>Broadcast aggregated results to original rows (see the <code>result_type</code> argument).</li>
<li>Accept positional/keyword arguments to pass to the user-defined functions.</li>
</ul>

<p>...Among others. For more information, see <a href=""https://pandas.pydata.org/pandas-docs/stable/getting_started/basics.html#row-or-column-wise-function-application"" rel=""noreferrer"">Row or Column-wise Function Application</a> in the documentation.</p>

<p>So, with all these features, why is <code>apply</code> bad? It is <strong>because <code>apply</code> is</strong> <strong>slow</strong>. Pandas makes no assumptions about the nature of your function, and so <strong>iteratively applies your function</strong> to each row/column as necessary. Additionally, handling <em>all</em> of the situations above means <code>apply</code> incurs some major overhead at each iteration. Further, <code>apply</code> consumes a lot more memory, which is a challenge for memory bounded applications.</p>

<p>There are very few situations where <code>apply</code> is appropriate to use (more on that below). <strong>If you're not sure whether you should be using <code>apply</code>, you probably shouldn't.</strong></p>

<hr>

<p>Let's address the next question.</p>

<blockquote>
  <h2>""<em>How and when should I make my code</em> apply <em>-free?</em>""</h2>
</blockquote>

<p>To rephrase, here are some common situations where you will want to <em>get rid</em> of any calls to <code>apply</code>.</p>

<h3><strong>Numeric Data</strong></h3>

<p>If you're working with numeric data, there is likely already a vectorized cython function that does exactly what you're trying to do (if not, please either ask a question on Stack Overflow or open a feature request on GitHub).</p>

<p>Contrast the performance of <code>apply</code> for a simple addition operation.</p>

<pre><code>df = pd.DataFrame({""A"": [9, 4, 2, 1], ""B"": [12, 7, 5, 4]})
df

   A   B
0  9  12
1  4   7
2  2   5
3  1   4
</code></pre>

<p></p>

<pre><code>df.apply(np.sum)

A    16
B    28
dtype: int64

df.sum()

A    16
B    28
dtype: int64
</code></pre>

<p>Performance wise, there's no comparison, the cythonized equivalent is much faster. There's no need for a graph, because the difference is obvious even for toy data.</p>

<pre><code>%timeit df.apply(np.sum)
%timeit df.sum()
2.22 ms ± 41.2 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
471 µs ± 8.16 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</code></pre>

<p>Even if you enable passing raw arrays with the <code>raw</code> argument, it's still twice as slow.</p>

<pre><code>%timeit df.apply(np.sum, raw=True)
840 µs ± 691 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
</code></pre>

<p>Another example:</p>

<pre><code>df.apply(lambda x: x.max() - x.min())

A    8
B    8
dtype: int64

df.max() - df.min()

A    8
B    8
dtype: int64

%timeit df.apply(lambda x: x.max() - x.min())
%timeit df.max() - df.min()

2.43 ms ± 450 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
1.23 ms ± 14.7 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</code></pre>

<p>In general, <strong>seek out vectorized alternatives if possible.</strong></p>

<h3><strong>String/Regex</strong></h3>

<p>Pandas provides ""vectorized"" string functions in most situations, but there are rare cases where those functions do not... ""apply"", so to speak.</p>

<p>A common problem is to check whether a value in a column is present in another column of the same row. </p>

<pre><code>df = pd.DataFrame({
    'Name': ['mickey', 'donald', 'minnie'],
    'Title': ['wonderland', ""welcome to donald's castle"", 'Minnie mouse clubhouse'],
    'Value': [20, 10, 86]})
df

     Name  Value                       Title
0  mickey     20                  wonderland
1  donald     10  welcome to donald's castle
2  minnie     86      Minnie mouse clubhouse
</code></pre>

<p>This should return the row second and third row, since ""donald"" and ""minnie"" are present in their respective ""Title"" columns.</p>

<p>Using apply, this would be done using </p>

<pre><code>df.apply(lambda x: x['Name'].lower() in x['Title'].lower(), axis=1)

0    False
1     True
2     True
dtype: bool

df[df.apply(lambda x: x['Name'].lower() in x['Title'].lower(), axis=1)]

     Name                       Title  Value
1  donald  welcome to donald's castle     10
2  minnie      Minnie mouse clubhouse     86
</code></pre>

<p>However, a better solution exists using list comprehensions. </p>

<pre><code>df[[y.lower() in x.lower() for x, y in zip(df['Title'], df['Name'])]]

     Name                       Title  Value
1  donald  welcome to donald's castle     10
2  minnie      Minnie mouse clubhouse     86
</code></pre>

<p></p>

<pre><code>%timeit df[df.apply(lambda x: x['Name'].lower() in x['Title'].lower(), axis=1)]
%timeit df[[y.lower() in x.lower() for x, y in zip(df['Title'], df['Name'])]]

2.85 ms ± 38.4 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
788 µs ± 16.4 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</code></pre>

<p>The thing to note here is that iterative routines happen to be faster than <code>apply</code>, because of the lower overhead. If you need to handle NaNs and invalid dtypes, you can build on this using a custom function you can then call with arguments inside the list comprehension.</p>

<p>For more information on when list comprehensions should be considered a good option, see my writeup: <a href=""https://stackoverflow.com/questions/54028199/for-loops-with-pandas-when-should-i-care"">For loops with pandas - When should I care?</a>.</p>

<blockquote>
  <p><strong>Note</strong><br>
  Date and datetime operations also have vectorized versions. So, for example, you should prefer <code>pd.to_datetime(df['date'])</code>, over,
  say, <code>df['date'].apply(pd.to_datetime)</code>.</p>
  
  <p>Read more at the
  <a href=""https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html"" rel=""noreferrer"">docs</a>.</p>
</blockquote>

<h3><strong>A Common Pitfall: Exploding Columns of Lists</strong></h3>

<pre><code>s = pd.Series([[1, 2]] * 3)
s

0    [1, 2]
1    [1, 2]
2    [1, 2]
dtype: object
</code></pre>

<p>People are tempted to use <code>apply(pd.Series)</code>. This is <em>horrible</em> in terms of performance.</p>

<pre><code>s.apply(pd.Series)

   0  1
0  1  2
1  1  2
2  1  2
</code></pre>

<p>A better option is to listify the column and pass it to pd.DataFrame.</p>

<pre><code>pd.DataFrame(s.tolist())

   0  1
0  1  2
1  1  2
2  1  2
</code></pre>

<p></p>

<pre><code>%timeit s.apply(pd.Series)
%timeit pd.DataFrame(s.tolist())

2.65 ms ± 294 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
816 µs ± 40.5 µs per loop (mean ± std. dev. of 7 runs, 1000 loops each)
</code></pre>

<hr>

<p>Lastly,</p>

<blockquote>
  <h2>""<em>Are there any situations where</em> <code>apply</code> <em>is good?</em>""</h2>
</blockquote>

<p>Apply is a convenience function, so there <em>are</em> situations where the overhead is negligible enough to forgive. It really depends on how many times the function is called.</p>

<p><strong>Functions that are Vectorized for Series, but not DataFrames</strong><br>
What if you want to apply a string operation on multiple columns? What if you want to convert multiple columns to datetime? These functions are vectorized for Series only, so they must be <em>applied</em> over each column that you want to convert/operate on.</p>

<pre><code>df = pd.DataFrame(
         pd.date_range('2018-12-31','2019-01-31', freq='2D').date.astype(str).reshape(-1, 2), 
         columns=['date1', 'date2'])
df

       date1      date2
0 2018-12-31 2019-01-02
1 2019-01-04 2019-01-06
2 2019-01-08 2019-01-10
3 2019-01-12 2019-01-14
4 2019-01-16 2019-01-18
5 2019-01-20 2019-01-22
6 2019-01-24 2019-01-26
7 2019-01-28 2019-01-30

df.dtypes

date1    object
date2    object
dtype: object
</code></pre>

<p>This is an admissible case for <code>apply</code>:</p>

<pre><code>df.apply(pd.to_datetime, errors='coerce').dtypes

date1    datetime64[ns]
date2    datetime64[ns]
dtype: object
</code></pre>

<p>Note that it would also make sense to <code>stack</code>, or just use an explicit loop. All these options are slightly faster than using <code>apply</code>, but the difference is small enough to forgive.</p>

<pre><code>%timeit df.apply(pd.to_datetime, errors='coerce')
%timeit pd.to_datetime(df.stack(), errors='coerce').unstack()
%timeit pd.concat([pd.to_datetime(df[c], errors='coerce') for c in df], axis=1)
%timeit for c in df.columns: df[c] = pd.to_datetime(df[c], errors='coerce')

5.49 ms ± 247 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
3.94 ms ± 48.1 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
3.16 ms ± 216 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
2.41 ms ± 1.71 ms per loop (mean ± std. dev. of 7 runs, 1 loop each)
</code></pre>

<p>You can make a similar case for other operations such as string operations, or conversion to category. </p>

<pre><code>u = df.apply(lambda x: x.str.contains(...))
v = df.apply(lambda x: x.astype(category))
</code></pre>

<p>v/s</p>

<pre><code>u = pd.concat([df[c].str.contains(...) for c in df], axis=1)
v = df.copy()
for c in df:
    v[c] = df[c].astype(category)
</code></pre>

<p>And so on...</p>

<h3><strong>Converting Series to <code>str</code>: <code>astype</code> versus <code>apply</code></strong></h3>

<p>This seems like an idiosyncrasy of the API. Using <code>apply</code> to convert integers in a Series to string is comparable (and sometimes faster) than using <code>astype</code>.</p>

<p><a href=""https://i.stack.imgur.com/eSs2r.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/eSs2r.png"" alt=""enter image description here""></a>
The graph was plotted using the <a href=""https://github.com/nschloe/perfplot"" rel=""noreferrer""><code>perfplot</code></a> library.</p>

<pre><code>import perfplot

perfplot.show(
    setup=lambda n: pd.Series(np.random.randint(0, n, n)),
    kernels=[
        lambda s: s.astype(str),
        lambda s: s.apply(str)
    ],
    labels=['astype', 'apply'],
    n_range=[2**k for k in range(1, 20)],
    xlabel='N',
    logx=True,
    logy=True,
    equality_check=lambda x, y: (x == y).all())
</code></pre>

<p>With floats, I see the <code>astype</code> is consistently as fast as, or slightly faster than <code>apply</code>. So this has to do with the fact that the data in the test is integer type.</p>

<h3><strong><code>GroupBy</code> operations with chained transformations</strong></h3>

<p><code>GroupBy.apply</code> has not been discussed until now, but <code>GroupBy.apply</code> is also an iterative convenience function to handle anything that the existing <code>GroupBy</code> functions do not. </p>

<p>One common requirement is to perform a GroupBy and then two prime operations such as a ""lagged cumsum"":</p>

<pre><code>df = pd.DataFrame({""A"": list('aabcccddee'), ""B"": [12, 7, 5, 4, 5, 4, 3, 2, 1, 10]})
df

   A   B
0  a  12
1  a   7
2  b   5
3  c   4
4  c   5
5  c   4
6  d   3
7  d   2
8  e   1
9  e  10
</code></pre>

<p></p>

<p>You'd need two successive groupby calls here:</p>

<pre><code>df.groupby('A').B.cumsum().groupby(df.A).shift()

0     NaN
1    12.0
2     NaN
3     NaN
4     4.0
5     9.0
6     NaN
7     3.0
8     NaN
9     1.0
Name: B, dtype: float64
</code></pre>

<p>Using <code>apply</code>, you can shorten this to a a single call.</p>

<pre><code>df.groupby('A').B.apply(lambda x: x.cumsum().shift())

0     NaN
1    12.0
2     NaN
3     NaN
4     4.0
5     9.0
6     NaN
7     3.0
8     NaN
9     1.0
Name: B, dtype: float64
</code></pre>

<p>It is very hard to quantify the performance because it depends on the data. But in general, <code>apply</code> is an acceptable solution if the goal is to reduce a <code>groupby</code> call (because <code>groupby</code> is also quite expensive).</p>

<hr>

<h2>Other Caveats</h2>

<p>Aside from the caveats mentioned above, it is also worth mentioning that <code>apply</code> operates on the first row (or column) twice. This is done to determine whether the function has any side effects. If not, <code>apply</code> may be able to use a fast-path for evaluating the result, else it falls back to a slow implementation.</p>

<pre><code>df = pd.DataFrame({
    'A': [1, 2],
    'B': ['x', 'y']
})

def func(x):
    print(x['A'])
    return x

df.apply(func, axis=1)

# 1
# 1
# 2
   A  B
0  1  x
1  2  y
</code></pre>

<p>This behaviour is also seen in <code>GroupBy.apply</code> on pandas versions &lt;0.25 (it was fixed for 0.25, <a href=""https://stackoverflow.com/a/56215416/4909087"">see here for more information</a>.)</p>
","4909087","","4909087","","2019-06-23 03:23:56","2019-06-23 03:23:56","","","","6","","","","4909087","195757","2015-05-17 14:31:31","cs95","2020-03-15 02:58:01","","At an ipython shell near you","<h2><a href=""https://meta.stackoverflow.com/questions/386324/the-stack-overflow-i-wish-to-build-and-participate-in-is-no-longer-supported"">The Stack Overflow I wish to build and participate in no longer exists.</a></h2>

<h1><a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">My pandas canonicals</a> ⬅ please critique!</h1>

<p>When asking a question here, please describe the problem you are trying to solve, rather than asking about the method you <em>think</em> is the solution to that problem. This is known as the <a href=""https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem"">XY problem</a> and can easily be averted if you ask the right questions. This will make it easy for us to understand what you're trying to do, and you may even receive better suggestions that you may never have considered yourself. </p>

<h3><strong>Rep = participation</strong></h3>

<h3><strong>Badges = quality</strong></h3>

<h3><strong><s>1 like = 1 prayer </s> 1 upvote = 1 thanks</strong></h3>

<p><a href=""https://stackoverflow.com/users/4909087/coldspeed""><img src=""https://stackoverflow.com/users/flair/4909087.png"" width=""208"" height=""58"" alt=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers"" title=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers""></a></p>

<p><a href=""https://i.stack.imgur.com/YfCOa.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YfCOa.gif"" alt=""enter image description here""></a></p>

<p><a href=""https://stackoverflow.com/a/53915214/4909087"">Some people, when confronted with a problem, think ""I know, I'll use regular expressions."" Now they have two problems.</a></p>

<hr>

<h2>(Actively Maintained) Pandas Canonicals</h2>

<p>The full list is on <a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">GitHub</a>.</p>

<ul>
<li><a href=""https://stackoverflow.com/q/53645882/pandas-merging-101"">Pandas Merging 101</a>: Everything you ever wanted to know about merging and more</li>
<li><a href=""https://stackoverflow.com/a/55557758"">How to iterate over a DataFrame.</a> Spoler alert: don't!</li>
<li><a href=""https://stackoverflow.com/a/54508052"">How to convert a DataFrame to NumPy array</a>: from 0.24, use <code>df.to_numpy()</code></li>
<li><a href=""https://stackoverflow.com/a/56746204/4909087"">The Right Way to create an empty DataFrame and fill it</a>: Use a list to grow your data, not a DataFrame</li>
<li><a href=""https://stackoverflow.com/a/59242208/4909087"">Don't use <code>inplace=True</code>!</a></li>
</ul>

<h2>Other Posts I'm Proud Of</h2>

<ul>
<li>Pandas Merging 101 (see above)</li>
<li><a href=""https://stackoverflow.com/a/50312321/4909087"">Best way to interleave two lists</a></li>
<li><a href=""https://stackoverflow.com/questions/47007680/strange-use-of-pythons-and-operator/47007761#47007761"">How do &quot;and&quot; and &quot;or&quot; act with non-boolean values?</a></li>
<li><a href=""https://stackoverflow.com/a/46333422/4909087"">So you think you know recursion?</a></li>
</ul>

<p>In addition to this, some of my <a href=""https://stackoverflow.com/search?tab=votes&amp;q=user%3a4909087%20perfplot"">answers that use <code>perfplot</code></a> are worth a read.</p>

<hr>

<h3>236th awardee of the <a href=""https://stackoverflow.com/help/badges/146/legendary"">Legendary</a> badge.</h3>

<p>Thanks, Stack Overflow! I love the shirt :-)</p>

<p><a href=""https://i.stack.imgur.com/7YKND.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7YKND.jpg"" alt=""enter image description here""></a></p>
","57988","9183","7537","https://i.stack.imgur.com/LmD3e.png?s=128&g=1","","6321039"
"55916585","2","","55916514","2019-04-30 08:14:46","","89","","<p>You <em>must</em> use <code>std::abs</code>, which has overloads for the primitive types.</p>

<p>You are falling through to the C++ version in one case, and the old C version (which converts its parameters to integral types) in the other.</p>

<p>Things to avoid: (1) <code>using namespace std;</code> (<a href=""https://stackoverflow.com/q/1452721/7478597"">here is why</a>) and (2) not having the appropriate <code>#include</code>s to bring in the functionality you need. <em>Don't</em> rely on C++ standard library implementations to include files for you implicitly.</p>

<p>Some compilers will warn you of a ""lossy"" conversion if you set the warning level appropriately.</p>
","2380830","","2380830","","2019-04-30 09:07:57","2019-04-30 09:07:57","","","","8","","","","2380830","203210","2013-05-14 08:33:02","Bathsheba","2020-03-14 19:38:32","","Mayfair, London","<p>I'm an equity partner at an asset management firm in London.</p>

<p>I read mathematics at Cambridge and have been using C and C++ for many years. I have an affection for Java. In my opinion, Microsoft Excel is the best application ever written.</p>
","16392","8120","7428","https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1","","2764833"
"55054303","2","","43928702","2019-03-07 23:12:14","","88","","<h1>Setting the launcher icons like a native developer</h1>

<p>I was having some trouble using and understanding the <a href=""https://pub.dartlang.org/packages/flutter_launcher_icons"" rel=""noreferrer"">flutter_launcher_icons</a> package. This answer is how you would do it if you were creating an app for Android or iOS natively. It is pretty fast and easy once you have done it a few times.</p>

<h1>Android</h1>

<p>Android launcher icons have both a foreground and a background layer.</p>

<p><a href=""https://i.stack.imgur.com/CJ3aB.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/CJ3aB.png"" alt=""enter image description here""></a></p>

<p><em>(image adapted from <a href=""https://developer.android.com/guide/practices/ui_guidelines/icon_design_adaptive.html"" rel=""noreferrer"">Android documentation</a>)</em></p>

<p>The easiest way to create launcher icons for Android is to use the Asset Studio that is available right in Android Studio. You don't even have to leave your Flutter project. (VS Code users, you might consider using Android Studio just for this step. It's really very convenient and it doesn't hurt to be familiar with another IDE.)</p>

<p>Right click on the <code>android</code> folder in the project outline. Go to <strong>New > Image Asset</strong>. (Try right clicking the <code>android/app</code> folder if you don't see <strong>Image Asset</strong> as an option.) Now you can select an image to create your launcher icon from.</p>

<blockquote>
  <p><strong>Note:</strong> I usually use a <code>1024x1024</code> pixel image but you should certainly
  use nothing smaller that <code>512x512</code>. If you are using Gimp or Inkscape, you
  should have two layers, one for the foreground and one for the
  background. The foreground image should have transparent areas for the
  background layer to show through.</p>
</blockquote>

<p><a href=""https://i.stack.imgur.com/DL2VV.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/DL2VV.png"" alt=""enter image description here""></a></p>

<p><em>(lion clipart from <a href=""https://openclipart.org/detail/215188/lion-coloured"" rel=""noreferrer"">here</a>)</em></p>

<p>This will replace the current launcher icons. You can find the generated icons in the <code>mipmap</code> folders:</p>

<p><img src=""https://i.stack.imgur.com/n7ax9.png"" width=""300"" ></p>

<p>If you would prefer to create the launcher icons manually, see <a href=""https://stackoverflow.com/a/46196511/3681880"">this answer</a> for help.</p>

<p>Finally, make sure that the launcher icon name in the AndroidManifest is the same as what you called it above (<code>ic_launcher</code> by default):</p>

<pre><code>application android:icon=""@mipmap/ic_launcher""
</code></pre>

<p>Run the app in the emulator to confirm that the launcher icon was created successfully.</p>

<h1>iOS</h1>

<p>I always used to individually resize my iOS icons by hand, but if you have a Mac, there is a free app in the Mac App Store called <a href=""https://itunes.apple.com/de/app/icon-set-creator/id939343785?l=en&amp;mt=12"" rel=""noreferrer"">Icon Set Creator</a>. You give it an image (of at least <code>1024x1024</code> pixels) and it will spit out all the sizes that you need (plus the <code>Contents.json</code> file). Thanks to <a href=""https://stackoverflow.com/a/45122603/3681880"">this answer</a> for the suggestion.</p>

<p>iOS icons should not have any transparency. See more guidelines <a href=""https://developer.apple.com/design/human-interface-guidelines/ios/icons-and-images/app-icon/"" rel=""noreferrer"">here</a>.</p>

<p>After you have created the icon set, start Xcode (assuming you have a Mac) and use it to open the <code>ios</code> folder in your Flutter project. Then go to <strong>Runner > Assets.xcassets</strong> and delete the AppIcon item.</p>

<p><a href=""https://i.stack.imgur.com/lb9io.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/lb9io.png"" alt=""enter image description here""></a></p>

<p>After that right-click and choose <strong>Import...</strong>. Choose the icon set that you just created.</p>

<p>That's it. Confirm that the icon was created by running the app in the simulator.</p>

<h3>If you don't have a Mac...</h3>

<p>You can still create all of the images by hand. In your Flutter project go to <code>ios/Runner/Assets.xcassets/AppIcon.appiconset</code>.</p>

<p><img src=""https://i.stack.imgur.com/B9CKd.png"" width=""350"" ></p>

<p>The image sizes that you need are the multiplied sizes in the filename. For example, <code>Icon-App-29x29@3x.png</code> would be <code>29</code> times <code>3</code>, that is, <code>87</code> pixels square. You either need to keep the same icon names or edit the JSON file.</p>
","3681880","","3681880","","2019-12-06 14:23:28","2019-12-06 14:23:28","","","","7","","","","3681880","281555","2014-05-28 01:38:32","Suragch","2020-03-15 01:46:08","http://www.studymongolian.net","","<p>Why are you developing for a single platform when you could be creating apps for Android, iOS, the web (and soon Linux, Mac, and Windows) with a single code base? Check out <a href=""https://flutter.dev/"" rel=""nofollow noreferrer"">Flutter</a>.</p>

<p><a href=""https://medium.com/@studymongolian/flutter-and-dart-development-articles-981be9ef7b23"" rel=""nofollow noreferrer"">My Flutter and Dart articles</a></p>
","10525","12917","73","","","4531600"
"58656323","2","","58654714","2019-11-01 08:44:13","","87","","<p>OK, Turns out if you watch the WWDC video, they explain it:
<a href=""https://developer.apple.com/videos/play/wwdc2019/416/"" rel=""noreferrer"">https://developer.apple.com/videos/play/wwdc2019/416/</a></p>

<p>You need to set the <strong>Build Libraries for Distribution</strong> option to <strong>Yes</strong> in your framework's build settings, otherwise the swift compiler doesn't generate the neccessary <code>.swiftinterface</code> files which are the key to future compilers being able to load your old library.</p>

<p>This ends up in your project.pbxproj file as:</p>

<pre><code>BUILD_LIBRARY_FOR_DISTRIBUTION = YES;
</code></pre>

<p>After setting this flag, a framework I compiled using Xcode 11.0 (swift 5.1) was able to be used by Xcode 11.2 (swift 5.1.2) and everything appears to be working correctly.</p>

<p>Hopefully this question/answer will serve as a useful reference for everyone who hasn't watched all the WWDC videos</p>

<p>If the error still persists go to <strong>Product</strong> > <strong>Clean Build Folder</strong> and <strong>Build</strong> again. </p>
","234","","2854494","","2020-02-05 16:29:02","2020-02-05 16:29:02","","","","13","","","","234","106176","2008-08-03 20:25:38","Orion Edwards","2020-03-15 01:27:04","http://orionedwards.blogspot.com","New Zealand","<p>I do .NET, C++, Ruby, Automated Testing, Running and Snowboarding<p><a href=""http://twitter.com/borland"" rel=""nofollow"">@borland</a></p></p>
","5148","3918","331","","","190"
"55116884","2","","55116849","2019-03-12 08:19:51","","86","","<blockquote>
  <p>the finally block would be executed, then would execute the return false; at the bottom.</p>
</blockquote>

<p>Wrong. <code>finally</code> doesn't swallow the exception. It honors it and the exception will be thrown as normal. It will only execute the code in the finally before the block ends (with or without an exception).</p>

<p>If you want the exception to be swallowed, you should use a <code>catch</code> block with no <code>throw</code> in it.</p>
","993547","","","","","2019-03-12 08:19:51","","","","8","","","","993547","137180","2011-10-13 13:26:38","Patrick Hofman","2020-03-04 09:01:55","http://www.invantive.com/","Netherlands","<p><strong>Now in beta: query the Stack Exchange API real-time using SQL.</strong> See <a href=""https://online-sql-editor.com/"" rel=""nofollow"">online-sql-editor.com</a> and select Stack Exchange.</p>

<hr>

<p>Working on one of our newest products for accessing Exact Online, SQL Server, MySQL, Oracle, and others through Excel and Word.</p>

<p>Also working on our free multi-database Query Tool (also supports real-time querying of <a href=""/questions/tagged/exact-online"" class=""post-tag"" title=""show questions tagged &#39;exact-online&#39;"" rel=""tag"">exact-online</a>):</p>

<p><a href=""http://www.invantive.com/products/invantives-free-query-tool"" rel=""nofollow""><img src=""http://www.invantive.com/Portals/_default/Skins/invantive-2012/images/querytool_rechts_logo.png"" /></a></p>

<p>Feel free to contact me at <code>patrick.hofman</code> at <code>[invantive]</code> dot <code>com</code></p>
","14814","2833","9822","https://i.stack.imgur.com/aOivq.jpg?s=128&g=1","","970966"
"54626122","2","","54626074","2019-02-11 07:57:03","","85","","<p><code>throw</code> is a <em>statement</em> only; it may not exist in a position where an <em>expression</em> is required. For similar reasons, you can't put an <code>if</code> statement there, for example</p>

<pre><code>var something = false || if (cond) { /* something */ }
</code></pre>

<p>is invalid syntax as well.</p>

<p>Only <em>expressions</em> (things that evaluate to a value) are permitted to be assigned to variables. If you want to <code>throw</code>, you <em>have</em> to <code>throw</code> as a statement, which means you can't put it on the right-hand side of an assignment.</p>

<p>I suppose one way would be to use an IIFE on the right-hand side of the <code>||</code>, allowing you to use a statement on the first line of that function:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>var un = undefined
var v2 = un || (() =&gt; { throw new Error('nope') })();</code></pre>
</div>
</div>
</p>

<p>But that's pretty weird. I'd prefer the explicit <code>if</code> - <code>throw</code>.</p>
","9515207","","","","","2019-02-11 07:57:03","","","","5","","","","9515207","170251","2018-03-19 07:56:42","CertainPerformance","2020-03-15 05:06:04","","Austin, TX, USA","<p>Check out my <a href=""https://github.com/CertainPerformance/Stack-Exchange-Userscripts"" rel=""nofollow noreferrer"">userscripts</a> for useful tools and UI improvements for Stack Exchange sites.</p>
","28723","3188","24875","https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1","","13173718"
"59162617","2","","59162596","2019-12-03 17:41:40","","84","","<p>It's interpreted as the declaration of a function named <code>a</code>, which takes one argument of type <code>B</code> and returns <code>A</code>.</p>
","481267","","","","","2019-12-03 17:41:40","","","","11","","","","481267","82364","2010-10-20 04:59:07","Brian","2020-03-14 23:55:30","http://brianbi.ca","New York, NY, USA","<p>C++ programmer on the Low Latency team at Citadel Securities. Opinions are mine and not those of my employer. I can be reached by email at bbi5291@gmail.com, but I can't promise that I'll reply.</p>
","16280","1795","923","https://i.stack.imgur.com/DMvoo.png?s=128&g=1","","222578"
"54795959","2","","54790795","2019-02-20 22:05:22","","83","","<p>The other answers and comments call out several of the many ways that this is a horrid, misleading and badly-written question. But there is another problem that no one else has identified yet. The question is:</p>

<blockquote>
  <p>A semicolon (';') is not needed after a function declaration. True or False.</p>
</blockquote>

<p>OK, let's look at a function declaration:</p>

<pre><code>int func();       /* */
/*           ^       */
/*           |       */
/* That whitespace is ""after the function declaration"". */
</code></pre>

<p><strong>That whole thing is the declaration</strong>.  The declaration is not <code>int func()</code> and then <strong>followed by</strong> a <code>;</code>.  The declaration is <code>int func();</code> and then is followed by whitespace. </p>

<p>So, the question is: is a semicolon needed <strong>after the declaration</strong>?  Of course not. <strong>The declaration already has a semicolon in it which terminated it.</strong>  A semicolon after the declaration would be pointless.  By contrast, <code>int func(); ;</code> would be a semicolon <em>after a function declaration</em>.</p>

<p>The question was almost certainly <em>intended</em> to ask the question ""true or false: the last token in a function declaration is always a semicolon""   But that's not the question that they wrote, because the author of the quiz was not thinking clearly about the problem.</p>

<p>My advice is to avoid programming language quizzes altogether. They're pretty awful.</p>

<hr>

<p>Fun fact, while we are on the subject.  In C#, these are all legal:</p>

<pre><code>class C {}
class D {};
struct E {}
struct F {};
</code></pre>

<p>In C#, a class or struct declaration may end in a semicolon, or not, at your discretion. This odd little feature was added for the benefit of C/C++ programmers coming to C# who have it in their fingertips that type declarations end in a pointless semicolon; the design team didn't want to punish them for having this habit. :-)</p>
","88656","","63550","","2019-02-21 02:10:55","2019-02-21 02:10:55","","","","1","","","","88656","583574","2009-04-08 15:28:46","Eric Lippert","2020-03-15 02:18:22","http://ericlippert.com","Seattle, WA","<p>Eric Lippert designs programming languages at Facebook. Other notable work includes designing C# analyzers at Coverity, and developing the Visual Basic, VBScript, JScript and C# compilers at Microsoft. He is on Twitter at <a href=""https://twitter.com/ericlippert"" rel=""nofollow noreferrer"">@ericlippert</a> and writes a blog about programming language design and other fabulous adventures in coding at <a href=""http://ericlippert.com"" rel=""nofollow noreferrer"">http://ericlippert.com</a>.</p>
","437688","2","4527","","","32093"
"54807267","2","","54807208","2019-02-21 12:37:22","","83","","<p>Plain <code>array</code> decays to a pointer to its first element, it's equal to <code>&amp;array[0]</code>. The first element also happens to start at the same address as the array itself. Hence <code>&amp;array == &amp;array[0]</code>.</p>

<p>But it's important to note that the <em>types</em> are different:</p>

<ul>
<li>The type of <code>&amp;array[0]</code> is (in your example) <code>int*</code>.</li>
<li>The type of <code>&amp;array</code> is <code>int(*)[5]</code>.</li>
</ul>

<p>The relationship between <code>&amp;array[0]</code> and <code>&amp;array</code> might be easier if I show it a little more ""graphically"" (with pointers added):</p>

<pre>
+----------+----------+----------+----------+----------+
| array[0] | array[1] | array[2] | array[3] | array[4] |
+----------+----------+----------+----------+----------+
^
|
&array[0]
|
&array
</pre>

<p>As an extra addendum, <code>array</code> decays to a pointer to its first element, that is <code>array</code> decays to <code>&amp;array[0]</code> and will thus have the same type.</p>

<hr>

<p>Things are different with pointers though. The pointer <code>pArray</code> is pointing to some memory, the value of <code>pArray</code> is the location of that memory. This is what you get when you use <code>pArray</code>. It is also the same as <code>&amp;pArray[0]</code>.</p>

<p>When you use <code>&amp;pArray</code> you get a pointer <em>to the pointer</em>. That is, you get the location (address) of the variable <code>pArray</code> itself. Its type is <code>int**</code>.</p>

<p>Somewhat graphical with the pointer <code>pArray</code> it would be something like this</p>

<pre>
+--------+       +-----------+-----------+-----------+-----------+-----------+-----+
| pArray | ----> | pArray[0] | pArray[1] | pArray[2] | pArray[3] | pArray[4] | ... |
+--------+       +-----------+-----------+-----------+-----------+-----------+-----+
^                ^
|                |
&pArray          &pArray[0]
</pre>

<p><sub>[Note the <code>...</code> at the end of the ""array"", that's because pointers retains no information about the memory it points to. A pointer is only pointing to a specific location, the ""first"" element of the ""array"". Treating the memory as an ""array"" is up to the programmer.]</sub></p>
","440558","","440558","","2019-08-22 07:13:51","2019-08-22 07:13:51","","","","9","","","","440558","334399","2010-09-06 10:41:22","Some programmer dude","2020-03-14 20:43:28","https://pileborg.se/","Malmö, Sweden","<p>Abusing programming instead of drugs.</p>

<p>Worked with most of everything from airport systems to temperature sensors.</p>

<p>Recently slipped on a banana-peel and ended up working with a legacy laundromat system.</p>

<p>And I don't do chat.</p>
","63881","7239","3515","https://i.stack.imgur.com/9ZYta.jpg?s=128&g=1","","196869"
"55426615","2","","54954187","2019-03-29 23:20:54","","82","","<p>Per docker library docs (quote and links below), here's a summary:</p>

<ul>
<li><h2><code>openjdk:&lt;version&gt;</code></h2></li>
</ul>

<p>The defacto image. Use it if unsure.</p>

<ul>
<li><h2><code>openjdk:&lt;version&gt;-buster</code>, <code>openjdk:&lt;version&gt;-stretch</code> and <code>openjdk:&lt;version&gt;-jessie</code></h2></li>
</ul>

<p><code>buster</code>, <code>jessie</code> or <code>stretch</code> are the suite code names for releases of <a href=""https://wiki.debian.org/DebianReleases"" rel=""noreferrer"">Debian</a> and indicate which <strong>release</strong> the image is based on.</p>

<ul>
<li><h2><code>openjdk:&lt;version&gt;-alpine</code></h2></li>
</ul>

<p>Similarly, this image is based on the <a href=""http://alpinelinux.org"" rel=""noreferrer"">Alpine Linux</a>, thus being a very small base image. It is recommended if you need an image size is as small as possible. The caveat is that it uses some unusual libs, but shouldn't be a problem for most software. In doubt, check the official docs below.</p>

<ul>
<li><h2><code>openjdk:&lt;version&gt;</code> (from 12 onwards), <code>openjdk:&lt;version&gt;-oracle</code> and <code>openjdk:&lt;version&gt;-oraclelinux7</code></h2></li>
</ul>

<p>Starting with <code>openjdk:12</code> the default image as well as the <code>-oracle</code> and <code>-oraclelinux7</code> variants are based on the official <a href=""https://hub.docker.com/_/oraclelinux"" rel=""noreferrer"">Oracle Linux 7 image</a>. 
The OpenJDK binaries in the default image as well as the <code>-oracle</code> and <code>-oraclelinux7</code> variants are built by Oracle and are sourced from the <a href=""https://openjdk.java.net/"" rel=""noreferrer"">OpenJDK community</a>.</p>

<ul>
<li><h2><code>openjdk:&lt;version&gt;-slim</code></h2></li>
</ul>

<p>This image only contains the minimal packages needed to run Java (and is missing many of the UI-related Java libraries, for instance). Unless you are working in an environment where <em>only</em> the <code>openjdk</code> image will be deployed and you have space constraints, the default image is recommended over this one.</p>

<ul>
<li><h2><code>openjdk:&lt;version&gt;-windowsservercore</code></h2></li>
</ul>

<p>This image is based on <a href=""https://hub.docker.com/r/microsoft/windowsservercore/"" rel=""noreferrer"">Windows Server Core (<code>microsoft/windowsservercore</code>)</a>.</p>

<p><br></p>

<hr>

<p>Full docs (<a href=""https://github.com/docker-library/docs/blob/d4f015a4a99883c6b8691ec6aaf24a74cd02916a/openjdk/README.md"" rel=""noreferrer"">version shown below here</a>, <a href=""https://github.com/docker-library/docs/blob/master/openjdk/README.md#image-variants"" rel=""noreferrer"">latest version here</a>):</p>

<blockquote>
  <h1>Image Variants</h1>
  
  <p>The <code>openjdk</code> images come in many flavors, each designed for a
  specific use case.</p>
  
  <h2><code>openjdk:&lt;version&gt;</code></h2>
  
  <p>This is the defacto image. If you are unsure about what your needs
  are, you probably want to use this one. It is designed to be used both
  as a throw away container (mount your source code and start the
  container to start your app), as well as the base to build other
  images off of.</p>
  
  <p>Some of these tags may have names like jessie or stretch in them.
  These are the suite code names for releases of
  <a href=""https://wiki.debian.org/DebianReleases"" rel=""noreferrer"">Debian</a> and indicate which
  release the image is based on.</p>
  
  <h2><code>openjdk:&lt;version&gt;-alpine</code></h2>
  
  <p>This image is based on the popular <a href=""http://alpinelinux.org"" rel=""noreferrer"">Alpine Linux
  project</a>, available in <a href=""https://hub.docker.com/_/alpine"" rel=""noreferrer"">the <code>alpine</code> official
  image</a>. Alpine Linux is much smaller
  than most distribution base images (~5MB), and thus leads to much
  slimmer images in general.</p>
  
  <p>This variant is highly recommended when final image size being as
  small as possible is desired. The main caveat to note is that it does
  use <a href=""http://www.musl-libc.org"" rel=""noreferrer"">musl libc</a> instead of <a href=""http://www.etalabs.net/compare_libcs.html"" rel=""noreferrer"">glibc and
  friends</a>, so certain
  software might run into issues depending on the depth of their libc
  requirements. However, most software doesn't have an issue with this,
  so this variant is usually a very safe choice. See <a href=""https://news.ycombinator.com/item?id=10782897"" rel=""noreferrer"">this Hacker News
  comment thread</a> for
  more discussion of the issues that might arise and some pro/con
  comparisons of using Alpine-based images.</p>
  
  <p>To minimize image size, it's uncommon for additional related tools
  (such as <code>git</code> or <code>bash</code>) to be included in Alpine-based images. Using
  this image as a base, add the things you need in your own Dockerfile
  (see the <a href=""https://hub.docker.com/_/alpine/"" rel=""noreferrer""><code>alpine</code> image
  description</a> for examples of how to
  install packages if you are unfamiliar).</p>
  
  <h2><code>openjdk:&lt;version&gt;-windowsservercore</code></h2>
  
  <p>This image is based on <a href=""https://hub.docker.com/r/microsoft/windowsservercore/"" rel=""noreferrer"">Windows Server Core
  (<code>microsoft/windowsservercore</code>)</a>.
  As such, it only works in places which that image does, such as
  Windows 10 Professional/Enterprise (Anniversary Edition) or Windows
  Server 2016.</p>
  
  <p>For information about how to get Docker running on Windows, please see
  the relevant ""Quick Start"" guide provided by Microsoft:</p>
  
  <ul>
  <li><a href=""https://msdn.microsoft.com/en-us/virtualization/windowscontainers/quick_start/quick_start_windows_server"" rel=""noreferrer"">Windows Server Quick Start</a></li>
  <li><a href=""https://msdn.microsoft.com/en-us/virtualization/windowscontainers/quick_start/quick_start_windows_10"" rel=""noreferrer"">Windows 10 Quick Start</a></li>
  </ul>
  
  <h2><code>openjdk:&lt;version&gt;-slim</code></h2>
  
  <p>This image installs the <code>-headless</code> package of OpenJDK and so is
  missing many of the UI-related Java libraries and some common packages
  contained in the default tag. It only contains the minimal packages
  needed to run Java. Unless you are working in an environment where
  <em>only</em> the <code>openjdk</code> image will be deployed and you have space constraints, we highly recommend using the default image of this
  repository.</p>
</blockquote>
","1850609","","1850609","","2019-09-17 06:48:21","2019-09-17 06:48:21","","","","0","","","","1850609","98018","2012-11-25 04:53:14","acdcjunior","2020-03-13 19:21:25","http://acdcjunior.github.io","Brasília, Brazil","<p><strong>XP</strong>er. Always on the lookout for the awesome in (eXtreme) programming.</p>

<p>Main interests include software patterns in general: DDD, TDD (xUnit patterns 🤘), FP, software craftsmanship (clean code - in a, hopefully, healthy way). Microservices, event-based communication and modeling is a go!</p>

<p>Although what I do is mostly language-agnostic, I now work specially in the JavaScript environment (Node, Vue, Web Components, React, Angular) and in the JVM enterprise with Spring Boot maven/gradle groovy/kotlin/java-based projects, mostly integrated via REST and messaging.</p>

<p>Also am a NoSQL enthusiast and enjoy the occasional <a href=""https://xkcd.com/208/"" rel=""nofollow noreferrer"">regex</a> and XPath golfing.</p>
","8618","7076","308","https://i.stack.imgur.com/X0C56.jpg?s=128&g=1","","2077773"
"58654714","1","58656323","","2019-11-01 05:57:20","","81","18788","<p>I have a framework (in this instance it's RxSwift) which I've compiled using Xcode 11.0 into the traditional <code>RxSwift.framework</code> style package</p>

<p>This imported fine into Xcode 11.0 and also 11.1 never had any problems with it</p>

<p>Today, upon Apple's release of Xcode 11.2, I upgraded, and I am presented with the error:</p>

<p><strong>Module compiled with Swift 5.1 cannot be imported by the Swift 5.1.2 compiler</strong></p>

<p>I'm used to swift compiler mismatches, and I'm aware I can just recompile RxSwift using Xcode 11.2 and carry on, but the headline feature of Swift 5.1 was <strong>module stability</strong>.</p>

<p>I was under the impression that now that we have module stability, frameworks won't need to keep getting recompiled with every new Xcode release, yet this is clearly not the case.</p>

<p>If anyone can explain what is going on here I would much appreciate it. Is Xcode 11.2 exhibiting a bug? or did I somehow need to tell it I wanted module stability when I originally compiled with Xcode 11.0?</p>
","234","","","","","2020-02-05 16:29:02","Module compiled with Swift 5.1 cannot be imported by the Swift 5.1.2 compiler","<ios><swift><xcode><swift5.1>","4","2","12","","","234","106176","2008-08-03 20:25:38","Orion Edwards","2020-03-15 01:27:04","http://orionedwards.blogspot.com","New Zealand","<p>I do .NET, C++, Ruby, Automated Testing, Running and Snowboarding<p><a href=""http://twitter.com/borland"" rel=""nofollow"">@borland</a></p></p>
","5148","3918","331","","","190"
"59437413","2","","59437282","2019-12-21 15:24:18","","81","","<blockquote>
  <p>Am I allowed to use the NULL pointer as replacement for the value of 0? </p>
</blockquote>

<p><strong>No</strong>, it is not safe to do so.  <code>NULL</code> is a null-pointer constant, which <em>could</em> have type <code>int</code>, but which more typically has type <code>void *</code> (in C), or otherwise is not directly assignable to an <code>int</code> (in C++ >= 11).  Both languages allow pointers to be converted to integers, but they do not provide for such conversions to be performed implicitly (though some compilers provide that as an extension).  Moreover, although it is common for converting a null pointer to an integer to yield the value 0, the standard does not guarantee that.  If you want a constant with type <code>int</code> and value 0 then spell it <code>0</code>.</p>

<blockquote>
  <ul>
  <li>Am I might crossing into Undefined Behavior with this?</li>
  </ul>
</blockquote>

<p>Yes, on any implementation where <code>NULL</code> expands to a value with type <code>void *</code> or any other not directly assignable to <code>int</code>.  The standard does not define the behavior of your assignment on such an implementation, ergo its behavior is undefined.</p>

<blockquote>
  <ul>
  <li>is it permissible to operate with the NULL in that way?</li>
  </ul>
</blockquote>

<p>It is poor style, and it will break on some systems and under some circumstances.  Inasmuch as you appear to be using GCC, it would break in your own example if you compiled with the <code>-Werror</code> option.</p>

<blockquote>
  <ul>
  <li>Is there anything wrong about to use NULL as numerical value in arithmetical expressions?</li>
  </ul>
</blockquote>

<p>Yes.  It is not guaranteed to have a numerical value at all.  If you mean 0 then write 0, which is not only well defined, but shorter and clearer.</p>

<blockquote>
  <ul>
  <li>And how is the result in C++ to that case?</li>
  </ul>
</blockquote>

<p>The C++ language is stricter about conversions than is C and has different rules for <code>NULL</code>, but there, too, implementations may provide extensions.  Again, if you mean 0 then that's what you should write.</p>
","2402272","","2402272","","2019-12-23 19:09:33","2019-12-23 19:09:33","","","","4","","","","2402272","103128","2013-05-20 15:31:09","John Bollinger","2020-03-14 23:51:21","","","","6988","3758","1728","","","2792262"
"56942725","2","","56942670","2019-07-08 21:25:09","","81","","<p>Unfortunately <strong>matplotlib 3.1.1 <a href=""https://github.com/matplotlib/matplotlib/issues/14675"" rel=""noreferrer"">broke seaborn heatmaps</a></strong>; and in general inverted axes with fixed ticks.<br>
This is fixed in the current development version; you may hence</p>

<ul>
<li>revert to matplotlib 3.1.0</li>
<li>use matplotlib 3.1.2 or higher</li>
<li>set the heatmap limits manually (<code>ax.set_ylim(...)</code>)</li>
</ul>
","4124317","","4124317","","2019-11-24 23:55:55","2019-11-24 23:55:55","","","","11","","","","4124317","193691","2014-10-09 07:50:43","ImportanceOfBeingErnest","2020-03-14 22:24:35","","QuantumLocation","<p>Part-time wiggling around in the depths of computer programming and big fan of ""The Importance of Being Earnest"" by Oscar Wilde.</p>

<p>I'm mostly looking at <a href=""/questions/tagged/matplotlib"" class=""post-tag"" title=""show questions tagged &#39;matplotlib&#39;"" rel=""tag"">matplotlib</a> related questions. Here are some interesting answers I have provided:</p>

<ul>
<li><a href=""http://stackoverflow.com/a/40923440/4124317"">How do I make the width of the title box span the entire plot?</a></li>
<li><p><a href=""http://stackoverflow.com/a/40139416/4124317"">Fast Live Plotting in Matplotlib / PyPlot</a></p></li>
<li><p><a href=""http://stackoverflow.com/a/41152160/4124317"">Paging/scrolling through set of 2D heat maps in matplotlib</a></p></li>
<li><p><a href=""https://stackoverflow.com/a/44989063/4124317"">Managing dynamic plotting in matplotlib Animation module</a></p></li>
<li><p><a href=""http://stackoverflow.com/a/42046541/4124317"">Why does pyplot.contour() require Z to be a 2D array?</a></p></li>
<li><p><a href=""http://stackoverflow.com/a/42190453/4124317""><strong>In matplotlib, how can I plot a multi-colored line, like a rainbow</strong></a></p></li>
<li><p><a href=""http://stackoverflow.com/a/40952872/4124317"">Python equivalent for Matlab's Demcmap (elevation +/- appropriate colormap)</a></p></li>
<li><p><a href=""http://stackoverflow.com/a/39806180/4124317"">What does a 4-element tuple argument for 'bbox_to_anchor' mean in matplotlib?</a></p></li>
<li><p><a href=""http://stackoverflow.com/a/42972469/4124317"">Draw lines with linewidth given in data coordinates</a></p></li>
<li><p><a href=""https://stackoverflow.com/a/45618741/4124317"">How to connect points taking into consideration position and orientation of each of them</a></p></li>
<li><p><a href=""https://stackoverflow.com/a/49194458/4124317"">How to draw a line through a scatter graph with no overflow?</a></p></li>
<li><p><a href=""https://stackoverflow.com/a/50751932/4124317"">Create random shape/contour using matplotlib</a></p></li>
<li><p><a href=""https://stackoverflow.com/questions/52557573/drawing-a-table-with-python-matplotlib/52564144#52564144"">Drawing a Table at the positions of yticks</a></p></li>
<li><p><a href=""https://stackoverflow.com/questions/53543782/how-can-i-subsample-an-array-according-to-its-density-remove-frequent-values/53563514#53563514"">How can I subsample an array according to its density?</a></p></li>
</ul>
","32298","2339","3554","https://i.stack.imgur.com/wsHAV.png?s=128&g=1","","5149286"
"55810943","2","","55810861","2019-04-23 12:10:10","","80","","<p>It's not supported by ISO-8601, but it <em>is</em> a valid offset as recorded in the IANA time zone database.</p>

<p>Sub-minute offsets are common in the data for the late 19th and early 20th century, before time zones were properly standardized. For example, <a href=""https://nodatime.org/tzvalidate/generate?version=2019a&amp;zone=Europe/Paris"" rel=""noreferrer"">Europe/Paris</a> had an offset of +00:09:21 until 1911 (according to the IANA database).</p>

<p>The latest occurrence I can find for this is <a href=""https://nodatime.org/tzvalidate/generate?version=2019a&amp;zone=Africa/Monrovia"" rel=""noreferrer"">Africa/Monrovia</a> which had a sub-minute offset until 1972!</p>
","22656","","22656","","2019-04-23 12:19:38","2019-04-23 12:19:38","","","","6","","","","22656","1169670","2008-09-26 12:05:05","Jon Skeet","2020-03-14 17:48:13","http://csharpindepth.com","Reading, United Kingdom","<p>
Author of <a href=""https://www.manning.com/books/c-sharp-in-depth-fourth-edition?a_aid=jonskeet&a_bid=66d590c3"" rel=""nofollow noreferrer"">C# in Depth</a>.<br>
Currently a software engineer at Google, London.<br>
Usually a Microsoft MVP (C#, 2003-2010, 2011-)
</p>

<p>Sites:</p>

<ul>
<li><a href=""http://csharpindepth.com"" rel=""nofollow noreferrer"">C# in Depth</a>
<li><a href=""http://codeblog.jonskeet.uk"" rel=""nofollow noreferrer"">Coding blog</a>
<li><a href=""http://jonskeet.uk/csharp"" rel=""nofollow noreferrer"">C# articles</a>
<li><a href=""http://twitter.com/jonskeet"" rel=""nofollow noreferrer"">Twitter updates (@jonskeet)</a>
</ul>

<p>Email: skeet@pobox.com (but please read <a href=""https://codeblog.jonskeet.uk/2012/08/22/stack-overflow-and-personal-emails/"" rel=""nofollow noreferrer"">my blog post on Stack Overflow-related emails</a> first)</p>
","1915992","16544","6999","","","11683"
"58208549","2","","58208459","2019-10-02 19:57:49","","79","","<p>Using</p>

<pre><code>auto __begin = begin_expr, __end = end_expr;
</code></pre>

<p>requires both <code>begin_expr</code> and <code>end_expr</code> to return the same type.  This means you cannot have a sentinel iterator type that is different from the beginning type.  Using</p>

<pre><code>auto __begin = begin_expr ;
auto __end = end_expr ;
</code></pre>

<p>fixes that issue while proving full backwards compatibility with C++14.</p>
","4342498","","4342498","","2019-10-02 20:23:23","2019-10-02 20:23:23","","","","4","","","","4342498","132431","2014-12-09 17:25:47","NathanOliver","2020-03-15 02:15:07","","Chicago Land Area","<p>I have been programming for the last 20 years and I primarily use C++ and PL/SQL today.  I have used C#, Java and VB.  I tend towards programming algorithms but I have made a few database based enterprise application to plug into an existing application to extend functionality.</p>

<p>Join us at the <a href=""http://chat.stackoverflow.com/rooms/41570/so-close-vote-reviewers"">SO Close Vote Reviewers Chat Room</a> If you want to help with coordinated site cleanup.</p>
","18852","4145","7007","https://i.stack.imgur.com/l3j88.jpg?s=128&g=1","","5460139"
"54613868","2","","54613753","2019-02-10 06:16:45","","78","","<h2>Part of question regarding out-of-range indices</h2>

<p>Slice logic automatically clips the indices to the length of the sequence.</p>

<p>Allowing slice indices to extend past end points was done for convenience.  It would be a pain to have to range check every expression and then adjust the limits manually, so Python does it for you.</p>

<p>Consider the use case of wanting to display no more than the first 50 characters of a text message.</p>

<p>The easy way (what Python does now):</p>

<pre><code>preview = msg[:50]
</code></pre>

<p>Or the hard way (do the limit checks yourself):</p>

<pre><code>n = len(msg)
preview = msg[:50] if n &gt; 50 else msg
</code></pre>

<p>Manually implementing that logic for adjustment of end points would be easy to forget, would be easy to get wrong (updating the 50 in two places), would be wordy, and would be slow.  Python moves that logic to its internals where it is succint, automatic, fast, and correct.  This is one of the reasons I love Python :-)</p>

<h2>Part of question regarding assignments length mismatch from input length</h2>

<p>The OP also wanted to know the rationale for allowing assignments such as <code>p[20:100] = [7,8]</code> where the assignment target has a different length (80) than the replacement data length (2).</p>

<p>It's easiest to see the motivation by an analogy with strings.  Consider, <code>""five little monkeys"".replace(""little"", ""humongous"")</code>.  Note that the target ""little"" has only six letters and ""humongous"" has nine.  We can do the same with lists:</p>

<pre><code>&gt;&gt;&gt; s = list(""five little monkeys"")
&gt;&gt;&gt; i = s.index('l')
&gt;&gt;&gt; n = len('little')
&gt;&gt;&gt; s[i : i+n ] = list(""humongous"")
&gt;&gt;&gt; ''.join(s)
'five humongous monkeys'
</code></pre>

<p>This all comes down to convenience.  </p>

<p>Prior to the introduction of the <em>copy()</em> and <em>clear()</em> methods, these used to be popular idioms:</p>

<pre><code>s[:] = []           # clear a list
t = u[:]            # copy a list
</code></pre>

<p>Even now, we use this to update lists when filtering:</p>

<pre><code>s[:] = [x for x in s if not math.isnan(x)]   # filter-out NaN values
</code></pre>

<p>Hope these practical examples give a good perspective on why slicing works as it does.  </p>
","1001643","","9067615","","2019-02-10 09:32:44","2019-02-10 09:32:44","","","","2","","","","1001643","156274","2011-10-18 16:56:27","Raymond Hettinger","2020-03-12 06:54:31","http://www.python.org","California","<ul>
<li>Python core developer</li>
<li>Python consultant/trainer</li>
<li>PSF board member</li>
</ul>

<p>Follow my Python tips on Twitter: @raymondh</p>
","29838","2737","385","","","982175"
"54201537","2","","54200988","2019-01-15 15:03:46","","78","","<p>It is because the grammar requires it. It does.</p>

<p>A <code>requires</code> constraint does not <em>have to</em> use a <code>requires</code> expression. It can use any more-or-less arbitrary boolean constant expression. Therefore, <code>requires (foo)</code> must be a legitimate <code>requires</code> constraint.</p>

<p>A <code>requires</code> <em>expression</em> (that thing that tests whether certain things follow certain constraints) is a distinct construct; it's just introduced by the same keyword. <code>requires (foo f)</code> would be the beginning of a valid <code>requires</code> expression.</p>

<p>What you want is that if you use <code>requires</code> in a place that accepts constraints, you should be able to make a ""constraint+expression"" out of the <code>requires</code> clause.</p>

<p>So here's the question: if you put <code>requires (foo)</code> into a place that is appropriate for a requires constraint... how far does the parser have to go before it can realize that this is a requires <em>constraint</em> rather than a constraint+expression the way you want it to be?</p>

<p>Consider this:</p>

<pre><code>void bar() requires (foo)
{
  //stuff
}
</code></pre>

<p>If <code>foo</code> is a type, then <code>(foo)</code> is a parameter list of a requires expression, and everything in the <code>{}</code> is not the body of the function but the body of that <code>requires</code> expression. Otherwise, <code>foo</code> is an expression in a <code>requires</code> clause.</p>

<p>Well, you could say that the compiler should just figure out what <code>foo</code> is first. But C++ <em>really</em> doesn't like it when the basic act of parsing a sequence of tokens requires that the compiler figure out what those identifiers mean before it can make sense of the tokens. Yes, C++ is context-sensitive, so this does happen. But the committee prefers to avoid it where possible.</p>

<p>So yes, it's grammar.</p>
","734069","","734069","","2019-01-15 17:01:42","2019-01-15 17:01:42","","","","16","","","","734069","330773","2011-05-02 07:17:28","Nicol Bolas","2020-03-15 04:18:02","https://nicolbolas.github.io/oldtut/index.html","","<p>I am a game developer with a fairly broad knowledgebase in the fields of animation and graphics, with a touch of AI.</p>

<p>Projects:</p>

<ul>
<li><a href=""https://nicolbolas.github.io/oldtut/index.html"" rel=""nofollow noreferrer"">A series of tutorials/eBook on graphics programming</a></li>
<li><a href=""https://nicolbolas.github.io/glsdk/index.html"" rel=""nofollow noreferrer"">The Unofficial OpenGL Software Development Kit</a></li>
<li><a href=""https://bitbucket.org/alfonse/glloadgen/wiki/Home"" rel=""nofollow noreferrer"">The OpenGL Loader Generator</a>, a much better alternative to GLEW</li>
</ul>
","35945","4252","5930","","","380209"
"57516578","2","","57510792","2019-08-15 21:39:28","","77","","<p>Whereas <code>std::string</code> has empty value which might mean ""not computed"", you might use more generally <code>std::optional</code> which handle empty string and non default constructible types:</p>

<pre><code>void PrintToGameMasters()
{
    std::optional&lt;std::string&gt; message;

    for (Player* player : GetAllPlayers()) {
       if (player-&gt;IsGameMaster()) {
           if (!message) {
              message = GetComplicatedDebugMessage();
           }
           player-&gt;SendMessage(*message);
       }
    }
}
</code></pre>
","2684539","","2684539","","2019-08-30 14:58:17","2019-08-30 14:58:17","","","","5","","","","2684539","143641","2013-08-15 02:08:44","Jarod42","2020-03-13 22:46:28","https://bitbucket.org/jarod42/ccccc","France","<p>.</p>
","9631","1345","755","https://www.gravatar.com/avatar/?s=128&d=identicon&r=PG&f=1","","3176925"
"58339097","2","","58339040","2019-10-11 10:15:47","","76","","<p>You are here confusing two concepts. A <a href=""https://wiki.haskell.org/Partial_application"" rel=""noreferrer""><em>partially <strong>applied</strong> function</em> [haskell-wiki]</a> with a <a href=""https://wiki.haskell.org/Partial_functions"" rel=""noreferrer""><em>partial function</em> [haskell-wiki]</a>.</p>

<p>A partially <em>applied</em> function is:</p>

<blockquote>
  <p>Partial application in Haskell involves <strong>passing less than the full number of arguments</strong> to a function that takes multiple arguments.</p>
</blockquote>

<p>whereas a partial function indeed is a non-total function:</p>

<blockquote>
  <p>A partial function is a function that is not defined for all possible arguments of the specified type.</p>
</blockquote>
","67579","","","","","2019-10-11 10:15:47","","","","2","","","","67579","225914","2009-02-17 21:39:52","Willem Van Onsem","2020-03-14 23:52:38","https://www.scribd.com/user/60098423/Willem-Van-Onsem","Ypres, Belgium","<p>It's <em>Will<strong>e</strong>m</em>, not <s><em>William</em></s>.</p>
","30657","12852","1706","https://i.stack.imgur.com/BJXub.png?s=128&g=1","","26078"
"57964026","1","57964216","","2019-09-16 20:30:41","","76","3867","<p>While trying to access static field <code>x</code> via an <em>uninitialized</em> local variable <code>Foo foo;</code> <code>foo.x</code> I get the compilation error <code>Variable 'foo' might not have been initialized</code>.</p>

<pre><code>class Foo{
    public static int x = 1;

    public static void main(String[] args) {
        Foo foo;
        System.out.println(foo.x); // Error: Variable 'foo' might not have been initialized
    }
}
</code></pre>

<p>It could <em>seem</em> like this error makes sense, but only until we realize that to access a <code>static</code> member the compiler doesn't actually use the <strong><em>value</em></strong> of a variable, but only its <strong><em>type</em></strong>.  </p>

<p>For instance I can initialize <code>foo</code> with value <code>null</code> and this will let us access <code>x</code> without any problems:</p>

<pre><code>Foo foo = null;
System.out.println(foo.x); //compiles and while running prints 1!!! 
</code></pre>

<p>Such scenario works because compiler realizes that <code>x</code> is static and treats <code>foo.x</code> as it was written like <code>Foo.x</code> (at least that is what I thought until now). </p>

<p>So why compiler suddenly insists on <code>foo</code> having a value <em>which it will NOT use</em> at that place?</p>

<p><sup>(Disclaimer: This is not code which would be used in real application, just interesting phenomenon which I couldn't find answer to on Stack Overflow so I decided to ask about it.)</sup></p>
","1393766","","1393766","","2019-09-18 15:48:12","2019-09-18 15:48:12","Why can't we use uninitialized local variable to access static content from type of that variable?","<java><static><initialization><local-variables><jls>","4","9","7","","","1393766","105021","2012-05-14 12:53:12","Pshemo","2020-03-15 03:14:02","http://localhost","Poland","<p><a href=""https://meta.stackexchange.com/q/7931"">FAQ for Stack Exchange sites</a><br>
<a href=""https://meta.stackoverflow.com/q/251225"">FAQ for Stack Overflow</a></p>

<p>Some ready comments:</p>

<ul>
<li><p>Homework related:</p>

<ul>
<li><blockquote>
  <p><code>Please see: [Why is “Can someone help me?” not an actual question?](https://meta.stackoverflow.com/q/284236)</code></p>
</blockquote></li>
<li><blockquote>
  <p><code>[""How do I ask and answer homework questions?""](https://meta.stackoverflow.com/q/334822)</code></p>
</blockquote></li>
<li><blockquote>
  <p><code>[""How to ask a good question when I'm not sure what I'm looking for?""](https://meta.stackoverflow.com/q/262527)</code></p>
</blockquote></li>
<li><blockquote>
  <p><code>I'm voting to close this question as off-topic because: [""3. Questions asking for homework help must include a **summary of the work you've done so far to solve the problem**, and a **description of the difficulty you are having** solving it.""](https://stackoverflow.com/help/on-topic). Current state of your question doesn't fulfill these requirements. Use [edit] option to improve it.</code></p>
</blockquote></li>
<li><blockquote>
  <p><code>Also please read this [Open letter to students with homework problems](http://meta.programmers.stackexchange.com/q/6166)</code></p>
</blockquote></li>
</ul></li>
<li><p>Others:</p>

<ul>
<li><blockquote>
  <p><code>[X/Y problem](https://meta.stackexchange.com/q/66377)</code></p>
</blockquote></li>
<li><blockquote>
  <p><code>Don't post text/code as image/link ([more info](https://meta.stackoverflow.com/a/285557)). Use [edit] option to correct your post.</code></p>
</blockquote></li>
<li><blockquote>
  <p><code>[Are answers that just contain links elsewhere really “good answers”?](https://meta.stackexchange.com/q/8231)</code>  </p>
</blockquote></li>
<li><blockquote>
  <p><code>[Your answer is in another castle: when is an answer not an answer?](https://meta.stackexchange.com/q/225370)</code></p>
</blockquote></li>
<li><blockquote>
  <p><code>Please [ask one question per post](https://meta.stackexchange.com/q/222735)</code></p>
</blockquote></li>
<li><blockquote>
  <p><code>[Are “works for me” answers valid?](https://meta.stackexchange.com/q/118992)</code>  </p>
</blockquote></li>
<li><blockquote>
  <p><code>[Are “Your code works fine for me” answers acceptable?](https://meta.stackoverflow.com/q/277923)</code></p>
</blockquote></li>
</ul></li>
</ul>
","13556","8222","7204","https://i.stack.imgur.com/h0FSp.png?s=128&g=1","","1485367"
"54194908","2","","21287624","2019-01-15 08:13:24","","76","","<p>In version 0.24.+ pandas has gained the ability to hold integer dtypes with missing values.</p>

<p><a href=""http://pandas.pydata.org/pandas-docs/stable/user_guide/integer_na.html"" rel=""noreferrer"">Nullable Integer Data Type</a>.</p>

<p>Pandas can represent integer data with possibly missing values using <a href=""http://pandas.pydata.org/pandas-docs/stable/reference/pandas.arrays.IntegerArray.html"" rel=""noreferrer""><code>arrays.IntegerArray</code></a>. This is an extension types implemented within pandas. It is not the default dtype for integers, and will not be inferred; you must explicitly pass the dtype into <a href=""http://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.array.html#pandas.array"" rel=""noreferrer""><code>array()</code></a> or <code>Series</code>:</p>

<pre><code>arr = pd.array([1, 2, np.nan], dtype=pd.Int64Dtype())
pd.Series(arr)

0      1
1      2
2    NaN
dtype: Int64
</code></pre>

<p>For convert column to nullable integers use:</p>

<pre><code>df['myCol'] = df['myCol'].astype('Int64')
</code></pre>
","2901002","","2901002","","2019-11-05 06:13:22","2019-11-05 06:13:22","","","","4","","","","2901002","479096","2013-10-20 20:27:26","jezrael","2020-03-15 05:00:49","","Bratislava, Slovakia","<p>Please don't hesitate to contact me:</p>

<pre><code>import pandas as pd

d = {0: {50: 16, 23: 7, 22: 7, 5: 1, 31: 10, 47: 15, 2: 0, 44: 14, 39: 13, 21: 7, 11: 3, 30: 10, 16: 5, 42: 14, 26: 8, 1: 0, 40: 13, 32: 10, 34: 11, 46: 15, 49: 16, 15: 5, 37: 12, 9: 3, 12: 4, 41: 13, 24: 8, 10: 3, 18: 6, 8: 2, 33: 11, 35: 11, 0: 0, 36: 12, 27: 9, 48: 16, 38: 12, 7: 2, 28: 9, 3: 1, 29: 9, 43: 14, 4: 1, 45: 15, 17: 5, 14: 4, 13: 4, 19: 6, 25: 8, 20: 6, 6: 2}, 1: {50: 2, 23: 2, 22: 1, 5: 2, 31: 1, 47: 2, 2: 2, 44: 2, 39: 0, 21: 0, 11: 2, 30: 0, 16: 1, 42: 0, 26: 2, 1: 1, 40: 1, 32: 2, 34: 1, 46: 1, 49: 1, 15: 0, 37: 1, 9: 0, 12: 0, 41: 2, 24: 0, 10: 1, 18: 0, 8: 2, 33: 0, 35: 2, 0: 0, 36: 0, 27: 0, 48: 0, 38: 2, 7: 1, 28: 1, 3: 0, 29: 2, 43: 1, 4: 1, 45: 0, 17: 2, 14: 2, 13: 1, 19: 1, 25: 1, 20: 2, 6: 0}, 2: {50: 32, 23: 32, 22: 32, 5: 32, 31: 32, 47: 32, 2: 32, 44: 33, 39: 46, 21: 64, 11: 97, 30: 97, 16: 97, 42: 99, 26: 99, 1: 99, 40: 99, 32: 100, 34: 100, 46: 100, 49: 101, 15: 101, 37: 101, 9: 101, 12: 102, 41: 103, 24: 103, 10: 103, 18: 103, 8: 104, 33: 105, 35: 105, 0: 106, 36: 108, 27: 109, 48: 109, 38: 110, 7: 110, 28: 111, 3: 111, 29: 111, 43: 111, 4: 111, 45: 111, 17: 112, 14: 112, 13: 114, 19: 116, 25: 116, 20: 121, 6: 122}}
print (pd.DataFrame(d).pivot(0,1,2).applymap(chr).agg(''.join))
</code></pre>

<p>I decided to create comments when downvoting an answer, because idea is to let the answerer know if is something wrong. Sometimes not easy, but fair. If answer is changed and correct, I always remove downvote.</p>

<p>Most time repeating dupes, not easy find:</p>

<pre><code>pivot dupe
https://stackoverflow.com/q/47152691/
booelan indexing dupe
https://stackoverflow.com/q/17071871
idxmax + groupby dupe
https://stackoverflow.com/q/15705630
idxmin + groupby dupe
https://stackoverflow.com/q/23394476
melt dupe
https://stackoverflow.com/q/28654047
explode dupe
https://stackoverflow.com/q/12680754
cumcount dupe
https://stackoverflow.com/q/23435270
map dupe
https://stackoverflow.com/q/24216425
groupby+size+unstack dupe
https://stackoverflow.com/q/39132742
https://stackoverflow.com/q/38278603
sorting inplace dupe
https://stackoverflow.com/q/42613581
factorize dupe
https://stackoverflow.com/q/39357882
groupby+size dupe
https://stackoverflow.com/q/19384532
groupby+ mean dupe
https://stackoverflow.com/q/30482071
transform sum dupe
https://stackoverflow.com/q/30244952
transform size dupe
https://stackoverflow.com/q/37189878
keyerror dupe
https://stackoverflow.com/q/43736163
merge/map dupe
https://stackoverflow.com/q/53010406
value_count dupe
https://stackoverflow.com/q/15411158
numpy select, where dupe
https://stackoverflow.com/q/19913659
wide_to_long dupe
https://stackoverflow.com/q/55766565
reset_index dupe
https://stackoverflow.com/q/36932759
</code></pre>
","103144","19852","898","https://i.stack.imgur.com/hMDvl.jpg?s=128&g=1","","3465245"
"54521764","2","","54521723","2019-02-04 17:57:10","","75","","<p><code>react-redux v6.0.0</code> uses the new context api provided by React and in order for it work, <strong>either you need to downgrade <code>react-redux</code> to <code>v5.x.x</code></strong> or <strong>upgrade <code>react</code> and <code>react-dom</code> to <code>v16.4</code> or above</strong></p>

<p>If you are using yarn, you can run</p>

<pre><code>yarn upgrade react react-dom
</code></pre>

<p>else with npm you can run</p>

<pre><code>npm update react react-dom
</code></pre>

<p>You could also change the versions manually in package.json and run <code>yarn install</code> or <code>npm install</code></p>
","5928186","","","","","2019-02-04 17:57:10","","","","6","","","","5928186","140085","2016-02-15 04:45:44","Shubham Khatri","2020-03-14 17:13:38","","Bangalore, Karnataka, India","<p>I spend most of my free time reading question on stackoverflow and learning all the cool stuff thats out there.</p>

<p>Checkout my <a href=""https://www.linkedin.com/in/shubham-khatri-2204/"" rel=""nofollow noreferrer"">LinkedIn Profile</a></p>

<p>Some of my most useful answers:</p>

<p><a href=""https://stackoverflow.com/questions/52437195/reactrouter-v4-prompt-override-default-alert/52437325#52437325"">ReactRouter v4 Prompt - override default alert</a></p>

<p><a href=""https://stackoverflow.com/questions/45373742/detect-route-change-with-react-router/45373907#45373907"">Detect Route Change with react-router</a></p>

<p><a href=""https://stackoverflow.com/questions/50502664/how-to-update-the-context-value-in-provider-from-the-consumer/50502829#50502829"">How to update the Context value in Provider from the Consumer</a></p>

<p><a href=""https://stackoverflow.com/questions/50817672/does-new-react-context-api-trigger-re-renders"">Does new React Context API trigger re-renders?</a></p>

<p><a href=""https://stackoverflow.com/questions/48209452/when-to-use-functional-setstate/48209870#48209870"">When to use functional setState</a></p>

<p><a href=""https://stackoverflow.com/questions/49809884/access-react-context-outside-of-render-function/49810870#49810870"">Access React Context outside of render function</a></p>

<p><a href=""https://stackoverflow.com/questions/47627818/performing-authentication-on-routes-with-react-router-v4/47628941#47628941"">Performing Authentication on Routes with react-router-v4</a></p>

<p><a href=""https://stackoverflow.com/questions/45053622/how-to-avoid-binding-inside-render-method/45053753#45053753"">How to avoid bind or inline arrow functions inside render method</a></p>

<p><a href=""https://stackoverflow.com/questions/47541032/handling-async-request-with-react-redux-and-axios/47588228#47588228"">Handling async request with React, Redux and Axios?</a></p>

<p><a href=""https://stackoverflow.com/questions/44313375/webpack-watch-exits-after-building-once"">webpack --watch exits after building once</a></p>

<p><a href=""https://stackoverflow.com/questions/44806333/unable-to-catch-and-log-the-error-response-from-an-axios-request"">Unable to catch and log the Error response from an axios request</a></p>

<p><a href=""https://stackoverflow.com/questions/44127739/trying-to-change-the-routing-url-based-on-a-specific-condition-in-react/44128108#44128108"">Programmatically Navigate using react-router</a></p>

<p><a href=""https://stackoverflow.com/questions/44121069/how-to-pass-parameters-with-history-push-in-react-router-v4/45263164#45263164"">How to pass params with history.push/Link/Redirect in react-router v4?</a></p>

<p><a href=""https://stackoverflow.com/questions/44513287/how-to-get-redux-form-data-in-another-component"">How to get Redux Form data in another Component</a></p>

<p><a href=""https://stackoverflow.com/questions/45429963/onenter-prop-in-react-router-v4/45430656#45430656"">onEnter prop in react-router v4</a></p>
","15578","3079","564","https://i.stack.imgur.com/Pa1fE.jpg","","7841989"
"55435185","2","","15943769","2019-03-30 19:55:03","","73","","<blockquote>
  <h1>How do I get the row count of a pandas DataFrame?</h1>
</blockquote>

<p>This table summarises the different situations in which you'd want to count something in a DataFrame (or Series, for completeness), along with the recommended method(s).</p>

<p><a href=""https://i.stack.imgur.com/3FXuI.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/3FXuI.png"" alt=""enter image description here""></a></p>

<blockquote>
  <p><strong>Footnotes</strong>   </p>
  
  <ol>
  <li><code>DataFrame.count</code> returns counts for each column as a <code>Series</code> since the non-null count varies by column.</li>
  <li><code>DataFrameGroupBy.size</code> returns a <code>Series</code>, since all columns in the same group share the same row-count.</li>
  <li><code>DataFrameGroupBy.count</code> returns a <code>DataFrame</code>, since the non-null count could differ across columns in the same group. To get the group-wise non-null count for a specific column, use <code>df.groupby(...)['x'].count()</code> where ""x"" is the column to count.</li>
  </ol>
</blockquote>

<hr>

<h1><strong>Minimal Code Examples</strong></h1>

<p>Below, I show examples of each of the methods described in the table above. First, the setup - </p>

<pre><code>df = pd.DataFrame({
    'A': list('aabbc'), 'B': ['x', 'x', np.nan, 'x', np.nan]})
s = df['B'].copy()

df

   A    B
0  a    x
1  a    x
2  b  NaN
3  b    x
4  c  NaN

s

0      x
1      x
2    NaN
3      x
4    NaN
Name: B, dtype: object
</code></pre>

<h3>Row Count of a DataFrame: <code>len(df)</code>, <code>df.shape[0]</code>, or <code>len(df.index)</code></h3>

<pre><code>len(df)
# 5

df.shape[0]
# 5

len(df.index)
# 5
</code></pre>

<p>It seems silly to compare the performance of constant time operations, especially when the difference is on the level of ""seriously, don't worry about it"". But this seems to be a trend with other answers, so I'm doing the same for completeness.</p>

<p>Of the 3 methods above, <code>len(df.index)</code> (as mentioned in other answers) is the fastest. </p>

<blockquote>
  <p><strong>Note</strong></p>
  
  <ul>
  <li>All the methods above are constant time operations as they are simple attribute lookups. </li>
  <li><code>df.shape</code> (similar to <code>ndarray.shape</code>) is an attribute that returns a tuple of <code>(# Rows, # Cols)</code>. For example, <code>df.shape</code> returns <code>(8,
  2)</code> for the example here.</li>
  </ul>
</blockquote>

<h3>Column Count of a DataFrame: <code>df.shape[1]</code>, <code>len(df.columns)</code></h3>

<pre><code>df.shape[1]
# 2

len(df.columns)
# 2
</code></pre>

<p>Analogous to <code>len(df.index)</code>, <code>len(df.columns)</code> is the faster of the two methods (but takes more characters to type).</p>

<h3>Row Count of a Series: <code>len(s)</code>, <code>s.size</code>, <code>len(s.index)</code></h3>

<pre><code>len(s)
# 5

s.size
# 5

len(s.index)
# 5
</code></pre>

<p><code>s.size</code> and <code>len(s.index)</code> are about the same in terms of speed. But I recommend <code>len(df)</code>. </p>

<blockquote>
  <p><strong>Note</strong><br>
  <code>size</code> is an attribute, and it returns the number of elements (=count
  of rows for any Series). DataFrames also define a size attribute which
  returns the same result as <code>df.shape[0] * df.shape[1]</code>.</p>
</blockquote>

<h3>Non-Null Row Count: <code>DataFrame.count</code> and <code>Series.count</code></h3>

<p>The methods described here only count non-null values (meaning NaNs are ignored). </p>

<p>Calling <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.count.html"" rel=""noreferrer""><code>DataFrame.count</code></a> will return non-NaN counts for <em>each</em> column:</p>

<pre><code>df.count()

A    5
B    3
dtype: int64
</code></pre>

<p>For Series, use <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.count.html"" rel=""noreferrer""><code>Series.count</code></a> to similar effect:</p>

<pre><code>s.count()
# 3
</code></pre>

<h3>Group-wise Row Count: <code>GroupBy.size</code></h3>

<p>For <code>DataFrames</code>, use <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.core.groupby.DataFrameGroupBy.size.html"" rel=""noreferrer""><code>DataFrameGroupBy.size</code></a> to count the number of rows per group.</p>

<pre><code>df.groupby('A').size()

A
a    2
b    2
c    1
dtype: int64
</code></pre>

<p>Similarly, for <code>Series</code>, you'll use <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.core.groupby.GroupBy.size.html"" rel=""noreferrer""><code>SeriesGroupBy.size</code></a>.</p>

<pre><code>s.groupby(df.A).size()

A
a    2
b    2
c    1
Name: B, dtype: int64
</code></pre>

<p>In both cases, a <code>Series</code> is returned. This makes sense for <code>DataFrames</code> as well since all groups share the same row-count.</p>

<h3>Group-wise Non-Null Row Count: <code>GroupBy.count</code></h3>

<p>Similar to above, but use <a href=""https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.core.groupby.GroupBy.size.html"" rel=""noreferrer""><code>GroupBy.count</code></a>, not <code>GroupBy.size</code>. Note that <code>size</code> always returns a <code>Series</code>, while <code>count</code> returns a <code>Series</code> if called on a specific column, or else a <code>DataFrame</code>.</p>

<p>The following methods return the same thing:</p>

<pre><code>df.groupby('A')['B'].size()
df.groupby('A').size()

A
a    2
b    2
c    1
Name: B, dtype: int64
</code></pre>

<p>Meanwhile, for <code>count</code>, we have</p>

<pre><code>df.groupby('A').count()

   B
A   
a  2
b  1
c  0
</code></pre>

<p>...called on the entire GroupBy object, v/s, </p>

<pre><code>df.groupby('A')['B'].count()

A
a    2
b    1
c    0
Name: B, dtype: int64
</code></pre>

<p>Called on a specific column.</p>
","4909087","","4909087","","2019-05-24 04:05:28","2019-05-24 04:05:28","","","","0","","","","4909087","195757","2015-05-17 14:31:31","cs95","2020-03-15 02:58:01","","At an ipython shell near you","<h2><a href=""https://meta.stackoverflow.com/questions/386324/the-stack-overflow-i-wish-to-build-and-participate-in-is-no-longer-supported"">The Stack Overflow I wish to build and participate in no longer exists.</a></h2>

<h1><a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">My pandas canonicals</a> ⬅ please critique!</h1>

<p>When asking a question here, please describe the problem you are trying to solve, rather than asking about the method you <em>think</em> is the solution to that problem. This is known as the <a href=""https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem"">XY problem</a> and can easily be averted if you ask the right questions. This will make it easy for us to understand what you're trying to do, and you may even receive better suggestions that you may never have considered yourself. </p>

<h3><strong>Rep = participation</strong></h3>

<h3><strong>Badges = quality</strong></h3>

<h3><strong><s>1 like = 1 prayer </s> 1 upvote = 1 thanks</strong></h3>

<p><a href=""https://stackoverflow.com/users/4909087/coldspeed""><img src=""https://stackoverflow.com/users/flair/4909087.png"" width=""208"" height=""58"" alt=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers"" title=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers""></a></p>

<p><a href=""https://i.stack.imgur.com/YfCOa.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YfCOa.gif"" alt=""enter image description here""></a></p>

<p><a href=""https://stackoverflow.com/a/53915214/4909087"">Some people, when confronted with a problem, think ""I know, I'll use regular expressions."" Now they have two problems.</a></p>

<hr>

<h2>(Actively Maintained) Pandas Canonicals</h2>

<p>The full list is on <a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">GitHub</a>.</p>

<ul>
<li><a href=""https://stackoverflow.com/q/53645882/pandas-merging-101"">Pandas Merging 101</a>: Everything you ever wanted to know about merging and more</li>
<li><a href=""https://stackoverflow.com/a/55557758"">How to iterate over a DataFrame.</a> Spoler alert: don't!</li>
<li><a href=""https://stackoverflow.com/a/54508052"">How to convert a DataFrame to NumPy array</a>: from 0.24, use <code>df.to_numpy()</code></li>
<li><a href=""https://stackoverflow.com/a/56746204/4909087"">The Right Way to create an empty DataFrame and fill it</a>: Use a list to grow your data, not a DataFrame</li>
<li><a href=""https://stackoverflow.com/a/59242208/4909087"">Don't use <code>inplace=True</code>!</a></li>
</ul>

<h2>Other Posts I'm Proud Of</h2>

<ul>
<li>Pandas Merging 101 (see above)</li>
<li><a href=""https://stackoverflow.com/a/50312321/4909087"">Best way to interleave two lists</a></li>
<li><a href=""https://stackoverflow.com/questions/47007680/strange-use-of-pythons-and-operator/47007761#47007761"">How do &quot;and&quot; and &quot;or&quot; act with non-boolean values?</a></li>
<li><a href=""https://stackoverflow.com/a/46333422/4909087"">So you think you know recursion?</a></li>
</ul>

<p>In addition to this, some of my <a href=""https://stackoverflow.com/search?tab=votes&amp;q=user%3a4909087%20perfplot"">answers that use <code>perfplot</code></a> are worth a read.</p>

<hr>

<h3>236th awardee of the <a href=""https://stackoverflow.com/help/badges/146/legendary"">Legendary</a> badge.</h3>

<p>Thanks, Stack Overflow! I love the shirt :-)</p>

<p><a href=""https://i.stack.imgur.com/7YKND.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7YKND.jpg"" alt=""enter image description here""></a></p>
","57988","9183","7537","https://i.stack.imgur.com/LmD3e.png?s=128&g=1","","6321039"
"55993423","2","","55993254","2019-05-05 15:11:12","","72","","<blockquote>
  <p>Does he mean, the datatype String and Int are monoid.</p>
</blockquote>

<p><strong>No</strong>, neither <code>String</code> nor <code>Int</code> are monoids. A monoid is a 3-tuple <em>(S, &oplus;, e)</em> where &oplus; is a binary operator <em>&oplus; : S&times;S &rightarrow; S</em>, such that for all elements <em>a, b, c&in;S</em> it holds that <em>(a&oplus;b)&oplus;c=a&oplus;(b&oplus;c)</em>, and <em>e&in;S</em> is an ""identity element"" such that <em>a&oplus;e=e&oplus;a=a</em>. <code>String</code> and <code>Int</code> are types, so basically sets of values, but not 3-tuples.</p>

<p>The article says:</p>

<blockquote>
  <p>Let's take the <strong><code>String</code> concatenation</strong> and <strong><code>Int</code> addition</strong> as
  example <em>monoids</em> that have a relationship.</p>
</blockquote>

<p>So the author clearly also mentions the binary operators (<code>(++)</code> in case of <code>String</code>, and <code>(+)</code> in case of <code>Int</code>). The identities (empty string in case of <code>String</code> and <code>0</code> in case of <code>Int</code>) are left implicit; leaving the identities as an exercise for the reader is common in informal English discourse.</p>

<p>Now given that we have two monoid structures <em>(M, &oplus;, e<sub>m</sub>)</em> and <em>(N, &otimes;, e<sub>n</sub>)</em>, a function <em>f : M &rightarrow; N</em> (like <code>length</code>) is then called a <a href=""https://en.wikipedia.org/wiki/Monoid#Monoid_homomorphisms"" rel=""noreferrer""><em>monoid homomorphism</em> [wiki]</a> given it holds that <em>f(m<sub>1</sub>&oplus;m<sub>2</sub>)=f(m<sub>1</sub>)&otimes;f(m<sub>2</sub>)</em> for all elements <em>m<sub>1</sub>, m<sub>2</sub>&in;M</em> and that mapping also preserves the identity element: <em>f(e<sub>m</sub>)=e<sub>n</sub></em>.</p>

<p>For example <code>length :: String -&gt; Int</code> is a monoid homomorphism, since we can consider the monoids <em>(<code>String</code>, <code>(++)</code>, <code>""""</code>)</em> and <em>(<code>Int</code>, <code>(+)</code>, <code>0</code>)</em>. It holds that:</p>

<ol>
<li><code>length (s1 ++ s2) == length s1 + length s2</code> (for all <code>String</code>s <code>s1</code> and <code>s2</code>); and</li>
<li><code>length """" == 0</code>.</li>
</ol>
","67579","","8491228","","2019-05-05 22:44:26","2019-05-05 22:44:26","","","","1","","","","67579","225914","2009-02-17 21:39:52","Willem Van Onsem","2020-03-14 23:52:38","https://www.scribd.com/user/60098423/Willem-Van-Onsem","Ypres, Belgium","<p>It's <em>Will<strong>e</strong>m</em>, not <s><em>William</em></s>.</p>
","30657","12852","1706","https://i.stack.imgur.com/BJXub.png?s=128&g=1","","26078"
"54800850","2","","54800817","2019-02-21 06:48:03","","72","","<p>How about ternary conditional operator?</p>

<pre><code>String s = 
    str1 != null ? str1 : 
    str2 != null ? str2 : 
    str3 != null ? str3 : str4
;
</code></pre>
","1221571","","1493294","","2019-02-21 19:42:39","2019-02-21 19:42:39","","","","6","","","","1221571","329640","2012-02-20 16:47:39","Eran","2020-03-15 04:47:50","http://none.com","Israel","<p>Currently developing in Java.</p>

<p>Here are some links to deleted posts that only 10k rep users can view, unless they are undeleted:</p>

<ol>
<li><a href=""https://stackoverflow.com/questions/59357153"">Identify duplicates in a List print by sequence</a></li>
<li><a href=""https://stackoverflow.com/questions/58838194"">Iterating an Arraylist of Arraylists using forEach and lambda expression</a></li>
<li><a href=""https://stackoverflow.com/questions/58857274"">How can I check if all the elements of an ArrayList are same in java?</a></li>
<li><a href=""https://stackoverflow.com/questions/59248832"">How to refactor this java lambda code to only 1 lambda</a></li>
<li><a href=""https://stackoverflow.com/questions/59234974"">Warning about Type safety</a></li>
<li><a href=""https://stackoverflow.com/questions/59089651"">Missing method on object while iterating</a></li>
<li><a href=""https://stackoverflow.com/questions/27213135"">How to use an ArrayList as a parameter in a constructor?</a></li>
<li><a href=""https://stackoverflow.com/questions/45141746"">Calculate the sum with minimum usage of numbers</a></li>
<li><a href=""https://stackoverflow.com/questions/54461394"">How to convert an object of type Course to a Map using Java 8 streams?</a> </li>
<li><a href=""https://stackoverflow.com/questions/53922165"">IntStream iterate never stop</a></li>
<li><a href=""https://stackoverflow.com/questions/53913073"">No suitable constructor found for ArrayList(List)</a></li>
<li><a href=""https://stackoverflow.com/questions/48659532"">Return only true predicates in Java stream</a></li>
<li><a href=""https://stackoverflow.com/questions/39467595"">What's wrong with my program?</a></li>
<li><a href=""https://stackoverflow.com/questions/40736019"">Is Character equals char autoboxed or unboxed in java?</a></li>
<li><a href=""https://stackoverflow.com/questions/41479248"">Why does the output of b does not change in the case?</a></li>
<li><a href=""https://stackoverflow.com/questions/41019203"">Multiple methods</a></li>
<li><a href=""https://stackoverflow.com/questions/39243495"">Understanding stream.map in java</a></li>
<li><a href=""https://stackoverflow.com/questions/36622102"">Difference between str.replaceAll() and str = str.replaceAll()</a></li>
<li><a href=""https://stackoverflow.com/questions/33574131"">Why am I getting “Syntax error on token ”else“, ) expected”?</a></li>
<li><a href=""https://stackoverflow.com/questions/30325462"">java.lang.ClassCastException: - Arrays.asList()</a></li>
<li><a href=""https://stackoverflow.com/questions/45077424"">Object instantiation error</a></li>
<li><a href=""https://stackoverflow.com/questions/41375896/"">Java 8: Get default value from HashMap and update underlying map</a></li>
<li><a href=""https://stackoverflow.com/questions/49134000"">Sending default boolean value into a method in Java</a></li>
<li><a href=""https://stackoverflow.com/questions/46882446"">What's wrong with the code? No matter the user input, team 1 will win the game</a></li>
<li><a href=""https://stackoverflow.com/questions/37586238"">The literal 004055158L of type long is out of range</a></li>
<li><a href=""https://stackoverflow.com/questions/29747214"">Post Increments</a></li>
<li><a href=""https://stackoverflow.com/questions/53593481"">Can I implement a Java interface method as private or protected?</a></li>
<li><a href=""https://stackoverflow.com/questions/24914354"">Error: else without if. What went wrong?</a></li>
</ol>
","28834","10591","1839","https://i.stack.imgur.com/GLKUy.jpg?s=128&g=1","","1263831"
"57652907","2","","57652799","2019-08-26 06:39:47","","70","","<p>The normative definition of undefined behavior is as follows:</p>

<blockquote>
  <p><a href=""https://timsong-cpp.github.io/cppwp/n4659/defns.undefined"" rel=""noreferrer""><strong>[defns.undefined]</strong></a></p>
  
  <p>behavior for which this International Standard imposes no requirements  </p>
  
  <p>[ Note: Undefined behavior may be expected when this International
  Standard omits any explicit definition of behavior or when a program
  uses an erroneous construct or erroneous data. Permissible undefined
  behavior ranges from ignoring the situation completely with
  unpredictable results, to behaving during translation or program
  execution in a documented manner characteristic of the environment
  (with or without the issuance of a diagnostic message), to terminating
  a translation or execution (with the issuance of a diagnostic
  message). Many erroneous program constructs do not engender undefined
  behavior; they are required to be diagnosed. Evaluation of a constant
  expression never exhibits behavior explicitly specified as undefined.
   — end note ]</p>
</blockquote>

<p>While the note itself is not normative, it does describe a range of behaviors implementations are known to exhibit. So crashing the compiler (which is translation terminating abruptly), is legitimate according to that note. But really, as the normative text says, the standard doesn't place any bounds for either execution or translation. If an implementation steals your passwords, it's not a violation of any contract laid forth in the standard.</p>
","817643","","","","","2019-08-26 06:39:47","","","","17","","","","817643","133132","2011-06-27 15:14:51","StoryTeller - Unslander Monica","2020-03-14 18:44:58","","Israel","<p>My user handle is in relation to <a href=""https://meta.stackexchange.com/questions/336526/stack-overflow-is-doing-me-ongoing-harm-its-time-to-fix-it"">this post</a>. SE Inc has behaved reprehensibly, and the entire user community should be made aware and take a stand against it. </p>

<hr>

<p>I don't believe in answering questions completely. IMHO, one gains the most when one deduces as much of the answer on their own.</p>

<p>Over the past several years on SO I learned the following:</p>

<ul>
<li>The vital importance of being precise.</li>
<li>Helping others learn can enrich oneself immeasurably.</li>
<li>Some one always knows more, learn from them.</li>
</ul>

<p>I like C very much, but I think we should stop <a href=""https://www.youtube.com/watch?v=YnWhqhNdYyk"" rel=""nofollow noreferrer"">teaching it (as part of teaching C++)</a>.</p>

<p>I also get a twitch in my eye every time someone on SO adds ""My Professor/Assignment forbids the use of the standard c++ library"". This is so asinine, and has nothing to do with teaching ""real"" C++.</p>
","14705","7243","5944","","","432714"
"59306751","1","59328672","","2019-12-12 14:27:38","","70","2828","<p>Consider the following code:</p>

<pre><code>using System;

#nullable enable

namespace Demo
{
    public sealed class TestClass
    {
        public string Test()
        {
            bool isNull = _test == null;

            if (isNull)
                return """";
            else
                return _test; // !!!
        }

        readonly string _test = """";
    }
}
</code></pre>

<p>When I build this, the line marked with <code>!!!</code> gives a compiler warning: <code>warning CS8603: Possible null reference return.</code>. </p>

<p>I find this a little confusing, given that <code>_test</code> is readonly and initialised to non-null.</p>

<p>If I change the code to the following, the warning goes away:</p>

<pre><code>        public string Test()
        {
            // bool isNull = _test == null;

            if (_test == null)
                return """";
            else
                return _test;
        }
</code></pre>

<p>Can anyone explain this behaviour?</p>
","106159","","106159","","2019-12-12 15:26:37","2019-12-17 06:45:12","Why does this code give a ""Possible null reference return"" compiler warning?","<c#><nullable-reference-types>","4","19","7","","","106159","83598","2009-05-13 09:56:56","Matthew Watson","2020-03-14 19:16:50","","Edinburgh, United Kingdom","","5396","5815","97","https://i.stack.imgur.com/Qfp6z.png","","37150"
"56778143","2","","56778106","2019-06-26 17:23:33","","67","","<p>Replace:</p>

<pre><code>class MyViewPagerAdapter(manager: FragmentManager) : FragmentPagerAdapter(manager)
</code></pre>

<p>with:</p>

<pre><code>class MyViewPagerAdapter(manager: FragmentManager) : FragmentPagerAdapter(manager, FragmentPagerAdapter.BEHAVIOR_RESUME_ONLY_CURRENT_FRAGMENT)
</code></pre>

<p>(assuming that <code>MyViewPagerAdapter</code> does not need this value to be configurable)</p>
","115145","","","","","2019-06-26 17:23:33","","","","2","","","","115145","839967","2009-05-31 16:20:08","CommonsWare","2020-03-14 23:24:39","https://commonsware.com","Pennsylvania, United States","<p>Mark Murphy, founder of CommonsWare, writes a lot.</p>

<h2>Second-Generation Books</h2>

<p>His most recent books have been focused on second-generation Android app development (Kotlin and the Android Jetpack):</p>

<ul>
<li><p><a href=""https://commonsware.com/Jetpack"" rel=""nofollow noreferrer""><em>Elements of Android Jetpack</em></a>, a new introductory book on Android app development, focused on second-generation techniques. Version 0.8 is available, with 880 pages, covering Android Studio 3.5.3 and up through Android 10.</p></li>
<li><p><a href=""https://commonsware.com/AndExplore"" rel=""nofollow noreferrer""><em>Exploring Android</em></a>, a series of step-by-step tutorials for building an Android app from scratch. This book is being rewritten to demonstrate using Kotlin and the Jetpack libraries. Version 1.0 is available, with 36 tutorials spanning 576 pages.</p></li>
<li><p><a href=""https://commonsware.com/Q"" rel=""nofollow noreferrer""><em>Elements of Android Q</em></a>, to help you deal with the changes introduced by Android 10 (code-named ""Q""), such as <a href=""https://commonsware.com/blog/2019/06/07/death-external-storage-end-saga.html"" rel=""nofollow noreferrer"">the changes in external storage access</a>. The final version is available, comprising 96 pages.</p></li>
<li><p><a href=""https://commonsware.com/Room"" rel=""nofollow noreferrer""><em>Elements of Android Room</em></a>, to help you incorporate Google's reactive object wrapper around SQLite. Version 0.2 is available, comprising 162 pages.</p></li>
<li><p><a href=""https://commonsware.com/Kotlin"" rel=""nofollow noreferrer""><em>Elements of Kotlin</em></a>, a guide to the Kotlin programming language, which is rapidly gaining in popularity for Android app development. Version 0.2 is available, comprising 342 pages.</p></li>
<li><p><a href=""https://commonsware.com/Coroutines"" rel=""nofollow noreferrer""><em>Elements of Kotlin Coroutines</em></a>, exploring Kotlin's new
first-class reactive programming system. Version 0.1 is available, comprising 170 pages.</p></li>
</ul>

<h2>First-Generation Books</h2>

<p>In the beginning, Android development was focused on Java and, partially, on the Android Support Library. Mark's earliest books share that focus:</p>

<ul>
<li><p><a href=""https://commonsware.com/Android"" rel=""nofollow noreferrer""><em>The Busy Coder's Guide to Android Development</em></a>, the first and largest book on Android app programming</p></li>
<li><p><a href=""https://commonsware.com/AndroidArch"" rel=""nofollow noreferrer""><em>Android's Architecture Components</em></a></p></li>
<li><p><a href=""https://commonsware.com/GraphQL"" rel=""nofollow noreferrer""><em>GraphQL and Android</em></a></p></li>
</ul>

<h2>Things Other Than Books</h2>

<p>He offers <a href=""https://training.commonsware.com/seminars/"" rel=""nofollow noreferrer"">training</a> on Android app development topics, from ""starting from scratch"" introductory material to advanced areas.</p>

<p>He also offers <a href=""https://commonsware.com/office-hours/"" rel=""nofollow noreferrer"">office hours chats</a> and <a href=""https://commonsware.com/consulting"" rel=""nofollow noreferrer"">consulting</a> on Android app development, in case you are interested in help beyond what fits the Stack Overflow model, the books, and the training.</p>

<p>Heck, he even has <a href=""http://commonsware.com/blog"" rel=""nofollow noreferrer"">a blog</a>.</p>

<p>All code in Stack Overflow questions, answers, or comments written by Mark Murphy are hereby licensed under <a href=""http://www.apache.org/licenses/LICENSE-2.0"" rel=""nofollow noreferrer"">the Apache Software License 2.0</a>, unless otherwise noted where that code appears on Stack Overflow.</p>
","237658","11157","7098","https://i.stack.imgur.com/wDnd8.png?s=128&g=1","","39846"
"55823395","2","","55823298","2019-04-24 06:08:11","","67","","<p>You can do it by a <a href=""https://www.regular-expressions.info/brackets.html"" rel=""noreferrer"">capturing group</a> and <a href=""https://www.regular-expressions.info/backref.html"" rel=""noreferrer"">backreference</a>. Just check it's the repetition of the first captured value.</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>function check(str) {
  return /^(.+)\1+$/.test(str)
}

console.log(check('aa')) //true
console.log(check('aaa')) //true
console.log(check('abcabcabc')) //true
console.log(check('aba')) //false
console.log(check('ababa')) //false</code></pre>
</div>
</div>
</p>

<p>In the above RegExp:</p>

<ol>
<li><code>^</code> and <code>$</code> stands for <a href=""https://www.regular-expressions.info/anchors.html"" rel=""noreferrer"">start and end anchors</a> to predict the position.</li>
<li><code>(.+)</code> captures any pattern and captures the value(except <code>\n</code>).</li>
<li><code>\1</code> is backreference of first captured value and <code>\1+</code> would check for repetition of captured value.</li>
</ol>

<p><a href=""https://regex101.com/r/Hx2XsZ/1"" rel=""noreferrer"">Regex explanation here</a></p>

<p>For RegExp debugging use: <a href=""https://regex101.com/r/pqlAuP/1/debugger"" rel=""noreferrer"">https://regex101.com/r/pqlAuP/1/debugger</a></p>

<p></p>

<p>Performance : <a href=""https://jsperf.com/reegx-and-loop/13"" rel=""noreferrer"">https://jsperf.com/reegx-and-loop/13</a></p>
","3037257","","3037257","","2019-04-25 09:48:55","2019-04-25 09:48:55","","","","16","","","2019-04-25 10:14:24","3037257","98685","2013-11-26 16:13:13","Pranav C Balan","2020-03-14 19:27:38","http://pranavc.in/","Ramanthali, Kannur, Kerala, India","

<p><a href=""/questions/tagged/jquery"" class=""post-tag"" title=""show questions tagged &#39;jquery&#39;"" rel=""tag"">jquery</a>,
<a href=""/questions/tagged/javascript"" class=""post-tag"" title=""show questions tagged &#39;javascript&#39;"" rel=""tag"">javascript</a>,
<a href=""/questions/tagged/html"" class=""post-tag"" title=""show questions tagged &#39;html&#39;"" rel=""tag"">html</a>,
<a href=""/questions/tagged/css"" class=""post-tag"" title=""show questions tagged &#39;css&#39;"" rel=""tag"">css</a>,
<a href=""/questions/tagged/arrays"" class=""post-tag"" title=""show questions tagged &#39;arrays&#39;"" rel=""tag"">arrays</a>,
<a href=""/questions/tagged/regex"" class=""post-tag"" title=""show questions tagged &#39;regex&#39;"" rel=""tag"">regex</a></p>

<p><a href=""https://stackoverflow.com/users/3037257/pranav-ram"">
<img src=""https://stackoverflow.com/users/flair/3037257.png?theme=dark"" width=""208"" height=""58"" alt=""profile for Pranav Ram at Stack Overflow, Q&amp;A for professional and enthusiast programmers"" title=""profile for Pranav Ram at Stack Overflow, Q&amp;A for professional and enthusiast programmers"">
</a></p>

<p><hr>
<a href=""http://buymeacoff.ee/pranavc"" rel=""nofollow noreferrer""><img src=""https://www.buymeacoffee.com/assets/img/custom_images/orange_img.png"" alt=""Buy Me A Coffee""></a></p>

<p><strong><a href=""https://in.linkedin.com/in/pranavcbalan"" rel=""nofollow noreferrer"">LinkedIn</a></strong></p>

<p><strong><a href=""https://facebook.com/pranavcbalan"" rel=""nofollow noreferrer"">Facebook</a></strong></p>

<p><a href=""https://twitter.com/pranavcbalan"" rel=""nofollow noreferrer""><strong>Twitter</strong></a>
<hr>
Mail Id : <strong>pranavcbalan@gmail.com</strong></p>

<hr>

<p><a href=""https://paypal.me/pranavcbalan?locale.x=en_GB"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/zgqxX.png"" alt=""[PayPal]""></a></p>

<hr>

<p>Loves to solve problems, learn new things and help others.</p>
","7845","3170","1460","https://i.stack.imgur.com/nq6Zo.jpg","","3643696"
"57029273","2","","57029258","2019-07-14 16:38:25","","67","","<p>You should use <code>null</code>. In most cases it doesn't matter, but it is a good habit to get into anyway, because occasionally you may want to check if a list of non-comparable things is empty. Here is a short, crisp example showing this difference:</p>

<pre><code>&gt; null [id]
False
&gt; [id] == []
&lt;interactive&gt;:1:1: error:
    • No instance for (Eq (a0 -&gt; a0)) arising from a use of ‘==’
        (maybe you haven't applied a function to enough arguments?)
    • In the expression: [id] == []
      In an equation for ‘it’: it = [id] == []
</code></pre>
","791604","","","","","2019-07-14 16:38:25","","","","3","","","","791604","115154","2011-06-09 19:26:21","Daniel Wagner","2020-03-15 04:10:51","http://dmwit.com","","","8948","1343","475","","","416300"
"54300159","2","","12589481","2019-01-22 01:50:41","","67","","<p>TLDR; Pandas <code>groupby.agg</code> has a new, easier syntax for specifying (1) aggregations on multiple columns, and (2) multiple aggregations on a column. So, to do this for <strong>pandas >= 0.25</strong>, use </p>

<pre><code>df.groupby('dummy').agg(Mean=('returns', 'mean'), Sum=('returns', 'sum'))

           Mean       Sum
dummy                    
1      0.036901  0.369012
</code></pre>

<p>OR </p>

<pre><code>df.groupby('dummy')['returns'].agg(Mean='mean', Sum='sum')

           Mean       Sum
dummy                    
1      0.036901  0.369012
</code></pre>

<hr>

<h1>Pandas >= 0.25: <a href=""https://pandas-docs.github.io/pandas-docs-travis/user_guide/groupby.html#named-aggregation"" rel=""noreferrer"">Named Aggregation</a></h1>

<p>Pandas has changed the behavior of <code>GroupBy.agg</code> in favour of a more intuitive syntax for specifying named aggregations. See the <a href=""https://pandas-docs.github.io/pandas-docs-travis/whatsnew/v0.25.0.html#enhancements"" rel=""noreferrer"">0.25 docs section on Enhancements</a> as well as relevant GitHub issues <a href=""https://github.com/pandas-dev/pandas/issues/18366"" rel=""noreferrer"">GH18366</a> and <a href=""https://github.com/pandas-dev/pandas/issues/26512"" rel=""noreferrer"">GH26512</a>.</p>

<p>From the documentation, </p>

<blockquote>
  <p>To support column-specific aggregation with control over the output
  column names, pandas accepts the special syntax in <code>GroupBy.agg()</code>,
  known as “named aggregation”, where</p>
  
  <ul>
  <li>The keywords are the output column names</li>
  <li>The values are tuples whose first element is the column to select and the second element is the aggregation to apply to that column.
  Pandas provides the pandas.NamedAgg namedtuple with the fields
  ['column', 'aggfunc'] to make it clearer what the arguments are. As
  usual, the aggregation can be a callable or a string alias.</li>
  </ul>
</blockquote>

<p>You can now pass a tuple via keyword arguments. The tuples follow the format of <code>(&lt;colName&gt;, &lt;aggFunc&gt;)</code>.</p>

<pre><code>import pandas as pd

pd.__version__                                                                                                                            
# '0.25.0.dev0+840.g989f912ee'

# Setup
df = pd.DataFrame({'kind': ['cat', 'dog', 'cat', 'dog'],
                   'height': [9.1, 6.0, 9.5, 34.0],
                   'weight': [7.9, 7.5, 9.9, 198.0]
})

df.groupby('kind').agg(
    max_height=('height', 'max'), min_weight=('weight', 'min'),)

      max_height  min_weight
kind                        
cat          9.5         7.9
dog         34.0         7.5
</code></pre>

<p>Alternatively, you can use <code>pd.NamedAgg</code> (essentially a namedtuple) which makes things more explicit.</p>

<pre><code>df.groupby('kind').agg(
    max_height=pd.NamedAgg(column='height', aggfunc='max'), 
    min_weight=pd.NamedAgg(column='weight', aggfunc='min')
)

      max_height  min_weight
kind                        
cat          9.5         7.9
dog         34.0         7.5
</code></pre>

<p>It is even simpler for Series, just pass the aggfunc to a keyword argument.</p>

<pre><code>df.groupby('kind')['height'].agg(max_height='max', min_height='min')    

      max_height  min_height
kind                        
cat          9.5         9.1
dog         34.0         6.0       
</code></pre>

<p>Lastly, if your column names aren't valid python identifiers, use a dictionary with unpacking:</p>

<pre><code>df.groupby('kind')['height'].agg(**{'max height': 'max', ...})
</code></pre>

<hr>

<h1>Pandas &lt; 0.25</h1>

<p>In more recent versions of pandas leading upto 0.24, if using a dictionary for specifying column names for the aggregation output, you will get a <code>FutureWarning</code>:</p>

<pre><code>df.groupby('dummy').agg({'returns': {'Mean': 'mean', 'Sum': 'sum'}})
# FutureWarning: using a dict with renaming is deprecated and will be removed 
# in a future version
</code></pre>

<p><a href=""http://pandas.pydata.org/pandas-docs/version/0.20/whatsnew.html#deprecate-groupby-agg-with-a-dictionary-when-renaming"" rel=""noreferrer"">Using a dictionary for renaming columns is deprecated in v0.20.</a> On more recent versions of pandas, this can be specified more simply by passing a list of tuples. If specifying the functions this way, <em>all</em> functions for that column need to be specified as tuples of (name, function) pairs.</p>

<pre><code>df.groupby(""dummy"").agg({'returns': [('op1', 'sum'), ('op2', 'mean')]})

        returns          
            op1       op2
dummy                    
1      0.328953  0.032895
</code></pre>

<p>Or,</p>

<pre><code>df.groupby(""dummy"")['returns'].agg([('op1', 'sum'), ('op2', 'mean')])

            op1       op2
dummy                    
1      0.328953  0.032895
</code></pre>
","4909087","","4909087","","2019-12-08 09:34:11","2019-12-08 09:34:11","","","","4","","","","4909087","195757","2015-05-17 14:31:31","cs95","2020-03-15 02:58:01","","At an ipython shell near you","<h2><a href=""https://meta.stackoverflow.com/questions/386324/the-stack-overflow-i-wish-to-build-and-participate-in-is-no-longer-supported"">The Stack Overflow I wish to build and participate in no longer exists.</a></h2>

<h1><a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">My pandas canonicals</a> ⬅ please critique!</h1>

<p>When asking a question here, please describe the problem you are trying to solve, rather than asking about the method you <em>think</em> is the solution to that problem. This is known as the <a href=""https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem"">XY problem</a> and can easily be averted if you ask the right questions. This will make it easy for us to understand what you're trying to do, and you may even receive better suggestions that you may never have considered yourself. </p>

<h3><strong>Rep = participation</strong></h3>

<h3><strong>Badges = quality</strong></h3>

<h3><strong><s>1 like = 1 prayer </s> 1 upvote = 1 thanks</strong></h3>

<p><a href=""https://stackoverflow.com/users/4909087/coldspeed""><img src=""https://stackoverflow.com/users/flair/4909087.png"" width=""208"" height=""58"" alt=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers"" title=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers""></a></p>

<p><a href=""https://i.stack.imgur.com/YfCOa.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YfCOa.gif"" alt=""enter image description here""></a></p>

<p><a href=""https://stackoverflow.com/a/53915214/4909087"">Some people, when confronted with a problem, think ""I know, I'll use regular expressions."" Now they have two problems.</a></p>

<hr>

<h2>(Actively Maintained) Pandas Canonicals</h2>

<p>The full list is on <a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">GitHub</a>.</p>

<ul>
<li><a href=""https://stackoverflow.com/q/53645882/pandas-merging-101"">Pandas Merging 101</a>: Everything you ever wanted to know about merging and more</li>
<li><a href=""https://stackoverflow.com/a/55557758"">How to iterate over a DataFrame.</a> Spoler alert: don't!</li>
<li><a href=""https://stackoverflow.com/a/54508052"">How to convert a DataFrame to NumPy array</a>: from 0.24, use <code>df.to_numpy()</code></li>
<li><a href=""https://stackoverflow.com/a/56746204/4909087"">The Right Way to create an empty DataFrame and fill it</a>: Use a list to grow your data, not a DataFrame</li>
<li><a href=""https://stackoverflow.com/a/59242208/4909087"">Don't use <code>inplace=True</code>!</a></li>
</ul>

<h2>Other Posts I'm Proud Of</h2>

<ul>
<li>Pandas Merging 101 (see above)</li>
<li><a href=""https://stackoverflow.com/a/50312321/4909087"">Best way to interleave two lists</a></li>
<li><a href=""https://stackoverflow.com/questions/47007680/strange-use-of-pythons-and-operator/47007761#47007761"">How do &quot;and&quot; and &quot;or&quot; act with non-boolean values?</a></li>
<li><a href=""https://stackoverflow.com/a/46333422/4909087"">So you think you know recursion?</a></li>
</ul>

<p>In addition to this, some of my <a href=""https://stackoverflow.com/search?tab=votes&amp;q=user%3a4909087%20perfplot"">answers that use <code>perfplot</code></a> are worth a read.</p>

<hr>

<h3>236th awardee of the <a href=""https://stackoverflow.com/help/badges/146/legendary"">Legendary</a> badge.</h3>

<p>Thanks, Stack Overflow! I love the shirt :-)</p>

<p><a href=""https://i.stack.imgur.com/7YKND.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7YKND.jpg"" alt=""enter image description here""></a></p>
","57988","9183","7537","https://i.stack.imgur.com/LmD3e.png?s=128&g=1","","6321039"
"56463565","2","","56463341","2019-06-05 15:27:32","","66","","<p>This declaration</p>

<pre><code>char str[] = ""geeksforgeeks"";
</code></pre>

<p>declares a character array that contains a string that is a sequence of characters including the terminating zero symbol <code>'\0'</code>.</p>

<p>You can imagine the declaration the following equivalent way</p>

<pre><code>char str[] = 
{ 
    'g', 'e', 'e', 'k', 's', 'f', 'o', 'r', 'g', 'e', 'e', 'k', 's', '\0'
};
</code></pre>

<p>This call of the function <code>memset</code></p>

<pre><code>memset(str, 't', sizeof(str));
</code></pre>

<p>overrides all characters of the array including the terminating zero.</p>

<p>So the next statement</p>

<pre><code>cout &lt;&lt; str &lt;&lt; endl;
</code></pre>

<p>results in undefined behaviour because it outpuuts characters until the terminating zero is encountered.</p>

<p>You could write instead</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;cstring&gt;

int main()
{
    char str[] = ""geeksforgeeks"";

    std::memset( str, 't', sizeof( str ) - 1 );

    std::cout &lt;&lt; str &lt;&lt; '\n';
}
</code></pre>

<p>Or the following way</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;cstring&gt;

int main()
{
    char str[] = ""geeksforgeeks"";

    std::memset( str, 't', std::strlen( str ) );

    std::cout &lt;&lt; str &lt;&lt; '\n';
}
</code></pre>

<p>That is keeping the terminating zero unchanged in the array.</p>

<p>If you want to override all characters of the array including the terminating zero, then you should substitute this statement</p>

<pre><code>std::cout &lt;&lt; str &lt;&lt; '\n';
</code></pre>

<p>for this statement</p>

<pre><code>std::cout.write( str, sizeof( str ) ) &lt;&lt; '\n';
</code></pre>

<p>as it is shown in the program below because the array now does not contain a string.</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;cstring&gt;

int main()
{
    char str[] = ""geeksforgeeks"";

    std::memset( str, 't', sizeof( str ) );

    std::cout.write( str, sizeof( str ) ) &lt;&lt; '\n';
}
</code></pre>

<p>As for this call</p>

<pre><code>memset(str, ""t"", sizeof(str));
</code></pre>

<p>then the type of the second argument (that is the type <code>const char *</code>) does not correspond to the type of the second function parameter that has the type <code>int</code>. See the declaration of the function</p>

<pre><code>void * memset ( void * ptr, int value, size_t num );
</code></pre>

<p>Thus the compiler issues an error message.</p>

<p>Apart from character arrays (that are used very often even in C++) you can use also the standard class <code>std::string</code> (or <code>std::basic_string</code>) that simulates strings.</p>

<p>In this case there is no need to use the standard C function memset to fill a string with a single character. The simplest way to do this is the following</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;string&gt;

int main()
{
    std::string s( ""geeksforgeeks"" );

    s.assign( s.length(), 't' );

    std::cout &lt;&lt; s &lt;&lt; '\n';
}
</code></pre>

<p>Another way is to use the standard algorithm <code>std::fill</code> or <code>std::fill_n</code> declared in the header <code>&lt;algorithm&gt;</code>. For example</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;iterator&gt;
#include &lt;algorithm&gt;

int main()
{
    std::string s( ""geeksforgeeks"" );

    std::fill( std::begin( s ), std::end( s ), 't' );

    std::cout &lt;&lt; s &lt;&lt; '\n';
}
</code></pre>

<p>or</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;string&gt;
#include &lt;iterator&gt;
#include &lt;algorithm&gt;

int main()
{
    std::string s( ""geeksforgeeks"" );

    std::fill_n( std::begin( s ), s.length(), 't' );

    std::cout &lt;&lt; s &lt;&lt; '\n';
}
</code></pre>

<p>You even can use the method <code>replace</code> of the class <code>std::string</code> one of the following ways</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;string&gt;

int main()
{
    std::string s( ""geeksforgeeks"" );

    s.replace( 0, s.length(), s.length(), 't' );

    std::cout &lt;&lt; s &lt;&lt; '\n';
}
</code></pre>

<p>Or</p>

<pre><code>#include &lt;iostream&gt;
#include &lt;string&gt;

int main()
{
    std::string s( ""geeksforgeeks"" );

    s.replace( std::begin( s ), std::end( s ), s.length(), 't' );

    std::cout &lt;&lt; s &lt;&lt; '\n';
}
</code></pre>
","2877241","","2877241","","2019-06-06 12:32:39","2019-06-06 12:32:39","","","","7","","","","2877241","179648","2013-10-13 23:45:02","Vlad from Moscow","2020-03-14 21:36:43","http://cpp.forum24.ru/","Moscow, Russia","<p><strong>Unemployed.</strong><br />Do you need a programmer? Email me at vlad.moscow@mail.ru</p>

<p><hr />
I liked the IBM mainframe PL/X language. It is me who wrote CTRACE record filtering for the IBM mainframe NFS server using the OOP features of the language.
<hr />
<strong><em>News:</em></strong> The defect of the C++ STL relative to class std::basic_string was rectified as I proposed. See <a href=""http://cpp.forum24.ru/?1-3-0-00000062-000-0-0-1402949471"" rel=""nofollow"">Defect of the C++ Standard relative to std::basic_string</a> </p>

<p><strong><em>News:</em></strong> In the ACCU Overload #126 (April, 2015) there is published my article <strong>""iterator-pair - A Simple and Useful Iterator Adapter""</strong>. I hope it will be interesting for C++ programmers.<a href=""http://accu.org/var/uploads/journals/Overload126.pdf"" rel=""nofollow"">See it here</a>  You may leave your comments to the article <a href=""http://cpp.forum24.ru/?1-10-0-00000000-000-0-0-1428232189"" rel=""nofollow"">in this thread</a></p>
","15057","3005","1471","https://www.gravatar.com/avatar/63d17ecdadc8917254be4fb70e86246b?s=128&d=identicon&r=PG&f=1","","3433601"
"55934491","2","","55934490","2019-05-01 09:56:54","","66","","<p>Reserved keywords cannot be used as <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Lexical_grammar#Reserved_word_usage"" rel=""noreferrer"">identifiers (variable names)</a>. Unlike most other special Javascript words (like those listed in the question, <code>let</code>, <code>finally</code>, ...), <code>await</code> is <em>not</em> a reserved keyword, so using it as a variable name does not throw a SyntaxError. Why wasn't it made into a reserved keyword when the new syntax came out?</p>

<h1>Backwards compatibility</h1>

<p>Back in 2011, when ES5 was still a relatively new thing, code that used <code>await</code> (and <code>async</code>) as variable names was perfectly valid, so you may have seen something like this on a couple sites:</p>

<pre><code>function timeout(ms) {
  var await = $.Deferred();
  setTimeout(await.resolve, ms);
  return await.promise();
};
</code></pre>

<p>The choice of that variable name may seem odd, but there was nothing <em>wrong</em> with it. <code>await</code> and <code>async</code> have never been reserved keywords - if the writers of the ES2017 specification made <code>await</code> into a reserved keyword, and browsers implemented that change, people visiting those older sites on newer browsers would not be able to use those sites; they would likely be broken.</p>

<p>So perhaps if they were made into reserved keywords, a <em>few</em> sites which chose a peculiar variable name wouldn't work properly - why should the existence of those sites permanently affect the future evolution of ECMAscript and result in confusing code like in the question?</p>

<p><strong>Because browsers will refuse to implement a feature which breaks existing sites.</strong> If a user finds that a site does not work on one browser, but works on another, that will incentivize them to switch browsers - the maker of the first browser would not want that, because that would mean less market share for them, even if it's a feature which makes the language more consistent and understandable. In addition, the editors of the specification do not want to add something that will never be implemented (or will only be implemented sporadically), because then the specification would lose some of its status as a standard - contrary to its main goal.</p>

<p>You could see these interactions in action with <a href=""https://github.com/tc39/proposal-flatMap/pull/56"" rel=""noreferrer""><code>Array.prototype.flatten</code></a> and <a href=""https://bugzilla.mozilla.org/show_bug.cgi?id=1075059"" rel=""noreferrer""><code>Array.prototype.contains</code></a> - when browsers started shipping them, it was found that they broke a few existing sites due to name conflicts, so the browsers backed out of the implementation, and the specification had to be tweaked (the methods were renamed to <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat"" rel=""noreferrer""><code>.flat</code></a> and <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/includes"" rel=""noreferrer""><code>.includes</code></a>).</p>

<hr>

<p>There actually <em>is</em> a situation in which <code>await</code> cannot be used as an identifier, which is inside of ES6 modules:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;script type=""module""&gt;
  const await = 'Does it work?';
&lt;/script&gt;</code></pre>
</div>
</div>
</p>

<p>This is because while ES6 (ES2015) modules were being figured out, <code>async</code>/<code>await</code> was already on the horizon (<a href=""https://github.com/tc39/ecmascript-asyncawait/commit/97b5cbee1594b2861f3e9f4771beb39747ba064c"" rel=""noreferrer"">initial commit for the <code>async</code>/<code>await</code> proposal</a> can be seen at the beginning of 2014), so while designing modules, <code>await</code> could be made a reserved keyword in preparation for the future, without breaking any existing sites.</p>

<hr>

<p>With regards to the first snippet in the question:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const foo = await /barbaz/
myFn()</code></pre>
</div>
</div>
</p>

<p>This is syntactically valid because <code>await</code> is a valid variable name outside of <code>async</code> functions, and the interpreter thinks you're trying to <em>divide</em>, rather than use a regular expression:</p>

<pre><code>const foo = await / barbaz / myFn()
</code></pre>

<p>Not relying on Automatic Semicolon Insertion would have identified the problem earlier, because the last <code>/</code> could not have been interpreted as division:</p>

<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const foo = await /barbaz/;
myFn();</code></pre>
</div>
</div>
</p>

<p>This exact somewhat-ambiguous situation was actually specifically brought up in a <a href=""https://github.com/rwaldron/tc39-notes/blob/master/es7/2016-07/jul-28.md#10iv-async-functions"" rel=""noreferrer"">TC39 meeting</a> on <code>async</code>/<code>await</code>:</p>

<blockquote>
  <p><strong>YK:</strong> What are you worried about?</p>
  
  <p><strong>WH:</strong> Ambiguities on code sequences that start with await/ and then get interpreted in diverging ways (due to the await-as-identifier vs await-as-operator distinction that flips the / between division and starting a regexp) by cover grammars vs. real grammars. It's a potential bug farm.</p>
</blockquote>
","9515207","","","","","2019-05-01 09:56:54","","","","2","","","","9515207","170251","2018-03-19 07:56:42","CertainPerformance","2020-03-15 05:06:04","","Austin, TX, USA","<p>Check out my <a href=""https://github.com/CertainPerformance/Stack-Exchange-Userscripts"" rel=""nofollow noreferrer"">userscripts</a> for useful tools and UI improvements for Stack Exchange sites.</p>
","28723","3188","24875","https://www.gravatar.com/avatar/34932d3e923ffad9a4a1423e30b1d9fc?s=128&d=identicon&r=PG&f=1","","13173718"
"55397133","2","","55397023","2019-03-28 12:01:18","","65","","<p>Marking a function as <code>async</code> or <code>async*</code> allows it to use <code>async</code>/<code>await</code> keyword to use a <code>Future</code>.</p>

<p>The difference between both is that <code>async*</code> will always returns a <code>Stream</code> and offer some syntax sugar to emit a value through <code>yield</code> keyword.</p>

<p>We can therefore do the following:</p>

<pre><code>Stream&lt;int&gt; foo() async* {
  for (int i = 0; i &lt; 42; i++) {
    await Future.delayed(const Duration(seconds: 1));
    yield i;
  }
}
</code></pre>

<p>This function emits a value every second, that increment every time</p>
","8394265","","","","","2019-03-28 12:01:18","","","","2","","","","8394265","87647","2017-07-31 13:22:44","Rémi Rousselet","2020-03-15 02:28:41","","Paris, France","<p><em>Dart makes my heart Flutter</em></p>

<p>Some interesting Flutter topics: </p>

<ul>
<li><a href=""https://medium.com/@darky12s/flutter-reducing-widgets-boilerplate-3e635f10685e"" rel=""nofollow noreferrer"">https://medium.com/@darky12s/flutter-reducing-widgets-boilerplate-3e635f10685e</a></li>
<li><a href=""https://stackoverflow.com/questions/53972392/custom-width-height-property-for-a-widget-are-ignored/53972393"">Custom width/height property for a widget are ignored</a></li>
<li><a href=""https://stackoverflow.com/questions/46057353/controlling-state-from-outside-of-a-statefulwidget/51460832"">Controlling State from outside of a StatefulWidget</a></li>
<li><a href=""https://stackoverflow.com/questions/50080860/what-are-keys-in-the-stateless-widgets-class/50081052#50081052"">What are Keys in the Stateless widgets class?</a></li>
<li><a href=""https://stackoverflow.com/questions/53234825/what-is-the-difference-between-functions-and-classes-to-create-widgets/53234826#53234826"">What is the difference between functions and classes to create widgets?</a></li>
<li><a href=""https://stackoverflow.com/questions/52249578/how-to-deal-with-unwanted-widget-build"">How to deal with unwanted widget build?</a></li>
<li><a href=""https://stackoverflow.com/questions/53467979/understanding-flutter-render-engine"">Understanding Flutter Render Engine</a></li>
<li><a href=""https://stackoverflow.com/questions/44004451/navigator-operation-requested-with-a-context-that-does-not-include-a-navigator/51292613#51292613"">Navigator operation requested with a context that does not include a Navigator</a></li>
<li><a href=""https://stackoverflow.com/questions/47501710/what-is-the-relation-between-stateful-and-stateless-widgets-in-flutter/47502202#47502202"">What is the relation between stateful and stateless widgets in Flutter?</a></li>
<li><a href=""https://stackoverflow.com/questions/50818770/passing-data-to-a-stateful-widget/50818870"">Passing Data to a Stateful Widget</a></li>
</ul>
","9664","239","246","","","11452143"
"57400933","2","","57400874","2019-08-07 19:12:56","","65","","<p>This has nothing to do with how the return type is deduced and everything to do with <a href=""https://en.cppreference.com/w/cpp/language/operator_precedence"" rel=""noreferrer"">operator precedence</a>.  When you have</p>

<pre><code>std::cout &lt;&lt; (abs(c2-c1) == abs(r2-r1)) ? 1 : 2 &lt;&lt; std::endl;
</code></pre>

<p>it isn't</p>

<pre><code>std::cout &lt;&lt; ((abs(c2-c1) == abs(r2-r1)) ? 1 : 2) &lt;&lt; std::endl;
</code></pre>

<p>because <code>?:</code> has lower precedence than <code>&lt;&lt;</code>.  That means what you actually have is</p>

<pre><code>(std::cout &lt;&lt; (abs(c2-c1) == abs(r2-r1))) ? 1 : (2 &lt;&lt; std::endl);
</code></pre>

<p>and this is why you get an error about an <code>&lt;unresolved overloaded function type&gt;</code>.  Just use parentheses like </p>

<pre><code>std::cout &lt;&lt; ((abs(c2-c1) == abs(r2-r1)) ? 1 : 2) &lt;&lt; std::endl;
</code></pre>

<p>and you'll be okay.</p>
","4342498","","6372809","","2019-08-08 19:24:19","2019-08-08 19:24:19","","","","5","","","","4342498","132431","2014-12-09 17:25:47","NathanOliver","2020-03-15 02:15:07","","Chicago Land Area","<p>I have been programming for the last 20 years and I primarily use C++ and PL/SQL today.  I have used C#, Java and VB.  I tend towards programming algorithms but I have made a few database based enterprise application to plug into an existing application to extend functionality.</p>

<p>Join us at the <a href=""http://chat.stackoverflow.com/rooms/41570/so-close-vote-reviewers"">SO Close Vote Reviewers Chat Room</a> If you want to help with coordinated site cleanup.</p>
","18852","4145","7007","https://i.stack.imgur.com/l3j88.jpg?s=128&g=1","","5460139"
"56369368","2","","56369080","2019-05-29 22:32:46","","65","","<p>In C++ the bit representation (and even the size) of a <code>bool</code> is implementation defined; generally it's implemented as a <code>char</code>-sized type taking 1 or 0 as possible values.</p>

<p>If you set its value to anything different from the allowed ones (in this specific case by aliasing a <code>bool</code> through a <code>char</code> and modifying its bit representation), you are breaking the rules of the language, so anything can happen. In particular, it's explicitly specified in the standard that a ""broken"" <code>bool</code> may behave as both <code>true</code> and <code>false</code> (or neither <code>true</code> nor <code>false</code>) at the same time:</p>

<blockquote>
  <p>Using a <code>bool</code> value in ways described by this International Standard as “undefined,” such as by examining the value of an uninitialized automatic object, might cause it to behave as if it is neither <code>true</code> nor <code>false</code></p>
</blockquote>

<p>(C++11, [basic.fundamental], note 47)</p>

<hr>

<p>In this particular case, <a href=""https://gcc.godbolt.org/z/3P5DYR"" rel=""noreferrer"">you can see how it ended up in this bizarre situation</a>: the first <code>if</code> gets compiled to </p>

<pre><code>    movzx   eax, BYTE PTR [rbp-33]
    test    al, al
    je      .L22
</code></pre>

<p>which loads <code>T</code> in <code>eax</code> (with zero extension), and skips the print if it's all zero; the next if instead is</p>

<pre><code>    movzx   eax, BYTE PTR [rbp-33]
    xor     eax, 1
    test    al, al
    je      .L23
</code></pre>

<p>The test <code>if(T == false)</code> is transformed to <code>if(T^1)</code>, which flips just the low bit. This would be ok for a valid <code>bool</code>, but for your ""broken"" one it doesn't cut it. </p>

<p>Notice that this bizarre sequence is only generated at low optimization levels; at higher levels this is generally going to boil down to a zero/nonzero check, and a sequence like yours is likely to become <a href=""https://gcc.godbolt.org/z/9I0OR-"" rel=""noreferrer"">a single test/conditional branch</a>. You will get bizarre behavior anyway in other contexts, e.g. when summing <code>bool</code> values to other integers:</p>

<pre><code>int foo(bool b, int i) {
    return i + b;
}
</code></pre>

<p><a href=""https://gcc.godbolt.org/z/07suQv"" rel=""noreferrer"">becomes</a></p>

<pre><code>foo(bool, int):
        movzx   edi, dil
        lea     eax, [rdi+rsi]
        ret
</code></pre>

<p>where <code>dil</code> is ""trusted"" to be 0/1.</p>

<hr>

<p>If your program is all C++, then the solution is simple: don't break <code>bool</code> values this way, avoid messing with their bit representation and everything will go well; in particular, even if you assign from an integer to a <code>bool</code> the compiler will emit the necessary code to make sure that the resulting value is a valid <code>bool</code>, so your <code>bool T = 3</code> is indeed safe, and <code>T</code> will end up with a <code>true</code> in its guts.</p>

<p>If instead you need to interoperate with code written in other languages that may not share the same idea of what a <code>bool</code> is, just avoid <code>bool</code> for ""boundary"" code, and marshal it as an appropriately-sized integer. It will work in conditionals &amp; co. just as fine. </p>

<hr>

<h3>Update about the Fortran/interoperability side of the issue</h3>

<blockquote>
  <p><em>Disclaimer</em> all I know of Fortran is what I read this morning on standard documents, and that I have some punched cards with Fortran listings that I use as bookmarks, so go easy on me.</p>
</blockquote>

<p>First of all, this kind of language interoperability stuff isn't part of the language standards, but of the platform ABI. As we are talking about Linux x86-64, the relevant document is <a href=""https://www.uclibc.org/docs/psABI-x86_64.pdf"" rel=""noreferrer"">the System V x86-64 ABI</a>.</p>

<p>First of all, nowhere is specified that the C <code>_Bool</code> type (which is defined to be the same as C++ <code>bool</code> at 3.1.2 note †) has any kind of compatibility with Fortran <code>LOGICAL</code>; in particular, at 9.2.2 table 9.2 specifies that ""plain"" <code>LOGICAL</code> is mapped to <code>signed int</code>. About <code>TYPE*N</code> types it says that</p>

<blockquote>
  <p>The “<code>TYPE*N</code>” notation specifies that variables or aggregate members of type <code>TYPE</code> shall occupy <code>N</code> bytes of storage.</p>
</blockquote>

<p>(ibid.)</p>

<p>There's no equivalent type explicitly specified for <code>LOGICAL*1</code>, and it's understandable: it's not even standard; indeed if you try to compile a Fortran program containing a <code>LOGICAL*1</code> in Fortran 95 compliant mode you get warnings about it, both by ifort</p>

<pre><code>./example.f90(2): warning #6916: Fortran 95 does not allow this length specification.   [1]

    logical*1, intent(in) :: x

------------^
</code></pre>

<p>and by gfort</p>

<pre><code>./example.f90:2:13:
     logical*1, intent(in) :: x
             1
Error: GNU Extension: Nonstandard type declaration LOGICAL*1 at (1)
</code></pre>

<p>so the waters are already muddled; so, combining the two rules above, I'd go for <code>signed char</code> to be safe.</p>

<p><em>However</em>: the ABI also specifies:</p>

<blockquote>
  <p>The values for type <code>LOGICAL</code> are <code>.TRUE.</code> implemented as 1 and <code>.FALSE.</code>
  implemented as 0.</p>
</blockquote>

<p>So, if you have a program that stores anything besides 1 and 0 in a <code>LOGICAL</code> value, <em>you are already out of spec on the Fortran side</em>! You say:</p>

<blockquote>
  <p>A fortran <code>logical*1</code> has same representation as <code>bool</code>, but in fortran if bits are 00000011 it is <code>true</code>, in C++ it is undefined.</p>
</blockquote>

<p>This last statement is not true, the Fortran standard is representation-agnostic, and the ABI explicitly says the contrary. Indeed you can see this in action easily by <a href=""https://gcc.godbolt.org/z/dh-a-c"" rel=""noreferrer"">checking the output of gfort for <code>LOGICAL</code> comparison</a>:</p>

<pre><code>integer function logical_compare(x, y)
    logical, intent(in) :: x
    logical, intent(in) :: y
    if (x .eqv. y) then
        logical_compare = 12
    else
        logical_compare = 24
    end if
end function logical_compare
</code></pre>

<p>becomes</p>

<pre><code>logical_compare_:
        mov     eax, DWORD PTR [rsi]
        mov     edx, 24
        cmp     DWORD PTR [rdi], eax
        mov     eax, 12
        cmovne  eax, edx
        ret
</code></pre>

<p>You'll notice that there's a straight <code>cmp</code> between the two values, without normalizing them first (unlike <code>ifort</code>, that is more conservative in this regard).</p>

<p>Even more interesting: regardless of what the ABI says, ifort by default uses a nonstandard representation for <code>LOGICAL</code>; this is explained in the <a href=""https://software.intel.com/en-us/fortran-compiler-developer-guide-and-reference-fpscomp"" rel=""noreferrer""><code>-fpscomp logicals</code></a> switch documentation, which also specifies some interesting details about <code>LOGICAL</code> and cross-language compatibility:</p>

<blockquote>
  <p>Specifies that integers with a non-zero value are treated as true, integers with a zero value are treated as false. The literal constant .TRUE. has an integer value of 1, and the literal constant .FALSE. has an integer value of 0. This representation is used by Intel Fortran releases before Version 8.0 and by Fortran PowerStation.</p>
  
  <p>The default is <code>fpscomp nologicals</code>, which specifies that odd integer values (low bit one) are treated as true and even integer values (low bit zero) are treated as false.</p>
  
  <p>The literal constant .TRUE. has an integer value of -1, and the literal constant .FALSE. has an integer value of 0. This representation is used by Compaq Visual Fortran. The internal representation of LOGICAL values is not specified by the Fortran standard. <strong><em>Programs which use integer values in LOGICAL contexts, or which pass LOGICAL values to procedures written in other languages, are non-portable and may not execute correctly. Intel recommends that you avoid coding practices that depend on the internal representation of LOGICAL values.</em></strong></p>
</blockquote>

<p>(emphasis added)</p>

<p>Now, the internal representation of a <code>LOGICAL</code> normally shouldn't a problem, as, from what I gather, if you play ""by the rules"" and don't cross language boundaries you aren't going to notice. For a standard compliant program there's no ""straight conversion"" between <code>INTEGER</code> and <code>LOGICAL</code>; the only way I see you can shove an <code>INTEGER</code> into a <code>LOGICAL</code> seem to be <code>TRANSFER</code>, which is intrinsically non-portable and give no real guarantees, or the non-standard <code>INTEGER</code> &lt;-> <code>LOGICAL</code> conversion on assignment.</p>

<p>The latter one <a href=""https://gcc.gnu.org/onlinedocs/gfortran/Implicitly-convert-LOGICAL-and-INTEGER-values.html"" rel=""noreferrer"">is documented</a> by gfort to always result in nonzero -> <code>.TRUE.</code>, zero -> <code>.FALSE.</code>, and <a href=""https://gcc.godbolt.org/z/y5taV2"" rel=""noreferrer"">you can see</a> that in all cases code is generated to make this happen (even though it's convoluted code in case of ifort with the legacy representation), so you cannot seem to shove an arbitrary integer into a <code>LOGICAL</code> in this way.</p>

<pre><code>logical*1 function integer_to_logical(x)
    integer, intent(in) :: x
    integer_to_logical = x
    return
end function integer_to_logical
</code></pre>

<pre><code>integer_to_logical_:
        mov     eax, DWORD PTR [rdi]
        test    eax, eax
        setne   al
        ret
</code></pre>

<p>The reverse conversion for a <code>LOGICAL*1</code> is a straight integer zero-extension (gfort), so, to be honoring the contract in the documentation linked above, it's clearly expecting the <code>LOGICAL</code> value to be 0 or 1.</p>

<p>But in general, the situation for these conversions is <a href=""https://www.reddit.com/r/fortran/comments/a8dzvs/ifort_implicit_logicaltointeger_conversion_of/"" rel=""noreferrer"">a bit</a> of <a href=""https://groups.google.com/forum/#!topic/gg95/yQqAlfzIBDU"" rel=""noreferrer"">a mess</a>, so I'd just stay away from them.</p>

<hr>

<p>So, long story short: avoid putting <code>INTEGER</code> data into <code>LOGICAL</code> values, as it is bad even in Fortran, and make sure to use the correct compiler flag to get the ABI-compliant representation for booleans, and interoperability with C/C++ should be fine. But to be extra safe, I'd just use plain <code>char</code> on the C++ side.</p>

<p>Finally, from what I gather <a href=""https://software.intel.com/en-us/fortran-compiler-developer-guide-and-reference-scalar-types"" rel=""noreferrer"">from the documentation</a>, in ifort there is some builtin support for interoperability with C, including booleans; you may try to leverage it.</p>
","214671","","214671","","2019-05-31 13:06:05","2019-05-31 13:06:05","","","","16","","","","214671","108664","2009-11-19 15:06:27","Matteo Italia","2020-03-13 20:24:43","https://bitbucket.org/mitalia/","Milan, Italy","<p>Physics BSc at <a href=""http://www.unimi.it/"" rel=""nofollow noreferrer"">Unimi</a>, software developer at <a href=""http://www.comelz.com/?lang=en"" rel=""nofollow noreferrer"">Comelz</a>.</p>

<hr>

<p><code>unsigned char</code>izard uses ""aliasing""!</p>

<p>It's super effective!</p>

<hr>

<p>Every morning <code>int</code>, <code>double</code> and <code>size_t</code> wake up and go to buy the newspaper. They read the news together, then <code>int</code> and <code>double</code> check their horoscope; <code>size_t</code> never bothers. Why? </p>

<hr>

<p><a href=""https://photos.app.goo.gl/RQ8UL3NtJJkex6kYA"" rel=""nofollow noreferrer"">My 80186 cats collection</a></p>
","8058","12664","542","","","74769"
"54304691","2","","15222754","2019-01-22 09:06:56","","65","","<p>(updated for)</p>

<h1>Pandas >= 0.16</h1>

<h3><code>pd.Series.mode</code> is available.</h3>

<p>Use <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.groupby.html"" rel=""noreferrer""><code>groupby</code></a>, <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.core.groupby.DataFrameGroupBy.agg.html"" rel=""noreferrer""><code>GroupBy.agg</code></a>, and apply the <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.mode.html"" rel=""noreferrer""><code>pd.Series.mode</code></a> function to each group:</p>

<pre><code>source.groupby(['Country','City'])['Short name'].agg(pd.Series.mode)

Country  City            
Russia   Sankt-Petersburg    Spb
USA      New-York             NY
Name: Short name, dtype: object
</code></pre>

<p>If this is needed as a DataFrame, use</p>

<pre><code>source.groupby(['Country','City'])['Short name'].agg(pd.Series.mode).to_frame()

                         Short name
Country City                       
Russia  Sankt-Petersburg        Spb
USA     New-York                 NY
</code></pre>

<p>The useful thing about <code>Series.mode</code> is that it always returns a Series, making it very compatible with <code>agg</code> and <code>apply</code>, especially when reconstructing the groupby output. It is also faster.</p>

<pre><code># Accepted answer.
%timeit source.groupby(['Country','City']).agg(lambda x:x.value_counts().index[0])
# Proposed in this post.
%timeit source.groupby(['Country','City'])['Short name'].agg(pd.Series.mode)

5.56 ms ± 343 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
2.76 ms ± 387 µs per loop (mean ± std. dev. of 7 runs, 100 loops each)
</code></pre>

<hr>

<p><code>Series.mode</code> also does a good job when there are <em>multiple</em> modes:</p>

<pre><code>source2 = source.append(
    pd.Series({'Country': 'USA', 'City': 'New-York', 'Short name': 'New'}),
    ignore_index=True)

# Now `source2` has two modes for the 
# (""USA"", ""New-York"") group, they are ""NY"" and ""New"".
source2

  Country              City Short name
0     USA          New-York         NY
1     USA          New-York        New
2  Russia  Sankt-Petersburg        Spb
3     USA          New-York         NY
4     USA          New-York        New
</code></pre>

<p></p>

<pre><code>source2.groupby(['Country','City'])['Short name'].agg(pd.Series.mode)

Country  City            
Russia   Sankt-Petersburg          Spb
USA      New-York            [NY, New]
Name: Short name, dtype: object
</code></pre>

<p>Or, if you want a separate row for each mode, you can use <a href=""https://pandas.pydata.org/pandas-docs/stable/generated/pandas.core.groupby.GroupBy.apply.html"" rel=""noreferrer""><code>GroupBy.apply</code></a>:</p>

<pre><code>source2.groupby(['Country','City'])['Short name'].apply(pd.Series.mode)

Country  City               
Russia   Sankt-Petersburg  0    Spb
USA      New-York          0     NY
                           1    New
Name: Short name, dtype: object
</code></pre>

<p>If you <strong>don't care</strong> which mode is returned as long as it's either one of them, then you will need a lambda that calls <code>mode</code> and extracts the first result.</p>

<pre><code>source2.groupby(['Country','City'])['Short name'].agg(
    lambda x: pd.Series.mode(x)[0])

Country  City            
Russia   Sankt-Petersburg    Spb
USA      New-York             NY
Name: Short name, dtype: object
</code></pre>

<hr>

<p>You can also use <a href=""https://docs.python.org/3.4/library/statistics.html#statistics.mode"" rel=""noreferrer""><code>statistics.mode</code></a> from python, but...</p>

<pre><code>source.groupby(['Country','City'])['Short name'].apply(statistics.mode)

Country  City            
Russia   Sankt-Petersburg    Spb
USA      New-York             NY
Name: Short name, dtype: object
</code></pre>

<p>...it does not work well when having to deal with multiple modes; a <code>StatisticsError</code> is raised. This is mentioned in the docs:</p>

<blockquote>
  <p>If data is empty, or if there is not exactly one most common value,
  StatisticsError is raised.</p>
</blockquote>

<p>But you can see for yourself...</p>

<pre><code>statistics.mode([1, 2])
# ---------------------------------------------------------------------------
# StatisticsError                           Traceback (most recent call last)
# ...
# StatisticsError: no unique mode; found 2 equally common values
</code></pre>
","4909087","","4909087","","2019-11-02 08:27:34","2019-11-02 08:27:34","","","","3","","","","4909087","195757","2015-05-17 14:31:31","cs95","2020-03-15 02:58:01","","At an ipython shell near you","<h2><a href=""https://meta.stackoverflow.com/questions/386324/the-stack-overflow-i-wish-to-build-and-participate-in-is-no-longer-supported"">The Stack Overflow I wish to build and participate in no longer exists.</a></h2>

<h1><a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">My pandas canonicals</a> ⬅ please critique!</h1>

<p>When asking a question here, please describe the problem you are trying to solve, rather than asking about the method you <em>think</em> is the solution to that problem. This is known as the <a href=""https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem"">XY problem</a> and can easily be averted if you ask the right questions. This will make it easy for us to understand what you're trying to do, and you may even receive better suggestions that you may never have considered yourself. </p>

<h3><strong>Rep = participation</strong></h3>

<h3><strong>Badges = quality</strong></h3>

<h3><strong><s>1 like = 1 prayer </s> 1 upvote = 1 thanks</strong></h3>

<p><a href=""https://stackoverflow.com/users/4909087/coldspeed""><img src=""https://stackoverflow.com/users/flair/4909087.png"" width=""208"" height=""58"" alt=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers"" title=""profile for coldspeed at Stack Overflow, Q&amp;A for professional and enthusiast programmers""></a></p>

<p><a href=""https://i.stack.imgur.com/YfCOa.gif"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/YfCOa.gif"" alt=""enter image description here""></a></p>

<p><a href=""https://stackoverflow.com/a/53915214/4909087"">Some people, when confronted with a problem, think ""I know, I'll use regular expressions."" Now they have two problems.</a></p>

<hr>

<h2>(Actively Maintained) Pandas Canonicals</h2>

<p>The full list is on <a href=""https://github.com/Coldsp33d/stackoverflow-pandas-canonicals"" rel=""nofollow noreferrer"">GitHub</a>.</p>

<ul>
<li><a href=""https://stackoverflow.com/q/53645882/pandas-merging-101"">Pandas Merging 101</a>: Everything you ever wanted to know about merging and more</li>
<li><a href=""https://stackoverflow.com/a/55557758"">How to iterate over a DataFrame.</a> Spoler alert: don't!</li>
<li><a href=""https://stackoverflow.com/a/54508052"">How to convert a DataFrame to NumPy array</a>: from 0.24, use <code>df.to_numpy()</code></li>
<li><a href=""https://stackoverflow.com/a/56746204/4909087"">The Right Way to create an empty DataFrame and fill it</a>: Use a list to grow your data, not a DataFrame</li>
<li><a href=""https://stackoverflow.com/a/59242208/4909087"">Don't use <code>inplace=True</code>!</a></li>
</ul>

<h2>Other Posts I'm Proud Of</h2>

<ul>
<li>Pandas Merging 101 (see above)</li>
<li><a href=""https://stackoverflow.com/a/50312321/4909087"">Best way to interleave two lists</a></li>
<li><a href=""https://stackoverflow.com/questions/47007680/strange-use-of-pythons-and-operator/47007761#47007761"">How do &quot;and&quot; and &quot;or&quot; act with non-boolean values?</a></li>
<li><a href=""https://stackoverflow.com/a/46333422/4909087"">So you think you know recursion?</a></li>
</ul>

<p>In addition to this, some of my <a href=""https://stackoverflow.com/search?tab=votes&amp;q=user%3a4909087%20perfplot"">answers that use <code>perfplot</code></a> are worth a read.</p>

<hr>

<h3>236th awardee of the <a href=""https://stackoverflow.com/help/badges/146/legendary"">Legendary</a> badge.</h3>

<p>Thanks, Stack Overflow! I love the shirt :-)</p>

<p><a href=""https://i.stack.imgur.com/7YKND.jpg"" rel=""nofollow noreferrer""><img src=""https://i.stack.imgur.com/7YKND.jpg"" alt=""enter image description here""></a></p>
","57988","9183","7537","https://i.stack.imgur.com/LmD3e.png?s=128&g=1","","6321039"
"54532586","2","","54531425","2019-02-05 10:40:59","","64","","<p>The IEEE-754 standard was deliberately designed so that subtracting two values produces zero if and only if the two values are equal, except that subtracting an infinity from itself produces NaN and/or an exception.</p>

<p>Unfortunately, C++ does not require conformance to IEEE-754, and many C++ implementations use some features of IEEE-754 but do not fully conform.</p>

<p>A not uncommon behavior is to “flush” subnormal results to zero. This is part of a hardware design to avoid the burden of handling subnormal results correctly. If this behavior is in effect, the subtraction of two very small but different numbers can yield zero. (The numbers would have to be near the bottom of the normal range, having some significand bits in the subnormal range.)</p>

<p>Sometimes systems with this behavior may offer a way of disabling it.</p>

<p>Another behavior to beware of is that C++ does not require floating-point operations to be carried out precisely as written. It allows “excess precision” to be used in intermediate operations and “contractions” of some expressions. For example, <code>a*b - c*d</code> may be computed by using one operation that multiplies <code>a</code> and <code>b</code> and then another that multiplies <code>c</code> and <code>d</code> and subtracts the result from the previously computed <code>a*b</code>. This latter operation acts as if <code>c*d</code> were computed with infinite precision rather than rounded to the nominal floating-point format. In this case, <code>a*b - c*d</code> may produce a non-zero result even though <code>a*b == c*d</code> evaluates to true.</p>

<p>Some C++ implementations offer ways to disable or limit such behavior.</p>
","298225","","298225","","2019-02-05 20:12:37","2019-02-05 20:12:37","","","","0","","","","298225","105617","2010-03-21 00:38:50","Eric Postpischil","2020-03-15 03:14:38","http://edp.org","","<p>Senior software engineer in Apple’s Vector and Numerics Group (retired).</p>
","9005","2153","3112","","","113187"
"56423071","2","","56422913","2019-06-03 07:46:17","","64","","<p>You can completely avoid a manual <code>memcpy</code> by calling the appropriate constructor:</p>

<pre><code>std::string receive_data(const Receiver&amp; receiver) {
    return {receiver.data(), receiver.size()};
}
</code></pre>

<p>That even handles <code>\0</code> in a string.</p>

<p>BTW, unless content is actually text, I would prefer <code>std::vector&lt;std::byte&gt;</code> (or equivalent).</p>
","2684539","","63550","","2019-06-06 12:16:24","2019-06-06 12:16:24","","","","10","","","","2684539","143641","2013-08-15 02:08:44","Jarod42","2020-03-13 22:46:28","https://bitbucket.org/jarod42/ccccc","France","<p>.</p>
","9631","1345","755","https://www.gravatar.com/avatar/?s=128&d=identicon&r=PG&f=1","","3176925"
"54540980","2","","54540928","2019-02-05 18:38:26","","64","","<p>Because <code>nvarchar</code> has higher <a href=""https://docs.microsoft.com/en-us/sql/t-sql/data-types/data-type-precedence-transact-sql?view=sql-server-2017"" rel=""noreferrer"">datatype precedence</a> than <code>varchar</code> so it needs to perform an implicit cast of the column to <code>nvarchar</code> and this prevents an index seek.</p>

<p>Under some collations it is able to still use a seek and just push the <code>cast</code> into a residual predicate against the rows matched by the seek (rather than needing to do this for every row in the entire table via a scan) but presumably you aren't using such a collation.</p>

<p>The effect of collation on this is illustrated below. When using the SQL collation you get a scan, for the Windows collation it calls the internal function <a href=""https://blogs.msdn.microsoft.com/arvindsh/2012/09/17/sql-collation-and-performance/"" rel=""noreferrer""><code>GetRangeThroughConvert</code></a> and is able to convert it into a seek.</p>

<pre><code>CREATE TABLE [dbo].[phone]
  (
     phone1 VARCHAR(500) COLLATE sql_latin1_general_cp1_ci_as CONSTRAINT uq1 UNIQUE,
     phone2 VARCHAR(500) COLLATE latin1_general_ci_as CONSTRAINT uq2 UNIQUE,
  );

SELECT phone1 FROM [dbo].[phone] WHERE phone1 = N'5554474477';
SELECT phone2 FROM [dbo].[phone] WHERE phone2 = N'5554474477';
</code></pre>

<p><a href=""https://i.stack.imgur.com/hpEU9.png"" rel=""noreferrer""><img src=""https://i.stack.imgur.com/hpEU9.png"" alt=""enter image description here""></a></p>

<p>The <code>SHOWPLAN_TEXT</code> is below</p>

<p><strong>Query 1</strong></p>

<pre><code>  |--Index Scan(OBJECT:([tempdb].[dbo].[phone].[uq1]),  WHERE:(CONVERT_IMPLICIT(nvarchar(500),[tempdb].[dbo].[phone].[phone1],0)=CONVERT_IMPLICIT(nvarchar(4000),[@1],0)))
</code></pre>

<p><strong>Query 2</strong></p>

<pre><code>  |--Nested Loops(Inner Join, OUTER REFERENCES:([Expr1005], [Expr1006], [Expr1004]))
       |--Compute Scalar(DEFINE:(([Expr1005],[Expr1006],[Expr1004])=GetRangeThroughConvert([@1],[@1],(62))))
       |    |--Constant Scan
       |--Index Seek(OBJECT:([tempdb].[dbo].[phone].[uq2]), SEEK:([tempdb].[dbo].[phone].[phone2] &gt; [Expr1005] AND [tempdb].[dbo].[phone].[phone2] &lt; [Expr1006]),  WHERE:(CONVERT_IMPLICIT(nvarchar(500),[tempdb].[dbo].[phone].[phone2],0)=[@1]) ORDERED FORWARD)
</code></pre>

<p>In the second case the compute scalar <a href=""https://www.sqlshack.com/query-trace-column-values/"" rel=""noreferrer"">emits the following values</a></p>

<pre><code>Expr1004 = 62
Expr1005 = '5554474477'
Expr1006 = '5554474478'
</code></pre>

<p>the seek predicate shown in the plan is on <code>phone2 &gt; Expr1005  and phone2 &lt; Expr1006</code> so on the face of it would exclude <code>'5554474477'</code> but the flag <code>62</code> means that this does match.</p>
","73226","","1626687","","2019-02-07 06:08:56","2019-02-07 06:08:56","","","","0","","","","73226","376219","2009-03-03 13:40:52","Martin Smith","2020-03-15 02:59:30","","London, United Kingdom","<p><a href=""http://stackexchange.com/users/27657"">
<img src=""https://stackexchange.com/users/flair/27657.png"" width=""208"" height=""58"" alt=""profile for Martin Smith on Stack Exchange, a network of free, community-driven Q&amp;A sites"" title=""profile for Martin Smith on Stack Exchange, a network of free, community-driven Q&amp;A sites"">
</a></p>
","32739","15819","5046","https://i.stack.imgur.com/Tdqly.png?s=128&g=1","","27657"